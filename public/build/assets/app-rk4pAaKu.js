function MY(b,S){return function(){return b.apply(S,arguments)}}const{toString:wJ}=Object.prototype,{getPrototypeOf:pq}=Object,pL=(b=>S=>{const k=wJ.call(S);return b[k]||(b[k]=k.slice(8,-1).toLowerCase())})(Object.create(null)),Qg=b=>(b=b.toLowerCase(),S=>pL(S)===b),bL=b=>S=>typeof S===b,{isArray:HT}=Array,KD=bL("undefined");function SJ(b){return b!==null&&!KD(b)&&b.constructor!==null&&!KD(b.constructor)&&Ud(b.constructor.isBuffer)&&b.constructor.isBuffer(b)}const PY=Qg("ArrayBuffer");function xJ(b){let S;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?S=ArrayBuffer.isView(b):S=b&&b.buffer&&PY(b.buffer),S}const _J=bL("string"),Ud=bL("function"),NY=bL("number"),vL=b=>b!==null&&typeof b=="object",EJ=b=>b===!0||b===!1,iL=b=>{if(pL(b)!=="object")return!1;const S=pq(b);return(S===null||S===Object.prototype||Object.getPrototypeOf(S)===null)&&!(Symbol.toStringTag in b)&&!(Symbol.iterator in b)},TJ=Qg("Date"),kJ=Qg("File"),OJ=Qg("Blob"),AJ=Qg("FileList"),RJ=b=>vL(b)&&Ud(b.pipe),DJ=b=>{let S;return b&&(typeof FormData=="function"&&b instanceof FormData||Ud(b.append)&&((S=pL(b))==="formdata"||S==="object"&&Ud(b.toString)&&b.toString()==="[object FormData]"))},MJ=Qg("URLSearchParams"),PJ=b=>b.trim?b.trim():b.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function XD(b,S,{allOwnKeys:k=!1}={}){if(b===null||typeof b>"u")return;let P,F;if(typeof b!="object"&&(b=[b]),HT(b))for(P=0,F=b.length;P<F;P++)S.call(null,b[P],P,b);else{const H=k?Object.getOwnPropertyNames(b):Object.keys(b),j=H.length;let J;for(P=0;P<j;P++)J=H[P],S.call(null,b[J],J,b)}}function BY(b,S){S=S.toLowerCase();const k=Object.keys(b);let P=k.length,F;for(;P-- >0;)if(F=k[P],S===F.toLowerCase())return F;return null}const $Y=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,IY=b=>!KD(b)&&b!==$Y;function qG(){const{caseless:b}=IY(this)&&this||{},S={},k=(P,F)=>{const H=b&&BY(S,F)||F;iL(S[H])&&iL(P)?S[H]=qG(S[H],P):iL(P)?S[H]=qG({},P):HT(P)?S[H]=P.slice():S[H]=P};for(let P=0,F=arguments.length;P<F;P++)arguments[P]&&XD(arguments[P],k);return S}const NJ=(b,S,k,{allOwnKeys:P}={})=>(XD(S,(F,H)=>{k&&Ud(F)?b[H]=MY(F,k):b[H]=F},{allOwnKeys:P}),b),BJ=b=>(b.charCodeAt(0)===65279&&(b=b.slice(1)),b),$J=(b,S,k,P)=>{b.prototype=Object.create(S.prototype,P),b.prototype.constructor=b,Object.defineProperty(b,"super",{value:S.prototype}),k&&Object.assign(b.prototype,k)},IJ=(b,S,k,P)=>{let F,H,j;const J={};if(S=S||{},b==null)return S;do{for(F=Object.getOwnPropertyNames(b),H=F.length;H-- >0;)j=F[H],(!P||P(j,b,S))&&!J[j]&&(S[j]=b[j],J[j]=!0);b=k!==!1&&pq(b)}while(b&&(!k||k(b,S))&&b!==Object.prototype);return S},FJ=(b,S,k)=>{b=String(b),(k===void 0||k>b.length)&&(k=b.length),k-=S.length;const P=b.indexOf(S,k);return P!==-1&&P===k},LJ=b=>{if(!b)return null;if(HT(b))return b;let S=b.length;if(!NY(S))return null;const k=new Array(S);for(;S-- >0;)k[S]=b[S];return k},HJ=(b=>S=>b&&S instanceof b)(typeof Uint8Array<"u"&&pq(Uint8Array)),VJ=(b,S)=>{const P=(b&&b[Symbol.iterator]).call(b);let F;for(;(F=P.next())&&!F.done;){const H=F.value;S.call(b,H[0],H[1])}},zJ=(b,S)=>{let k;const P=[];for(;(k=b.exec(S))!==null;)P.push(k);return P},UJ=Qg("HTMLFormElement"),WJ=b=>b.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(k,P,F){return P.toUpperCase()+F}),cY=(({hasOwnProperty:b})=>(S,k)=>b.call(S,k))(Object.prototype),ZJ=Qg("RegExp"),FY=(b,S)=>{const k=Object.getOwnPropertyDescriptors(b),P={};XD(k,(F,H)=>{let j;(j=S(F,H,b))!==!1&&(P[H]=j||F)}),Object.defineProperties(b,P)},jJ=b=>{FY(b,(S,k)=>{if(Ud(b)&&["arguments","caller","callee"].indexOf(k)!==-1)return!1;const P=b[k];if(Ud(P)){if(S.enumerable=!1,"writable"in S){S.writable=!1;return}S.set||(S.set=()=>{throw Error("Can not rewrite read-only method '"+k+"'")})}})},GJ=(b,S)=>{const k={},P=F=>{F.forEach(H=>{k[H]=!0})};return HT(b)?P(b):P(String(b).split(S)),k},qJ=()=>{},KJ=(b,S)=>(b=+b,Number.isFinite(b)?b:S),LG="abcdefghijklmnopqrstuvwxyz",iY="0123456789",LY={DIGIT:iY,ALPHA:LG,ALPHA_DIGIT:LG+LG.toUpperCase()+iY},YJ=(b=16,S=LY.ALPHA_DIGIT)=>{let k="";const{length:P}=S;for(;b--;)k+=S[Math.random()*P|0];return k};function XJ(b){return!!(b&&Ud(b.append)&&b[Symbol.toStringTag]==="FormData"&&b[Symbol.iterator])}const JJ=b=>{const S=new Array(10),k=(P,F)=>{if(vL(P)){if(S.indexOf(P)>=0)return;if(!("toJSON"in P)){S[F]=P;const H=HT(P)?[]:{};return XD(P,(j,J)=>{const ye=k(j,F+1);!KD(ye)&&(H[J]=ye)}),S[F]=void 0,H}}return P};return k(b,0)},QJ=Qg("AsyncFunction"),eQ=b=>b&&(vL(b)||Ud(b))&&Ud(b.then)&&Ud(b.catch),at={isArray:HT,isArrayBuffer:PY,isBuffer:SJ,isFormData:DJ,isArrayBufferView:xJ,isString:_J,isNumber:NY,isBoolean:EJ,isObject:vL,isPlainObject:iL,isUndefined:KD,isDate:TJ,isFile:kJ,isBlob:OJ,isRegExp:ZJ,isFunction:Ud,isStream:RJ,isURLSearchParams:MJ,isTypedArray:HJ,isFileList:AJ,forEach:XD,merge:qG,extend:NJ,trim:PJ,stripBOM:BJ,inherits:$J,toFlatObject:IJ,kindOf:pL,kindOfTest:Qg,endsWith:FJ,toArray:LJ,forEachEntry:VJ,matchAll:zJ,isHTMLForm:UJ,hasOwnProperty:cY,hasOwnProp:cY,reduceDescriptors:FY,freezeMethods:jJ,toObjectSet:GJ,toCamelCase:WJ,noop:qJ,toFiniteNumber:KJ,findKey:BY,global:$Y,isContextDefined:IY,ALPHABET:LY,generateString:YJ,isSpecCompliantForm:XJ,toJSONObject:JJ,isAsyncFn:QJ,isThenable:eQ};function Ro(b,S,k,P,F){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=b,this.name="AxiosError",S&&(this.code=S),k&&(this.config=k),P&&(this.request=P),F&&(this.response=F)}at.inherits(Ro,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:at.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const HY=Ro.prototype,VY={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(b=>{VY[b]={value:b}});Object.defineProperties(Ro,VY);Object.defineProperty(HY,"isAxiosError",{value:!0});Ro.from=(b,S,k,P,F,H)=>{const j=Object.create(HY);return at.toFlatObject(b,j,function(ye){return ye!==Error.prototype},J=>J!=="isAxiosError"),Ro.call(j,b.message,S,k,P,F),j.cause=b,j.name=b.name,H&&Object.assign(j,H),j};const tQ=null;function KG(b){return at.isPlainObject(b)||at.isArray(b)}function zY(b){return at.endsWith(b,"[]")?b.slice(0,-2):b}function lY(b,S,k){return b?b.concat(S).map(function(F,H){return F=zY(F),!k&&H?"["+F+"]":F}).join(k?".":""):S}function nQ(b){return at.isArray(b)&&!b.some(KG)}const oQ=at.toFlatObject(at,{},null,function(S){return/^is[A-Z]/.test(S)});function yL(b,S,k){if(!at.isObject(b))throw new TypeError("target must be an object");S=S||new FormData,k=at.toFlatObject(k,{metaTokens:!0,dots:!1,indexes:!1},!1,function(Rt,Ne){return!at.isUndefined(Ne[Rt])});const P=k.metaTokens,F=k.visitor||qe,H=k.dots,j=k.indexes,ye=(k.Blob||typeof Blob<"u"&&Blob)&&at.isSpecCompliantForm(S);if(!at.isFunction(F))throw new TypeError("visitor must be a function");function Qe(Zt){if(Zt===null)return"";if(at.isDate(Zt))return Zt.toISOString();if(!ye&&at.isBlob(Zt))throw new Ro("Blob is not supported. Use a Buffer instead.");return at.isArrayBuffer(Zt)||at.isTypedArray(Zt)?ye&&typeof Blob=="function"?new Blob([Zt]):Buffer.from(Zt):Zt}function qe(Zt,Rt,Ne){let fn=Zt;if(Zt&&!Ne&&typeof Zt=="object"){if(at.endsWith(Rt,"{}"))Rt=P?Rt:Rt.slice(0,-2),Zt=JSON.stringify(Zt);else if(at.isArray(Zt)&&nQ(Zt)||(at.isFileList(Zt)||at.endsWith(Rt,"[]"))&&(fn=at.toArray(Zt)))return Rt=zY(Rt),fn.forEach(function(ee,sn){!(at.isUndefined(ee)||ee===null)&&S.append(j===!0?lY([Rt],sn,H):j===null?Rt:Rt+"[]",Qe(ee))}),!1}return KG(Zt)?!0:(S.append(lY(Ne,Rt,H),Qe(Zt)),!1)}const Ge=[],en=Object.assign(oQ,{defaultVisitor:qe,convertValue:Qe,isVisitable:KG});function xn(Zt,Rt){if(!at.isUndefined(Zt)){if(Ge.indexOf(Zt)!==-1)throw Error("Circular reference detected in "+Rt.join("."));Ge.push(Zt),at.forEach(Zt,function(fn,Gn){(!(at.isUndefined(fn)||fn===null)&&F.call(S,fn,at.isString(Gn)?Gn.trim():Gn,Rt,en))===!0&&xn(fn,Rt?Rt.concat(Gn):[Gn])}),Ge.pop()}}if(!at.isObject(b))throw new TypeError("data must be an object");return xn(b),S}function uY(b){const S={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(b).replace(/[!'()~]|%20|%00/g,function(P){return S[P]})}function bq(b,S){this._pairs=[],b&&yL(b,this,S)}const UY=bq.prototype;UY.append=function(S,k){this._pairs.push([S,k])};UY.toString=function(S){const k=S?function(P){return S.call(this,P,uY)}:uY;return this._pairs.map(function(F){return k(F[0])+"="+k(F[1])},"").join("&")};function sQ(b){return encodeURIComponent(b).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function WY(b,S,k){if(!S)return b;const P=k&&k.encode||sQ,F=k&&k.serialize;let H;if(F?H=F(S,k):H=at.isURLSearchParams(S)?S.toString():new bq(S,k).toString(P),H){const j=b.indexOf("#");j!==-1&&(b=b.slice(0,j)),b+=(b.indexOf("?")===-1?"?":"&")+H}return b}class dY{constructor(){this.handlers=[]}use(S,k,P){return this.handlers.push({fulfilled:S,rejected:k,synchronous:P?P.synchronous:!1,runWhen:P?P.runWhen:null}),this.handlers.length-1}eject(S){this.handlers[S]&&(this.handlers[S]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(S){at.forEach(this.handlers,function(P){P!==null&&S(P)})}}const ZY={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},rQ=typeof URLSearchParams<"u"?URLSearchParams:bq,aQ=typeof FormData<"u"?FormData:null,cQ=typeof Blob<"u"?Blob:null,iQ={isBrowser:!0,classes:{URLSearchParams:rQ,FormData:aQ,Blob:cQ},protocols:["http","https","file","blob","url","data"]},jY=typeof window<"u"&&typeof document<"u",lQ=(b=>jY&&["ReactNative","NativeScript","NS"].indexOf(b)<0)(typeof navigator<"u"&&navigator.product),uQ=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",dQ=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:jY,hasStandardBrowserEnv:lQ,hasStandardBrowserWebWorkerEnv:uQ},Symbol.toStringTag,{value:"Module"})),Jg={...dQ,...iQ};function fQ(b,S){return yL(b,new Jg.classes.URLSearchParams,Object.assign({visitor:function(k,P,F,H){return Jg.isNode&&at.isBuffer(k)?(this.append(P,k.toString("base64")),!1):H.defaultVisitor.apply(this,arguments)}},S))}function mQ(b){return at.matchAll(/\w+|\[(\w*)]/g,b).map(S=>S[0]==="[]"?"":S[1]||S[0])}function gQ(b){const S={},k=Object.keys(b);let P;const F=k.length;let H;for(P=0;P<F;P++)H=k[P],S[H]=b[H];return S}function GY(b){function S(k,P,F,H){let j=k[H++];if(j==="__proto__")return!0;const J=Number.isFinite(+j),ye=H>=k.length;return j=!j&&at.isArray(F)?F.length:j,ye?(at.hasOwnProp(F,j)?F[j]=[F[j],P]:F[j]=P,!J):((!F[j]||!at.isObject(F[j]))&&(F[j]=[]),S(k,P,F[j],H)&&at.isArray(F[j])&&(F[j]=gQ(F[j])),!J)}if(at.isFormData(b)&&at.isFunction(b.entries)){const k={};return at.forEachEntry(b,(P,F)=>{S(mQ(P),F,k,0)}),k}return null}function hQ(b,S,k){if(at.isString(b))try{return(S||JSON.parse)(b),at.trim(b)}catch(P){if(P.name!=="SyntaxError")throw P}return(k||JSON.stringify)(b)}const JD={transitional:ZY,adapter:["xhr","http"],transformRequest:[function(S,k){const P=k.getContentType()||"",F=P.indexOf("application/json")>-1,H=at.isObject(S);if(H&&at.isHTMLForm(S)&&(S=new FormData(S)),at.isFormData(S))return F?JSON.stringify(GY(S)):S;if(at.isArrayBuffer(S)||at.isBuffer(S)||at.isStream(S)||at.isFile(S)||at.isBlob(S))return S;if(at.isArrayBufferView(S))return S.buffer;if(at.isURLSearchParams(S))return k.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),S.toString();let J;if(H){if(P.indexOf("application/x-www-form-urlencoded")>-1)return fQ(S,this.formSerializer).toString();if((J=at.isFileList(S))||P.indexOf("multipart/form-data")>-1){const ye=this.env&&this.env.FormData;return yL(J?{"files[]":S}:S,ye&&new ye,this.formSerializer)}}return H||F?(k.setContentType("application/json",!1),hQ(S)):S}],transformResponse:[function(S){const k=this.transitional||JD.transitional,P=k&&k.forcedJSONParsing,F=this.responseType==="json";if(S&&at.isString(S)&&(P&&!this.responseType||F)){const j=!(k&&k.silentJSONParsing)&&F;try{return JSON.parse(S)}catch(J){if(j)throw J.name==="SyntaxError"?Ro.from(J,Ro.ERR_BAD_RESPONSE,this,null,this.response):J}}return S}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Jg.classes.FormData,Blob:Jg.classes.Blob},validateStatus:function(S){return S>=200&&S<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};at.forEach(["delete","get","head","post","put","patch"],b=>{JD.headers[b]={}});const pQ=at.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),bQ=b=>{const S={};let k,P,F;return b&&b.split(`
`).forEach(function(j){F=j.indexOf(":"),k=j.substring(0,F).trim().toLowerCase(),P=j.substring(F+1).trim(),!(!k||S[k]&&pQ[k])&&(k==="set-cookie"?S[k]?S[k].push(P):S[k]=[P]:S[k]=S[k]?S[k]+", "+P:P)}),S},fY=Symbol("internals");function zD(b){return b&&String(b).trim().toLowerCase()}function lL(b){return b===!1||b==null?b:at.isArray(b)?b.map(lL):String(b)}function vQ(b){const S=Object.create(null),k=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let P;for(;P=k.exec(b);)S[P[1]]=P[2];return S}const yQ=b=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(b.trim());function HG(b,S,k,P,F){if(at.isFunction(P))return P.call(this,S,k);if(F&&(S=k),!!at.isString(S)){if(at.isString(P))return S.indexOf(P)!==-1;if(at.isRegExp(P))return P.test(S)}}function CQ(b){return b.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(S,k,P)=>k.toUpperCase()+P)}function wQ(b,S){const k=at.toCamelCase(" "+S);["get","set","has"].forEach(P=>{Object.defineProperty(b,P+k,{value:function(F,H,j){return this[P].call(this,S,F,H,j)},configurable:!0})})}class Wd{constructor(S){S&&this.set(S)}set(S,k,P){const F=this;function H(J,ye,Qe){const qe=zD(ye);if(!qe)throw new Error("header name must be a non-empty string");const Ge=at.findKey(F,qe);(!Ge||F[Ge]===void 0||Qe===!0||Qe===void 0&&F[Ge]!==!1)&&(F[Ge||ye]=lL(J))}const j=(J,ye)=>at.forEach(J,(Qe,qe)=>H(Qe,qe,ye));return at.isPlainObject(S)||S instanceof this.constructor?j(S,k):at.isString(S)&&(S=S.trim())&&!yQ(S)?j(bQ(S),k):S!=null&&H(k,S,P),this}get(S,k){if(S=zD(S),S){const P=at.findKey(this,S);if(P){const F=this[P];if(!k)return F;if(k===!0)return vQ(F);if(at.isFunction(k))return k.call(this,F,P);if(at.isRegExp(k))return k.exec(F);throw new TypeError("parser must be boolean|regexp|function")}}}has(S,k){if(S=zD(S),S){const P=at.findKey(this,S);return!!(P&&this[P]!==void 0&&(!k||HG(this,this[P],P,k)))}return!1}delete(S,k){const P=this;let F=!1;function H(j){if(j=zD(j),j){const J=at.findKey(P,j);J&&(!k||HG(P,P[J],J,k))&&(delete P[J],F=!0)}}return at.isArray(S)?S.forEach(H):H(S),F}clear(S){const k=Object.keys(this);let P=k.length,F=!1;for(;P--;){const H=k[P];(!S||HG(this,this[H],H,S,!0))&&(delete this[H],F=!0)}return F}normalize(S){const k=this,P={};return at.forEach(this,(F,H)=>{const j=at.findKey(P,H);if(j){k[j]=lL(F),delete k[H];return}const J=S?CQ(H):String(H).trim();J!==H&&delete k[H],k[J]=lL(F),P[J]=!0}),this}concat(...S){return this.constructor.concat(this,...S)}toJSON(S){const k=Object.create(null);return at.forEach(this,(P,F)=>{P!=null&&P!==!1&&(k[F]=S&&at.isArray(P)?P.join(", "):P)}),k}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([S,k])=>S+": "+k).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(S){return S instanceof this?S:new this(S)}static concat(S,...k){const P=new this(S);return k.forEach(F=>P.set(F)),P}static accessor(S){const P=(this[fY]=this[fY]={accessors:{}}).accessors,F=this.prototype;function H(j){const J=zD(j);P[J]||(wQ(F,j),P[J]=!0)}return at.isArray(S)?S.forEach(H):H(S),this}}Wd.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);at.reduceDescriptors(Wd.prototype,({value:b},S)=>{let k=S[0].toUpperCase()+S.slice(1);return{get:()=>b,set(P){this[k]=P}}});at.freezeMethods(Wd);function VG(b,S){const k=this||JD,P=S||k,F=Wd.from(P.headers);let H=P.data;return at.forEach(b,function(J){H=J.call(k,H,F.normalize(),S?S.status:void 0)}),F.normalize(),H}function qY(b){return!!(b&&b.__CANCEL__)}function QD(b,S,k){Ro.call(this,b??"canceled",Ro.ERR_CANCELED,S,k),this.name="CanceledError"}at.inherits(QD,Ro,{__CANCEL__:!0});function SQ(b,S,k){const P=k.config.validateStatus;!k.status||!P||P(k.status)?b(k):S(new Ro("Request failed with status code "+k.status,[Ro.ERR_BAD_REQUEST,Ro.ERR_BAD_RESPONSE][Math.floor(k.status/100)-4],k.config,k.request,k))}const xQ=Jg.hasStandardBrowserEnv?{write(b,S,k,P,F,H){const j=[b+"="+encodeURIComponent(S)];at.isNumber(k)&&j.push("expires="+new Date(k).toGMTString()),at.isString(P)&&j.push("path="+P),at.isString(F)&&j.push("domain="+F),H===!0&&j.push("secure"),document.cookie=j.join("; ")},read(b){const S=document.cookie.match(new RegExp("(^|;\\s*)("+b+")=([^;]*)"));return S?decodeURIComponent(S[3]):null},remove(b){this.write(b,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function _Q(b){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(b)}function EQ(b,S){return S?b.replace(/\/?\/$/,"")+"/"+S.replace(/^\/+/,""):b}function KY(b,S){return b&&!_Q(S)?EQ(b,S):S}const TQ=Jg.hasStandardBrowserEnv?function(){const S=/(msie|trident)/i.test(navigator.userAgent),k=document.createElement("a");let P;function F(H){let j=H;return S&&(k.setAttribute("href",j),j=k.href),k.setAttribute("href",j),{href:k.href,protocol:k.protocol?k.protocol.replace(/:$/,""):"",host:k.host,search:k.search?k.search.replace(/^\?/,""):"",hash:k.hash?k.hash.replace(/^#/,""):"",hostname:k.hostname,port:k.port,pathname:k.pathname.charAt(0)==="/"?k.pathname:"/"+k.pathname}}return P=F(window.location.href),function(j){const J=at.isString(j)?F(j):j;return J.protocol===P.protocol&&J.host===P.host}}():function(){return function(){return!0}}();function kQ(b){const S=/^([-+\w]{1,25})(:?\/\/|:)/.exec(b);return S&&S[1]||""}function OQ(b,S){b=b||10;const k=new Array(b),P=new Array(b);let F=0,H=0,j;return S=S!==void 0?S:1e3,function(ye){const Qe=Date.now(),qe=P[H];j||(j=Qe),k[F]=ye,P[F]=Qe;let Ge=H,en=0;for(;Ge!==F;)en+=k[Ge++],Ge=Ge%b;if(F=(F+1)%b,F===H&&(H=(H+1)%b),Qe-j<S)return;const xn=qe&&Qe-qe;return xn?Math.round(en*1e3/xn):void 0}}function mY(b,S){let k=0;const P=OQ(50,250);return F=>{const H=F.loaded,j=F.lengthComputable?F.total:void 0,J=H-k,ye=P(J),Qe=H<=j;k=H;const qe={loaded:H,total:j,progress:j?H/j:void 0,bytes:J,rate:ye||void 0,estimated:ye&&j&&Qe?(j-H)/ye:void 0,event:F};qe[S?"download":"upload"]=!0,b(qe)}}const AQ=typeof XMLHttpRequest<"u",RQ=AQ&&function(b){return new Promise(function(k,P){let F=b.data;const H=Wd.from(b.headers).normalize();let{responseType:j,withXSRFToken:J}=b,ye;function Qe(){b.cancelToken&&b.cancelToken.unsubscribe(ye),b.signal&&b.signal.removeEventListener("abort",ye)}let qe;if(at.isFormData(F)){if(Jg.hasStandardBrowserEnv||Jg.hasStandardBrowserWebWorkerEnv)H.setContentType(!1);else if((qe=H.getContentType())!==!1){const[Rt,...Ne]=qe?qe.split(";").map(fn=>fn.trim()).filter(Boolean):[];H.setContentType([Rt||"multipart/form-data",...Ne].join("; "))}}let Ge=new XMLHttpRequest;if(b.auth){const Rt=b.auth.username||"",Ne=b.auth.password?unescape(encodeURIComponent(b.auth.password)):"";H.set("Authorization","Basic "+btoa(Rt+":"+Ne))}const en=KY(b.baseURL,b.url);Ge.open(b.method.toUpperCase(),WY(en,b.params,b.paramsSerializer),!0),Ge.timeout=b.timeout;function xn(){if(!Ge)return;const Rt=Wd.from("getAllResponseHeaders"in Ge&&Ge.getAllResponseHeaders()),fn={data:!j||j==="text"||j==="json"?Ge.responseText:Ge.response,status:Ge.status,statusText:Ge.statusText,headers:Rt,config:b,request:Ge};SQ(function(ee){k(ee),Qe()},function(ee){P(ee),Qe()},fn),Ge=null}if("onloadend"in Ge?Ge.onloadend=xn:Ge.onreadystatechange=function(){!Ge||Ge.readyState!==4||Ge.status===0&&!(Ge.responseURL&&Ge.responseURL.indexOf("file:")===0)||setTimeout(xn)},Ge.onabort=function(){Ge&&(P(new Ro("Request aborted",Ro.ECONNABORTED,b,Ge)),Ge=null)},Ge.onerror=function(){P(new Ro("Network Error",Ro.ERR_NETWORK,b,Ge)),Ge=null},Ge.ontimeout=function(){let Ne=b.timeout?"timeout of "+b.timeout+"ms exceeded":"timeout exceeded";const fn=b.transitional||ZY;b.timeoutErrorMessage&&(Ne=b.timeoutErrorMessage),P(new Ro(Ne,fn.clarifyTimeoutError?Ro.ETIMEDOUT:Ro.ECONNABORTED,b,Ge)),Ge=null},Jg.hasStandardBrowserEnv&&(J&&at.isFunction(J)&&(J=J(b)),J||J!==!1&&TQ(en))){const Rt=b.xsrfHeaderName&&b.xsrfCookieName&&xQ.read(b.xsrfCookieName);Rt&&H.set(b.xsrfHeaderName,Rt)}F===void 0&&H.setContentType(null),"setRequestHeader"in Ge&&at.forEach(H.toJSON(),function(Ne,fn){Ge.setRequestHeader(fn,Ne)}),at.isUndefined(b.withCredentials)||(Ge.withCredentials=!!b.withCredentials),j&&j!=="json"&&(Ge.responseType=b.responseType),typeof b.onDownloadProgress=="function"&&Ge.addEventListener("progress",mY(b.onDownloadProgress,!0)),typeof b.onUploadProgress=="function"&&Ge.upload&&Ge.upload.addEventListener("progress",mY(b.onUploadProgress)),(b.cancelToken||b.signal)&&(ye=Rt=>{Ge&&(P(!Rt||Rt.type?new QD(null,b,Ge):Rt),Ge.abort(),Ge=null)},b.cancelToken&&b.cancelToken.subscribe(ye),b.signal&&(b.signal.aborted?ye():b.signal.addEventListener("abort",ye)));const Zt=kQ(en);if(Zt&&Jg.protocols.indexOf(Zt)===-1){P(new Ro("Unsupported protocol "+Zt+":",Ro.ERR_BAD_REQUEST,b));return}Ge.send(F||null)})},YG={http:tQ,xhr:RQ};at.forEach(YG,(b,S)=>{if(b){try{Object.defineProperty(b,"name",{value:S})}catch{}Object.defineProperty(b,"adapterName",{value:S})}});const gY=b=>`- ${b}`,DQ=b=>at.isFunction(b)||b===null||b===!1,YY={getAdapter:b=>{b=at.isArray(b)?b:[b];const{length:S}=b;let k,P;const F={};for(let H=0;H<S;H++){k=b[H];let j;if(P=k,!DQ(k)&&(P=YG[(j=String(k)).toLowerCase()],P===void 0))throw new Ro(`Unknown adapter '${j}'`);if(P)break;F[j||"#"+H]=P}if(!P){const H=Object.entries(F).map(([J,ye])=>`adapter ${J} `+(ye===!1?"is not supported by the environment":"is not available in the build"));let j=S?H.length>1?`since :
`+H.map(gY).join(`
`):" "+gY(H[0]):"as no adapter specified";throw new Ro("There is no suitable adapter to dispatch the request "+j,"ERR_NOT_SUPPORT")}return P},adapters:YG};function zG(b){if(b.cancelToken&&b.cancelToken.throwIfRequested(),b.signal&&b.signal.aborted)throw new QD(null,b)}function hY(b){return zG(b),b.headers=Wd.from(b.headers),b.data=VG.call(b,b.transformRequest),["post","put","patch"].indexOf(b.method)!==-1&&b.headers.setContentType("application/x-www-form-urlencoded",!1),YY.getAdapter(b.adapter||JD.adapter)(b).then(function(P){return zG(b),P.data=VG.call(b,b.transformResponse,P),P.headers=Wd.from(P.headers),P},function(P){return qY(P)||(zG(b),P&&P.response&&(P.response.data=VG.call(b,b.transformResponse,P.response),P.response.headers=Wd.from(P.response.headers))),Promise.reject(P)})}const pY=b=>b instanceof Wd?{...b}:b;function IT(b,S){S=S||{};const k={};function P(Qe,qe,Ge){return at.isPlainObject(Qe)&&at.isPlainObject(qe)?at.merge.call({caseless:Ge},Qe,qe):at.isPlainObject(qe)?at.merge({},qe):at.isArray(qe)?qe.slice():qe}function F(Qe,qe,Ge){if(at.isUndefined(qe)){if(!at.isUndefined(Qe))return P(void 0,Qe,Ge)}else return P(Qe,qe,Ge)}function H(Qe,qe){if(!at.isUndefined(qe))return P(void 0,qe)}function j(Qe,qe){if(at.isUndefined(qe)){if(!at.isUndefined(Qe))return P(void 0,Qe)}else return P(void 0,qe)}function J(Qe,qe,Ge){if(Ge in S)return P(Qe,qe);if(Ge in b)return P(void 0,Qe)}const ye={url:H,method:H,data:H,baseURL:j,transformRequest:j,transformResponse:j,paramsSerializer:j,timeout:j,timeoutMessage:j,withCredentials:j,withXSRFToken:j,adapter:j,responseType:j,xsrfCookieName:j,xsrfHeaderName:j,onUploadProgress:j,onDownloadProgress:j,decompress:j,maxContentLength:j,maxBodyLength:j,beforeRedirect:j,transport:j,httpAgent:j,httpsAgent:j,cancelToken:j,socketPath:j,responseEncoding:j,validateStatus:J,headers:(Qe,qe)=>F(pY(Qe),pY(qe),!0)};return at.forEach(Object.keys(Object.assign({},b,S)),function(qe){const Ge=ye[qe]||F,en=Ge(b[qe],S[qe],qe);at.isUndefined(en)&&Ge!==J||(k[qe]=en)}),k}const XY="1.6.8",vq={};["object","boolean","number","function","string","symbol"].forEach((b,S)=>{vq[b]=function(P){return typeof P===b||"a"+(S<1?"n ":" ")+b}});const bY={};vq.transitional=function(S,k,P){function F(H,j){return"[Axios v"+XY+"] Transitional option '"+H+"'"+j+(P?". "+P:"")}return(H,j,J)=>{if(S===!1)throw new Ro(F(j," has been removed"+(k?" in "+k:"")),Ro.ERR_DEPRECATED);return k&&!bY[j]&&(bY[j]=!0,console.warn(F(j," has been deprecated since v"+k+" and will be removed in the near future"))),S?S(H,j,J):!0}};function MQ(b,S,k){if(typeof b!="object")throw new Ro("options must be an object",Ro.ERR_BAD_OPTION_VALUE);const P=Object.keys(b);let F=P.length;for(;F-- >0;){const H=P[F],j=S[H];if(j){const J=b[H],ye=J===void 0||j(J,H,b);if(ye!==!0)throw new Ro("option "+H+" must be "+ye,Ro.ERR_BAD_OPTION_VALUE);continue}if(k!==!0)throw new Ro("Unknown option "+H,Ro.ERR_BAD_OPTION)}}const XG={assertOptions:MQ,validators:vq},K0=XG.validators;class dw{constructor(S){this.defaults=S,this.interceptors={request:new dY,response:new dY}}async request(S,k){try{return await this._request(S,k)}catch(P){if(P instanceof Error){let F;Error.captureStackTrace?Error.captureStackTrace(F={}):F=new Error;const H=F.stack?F.stack.replace(/^.+\n/,""):"";P.stack?H&&!String(P.stack).endsWith(H.replace(/^.+\n.+\n/,""))&&(P.stack+=`
`+H):P.stack=H}throw P}}_request(S,k){typeof S=="string"?(k=k||{},k.url=S):k=S||{},k=IT(this.defaults,k);const{transitional:P,paramsSerializer:F,headers:H}=k;P!==void 0&&XG.assertOptions(P,{silentJSONParsing:K0.transitional(K0.boolean),forcedJSONParsing:K0.transitional(K0.boolean),clarifyTimeoutError:K0.transitional(K0.boolean)},!1),F!=null&&(at.isFunction(F)?k.paramsSerializer={serialize:F}:XG.assertOptions(F,{encode:K0.function,serialize:K0.function},!0)),k.method=(k.method||this.defaults.method||"get").toLowerCase();let j=H&&at.merge(H.common,H[k.method]);H&&at.forEach(["delete","get","head","post","put","patch","common"],Zt=>{delete H[Zt]}),k.headers=Wd.concat(j,H);const J=[];let ye=!0;this.interceptors.request.forEach(function(Rt){typeof Rt.runWhen=="function"&&Rt.runWhen(k)===!1||(ye=ye&&Rt.synchronous,J.unshift(Rt.fulfilled,Rt.rejected))});const Qe=[];this.interceptors.response.forEach(function(Rt){Qe.push(Rt.fulfilled,Rt.rejected)});let qe,Ge=0,en;if(!ye){const Zt=[hY.bind(this),void 0];for(Zt.unshift.apply(Zt,J),Zt.push.apply(Zt,Qe),en=Zt.length,qe=Promise.resolve(k);Ge<en;)qe=qe.then(Zt[Ge++],Zt[Ge++]);return qe}en=J.length;let xn=k;for(Ge=0;Ge<en;){const Zt=J[Ge++],Rt=J[Ge++];try{xn=Zt(xn)}catch(Ne){Rt.call(this,Ne);break}}try{qe=hY.call(this,xn)}catch(Zt){return Promise.reject(Zt)}for(Ge=0,en=Qe.length;Ge<en;)qe=qe.then(Qe[Ge++],Qe[Ge++]);return qe}getUri(S){S=IT(this.defaults,S);const k=KY(S.baseURL,S.url);return WY(k,S.params,S.paramsSerializer)}}at.forEach(["delete","get","head","options"],function(S){dw.prototype[S]=function(k,P){return this.request(IT(P||{},{method:S,url:k,data:(P||{}).data}))}});at.forEach(["post","put","patch"],function(S){function k(P){return function(H,j,J){return this.request(IT(J||{},{method:S,headers:P?{"Content-Type":"multipart/form-data"}:{},url:H,data:j}))}}dw.prototype[S]=k(),dw.prototype[S+"Form"]=k(!0)});class yq{constructor(S){if(typeof S!="function")throw new TypeError("executor must be a function.");let k;this.promise=new Promise(function(H){k=H});const P=this;this.promise.then(F=>{if(!P._listeners)return;let H=P._listeners.length;for(;H-- >0;)P._listeners[H](F);P._listeners=null}),this.promise.then=F=>{let H;const j=new Promise(J=>{P.subscribe(J),H=J}).then(F);return j.cancel=function(){P.unsubscribe(H)},j},S(function(H,j,J){P.reason||(P.reason=new QD(H,j,J),k(P.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(S){if(this.reason){S(this.reason);return}this._listeners?this._listeners.push(S):this._listeners=[S]}unsubscribe(S){if(!this._listeners)return;const k=this._listeners.indexOf(S);k!==-1&&this._listeners.splice(k,1)}static source(){let S;return{token:new yq(function(F){S=F}),cancel:S}}}function PQ(b){return function(k){return b.apply(null,k)}}function NQ(b){return at.isObject(b)&&b.isAxiosError===!0}const JG={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(JG).forEach(([b,S])=>{JG[S]=b});function JY(b){const S=new dw(b),k=MY(dw.prototype.request,S);return at.extend(k,dw.prototype,S,{allOwnKeys:!0}),at.extend(k,S,null,{allOwnKeys:!0}),k.create=function(F){return JY(IT(b,F))},k}const wa=JY(JD);wa.Axios=dw;wa.CanceledError=QD;wa.CancelToken=yq;wa.isCancel=qY;wa.VERSION=XY;wa.toFormData=yL;wa.AxiosError=Ro;wa.Cancel=wa.CanceledError;wa.all=function(S){return Promise.all(S)};wa.spread=PQ;wa.isAxiosError=NQ;wa.mergeConfig=IT;wa.AxiosHeaders=Wd;wa.formToJSON=b=>GY(at.isHTMLForm(b)?new FormData(b):b);wa.getAdapter=YY.getAdapter;wa.HttpStatusCode=JG;wa.default=wa;window.axios=wa;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";var BQ={exports:{}};(function(b){(function(){var S=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var n=typeof e;return n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},k=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},P=function(e,n){var o=Array.prototype.slice.call(e);return o.sort(n)},F=function(e,n){return H(function(o,r){return e.eq(n(o),n(r))})},H=function(e){return{eq:e}},j=H(function(e,n){return e===n}),J=j,ye=function(e){return H(function(n,o){if(n.length!==o.length)return!1;for(var r=n.length,c=0;c<r;c++)if(!e.eq(n[c],o[c]))return!1;return!0})},Qe=function(e,n){return F(ye(e),function(o){return P(o,n)})},qe=function(e){return H(function(n,o){var r=Object.keys(n),c=Object.keys(o);if(!Qe(J).eq(r,c))return!1;for(var u=r.length,m=0;m<u;m++){var v=r[m];if(!e.eq(n[v],o[v]))return!1}return!0})},Ge=H(function(e,n){if(e===n)return!0;var o=S(e),r=S(n);return o!==r?!1:k(o)?e===n:o==="array"?ye(Ge).eq(e,n):o==="object"?qe(Ge).eq(e,n):!1});const en=Object.getPrototypeOf,xn=(e,n,o)=>{var r;return o(e,n.prototype)?!0:((r=e.constructor)===null||r===void 0?void 0:r.name)===n.name},Zt=e=>{const n=typeof e;return e===null?"null":n==="object"&&Array.isArray(e)?"array":n==="object"&&xn(e,String,(o,r)=>r.isPrototypeOf(o))?"string":n},Rt=e=>n=>Zt(n)===e,Ne=e=>n=>typeof n===e,fn=e=>n=>e===n,Gn=(e,n)=>sn(e)&&xn(e,n,(o,r)=>en(o)===r),ee=Rt("string"),sn=Rt("object"),Hc=e=>Gn(e,Object),Tn=Rt("array"),ae=fn(null),bn=Ne("boolean"),fs=fn(void 0),_n=e=>e==null,Ae=e=>!_n(e),oe=Ne("function"),Za=Ne("number"),eo=(e,n)=>{if(Tn(e)){for(let o=0,r=e.length;o<r;++o)if(!n(e[o]))return!1;return!0}return!1},Bt=()=>{},A=(e,n)=>(...o)=>e(n.apply(null,o)),ns=(e,n)=>o=>e(n(o)),et=e=>()=>e,zo=e=>e,jt=(e,n)=>e===n;function Be(e,...n){return(...o)=>{const r=n.concat(o);return e.apply(null,r)}}const Uo=e=>n=>!e(n),ja=e=>()=>{throw new Error(e)},os=e=>e(),ia=e=>{e()},De=et(!1),dt=et(!0);class L{constructor(n,o){this.tag=n,this.value=o}static some(n){return new L(!0,n)}static none(){return L.singletonNone}fold(n,o){return this.tag?o(this.value):n()}isSome(){return this.tag}isNone(){return!this.tag}map(n){return this.tag?L.some(n(this.value)):L.none()}bind(n){return this.tag?n(this.value):L.none()}exists(n){return this.tag&&n(this.value)}forall(n){return!this.tag||n(this.value)}filter(n){return!this.tag||n(this.value)?this:L.none()}getOr(n){return this.tag?this.value:n}or(n){return this.tag?this:n}getOrThunk(n){return this.tag?this.value:n()}orThunk(n){return this.tag?this:n()}getOrDie(n){if(this.tag)return this.value;throw new Error(n??"Called getOrDie on None")}static from(n){return Ae(n)?L.some(n):L.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(n){this.tag&&n(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}L.singletonNone=new L(!1);const lm=Array.prototype.slice,fo=Array.prototype.indexOf,Ss=Array.prototype.push,bo=(e,n)=>fo.call(e,n),WT=(e,n)=>{const o=bo(e,n);return o===-1?L.none():L.some(o)},Gt=(e,n)=>bo(e,n)>-1,vo=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];if(n(c,o))return!0}return!1},Xt=(e,n)=>{const o=e.length,r=new Array(o);for(let c=0;c<o;c++){const u=e[c];r[c]=n(u,c)}return r},we=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];n(c,o)}},Ou=(e,n)=>{for(let o=e.length-1;o>=0;o--){const r=e[o];n(r,o)}},Rr=(e,n)=>{const o=[],r=[];for(let c=0,u=e.length;c<u;c++){const m=e[c];(n(m,c)?o:r).push(m)}return{pass:o,fail:r}},Mt=(e,n)=>{const o=[];for(let r=0,c=e.length;r<c;r++){const u=e[r];n(u,r)&&o.push(u)}return o},Zd=(e,n,o)=>(Ou(e,(r,c)=>{o=n(o,r,c)}),o),Wo=(e,n,o)=>(we(e,(r,c)=>{o=n(o,r,c)}),o),eh=(e,n,o)=>{for(let r=0,c=e.length;r<c;r++){const u=e[r];if(n(u,r))return L.some(u);if(o(u,r))break}return L.none()},ss=(e,n)=>eh(e,n,De),xa=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];if(n(c,o))return L.some(o)}return L.none()},n1=e=>{const n=[];for(let o=0,r=e.length;o<r;++o){if(!Tn(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);Ss.apply(n,e[o])}return n},vc=(e,n)=>n1(Xt(e,n)),ur=(e,n)=>{for(let o=0,r=e.length;o<r;++o){const c=e[o];if(n(c,o)!==!0)return!1}return!0},$o=e=>{const n=lm.call(e,0);return n.reverse(),n},o1=(e,n)=>Mt(e,o=>!Gt(n,o)),As=(e,n)=>{const o={};for(let r=0,c=e.length;r<c;r++){const u=e[r];o[String(u)]=n(u,r)}return o},Io=(e,n)=>{const o=lm.call(e,0);return o.sort(n),o},um=(e,n)=>n>=0&&n<e.length?L.some(e[n]):L.none(),Dr=e=>um(e,0),Ll=e=>um(e,e.length-1),_a=oe(Array.from)?Array.from:e=>lm.call(e),jd=(e,n)=>{for(let o=0;o<e.length;o++){const r=n(e[o],o);if(r.isSome())return r}return L.none()},th=(e,n)=>{const o=[],r=oe(n)?c=>vo(o,u=>n(u,c)):c=>Gt(o,c);for(let c=0,u=e.length;c<u;c++){const m=e[c];r(m)||o.push(m)}return o},Wr=Object.keys,tv=Object.hasOwnProperty,lt=(e,n)=>{const o=Wr(e);for(let r=0,c=o.length;r<c;r++){const u=o[r],m=e[u];n(m,u)}},Ln=(e,n)=>yc(e,(o,r)=>({k:r,v:n(o,r)})),yc=(e,n)=>{const o={};return lt(e,(r,c)=>{const u=n(r,c);o[u.k]=u.v}),o},Ga=e=>(n,o)=>{e[o]=n},s1=(e,n,o,r)=>{lt(e,(c,u)=>{(n(c,u)?o:r)(c,u)})},Gd=(e,n)=>{const o={},r={};return s1(e,n,Ga(o),Ga(r)),{t:o,f:r}},_o=(e,n)=>{const o={};return s1(e,n,Ga(o),Bt),o},Au=(e,n)=>{const o=[];return lt(e,(r,c)=>{o.push(n(r,c))}),o},dm=e=>Au(e,zo),mo=(e,n)=>Ft(e,n)?L.from(e[n]):L.none(),Ft=(e,n)=>tv.call(e,n),Ea=(e,n)=>Ft(e,n)&&e[n]!==void 0&&e[n]!==null,qd=(e,n,o=Ge)=>qe(o).eq(e,n),r1=e=>{const n={};return we(e,o=>{n[o]={}}),Wr(n)},nv=e=>e.length!==void 0,la=Array.isArray,Mr=e=>{if(la(e))return e;{const n=[];for(let o=0,r=e.length;o<r;o++)n[o]=e[o];return n}},xs=(e,n,o)=>{if(!e)return!1;if(o=o||e,nv(e)){for(let r=0,c=e.length;r<c;r++)if(n.call(o,e[r],r,e)===!1)return!1}else for(const r in e)if(Ft(e,r)&&n.call(o,e[r],r,e)===!1)return!1;return!0},nl=(e,n)=>{const o=[];return xs(e,(r,c)=>{o.push(n(r,c,e))}),o},a1=(e,n)=>{const o=[];return xs(e,(r,c)=>{(!n||n(r,c,e))&&o.push(r)}),o},Hl=(e,n)=>{if(e){for(let o=0,r=e.length;o<r;o++)if(e[o]===n)return o}return-1},qa=(e,n,o,r)=>{let c=fs(o)?e[0]:o;for(let u=0;u<e.length;u++)c=n.call(r,c,e[u],u);return c},Do=(e,n,o)=>{for(let r=0,c=e.length;r<c;r++)if(n.call(o,e[r],r,e))return r;return-1},Vc=e=>e[e.length-1],ol=e=>{let n=!1,o;return(...r)=>(n||(n=!0,o=e.apply(null,r)),o)},ZT=(e,n,o,r)=>{const c=e.isiOS()&&/ipad/i.test(o)===!0,u=e.isiOS()&&!c,m=e.isiOS()||e.isAndroid(),v=m||r("(pointer:coarse)"),C=c||!u&&m&&r("(min-device-width:768px)"),E=u||m&&!C,D=n.isSafari()&&e.isiOS()&&/safari/i.test(o)===!1,M=!E&&!C&&!D;return{isiPad:et(c),isiPhone:et(u),isTablet:et(C),isPhone:et(E),isTouch:et(v),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:et(D),isDesktop:et(M)}},jT=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o];if(r.test(n))return r}},Vl=(e,n)=>{const o=jT(e,n);if(!o)return{major:0,minor:0};const r=c=>Number(n.replace(o,"$"+c));return Ta(r(1),r(2))},kL=(e,n)=>{const o=String(n).toLowerCase();return e.length===0?le():Vl(e,o)},le=()=>Ta(0,0),Ta=(e,n)=>({major:e,minor:n}),fm={nu:Ta,detect:kL,unknown:le},bw=(e,n)=>jd(n.brands,o=>{const r=o.brand.toLowerCase();return ss(e,c=>{var u;return r===((u=c.brand)===null||u===void 0?void 0:u.toLowerCase())}).map(c=>({current:c.name,version:fm.nu(parseInt(o.version,10),0)}))}),ov=(e,n)=>{const o=String(n).toLowerCase();return ss(e,r=>r.search(o))},yo=(e,n)=>ov(e,n).map(o=>{const r=fm.detect(o.versionRegexes,n);return{current:o.name,version:r}}),sv=(e,n)=>ov(e,n).map(o=>{const r=fm.detect(o.versionRegexes,n);return{current:o.name,version:r}}),GT=(e,n)=>e.substring(n),nh=(e,n,o)=>n===""||e.length>=n.length&&e.substr(o,o+n.length)===n,mm=(e,n)=>ms(e,n)?GT(e,n.length):e,dr=(e,n,o=0,r)=>{const c=e.indexOf(n,o);return c!==-1?fs(r)?!0:c+n.length<=r:!1},ms=(e,n)=>nh(e,n,0),zl=(e,n)=>nh(e,n,e.length-n.length),zc=e=>n=>n.replace(e,""),Kd=zc(/^\s+|\s+$/g),oh=zc(/^\s+/g),gm=zc(/\s+$/g),no=e=>e.length>0,Ka=e=>!no(e),qT=(e,n)=>n<=0?"":new Array(n+1).join(e),Yd=(e,n=10)=>{const o=parseInt(e,n);return isNaN(o)?L.none():L.some(o)},Ru=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ua=e=>n=>dr(n,e),Jo=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>dr(e,"edge/")&&dr(e,"chrome")&&dr(e,"safari")&&dr(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ru],search:e=>dr(e,"chrome")&&!dr(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>dr(e,"msie")||dr(e,"trident")},{name:"Opera",versionRegexes:[Ru,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ua("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ua("firefox")},{name:"Safari",versionRegexes:[Ru,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(dr(e,"safari")||dr(e,"mobile/"))&&dr(e,"applewebkit")}],KT=[{name:"Windows",search:ua("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>dr(e,"iphone")||dr(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ua("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:ua("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ua("linux"),versionRegexes:[]},{name:"Solaris",search:ua("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ua("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ua("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],rv={browsers:et(Jo),oses:et(KT)},qn="Edge",Cc="Chromium",Ya="IE",fr="Opera",c1="Firefox",Xd="Safari",Uc=()=>Jd({current:void 0,version:fm.unknown()}),Jd=e=>{const n=e.current,o=e.version,r=c=>()=>n===c;return{current:n,version:o,isEdge:r(qn),isChromium:r(Cc),isIE:r(Ya),isOpera:r(fr),isFirefox:r(c1),isSafari:r(Xd)}},Ci={unknown:Uc,nu:Jd,edge:et(qn),chromium:et(Cc),ie:et(Ya),opera:et(fr),firefox:et(c1),safari:et(Xd)},vw="Windows",av="iOS",yw="Android",Wc="Linux",Du="macOS",i1="Solaris",l1="FreeBSD",cv="ChromeOS",iv=()=>sh({current:void 0,version:fm.unknown()}),sh=e=>{const n=e.current,o=e.version,r=c=>()=>n===c;return{current:n,version:o,isWindows:r(vw),isiOS:r(av),isAndroid:r(yw),isMacOS:r(Du),isLinux:r(Wc),isSolaris:r(i1),isFreeBSD:r(l1),isChromeOS:r(cv)}},Cw={unknown:iv,nu:sh,windows:et(vw),ios:et(av),android:et(yw),linux:et(Wc),macos:et(Du),solaris:et(i1),freebsd:et(l1),chromeos:et(cv)},Zc={detect:(e,n,o)=>{const r=rv.browsers(),c=rv.oses(),u=n.bind(C=>bw(r,C)).orThunk(()=>yo(r,e)).fold(Ci.unknown,Ci.nu),m=sv(c,e).fold(Cw.unknown,Cw.nu),v=ZT(m,u,e,o);return{browser:u,os:m,deviceType:v}}},YT=e=>window.matchMedia(e).matches;let lv=ol(()=>Zc.detect(navigator.userAgent,L.from(navigator.userAgentData),YT));const wi=()=>lv(),XT=navigator.userAgent,u1=wi(),Hs=u1.browser,Zr=u1.os,Qd=u1.deviceType,ww=XT.indexOf("Windows Phone")!==-1,ct={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Hs.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Hs.isIE(),windowsPhone:ww,browser:{current:Hs.current,version:Hs.version,isChromium:Hs.isChromium,isEdge:Hs.isEdge,isFirefox:Hs.isFirefox,isIE:Hs.isIE,isOpera:Hs.isOpera,isSafari:Hs.isSafari},os:{current:Zr.current,version:Zr.version,isAndroid:Zr.isAndroid,isChromeOS:Zr.isChromeOS,isFreeBSD:Zr.isFreeBSD,isiOS:Zr.isiOS,isLinux:Zr.isLinux,isMacOS:Zr.isMacOS,isSolaris:Zr.isSolaris,isWindows:Zr.isWindows},deviceType:{isDesktop:Qd.isDesktop,isiPad:Qd.isiPad,isiPhone:Qd.isiPhone,isPhone:Qd.isPhone,isTablet:Qd.isTablet,isTouch:Qd.isTouch,isWebView:Qd.isWebView}},Sw=/^\s*|\s*$/g,Fo=e=>_n(e)?"":(""+e).replace(Sw,""),tr=(e,n)=>n?n==="array"&&la(e)?!0:typeof e===n:e!==void 0,uv=(e,n,o={})=>{const r=ee(e)?e.split(n||","):e||[];let c=r.length;for(;c--;)o[r[c]]={};return o},Zo=Ft,JT=(e,...n)=>{for(let o=0;o<n.length;o++){const r=n[o];for(const c in r)if(Ft(r,c)){const u=r[c];u!==void 0&&(e[c]=u)}}return e},rh=function(e,n,o,r){r=r||this,e&&(o&&(e=e[o]),xs(e,(c,u)=>n.call(r,c,u,o)===!1?!1:(rh(c,n,o,r),!0)))},ze={trim:Fo,isArray:la,is:tr,toArray:Mr,makeMap:uv,each:xs,map:nl,grep:a1,inArray:Hl,hasOwn:Zo,extend:JT,walk:rh,resolve:(e,n=window)=>{const o=e.split(".");for(let r=0,c=o.length;r<c&&(n=n[o[r]],!!n);r++);return n},explode:(e,n)=>Tn(e)?e:e===""?[]:nl(e.split(n||","),Fo),_addCacheSuffix:e=>{const n=ct.cacheSuffix;return n&&(e+=(e.indexOf("?")===-1?"?":"&")+n),e}},jo=(e,n,o=jt)=>e.exists(r=>o(r,n)),ch=(e,n,o=jt)=>mr(e,n,o).getOr(e.isNone()&&n.isNone()),nr=e=>{const n=[],o=r=>{n.push(r)};for(let r=0;r<e.length;r++)e[r].each(o);return n},mr=(e,n,o)=>e.isSome()&&n.isSome()?L.some(o(e.getOrDie(),n.getOrDie())):L.none(),Mu=(e,n,o,r)=>e.isSome()&&n.isSome()&&o.isSome()?L.some(r(e.getOrDie(),n.getOrDie(),o.getOrDie())):L.none(),kn=(e,n)=>e?L.some(n):L.none(),Ul=typeof window<"u"?window:Function("return this;")(),or=(e,n)=>{let o=n??Ul;for(let r=0;r<e.length&&o!==void 0&&o!==null;++r)o=o[e[r]];return o},hm=(e,n)=>{const o=e.split(".");return or(o,n)},_s=(e,n)=>hm(e,n),Pu=(e,n)=>{const o=_s(e,n);if(o==null)throw new Error(e+" not available on this browser");return o},dv=Object.getPrototypeOf,xw=e=>Pu("HTMLElement",e),To=e=>{const n=hm("ownerDocument.defaultView",e);return sn(e)&&(xw(n).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(dv(e).constructor.name))},_w=8,Pr=9,da=11,Si=1,d1=3,On=e=>e.dom.nodeName.toLowerCase(),fa=e=>e.dom.nodeType,Wl=e=>n=>fa(n)===e,pm=e=>fa(e)===_w||On(e)==="#comment",jc=e=>Xa(e)&&To(e.dom),Xa=Wl(Si),Co=Wl(d1),ih=Wl(Pr),ef=Wl(da),bm=e=>n=>Xa(n)&&On(n)===e,vm=(e,n,o)=>{if(ee(o)||bn(o)||Za(o))e.setAttribute(n,o+"");else throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple")},io=(e,n,o)=>{vm(e.dom,n,o)},Zl=(e,n)=>{const o=e.dom;lt(n,(r,c)=>{vm(o,c,r)})},Es=(e,n)=>{const o=e.dom.getAttribute(n);return o===null?void 0:o},xi=(e,n)=>L.from(Es(e,n)),tf=(e,n)=>{const o=e.dom;return o&&o.hasAttribute?o.hasAttribute(n):!1},Rs=(e,n)=>{e.dom.removeAttribute(n)},Gc=e=>{const n=e.dom.attributes;return n==null||n.length===0},ym=e=>Wo(e.dom.attributes,(n,o)=>(n[o.name]=o.value,n),{}),f1=(e,n)=>{const o=Es(e,n);return o===void 0||o===""?[]:o.split(" ")},lh=(e,n,o)=>{const c=f1(e,n).concat([o]);return io(e,n,c.join(" ")),!0},m1=(e,n,o)=>{const r=Mt(f1(e,n),c=>c!==o);return r.length>0?io(e,n,r.join(" ")):Rs(e,n),!1},Cm=e=>e.dom.classList!==void 0,g1=e=>f1(e,"class"),Nu=(e,n)=>lh(e,"class",n),uh=(e,n)=>m1(e,"class",n),Oa=(e,n)=>Gt(g1(e),n)?uh(e,n):Nu(e,n),nf=(e,n)=>{Cm(e)?e.dom.classList.add(n):Nu(e,n)},h1=e=>{(Cm(e)?e.dom.classList:g1(e)).length===0&&Rs(e,"class")},of=(e,n)=>{Cm(e)?e.dom.classList.remove(n):uh(e,n),h1(e)},Ew=(e,n)=>{const o=Cm(e)?e.dom.classList.toggle(n):Oa(e,n);return h1(e),o},dh=(e,n)=>Cm(e)&&e.dom.classList.contains(n),Tw=(e,n)=>{const r=(n||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){const c="HTML does not have a single root node";throw console.error(c,e),new Error(c)}return Sm(r.childNodes[0])},wm=(e,n)=>{const r=(n||document).createElement(e);return Sm(r)},kw=(e,n)=>{const r=(n||document).createTextNode(e);return Sm(r)},Sm=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},X={fromHtml:Tw,fromTag:wm,fromText:kw,fromDom:Sm,fromPoint:(e,n,o)=>L.from(e.dom.elementFromPoint(n,o)).map(Sm)},fv=(e,n)=>{const o=[],r=u=>(o.push(u),n(u));let c=n(e);do c=c.bind(r);while(c.isSome());return o},Ja=(e,n)=>{const o=e.dom;if(o.nodeType!==Si)return!1;{const r=o;if(r.matches!==void 0)return r.matches(n);if(r.msMatchesSelector!==void 0)return r.msMatchesSelector(n);if(r.webkitMatchesSelector!==void 0)return r.webkitMatchesSelector(n);if(r.mozMatchesSelector!==void 0)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}},sf=e=>e.nodeType!==Si&&e.nodeType!==Pr&&e.nodeType!==da||e.childElementCount===0,sM=(e,n)=>{const o=n===void 0?document:n.dom;return sf(o)?[]:Xt(o.querySelectorAll(e),X.fromDom)},Ow=(e,n)=>{const o=n===void 0?document:n.dom;return sf(o)?L.none():L.from(o.querySelector(e)).map(X.fromDom)},Wn=(e,n)=>e.dom===n.dom,_i=(e,n)=>{const o=e.dom,r=n.dom;return o===r?!1:o.contains(r)},Qa=e=>X.fromDom(e.dom.ownerDocument),jr=e=>ih(e)?e:Qa(e),Aw=e=>X.fromDom(jr(e).dom.documentElement),fh=e=>X.fromDom(jr(e).dom.defaultView),wc=e=>L.from(e.dom.parentNode).map(X.fromDom),mh=e=>L.from(e.dom.parentElement).map(X.fromDom),mv=(e,n)=>{const o=oe(n)?n:De;let r=e.dom;const c=[];for(;r.parentNode!==null&&r.parentNode!==void 0;){const u=r.parentNode,m=X.fromDom(u);if(c.push(m),o(m)===!0)break;r=u}return c},Rw=e=>{const n=o=>Mt(o,r=>!Wn(e,r));return wc(e).map(gr).map(n).getOr([])},qc=e=>L.from(e.dom.previousSibling).map(X.fromDom),xm=e=>L.from(e.dom.nextSibling).map(X.fromDom),gv=e=>$o(fv(e,qc)),Sc=e=>fv(e,xm),gr=e=>Xt(e.dom.childNodes,X.fromDom),Bu=(e,n)=>{const o=e.dom.childNodes;return L.from(o[n]).map(X.fromDom)},_m=e=>Bu(e,0),Kc=e=>Bu(e,e.dom.childNodes.length-1),Gr=e=>e.dom.childNodes.length,p1=e=>e.dom.hasChildNodes(),Dw=e=>{const n=e.dom.head;if(n==null)throw new Error("Head is not available yet");return X.fromDom(n)},gh=e=>ef(e)&&Ae(e.dom.host),hh=oe(Element.prototype.attachShadow)&&oe(Node.prototype.getRootNode),b1=et(hh),jl=hh?e=>X.fromDom(e.dom.getRootNode()):jr,v1=e=>gh(e)?e:Dw(jr(e)),ek=e=>gh(e)?e:X.fromDom(jr(e).dom.body),OL=e=>{const n=jl(e);return gh(n)?L.some(n):L.none()},tk=e=>X.fromDom(e.dom.host),y1=e=>{if(b1()&&Ae(e.target)){const n=X.fromDom(e.target);if(Xa(n)&&nk(n)&&e.composed&&e.composedPath){const o=e.composedPath();if(o)return Dr(o)}}return L.from(e.target)},nk=e=>Ae(e.dom.shadowRoot),rf=e=>{const n=Co(e)?e.dom.parentNode:e.dom;if(n==null||n.ownerDocument===null)return!1;const o=n.ownerDocument;return OL(X.fromDom(n)).fold(()=>o.body.contains(n),ns(rf,tk))};var Ts=(e,n,o,r,c)=>e(o,r)?L.some(o):oe(c)&&c(o)?L.none():n(o,r,c);const Mo=(e,n,o)=>{let r=e.dom;const c=oe(o)?o:De;for(;r.parentNode;){r=r.parentNode;const u=X.fromDom(r);if(n(u))return L.some(u);if(c(u))break}return L.none()},Nr=(e,n,o)=>Ts((c,u)=>u(c),Mo,e,n,o),hv=(e,n)=>{const o=e.dom;return o.parentNode?ok(X.fromDom(o.parentNode),r=>!Wn(e,r)&&n(r)):L.none()},ok=(e,n)=>{const o=c=>n(X.fromDom(c));return ss(e.dom.childNodes,o).map(X.fromDom)},Br=(e,n)=>{const o=r=>{for(let c=0;c<r.childNodes.length;c++){const u=X.fromDom(r.childNodes[c]);if(n(u))return L.some(u);const m=o(r.childNodes[c]);if(m.isSome())return m}return L.none()};return o(e.dom)},Et=(e,n,o)=>Mo(e,r=>Ja(r,n),o),Em=(e,n)=>Ow(n,e),af=(e,n,o)=>Ts((c,u)=>Ja(c,u),Et,e,n,o),ec=e=>af(e,"[contenteditable]"),Mn=(e,n=!1)=>rf(e)?e.dom.isContentEditable:ec(e).fold(et(n),o=>pv(o)==="true"),pv=e=>e.dom.contentEditable,Tm=e=>e.style!==void 0&&oe(e.style.getPropertyValue),ph=(e,n,o)=>{if(!ee(o))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);Tm(e)&&e.style.setProperty(n,o)},sk=(e,n)=>{Tm(e)&&e.style.removeProperty(n)},tn=(e,n,o)=>{const r=e.dom;ph(r,n,o)},qr=(e,n)=>{const o=e.dom;lt(n,(r,c)=>{ph(o,c,r)})},Yc=(e,n)=>{const o=e.dom,c=window.getComputedStyle(o).getPropertyValue(n);return c===""&&!rf(e)?xc(o,n):c},xc=(e,n)=>Tm(e)?e.style.getPropertyValue(n):"",Kr=(e,n)=>{const o=e.dom,r=xc(o,n);return L.from(r).filter(c=>c.length>0)},tc=e=>{const n={},o=e.dom;if(Tm(o))for(let r=0;r<o.style.length;r++){const c=o.style.item(r);n[c]=o.style[c]}return n},Vs=(e,n)=>{const o=e.dom;sk(o,n),jo(xi(e,"style").map(Kd),"")&&Rs(e,"style")},Mw=e=>e.dom.offsetWidth,hr=(e,n)=>{wc(e).each(r=>{r.dom.insertBefore(n.dom,e.dom)})},sl=(e,n)=>{xm(e).fold(()=>{wc(e).each(c=>{gs(c,n)})},r=>{hr(r,n)})},$u=(e,n)=>{_m(e).fold(()=>{gs(e,n)},r=>{e.dom.insertBefore(n.dom,r.dom)})},gs=(e,n)=>{e.dom.appendChild(n.dom)},Qo=(e,n)=>{hr(e,n),gs(n,e)},Pw=(e,n)=>{we(n,(o,r)=>{const c=r===0?e:n[r-1];sl(c,o)})},Iu=(e,n)=>{we(n,o=>{gs(e,o)})},Fu=e=>{e.dom.textContent="",we(gr(e),n=>{go(n)})},go=e=>{const n=e.dom;n.parentNode!==null&&n.parentNode.removeChild(n)},cf=e=>{const n=gr(e);n.length>0&&Pw(e,n),go(e)},rk=(e,n)=>{const r=(n||document).createElement("div");return r.innerHTML=e,gr(X.fromDom(r))},Po=e=>Xt(e,X.fromDom),Nw=e=>e.dom.innerHTML,_c=(e,n)=>{const r=Qa(e).dom,c=X.fromDom(r.createDocumentFragment()),u=rk(n,r);Iu(c,u),Fu(e),gs(e,c)},gn=e=>{const n=X.fromTag("div"),o=X.fromDom(e.dom.cloneNode(!0));return gs(n,o),Nw(n)},km=(e,n,o,r,c,u,m)=>({target:e,x:n,y:o,stop:r,prevent:c,kill:u,raw:m}),C1=e=>{const n=X.fromDom(y1(e).getOr(e.target)),o=()=>e.stopPropagation(),r=()=>e.preventDefault(),c=A(r,o);return km(n,e.clientX,e.clientY,o,r,c,e)},w1=(e,n)=>o=>{e(o)&&n(C1(o))},ak=(e,n,o,r,c)=>{const u=w1(o,r);return e.dom.addEventListener(n,u,c),{unbind:Be($w,e,n,u,c)}},Bw=(e,n,o,r)=>ak(e,n,o,r,!1),$w=(e,n,o,r)=>{e.dom.removeEventListener(n,o,r)},Iw=(e,n)=>({left:e,top:n,translate:(r,c)=>Iw(e+r,n+c)}),Gl=Iw,bv=e=>{const n=e.getBoundingClientRect();return Gl(n.left,n.top)},Om=(e,n)=>e!==void 0?e:n!==void 0?n:0,Fw=e=>{const n=e.dom.ownerDocument,o=n.body,r=n.defaultView,c=n.documentElement;if(o===e.dom)return Gl(o.offsetLeft,o.offsetTop);const u=Om(r==null?void 0:r.pageYOffset,c.scrollTop),m=Om(r==null?void 0:r.pageXOffset,c.scrollLeft),v=Om(c.clientTop,o.clientTop),C=Om(c.clientLeft,o.clientLeft);return Aa(e).translate(m-C,u-v)},Aa=e=>{const n=e.dom,r=n.ownerDocument.body;return r===n?Gl(r.offsetLeft,r.offsetTop):rf(e)?bv(n):Gl(0,0)},vv=e=>{const n=e!==void 0?e.dom:document,o=n.body.scrollLeft||n.documentElement.scrollLeft,r=n.body.scrollTop||n.documentElement.scrollTop;return Gl(o,r)},bh=(e,n,o)=>{const c=(o!==void 0?o.dom:document).defaultView;c&&c.scrollTo(e,n)},Am=(e,n)=>{wi().browser.isSafari()&&oe(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(n)},ck=e=>{const n=e===void 0?window:e;return wi().browser.isFirefox()?L.none():L.from(n.visualViewport)},yv=(e,n,o,r)=>({x:e,y:n,width:o,height:r,right:e+o,bottom:n+r}),Lu=e=>{const n=e===void 0?window:e,o=n.document,r=vv(X.fromDom(o));return ck(n).fold(()=>{const c=n.document.documentElement,u=c.clientWidth,m=c.clientHeight;return yv(r.left,r.top,u,m)},c=>yv(Math.max(c.pageLeft,r.left),Math.max(c.pageTop,r.top),c.width,c.height))},Cv=(e,n)=>Mt(gr(e),n),wv=(e,n)=>{let o=[];return we(gr(e),r=>{n(r)&&(o=o.concat([r])),o=o.concat(wv(r,n))}),o},sr=(e,n)=>sM(n,e),Sv=(e,n,o)=>Mo(e,n,o).isSome(),xv=(e,n)=>hv(e,n).isSome(),Lw=(e,n)=>Br(e,n).isSome();class zs{constructor(n,o){this.node=n,this.rootNode=o,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(n){return this.node=this.findSibling(this.node,"firstChild","nextSibling",n),this.node}prev(n){return this.node=this.findSibling(this.node,"lastChild","previousSibling",n),this.node}prev2(n){return this.node=this.findPreviousNode(this.node,n),this.node}findSibling(n,o,r,c){if(n){if(!c&&n[o])return n[o];if(n!==this.rootNode){let u=n[r];if(u)return u;for(let m=n.parentNode;m&&m!==this.rootNode;m=m.parentNode)if(u=m[r],u)return u}}}findPreviousNode(n,o){if(n){const r=n.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!o){for(let u=r.lastChild;u;u=u.lastChild)if(!u.lastChild)return u}return r}const c=n.parentNode;if(c&&c!==this.rootNode)return c}}}const Hu="\uFEFF",Us=" ",pr=e=>e===Hu,$t=e=>e.replace(/\uFEFF/g,""),lf=/^[ \t\r\n]*$/,rl=e=>lf.test(e),S1=e=>{for(const n of e)if(!pr(n))return!1;return!0},ik=e=>" \f	\v".indexOf(e)!==-1,x1=e=>e===`
`||e==="\r",Ei=(e,n)=>n<e.length&&n>=0?x1(e[n]):!1,vh=(e,n=4,o=!0,r=!0)=>{const c=qT(" ",n),u=e.replace(/\t/g,c);return Wo(u,(v,C)=>ik(C)||C===Us?v.pcIsSpace||v.str===""&&o||v.str.length===u.length-1&&r||Ei(u,v.str.length+1)?{pcIsSpace:!1,str:v.str+Us}:{pcIsSpace:!0,str:v.str+" "}:{pcIsSpace:x1(C),str:v.str+C},{pcIsSpace:!1,str:""}).str},Ti=e=>n=>!!n&&n.nodeType===e,hs=e=>!!e&&!Object.getPrototypeOf(e),pt=Ti(1),ki=e=>pt(e)&&jc(X.fromDom(e)),_v=e=>pt(e)&&e.namespaceURI==="http://www.w3.org/2000/svg",Rm=e=>{const n=e.toLowerCase();return o=>Ae(o)&&o.nodeName.toLowerCase()===n},Xc=e=>{const n=e.map(o=>o.toLowerCase());return o=>{if(o&&o.nodeName){const r=o.nodeName.toLowerCase();return Gt(n,r)}return!1}},Oi=(e,n)=>{const o=n.toLowerCase().split(" ");return r=>{if(pt(r)){const c=r.ownerDocument.defaultView;if(c)for(let u=0;u<o.length;u++){const m=c.getComputedStyle(r,null);if((m?m.getPropertyValue(e):null)===o[u])return!0}}return!1}},lk=e=>n=>pt(n)&&n.hasAttribute(e),Ai=e=>pt(e)&&e.hasAttribute("data-mce-bogus"),Hw=e=>pt(e)&&e.getAttribute("data-mce-bogus")==="all",al=e=>pt(e)&&e.tagName==="TABLE",No=e=>n=>!!(ki(n)&&(n.contentEditable===e||n.getAttribute("data-mce-contenteditable")===e)),Ec=Xc(["textarea","input"]),Me=Ti(3),Ri=Ti(4),Ra=Ti(7),ql=Ti(8),rs=Ti(9),rr=Ti(11),Bo=Rm("br"),ke=Rm("img"),as=No("true"),ho=No("false"),Go=Xc(["td","th"]),Kl=Xc(["td","th","caption"]),cl=Xc(["video","audio","object","embed"]),Jc=Rm("li"),Ev=Rm("details"),Vu=Rm("summary"),Tv={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},nc=(e,n,o)=>{const r=X.fromDom(n),c=X.fromDom(e),u=o.getWhitespaceElements();return Sv(c,v=>Ft(u,On(v)),Be(Wn,r))},Nn=e=>pt(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),il=(e,n)=>pt(e)&&Ft(n.getNonEmptyElements(),e.nodeName),uf=lk("data-mce-bookmark"),ar=e=>mh(X.fromDom(e)).exists(n=>!Mn(n)),kv=(e,n,o)=>rl(e.data)&&!nc(e,n,o),zu=(e,n,o,r)=>Me(e)&&!kv(e,n,o)&&(!r.includeZwsp||!S1(e.data)),_1=(e,n,o,r)=>oe(r.isContent)&&r.isContent(n)||il(n,e)||uf(n)||Nn(n)||zu(n,o,e,r)||ho(n)||as(n)&&ar(n),ps=(e,n,o)=>{const r={...Tv,...o};if(r.checkRootAsContent&&_1(e,n,n,r))return!1;let c=n.firstChild,u=0;if(!c)return!0;const m=new zs(c,n);do{if(r.skipBogus&&pt(c)){const v=c.getAttribute("data-mce-bogus");if(v){c=m.next(v==="all");continue}}if(ql(c)){c=m.next(!0);continue}if(Bo(c)){u++,c=m.next();continue}if(_1(e,c,n,r))return!1;c=m.next()}while(c);return u<=1},br=(e,n,o)=>ps(e,n.dom,{checkRootAsContent:!0,...o}),me=(e,n,o)=>_1(e,n,n,{includeZwsp:Tv.includeZwsp,...o}),lo=e=>{let n=e;return{get:()=>n,set:c=>{n=c}}},Dm=e=>{const n=lo(L.none()),o=()=>n.get().each(e);return{clear:()=>{o(),n.set(L.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:v=>{o(),n.set(L.some(v))}}},ll=e=>{const n=lo(L.none()),o=()=>n.get().each(v=>clearInterval(v));return{clear:()=>{o(),n.set(L.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:v=>{o(),n.set(L.some(setInterval(v,e)))}}},vr=()=>{const e=Dm(Bt);return{...e,on:o=>e.get().each(o)}},cr=e=>{const n=e.toLowerCase();return n==="svg"?"svg":n==="math"?"math":"html"},ko=e=>cr(e)!=="html",Vw=e=>ko(e.nodeName),Tc=e=>cr(e.nodeName),Ov=["svg","math"],rM=()=>{const e=vr(),n=()=>e.get().map(Tc).getOr("html");return{track:c=>(Vw(c)?e.set(c):e.get().exists(u=>!u.contains(c))&&e.clear(),n()),current:n,reset:()=>{e.clear()}}},Da="data-mce-block",uk=e=>Mt(Wr(e),n=>!/[A-Z]/.test(n)),Av=e=>Xt(uk(e),n=>{const o=CSS.escape(n);return`${o}:`+Xt(Ov,r=>`not(${r} ${o})`).join(":")}).join(","),zw=(e,n)=>Ae(n.querySelector(e))?(n.setAttribute(Da,"true"),n.getAttribute("data-mce-selected")==="inline-boundary"&&n.removeAttribute("data-mce-selected"),!0):(n.removeAttribute(Da),!1),Uw=(e,n)=>{const o=Av(e.getTransparentElements()),r=Av(e.getBlockElements());return Mt(n.querySelectorAll(o),c=>zw(r,c))},Ww=(e,n,o)=>{var r;const c=o?"lastChild":"firstChild";for(let u=n[c];u;u=u[c])if(ps(e,u,{checkRootAsContent:!0})){(r=u.parentNode)===null||r===void 0||r.removeChild(u);return}},Mm=(e,n,o)=>{const r=document.createRange(),c=n.parentNode;if(c){r.setStartBefore(n),r.setEndBefore(o);const u=r.extractContents();Ww(e,u,!0),r.setStartAfter(o),r.setEndAfter(n);const m=r.extractContents();Ww(e,m,!1),ps(e,u,{checkRootAsContent:!0})||c.insertBefore(u,n),ps(e,o,{checkRootAsContent:!0})||c.insertBefore(o,n),ps(e,m,{checkRootAsContent:!0})||c.insertBefore(m,n),c.removeChild(n)}},Uu=(e,n,o)=>{const r=e.getBlockElements(),c=X.fromDom(n),u=v=>On(v)in r,m=v=>Wn(v,c);we(Po(o),v=>{Mo(v,u,m).each(C=>{const E=Cv(v,D=>u(D)&&!e.isValidChild(On(C),On(D)));if(E.length>0){const D=mh(C);we(E,M=>{Mo(M,u,m).each(B=>{Mm(e,B.dom,M.dom)})}),D.each(M=>Uw(e,M.dom))}})})},Rv=(e,n,o)=>{we([...o,...Wu(e,n)?[n]:[]],r=>we(sr(X.fromDom(r),r.nodeName.toLowerCase()),c=>{df(e,c.dom)&&cf(c)}))},E1=(e,n)=>{const o=Uw(e,n);Uu(e,n,o),Rv(e,n,o)},dk=(e,n)=>{if(k1(e,n)){const o=Av(e.getBlockElements());zw(o,n)}},Yl=(e,n,o)=>{const r=u=>Wn(u,X.fromDom(n)),c=mv(X.fromDom(o),r);um(c,c.length-2).filter(Xa).fold(()=>E1(e,n),u=>E1(e,u.dom))},T1=e=>e.hasAttribute(Da),Pm=(e,n)=>Ft(e.getTransparentElements(),n),k1=(e,n)=>pt(n)&&Pm(e,n.nodeName),Wu=(e,n)=>k1(e,n)&&T1(n),df=(e,n)=>k1(e,n)&&!T1(n),O1=(e,n)=>n.type===1&&Pm(e,n.name)&&ee(n.attr(Da)),fk=wi().browser,Zw=e=>ss(e,Xa),Dv=e=>fk.isFirefox()&&On(e)==="table"?Zw(gr(e)).filter(n=>On(n)==="caption").bind(n=>Zw(Sc(n)).map(o=>{const r=o.dom.offsetTop,c=n.dom.offsetTop,u=n.dom.offsetHeight;return r<=c?-u:0})).getOr(0):0,ks=(e,n)=>e.children&&Gt(e.children,n),ul=(e,n,o)=>{let r=0,c=0;const u=e.ownerDocument;if(o=o||e,n){if(o===e&&n.getBoundingClientRect&&Yc(X.fromDom(e),"position")==="static"){const v=n.getBoundingClientRect();return r=v.left+(u.documentElement.scrollLeft||e.scrollLeft)-u.documentElement.clientLeft,c=v.top+(u.documentElement.scrollTop||e.scrollTop)-u.documentElement.clientTop,{x:r,y:c}}let m=n;for(;m&&m!==o&&m.nodeType&&!ks(m,o);){const v=m;r+=v.offsetLeft||0,c+=v.offsetTop||0,m=v.offsetParent}for(m=n.parentNode;m&&m!==o&&m.nodeType&&!ks(m,o);)r-=m.scrollLeft||0,c-=m.scrollTop||0,m=m.parentNode;c+=Dv(X.fromDom(n))}return{x:r,y:c}},ff=(e,n={})=>{let o=0;const r={},c=X.fromDom(e),u=jr(c),m=ne=>{n.referrerPolicy=ne},v=ne=>{n.contentCssCors=ne},C=ne=>{gs(v1(c),ne)},E=ne=>{const re=v1(c);Em(re,"#"+ne).each(go)},D=ne=>mo(r,ne).getOrThunk(()=>({id:"mce-u"+o++,passed:[],failed:[],count:0})),M=ne=>new Promise((re,se)=>{let ue;const Oe=ze._addCacheSuffix(ne),Ue=D(Oe);r[Oe]=Ue,Ue.count++;const st=(ot,wt)=>{we(ot,ia),Ue.status=wt,Ue.passed=[],Ue.failed=[],ue&&(ue.onload=null,ue.onerror=null,ue=null)},$e=()=>st(Ue.passed,2),Ce=()=>st(Ue.failed,3);if(re&&Ue.passed.push(re),se&&Ue.failed.push(se),Ue.status===1)return;if(Ue.status===2){$e();return}if(Ue.status===3){Ce();return}Ue.status=1;const Ee=X.fromTag("link",u.dom);Zl(Ee,{rel:"stylesheet",type:"text/css",id:Ue.id}),n.contentCssCors&&io(Ee,"crossOrigin","anonymous"),n.referrerPolicy&&io(Ee,"referrerpolicy",n.referrerPolicy),ue=Ee.dom,ue.onload=$e,ue.onerror=Ce,C(Ee),io(Ee,"href",Oe)}),B=(ne,re)=>{const se=D(ne);r[ne]=se,se.count++;const ue=X.fromTag("style",u.dom);Zl(ue,{rel:"stylesheet",type:"text/css",id:se.id}),ue.dom.innerHTML=re,C(ue)},W=ne=>Promise.allSettled(Xt(ne,se=>M(se).then(et(se)))).then(se=>{const ue=Rr(se,Oe=>Oe.status==="fulfilled");return ue.fail.length>0?Promise.reject(Xt(ue.fail,Oe=>Oe.reason)):Xt(ue.pass,Oe=>Oe.value)}),q=ne=>{const re=ze._addCacheSuffix(ne);mo(r,re).each(se=>{--se.count===0&&(delete r[re],E(se.id))})};return{load:M,loadRawCss:B,loadAll:W,unload:q,unloadRawCss:ne=>{mo(r,ne).each(re=>{--re.count===0&&(delete r[ne],E(re.id))})},unloadAll:ne=>{we(ne,re=>{q(re)})},_setReferrerPolicy:m,_setContentCssCors:v}},Mv=(()=>{const e=new WeakMap;return{forElement:(o,r)=>{const u=jl(o).dom;return L.from(e.get(u)).getOrThunk(()=>{const m=ff(u,r);return e.set(u,m),m})}}})(),oc=e=>e.nodeName.toLowerCase()==="span",yh=(e,n)=>Ae(e)&&(me(n,e)||n.isInline(e.nodeName.toLowerCase())),Bm=(e,n,o)=>{const r=new zs(e,n).prev(!1),c=new zs(e,n).next(!1),u=fs(r)||yh(r,o),m=fs(c)||yh(c,o);return u&&m},Ch=e=>oc(e)&&e.getAttribute("data-mce-type")==="bookmark",dl=(e,n,o)=>Me(e)&&e.data.length>0&&Bm(e,n,o),Di=e=>pt(e)?e.childNodes.length>0:!1,Zu=e=>rr(e)||rs(e),sc=(e,n,o,r)=>{var c;const u=r||n;if(pt(n)&&Ch(n))return n;const m=n.childNodes;for(let v=m.length-1;v>=0;v--)sc(e,m[v],o,u);if(pt(n)){const v=n.childNodes;v.length===1&&Ch(v[0])&&((c=n.parentNode)===null||c===void 0||c.insertBefore(v[0],n))}return!Zu(n)&&!me(o,n)&&!Di(n)&&!dl(n,u,o)&&e.remove(n),n},jw=ze.makeMap,fl=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Xl=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,mf=/[<>&\"\']/g,Gw=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,wh={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},ju={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},Pv={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},qo=e=>{const n=X.fromTag("div").dom;return n.innerHTML=e,n.textContent||n.innerText||e},Nv=(e,n)=>{const o={};if(e){const r=e.split(",");n=n||10;for(let c=0;c<r.length;c+=2){const u=String.fromCharCode(parseInt(r[c],n));if(!ju[u]){const m="&"+r[c+1]+";";o[u]=m,o[m]=u}}return o}else return},Qc=Nv("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Jl=(e,n)=>e.replace(n?fl:Xl,o=>ju[o]||o),Gu=e=>(""+e).replace(mf,n=>ju[n]||n),ei=(e,n)=>e.replace(n?fl:Xl,o=>o.length>1?"&#"+((o.charCodeAt(0)-55296)*1024+(o.charCodeAt(1)-56320)+65536)+";":ju[o]||"&#"+o.charCodeAt(0)+";"),ma=(e,n,o)=>{const r=o||Qc;return e.replace(n?fl:Xl,c=>ju[c]||r[c]||c)},qu={encodeRaw:Jl,encodeAllRaw:Gu,encodeNumeric:ei,encodeNamed:ma,getEncodeFunc:(e,n)=>{const o=Nv(n)||Qc,r=(m,v)=>m.replace(v?fl:Xl,C=>ju[C]!==void 0?ju[C]:o[C]!==void 0?o[C]:C.length>1?"&#"+((C.charCodeAt(0)-55296)*1024+(C.charCodeAt(1)-56320)+65536)+";":"&#"+C.charCodeAt(0)+";"),c=(m,v)=>ma(m,v,o),u=jw(e.replace(/\+/g,","));return u.named&&u.numeric?r:u.named?n?c:ma:u.numeric?ei:Jl},decode:e=>e.replace(Gw,(n,o)=>o?(o.charAt(0).toLowerCase()==="x"?o=parseInt(o.substr(1),16):o=parseInt(o,10),o>65535?(o-=65536,String.fromCharCode(55296+(o>>10),56320+(o&1023))):wh[o]||String.fromCharCode(o)):Pv[n]||Qc[n]||qo(n))},Ds=(e,n)=>(e=ze.trim(e),e?e.split(n||" "):[]),R1=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),xh=e=>sn(e)&&e.source&&Object.prototype.toString.call(e)==="[object RegExp]",_h=e=>{const n=o=>Tn(o)?Xt(o,n):xh(o)?new RegExp(o.source,o.flags):sn(o)?Ln(o,n):o;return n(e)},qw=e=>{const n=/^(~)?(.+)$/;return vc(Ds(e,","),o=>{const r=n.exec(o);if(r){const u=r[1]==="~"?"span":"div",m=r[2];return[{cloneName:u,name:m}]}else return[]})},gf=e=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",...e!=="html4"?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],...e!=="html5-strict"?["xml:lang"]:[]]),ml=e=>{let n,o;n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",o="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(n+=" article aside details dialog figure main header footer hgroup section nav "+"a ins del canvas map",o+=" audio canvas command data datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),e!=="html5-strict"&&(o=[o,"acronym applet basefont big font strike tt"].join(" "),n=[n,"center dir isindex noframes"].join(" "));const r=[n,o].join(" ");return{blockContent:n,phrasingContent:o,flowContent:r}},yr=e=>{const{blockContent:n,phrasingContent:o,flowContent:r}=ml(e),c=u=>Object.freeze(u.split(" "));return Object.freeze({blockContent:c(n),phrasingContent:c(o),flowContent:c(r)})},ti={html4:ol(()=>yr("html4")),html5:ol(()=>yr("html5")),"html5-strict":ol(()=>yr("html5-strict"))},Ql=(e,n)=>{const{blockContent:o,phrasingContent:r,flowContent:c}=ti[e]();return n==="blocks"?L.some(o):n==="phrasing"?L.some(r):n==="flow"?L.some(c):L.none()},Bv=e=>{const n=gf(e),{phrasingContent:o,flowContent:r}=ml(e),c={},u=(C,E,D)=>{c[C]={attributes:As(E,et({})),attributesOrder:E,children:As(D,et({}))}},m=(C,E="",D="")=>{const M=Ds(D),B=Ds(C);let W=B.length;const q=[...n,...Ds(E)];for(;W--;)u(B[W],q.slice(),M)},v=(C,E)=>{const D=Ds(C),M=Ds(E);let B=D.length;for(;B--;){const W=c[D[B]];for(let q=0,Z=M.length;q<Z;q++)W.attributes[M[q]]={},W.attributesOrder.push(M[q])}};return e!=="html5-strict"&&(we(Ds("acronym applet basefont big font strike tt"),D=>{m(D,"",o)}),we(Ds("center dir isindex noframes"),D=>{m(D,"",r)})),m("html","manifest","head body"),m("head","","base command link meta noscript script style title"),m("title hr noscript br"),m("base","href target"),m("link","href rel media hreflang type sizes hreflang"),m("meta","name http-equiv content charset"),m("style","media type scoped"),m("script","src async defer type charset"),m("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),m("dd div","",r),m("address dt caption","",e==="html4"?o:r),m("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",o),m("blockquote","cite",r),m("ol","reversed start type","li"),m("ul","","li"),m("li","value",r),m("dl","","dt dd"),m("a","href target rel media hreflang type",e==="html4"?o:r),m("q","cite",o),m("ins del","cite datetime",r),m("img","src sizes srcset alt usemap ismap width height"),m("iframe","src name width height",r),m("embed","src type width height"),m("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),m("param","name value"),m("map","name",[r,"area"].join(" ")),m("area","alt coords shape href target rel media hreflang type"),m("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),m("colgroup","span","col"),m("col","span"),m("tbody thead tfoot","","tr"),m("tr","","td th"),m("td","colspan rowspan headers",r),m("th","colspan rowspan headers scope abbr",r),m("form","accept-charset action autocomplete enctype method name novalidate target",r),m("fieldset","disabled form name",[r,"legend"].join(" ")),m("label","form for",o),m("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),m("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?r:o),m("select","disabled form multiple name required size","option optgroup"),m("optgroup","disabled label","option"),m("option","disabled label selected value"),m("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),m("menu","type label",[r,"li"].join(" ")),m("noscript","",r),e!=="html4"&&(m("wbr"),m("ruby","",[o,"rt rp"].join(" ")),m("figcaption","",r),m("mark rt rp bdi","",o),m("summary","",[o,"h1 h2 h3 h4 h5 h6"].join(" ")),m("canvas","width height",r),m("data","value",o),m("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[r,"track source"].join(" ")),m("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),m("picture","","img source"),m("source","src srcset type media sizes"),m("track","kind src srclang label default"),m("datalist","",[o,"option"].join(" ")),m("article section nav aside main header footer","",r),m("hgroup","","h1 h2 h3 h4 h5 h6"),m("figure","",[r,"figcaption"].join(" ")),m("time","datetime",o),m("dialog","open",r),m("command","type label icon disabled checked radiogroup command"),m("output","for form name",o),m("progress","value max",o),m("meter","value min max low high optimum",o),m("details","open",[r,"summary"].join(" ")),m("keygen","autofocus challenge disabled form keytype name"),u("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),e!=="html5-strict"&&(v("script","language xml:space"),v("style","xml:space"),v("object","declare classid code codebase codetype archive standby align border hspace vspace"),v("embed","align name hspace vspace"),v("param","valuetype type"),v("a","charset name rev shape coords"),v("br","clear"),v("applet","codebase archive code object alt name width height align hspace vspace"),v("img","name longdesc align border hspace vspace"),v("iframe","longdesc frameborder marginwidth marginheight scrolling align"),v("font basefont","size color face"),v("input","usemap align"),v("select"),v("textarea"),v("h1 h2 h3 h4 h5 h6 div p legend caption","align"),v("ul","type compact"),v("li","type"),v("ol dl menu dir","compact"),v("pre","width xml:space"),v("hr","align noshade size width"),v("isindex","prompt"),v("table","summary width frame rules cellspacing cellpadding align bgcolor"),v("col","width align char charoff valign"),v("colgroup","width align char charoff valign"),v("thead","align char charoff valign"),v("tr","align char charoff valign bgcolor"),v("th","axis align char charoff valign nowrap bgcolor width height"),v("form","accept"),v("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),v("tfoot","align char charoff valign"),v("tbody","align char charoff valign"),v("area","nohref"),v("body","background bgcolor text link vlink alink")),e!=="html4"&&(v("input button select textarea","autofocus"),v("input textarea","placeholder"),v("a","download"),v("link script img","crossorigin"),v("img","loading"),v("iframe","sandbox seamless allow allowfullscreen loading")),e!=="html4"&&we([c.video,c.audio],C=>{delete C.children.audio,delete C.children.video}),we(Ds("a form meter progress dfn"),C=>{c[C]&&delete c[C].children[C]}),delete c.caption.children.table,delete c.script,c},Eh=e=>e==="-"?"remove":"add",Th=e=>{const n=/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/;return L.from(n.exec(e)).map(o=>({preset:o[1]==="@",name:o[2]}))},Kw=e=>{const n=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return vc(Ds(e,","),o=>{const r=n.exec(o);if(r){const c=r[1],u=c?Eh(c):"replace",m=r[2],v=vc(Ds(r[3],"|"),C=>Th(C).toArray());return[{operation:u,name:m,validChildren:v}]}else return[]})},Yw=(e,n)=>{const o=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,r=/[*?+]/,{attributes:c,attributesOrder:u}=n;return we(Ds(e,"|"),m=>{const v=o.exec(m);if(v){const C={},E=v[1],D=v[2].replace(/[\\:]:/g,":"),M=v[3],B=v[4];if(E==="!"&&(n.attributesRequired=n.attributesRequired||[],n.attributesRequired.push(D),C.required=!0),E==="-"){delete c[D],u.splice(ze.inArray(u,D),1);return}if(M&&(M==="="?(n.attributesDefault=n.attributesDefault||[],n.attributesDefault.push({name:D,value:B}),C.defaultValue=B):M==="~"?(n.attributesForced=n.attributesForced||[],n.attributesForced.push({name:D,value:B}),C.forcedValue=B):M==="<"&&(C.validValues=ze.makeMap(B,"?"))),r.test(D)){const W=C;n.attributePatterns=n.attributePatterns||[],W.pattern=R1(D),n.attributePatterns.push(W)}else c[D]||u.push(D),c[D]=C}})},Xw=(e,n)=>{lt(e.attributes,(o,r)=>{n.attributes[r]=o}),n.attributesOrder.push(...e.attributesOrder)},kh=(e,n)=>{const o=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return vc(Ds(n,","),r=>{const c=o.exec(r);if(c){const u=c[1],m=c[2],v=c[3],C=c[4],E=c[5],D={attributes:{},attributesOrder:[]};if(e.each(M=>Xw(M,D)),u==="#"?D.paddEmpty=!0:u==="-"&&(D.removeEmpty=!0),C==="!"&&(D.removeEmptyAttrs=!0),E&&Yw(E,D),v&&(D.outputName=m),m==="@")if(e.isNone())e=L.some(D);else return[];return[v?{name:m,element:D,aliasName:v}:{name:m,element:D}]}else return[]})},$m={},un=ze.makeMap,vt=ze.each,Ku=ze.extend,Oh=ze.explode,D1=(e,n={})=>{const o=un(e," ",un(e.toUpperCase()," "));return Ku(o,n)},Jw=e=>D1("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),Ah=(e,n)=>{if(e){const o={};return ee(e)&&(e={"*":e}),vt(e,(r,c)=>{o[c]=o[c.toUpperCase()]=n==="map"?un(r,/[, ]/):Oh(r,/[, ]/)}),o}else return},Bn=(e={})=>{var n;const o={},r={};let c=[];const u={},m={},v=(xt,Cn,So)=>{const Vo=e[xt];if(Vo)return un(Vo,/[, ]/,un(Vo.toUpperCase(),/[, ]/));{let ds=$m[xt];return ds||(ds=D1(Cn,So),$m[xt]=ds),ds}},C=(n=e.schema)!==null&&n!==void 0?n:"html5",E=Bv(C);e.verify_html===!1&&(e.valid_elements="*[*]");const D=Ah(e.valid_styles),M=Ah(e.invalid_styles,"map"),B=Ah(e.valid_classes,"map"),W=v("whitespace_elements","pre script noscript style textarea video audio iframe object code"),q=v("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),Z=v("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),K=v("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),ne="td th iframe video audio object script code",re=v("non_empty_elements",ne+" pre svg textarea summary",Z),se=v("move_caret_before_on_enter_elements",ne+" table",Z),ue="h1 h2 h3 h4 h5 h6",Oe=v("text_block_elements",ue+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),Ue=v("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",Oe),st=v("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),$e=v("transparent_elements","a ins del canvas map"),Ce=v("wrap_block_elements","pre "+ue);vt("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),xt=>{m[xt]=new RegExp("</"+xt+"[^>]*>","gi")});const Ee=xt=>{const Cn=L.from(o["@"]),So=/[*?+]/;we(kh(Cn,xt??""),({name:Vo,element:ds,aliasName:Ls})=>{if(Ls&&(o[Ls]=ds),So.test(Vo)){const es=ds;es.pattern=R1(Vo),c.push(es)}else o[Vo]=ds})},ot=xt=>{c=[],we(Wr(o),Cn=>{delete o[Cn]}),Ee(xt)},wt=(xt,Cn)=>{var So,Vo;delete $m.text_block_elements,delete $m.block_elements;const ds=Cn.extends?!Fc(Cn.extends):!1,Ls=Cn.extends;if(r[xt]=Ls?r[Ls]:{},u[xt]=Ls??xt,re[xt.toUpperCase()]={},re[xt]={},ds||(Ue[xt.toUpperCase()]={},Ue[xt]={}),Ls&&!o[xt]&&o[Ls]){const es=_h(o[Ls]);delete es.removeEmptyAttrs,delete es.removeEmpty,o[xt]=es}else o[xt]={attributesOrder:[],attributes:{}};if(Tn(Cn.attributes)){const es=aa=>{ts.attributesOrder.push(aa),ts.attributes[aa]={}},ts=(So=o[xt])!==null&&So!==void 0?So:{};delete ts.attributesDefault,delete ts.attributesForced,delete ts.attributePatterns,delete ts.attributesRequired,ts.attributesOrder=[],ts.attributes={},we(Cn.attributes,aa=>{const Pl=gf(C);Th(aa).each(({preset:Nl,name:Qi})=>{Nl?Qi==="global"&&we(Pl,es):es(Qi)})}),o[xt]=ts}if(bn(Cn.padEmpty)){const es=(Vo=o[xt])!==null&&Vo!==void 0?Vo:{};es.paddEmpty=Cn.padEmpty,o[xt]=es}if(Tn(Cn.children)){const es={},ts=Pl=>{es[Pl]={}},aa=Pl=>{Ql(C,Pl).each(Nl=>{we(Nl,ts)})};we(Cn.children,Pl=>{Th(Pl).each(({preset:Nl,name:Qi})=>{Nl?aa(Qi):ts(Qi)})}),r[xt]=es}Ls&&lt(r,(es,ts)=>{es[Ls]&&(r[ts]=es=Ku({},r[ts]),es[xt]=es[Ls])})},Qt=xt=>{we(qw(xt??""),({name:Cn,cloneName:So})=>{wt(Cn,{extends:So})})},hn=xt=>{sn(xt)?lt(xt,(Cn,So)=>wt(So,Cn)):ee(xt)&&Qt(xt)},Un=xt=>{we(Kw(xt??""),({operation:Cn,name:So,validChildren:Vo})=>{const ds=Cn==="replace"?{"#comment":{}}:r[So],Ls=ts=>{Cn==="remove"?delete ds[ts]:ds[ts]={}},es=ts=>{Ql(C,ts).each(aa=>{we(aa,Ls)})};we(Vo,({preset:ts,name:aa})=>{ts?es(aa):Ls(aa)}),r[So]=ds})},Xn=xt=>{const Cn=o[xt];if(Cn)return Cn;let So=c.length;for(;So--;){const Vo=c[So];if(Vo.pattern.test(xt))return Vo}},co=()=>{e.valid_elements?(ot(e.valid_elements),vt(E,(xt,Cn)=>{r[Cn]=xt.children})):(vt(E,(xt,Cn)=>{o[Cn]={attributes:xt.attributes,attributesOrder:xt.attributesOrder},r[Cn]=xt.children}),vt(Ds("strong/b em/i"),xt=>{const Cn=Ds(xt,"/");o[Cn[1]].outputName=Cn[0]}),vt(st,(xt,Cn)=>{o[Cn]&&(e.padd_empty_block_inline_children&&(o[Cn].paddInEmptyBlock=!0),o[Cn].removeEmpty=!0)}),vt(Ds("ol ul blockquote a table tbody"),xt=>{o[xt]&&(o[xt].removeEmpty=!0)}),vt(Ds("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),xt=>{o[xt]&&(o[xt].paddEmpty=!0)}),vt(Ds("span"),xt=>{o[xt].removeEmptyAttrs=!0})),delete o.svg,hn(e.custom_elements),Un(e.valid_children),Ee(e.extended_valid_elements),Un("+ol[ul|ol],+ul[ul|ol]"),vt({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(xt,Cn)=>{o[Cn]&&(o[Cn].parentsRequired=Ds(xt))}),e.invalid_elements&&vt(Oh(e.invalid_elements),xt=>{o[xt]&&delete o[xt]}),Xn("span")||Ee("span[!data-mce-type|*]")},Or=et(D),Jn=et(M),Xe=et(B),bt=et(K),En=et(Ue),nt=et(Oe),kt=et(st),rn=et(Object.seal(Z)),rt=et(q),nn=et(re),an=et(se),Fs=et(W),Fn=et($e),Cs=et(Ce),Xi=et(Object.seal(m)),Ml=(xt,Cn)=>{const So=r[xt.toLowerCase()];return!!(So&&So[Cn.toLowerCase()])},ya=(xt,Cn)=>{const So=Xn(xt);if(So)if(Cn){if(So.attributes[Cn])return!0;const Vo=So.attributePatterns;if(Vo){let ds=Vo.length;for(;ds--;)if(Vo[ds].pattern.test(Cn))return!0}}else return!0;return!1},Fc=xt=>Ft(En(),xt),Ji=xt=>!ms(xt,"#")&&ya(xt)&&!Fc(xt),Lc=xt=>Ft(Cs(),xt)||Ji(xt),pi=et(u);return co(),{type:C,children:r,elements:o,getValidStyles:Or,getValidClasses:Xe,getBlockElements:En,getInvalidStyles:Jn,getVoidElements:rn,getTextBlockElements:nt,getTextInlineElements:kt,getBoolAttrs:bt,getElementRule:Xn,getSelfClosingElements:rt,getNonEmptyElements:nn,getMoveCaretBeforeOnEnterElements:an,getWhitespaceElements:Fs,getTransparentElements:Fn,getSpecialElements:Xi,isValidChild:Ml,isValid:ya,isBlock:Fc,isInline:Ji,isWrapper:Lc,getCustomElements:pi,addValidElements:Ee,setValidElements:ot,addCustomElements:hn,addValidChildren:Un}},Qw=e=>({value:mk(e)}),mk=e=>mm(e,"#").toUpperCase(),Im=e=>{const n=e.toString(16);return(n.length===1?"0"+n:n).toUpperCase()},Te=e=>{const n=Im(e.red)+Im(e.green)+Im(e.blue);return Qw(n)},Fm=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,gk=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Yu=(e,n,o,r)=>({red:e,green:n,blue:o,alpha:r}),eS=(e,n,o,r)=>{const c=parseInt(e,10),u=parseInt(n,10),m=parseInt(o,10),v=parseFloat(r);return Yu(c,u,m,v)},hf=e=>{if(e==="transparent")return L.some(Yu(0,0,0,0));const n=Fm.exec(e);if(n!==null)return L.some(eS(n[1],n[2],n[3],"1"));const o=gk.exec(e);return o!==null?L.some(eS(o[1],o[2],o[3],o[4])):L.none()},$v=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,Mi=e=>hf(e).map(Te).map(n=>"#"+n.value).getOr(e),Iv=(e={},n)=>{const o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,c=/\s+$/,u=/rgba *\(/i,m={};let v,C;const E=Hu;n&&(v=n.getValidStyles(),C=n.getInvalidStyles());const D=(`\\" \\' \\; \\: ; : `+E).split(" ");for(let B=0;B<D.length;B++)m[D[B]]=E+B,m[E+B]=D[B];const M={parse:B=>{const W={};let q=!1;const Z=e.url_converter,K=e.url_converter_scope||M,ne=(Ce,Ee,ot)=>{const wt=W[Ce+"-top"+Ee];if(!wt)return;const Qt=W[Ce+"-right"+Ee];if(!Qt)return;const hn=W[Ce+"-bottom"+Ee];if(!hn)return;const Un=W[Ce+"-left"+Ee];if(!Un)return;const Xn=[wt,Qt,hn,Un];let co=Xn.length-1;for(;co--&&Xn[co]===Xn[co+1];);co>-1&&ot||(W[Ce+Ee]=co===-1?Xn[0]:Xn.join(" "),delete W[Ce+"-top"+Ee],delete W[Ce+"-right"+Ee],delete W[Ce+"-bottom"+Ee],delete W[Ce+"-left"+Ee])},re=Ce=>{const Ee=W[Ce];if(!Ee)return;const ot=Ee.indexOf(",")>-1?[Ee]:Ee.split(" ");let wt=ot.length;for(;wt--;)if(ot[wt]!==ot[0])return!1;return W[Ce]=ot[0],!0},se=(Ce,Ee,ot,wt)=>{re(Ee)&&re(ot)&&re(wt)&&(W[Ce]=W[Ee]+" "+W[ot]+" "+W[wt],delete W[Ee],delete W[ot],delete W[wt])},ue=Ce=>(q=!0,m[Ce]),Oe=(Ce,Ee)=>(q&&(Ce=Ce.replace(/\uFEFF[0-9]/g,ot=>m[ot])),Ee||(Ce=Ce.replace(/\\([\'\";:])/g,"$1")),Ce),Ue=Ce=>String.fromCharCode(parseInt(Ce.slice(1),16)),st=Ce=>Ce.replace(/\\[0-9a-f]+/gi,Ue),$e=(Ce,Ee,ot,wt,Qt,hn)=>{if(Qt=Qt||hn,Qt)return Qt=Oe(Qt),"'"+Qt.replace(/\'/g,"\\'")+"'";if(Ee=Oe(Ee||ot||wt||""),!e.allow_script_urls){const Un=Ee.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(Un)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(Un))return""}return Z&&(Ee=Z.call(K,Ee,"style")),"url('"+Ee.replace(/\'/g,"\\'")+"')"};if(B){B=B.replace(/[\u0000-\u001F]/g,""),B=B.replace(/\\[\"\';:\uFEFF]/g,ue).replace(/\"[^\"]+\"|\'[^\']+\'/g,Ee=>Ee.replace(/[;:]/g,ue));let Ce;for(;Ce=r.exec(B);){r.lastIndex=Ce.index+Ce[0].length;let Ee=Ce[1].replace(c,"").toLowerCase(),ot=Ce[2].replace(c,"");if(Ee&&ot){if(Ee=st(Ee),ot=st(ot),Ee.indexOf(E)!==-1||Ee.indexOf('"')!==-1||!e.allow_script_urls&&(Ee==="behavior"||/expression\s*\(|\/\*|\*\//.test(ot)))continue;Ee==="font-weight"&&ot==="700"?ot="bold":(Ee==="color"||Ee==="background-color")&&(ot=ot.toLowerCase()),u.test(ot)||hf(ot).each(wt=>{ot=Mi($v(wt)).toLowerCase()}),ot=ot.replace(o,$e),W[Ee]=q?Oe(ot,!0):ot}}ne("border","",!0),ne("border","-width"),ne("border","-color"),ne("border","-style"),ne("padding",""),ne("margin",""),se("border","border-width","border-style","border-color"),W.border==="medium none"&&delete W.border,W["border-image"]==="none"&&delete W["border-image"]}return W},serialize:(B,W)=>{let q="";const Z=(ne,re)=>{const se=re[ne];if(se)for(let ue=0,Oe=se.length;ue<Oe;ue++){const Ue=se[ue],st=B[Ue];st&&(q+=(q.length>0?" ":"")+Ue+": "+st+";")}},K=(ne,re)=>{if(!C||!re)return!0;let se=C["*"];return se&&se[ne]?!1:(se=C[re],!(se&&se[ne]))};return W&&v?(Z("*",v),Z(W,v)):lt(B,(ne,re)=>{ne&&K(re,W)&&(q+=(q.length>0?" ":"")+re+": "+ne+";")}),q}};return M},Lm={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},po=e=>e instanceof Event||oe(e.initEvent),gl=e=>e.isDefaultPrevented===dt||e.isDefaultPrevented===De,tS=e=>_n(e.preventDefault)||po(e),ni=(e,n)=>{const o=n??{};for(const r in e)Ft(Lm,r)||(o[r]=e[r]);return Ae(e.composedPath)&&(o.composedPath=()=>e.composedPath()),Ae(e.getModifierState)&&(o.getModifierState=r=>e.getModifierState(r)),Ae(e.getTargetRanges)&&(o.getTargetRanges=()=>e.getTargetRanges()),o},Fv=(e,n,o,r)=>{var c;const u=ni(n,r);return u.type=e,_n(u.target)&&(u.target=(c=u.srcElement)!==null&&c!==void 0?c:o),tS(n)&&(u.preventDefault=()=>{u.defaultPrevented=!0,u.isDefaultPrevented=dt,oe(n.preventDefault)&&n.preventDefault()},u.stopPropagation=()=>{u.cancelBubble=!0,u.isPropagationStopped=dt,oe(n.stopPropagation)&&n.stopPropagation()},u.stopImmediatePropagation=()=>{u.isImmediatePropagationStopped=dt,u.stopPropagation()},gl(u)||(u.isDefaultPrevented=u.defaultPrevented===!0?dt:De,u.isPropagationStopped=u.cancelBubble===!0?dt:De,u.isImmediatePropagationStopped=De)),u},Rh="mce-data-",Hm=/^(?:mouse|contextmenu)|click/,Dh=(e,n,o,r)=>{e.addEventListener(n,o,r||!1)},Ma=(e,n,o,r)=>{e.removeEventListener(n,o,r||!1)},nS=e=>Ae(e)&&Hm.test(e.type),Mh=(e,n)=>{const o=Fv(e.type,e,document,n);if(nS(e)&&fs(e.pageX)&&!fs(e.clientX)){const r=o.target.ownerDocument||document,c=r.documentElement,u=r.body,m=o;m.pageX=e.clientX+(c&&c.scrollLeft||u&&u.scrollLeft||0)-(c&&c.clientLeft||u&&u.clientLeft||0),m.pageY=e.clientY+(c&&c.scrollTop||u&&u.scrollTop||0)-(c&&c.clientTop||u&&u.clientTop||0)}return o},Lv=(e,n,o)=>{const r=e.document,c={type:"ready"};if(o.domLoaded){n(c);return}const u=()=>r.readyState==="complete"||r.readyState==="interactive"&&r.body,m=()=>{Ma(e,"DOMContentLoaded",m),Ma(e,"load",m),o.domLoaded||(o.domLoaded=!0,n(c)),e=null};u()?m():Dh(e,"DOMContentLoaded",m),o.domLoaded||Dh(e,"load",m)};class Xu{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=Rh+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(n,o,r,c){const u=this;let m;const v=window,C=B=>{u.executeHandlers(Mh(B||v.event),E)};if(!n||Me(n)||ql(n))return r;let E;n[u.expando]?E=n[u.expando]:(E=u.count++,n[u.expando]=E,u.events[E]={}),c=c||n;const D=o.split(" ");let M=D.length;for(;M--;){let B=D[M],W=C,q=!1,Z=!1;if(B==="DOMContentLoaded"&&(B="ready"),u.domLoaded&&B==="ready"&&n.readyState==="complete"){r.call(c,Mh({type:B}));continue}!u.hasFocusIn&&(B==="focusin"||B==="focusout")&&(q=!0,Z=B==="focusin"?"focus":"blur",W=K=>{const ne=Mh(K||v.event);ne.type=ne.type==="focus"?"focusin":"focusout",u.executeHandlers(ne,E)}),m=u.events[E][B],m?B==="ready"&&u.domLoaded?r(Mh({type:B})):m.push({func:r,scope:c}):(u.events[E][B]=m=[{func:r,scope:c}],m.fakeName=Z,m.capture=q,m.nativeHandler=W,B==="ready"?Lv(n,W,u):Dh(n,Z||B,W,q))}return n=m=null,r}unbind(n,o,r){if(!n||Me(n)||ql(n))return this;const c=n[this.expando];if(c){let u=this.events[c];if(o){const m=o.split(" ");let v=m.length;for(;v--;){const C=m[v],E=u[C];if(E){if(r){let D=E.length;for(;D--;)if(E[D].func===r){const M=E.nativeHandler,B=E.fakeName,W=E.capture,q=E.slice(0,D).concat(E.slice(D+1));q.nativeHandler=M,q.fakeName=B,q.capture=W,u[C]=q}}(!r||E.length===0)&&(delete u[C],Ma(n,E.fakeName||C,E.nativeHandler,E.capture))}}}else lt(u,(m,v)=>{Ma(n,m.fakeName||v,m.nativeHandler,m.capture)}),u={};for(const m in u)if(Ft(u,m))return this;delete this.events[c];try{delete n[this.expando]}catch{n[this.expando]=null}}return this}fire(n,o,r){return this.dispatch(n,o,r)}dispatch(n,o,r){if(!n||Me(n)||ql(n))return this;const c=Mh({type:o,target:n},r);do{const u=n[this.expando];u&&this.executeHandlers(c,u),n=n.parentNode||n.ownerDocument||n.defaultView||n.parentWindow}while(n&&!c.isPropagationStopped());return this}clean(n){if(!n||Me(n)||ql(n))return this;if(n[this.expando]&&this.unbind(n),n.getElementsByTagName||(n=n.document),n&&n.getElementsByTagName){this.unbind(n);const o=n.getElementsByTagName("*");let r=o.length;for(;r--;)n=o[r],n[this.expando]&&this.unbind(n)}return this}destroy(){this.events={}}cancel(n){return n&&(n.preventDefault(),n.stopImmediatePropagation()),!1}executeHandlers(n,o){const r=this.events[o],c=r&&r[n.type];if(c)for(let u=0,m=c.length;u<m;u++){const v=c[u];if(v&&v.func.call(v.scope,n)===!1&&n.preventDefault(),n.isImmediatePropagationStopped())return}}}Xu.Event=new Xu;const Hv=ze.each,oS=ze.grep,Vv="data-mce-style",sS=ze.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),$r=(e,n,o)=>{_n(o)||o===""?Rs(e,n):io(e,n,o)},Pa=e=>e.replace(/[A-Z]/g,n=>"-"+n.toLowerCase()),Fe=(e,n)=>{let o=0;if(e)for(let r=e.nodeType,c=e.previousSibling;c;c=c.previousSibling){const u=c.nodeType;n&&Me(c)&&(u===r||!c.data.length)||(o++,r=u)}return o},M1=(e,n)=>{const o=Es(n,"style"),r=e.serialize(e.parse(o),On(n));$r(n,Vv,r)},Ws=(e,n)=>Za(e)?Ft(sS,n)?e+"":e+"px":e,P1=(e,n,o)=>{const r=Pa(n);_n(o)||o===""?Vs(e,r):tn(e,r,Ws(o,r))},rS=(e,n,o)=>{const r=n.keep_values,c={set:(m,v,C)=>{const E=X.fromDom(m);oe(n.url_converter)&&Ae(v)&&(v=n.url_converter.call(n.url_converter_scope||o(),String(v),C,m));const D="data-mce-"+C;$r(E,D,v),$r(E,C,v)},get:(m,v)=>{const C=X.fromDom(m);return Es(C,"data-mce-"+v)||Es(C,v)}},u={style:{set:(m,v)=>{const C=X.fromDom(m);r&&$r(C,Vv,v),Rs(C,"style"),ee(v)&&qr(C,e.parse(v))},get:m=>{const v=X.fromDom(m),C=Es(v,Vv)||Es(v,"style");return e.serialize(e.parse(C),On(v))}}};return r&&(u.href=u.src=c),u},ao=(e,n={})=>{const o={},r=window,c={};let u=0;const m=!0,v=!0,C=Mv.forElement(X.fromDom(e),{contentCssCors:n.contentCssCors,referrerPolicy:n.referrerPolicy}),E=[],D=n.schema?n.schema:Bn({}),M=Iv({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),B=n.ownEvents?new Xu:Xu.Event,W=D.getBlockElements(),q=ge=>ee(ge)?Ft(W,ge):pt(ge)&&(Ft(W,ge.nodeName)||Wu(D,ge)),Z=ge=>ge&&e&&ee(ge)?e.getElementById(ge):ge,K=ge=>{const pe=Z(ge);return Ae(pe)?X.fromDom(pe):null},ne=(ge,pe,Ke="")=>{let Ve;const Nt=K(ge);if(Ae(Nt)&&Xa(Nt)){const mn=G0[pe];mn&&mn.get?Ve=mn.get(Nt.dom,pe):Ve=Es(Nt,pe)}return Ae(Ve)?Ve:Ke},re=ge=>{const pe=Z(ge);return _n(pe)?[]:pe.attributes},se=(ge,pe,Ke)=>{bt(ge,Ve=>{if(pt(Ve)){const Nt=X.fromDom(Ve),mn=Ke===""?null:Ke,xo=Es(Nt,pe),$l=G0[pe];$l&&$l.set?$l.set(Nt.dom,mn,pe):$r(Nt,pe,mn),xo!==mn&&n.onSetAttrib&&n.onSetAttrib({attrElm:Nt.dom,attrName:pe,attrValue:mn})}})},ue=(ge,pe)=>ge.cloneNode(pe),Oe=()=>n.root_element||e.body,Ue=ge=>{const pe=Lu(ge);return{x:pe.x,y:pe.y,w:pe.width,h:pe.height}},st=(ge,pe)=>ul(e.body,Z(ge),pe),$e=(ge,pe,Ke)=>{bt(ge,Ve=>{const Nt=X.fromDom(Ve);P1(Nt,pe,Ke),n.update_styles&&M1(M,Nt)})},Ce=(ge,pe)=>{bt(ge,Ke=>{const Ve=X.fromDom(Ke);lt(pe,(Nt,mn)=>{P1(Ve,mn,Nt)}),n.update_styles&&M1(M,Ve)})},Ee=(ge,pe,Ke)=>{const Ve=Z(ge);if(!(_n(Ve)||!ki(Ve)&&!_v(Ve)))return Ke?Yc(X.fromDom(Ve),Pa(pe)):(pe=pe.replace(/-(\D)/g,(Nt,mn)=>mn.toUpperCase()),pe==="float"&&(pe="cssFloat"),Ve.style?Ve.style[pe]:void 0)},ot=ge=>{const pe=Z(ge);if(!pe)return{w:0,h:0};let Ke=Ee(pe,"width"),Ve=Ee(pe,"height");return(!Ke||Ke.indexOf("px")===-1)&&(Ke="0"),(!Ve||Ve.indexOf("px")===-1)&&(Ve="0"),{w:parseInt(Ke,10)||pe.offsetWidth||pe.clientWidth,h:parseInt(Ve,10)||pe.offsetHeight||pe.clientHeight}},wt=ge=>{const pe=Z(ge),Ke=st(pe),Ve=ot(pe);return{x:Ke.x,y:Ke.y,w:Ve.w,h:Ve.h}},Qt=(ge,pe)=>{if(!ge)return!1;const Ke=Tn(ge)?ge:[ge];return vo(Ke,Ve=>Ja(X.fromDom(Ve),pe))},hn=(ge,pe,Ke,Ve)=>{const Nt=[];let mn=Z(ge);Ve=Ve===void 0;const xo=Ke||(Oe().nodeName!=="BODY"?Oe().parentNode:null);if(ee(pe))if(pe==="*")pe=pt;else{const $l=pe;pe=rw=>Qt(rw,$l)}for(;mn&&!(mn===xo||_n(mn.nodeType)||rs(mn)||rr(mn));){if(!pe||pe(mn))if(Ve)Nt.push(mn);else return[mn];mn=mn.parentNode}return Ve?Nt:null},Un=(ge,pe,Ke)=>{const Ve=hn(ge,pe,Ke,!1);return Ve&&Ve.length>0?Ve[0]:null},Xn=(ge,pe,Ke)=>{let Ve=pe;if(ge){ee(pe)&&(Ve=Nt=>Qt(Nt,pe));for(let Nt=ge[Ke];Nt;Nt=Nt[Ke])if(oe(Ve)&&Ve(Nt))return Nt}return null},co=(ge,pe)=>Xn(ge,pe,"nextSibling"),Or=(ge,pe)=>Xn(ge,pe,"previousSibling"),Jn=ge=>oe(ge.querySelectorAll),Xe=(ge,pe)=>{var Ke,Ve;const Nt=(Ve=(Ke=Z(pe))!==null&&Ke!==void 0?Ke:n.root_element)!==null&&Ve!==void 0?Ve:e;return Jn(Nt)?_a(Nt.querySelectorAll(ge)):[]},bt=function(ge,pe,Ke){const Ve=Ke??this;if(Tn(ge)){const Nt=[];return Hv(ge,(mn,xo)=>{const $l=Z(mn);$l&&Nt.push(pe.call(Ve,$l,xo))}),Nt}else{const Nt=Z(ge);return Nt?pe.call(Ve,Nt):!1}},En=(ge,pe)=>{bt(ge,Ke=>{lt(pe,(Ve,Nt)=>{se(Ke,Nt,Ve)})})},nt=(ge,pe)=>{bt(ge,Ke=>{const Ve=X.fromDom(Ke);_c(Ve,pe)})},kt=(ge,pe,Ke,Ve,Nt)=>bt(ge,mn=>{const xo=ee(pe)?e.createElement(pe):pe;return Ae(Ke)&&En(xo,Ke),Ve&&(!ee(Ve)&&Ve.nodeType?xo.appendChild(Ve):ee(Ve)&&nt(xo,Ve)),Nt?xo:mn.appendChild(xo)}),rn=(ge,pe,Ke)=>kt(e.createElement(ge),ge,pe,Ke,!0),rt=qu.decode,nn=qu.encodeAllRaw,an=(ge,pe,Ke="")=>{let Ve="<"+ge;for(const Nt in pe)Ea(pe,Nt)&&(Ve+=" "+Nt+'="'+nn(pe[Nt])+'"');return Ka(Ke)&&Ft(D.getVoidElements(),ge)?Ve+" />":Ve+">"+Ke+"</"+ge+">"},Fs=ge=>{const pe=e.createElement("div"),Ke=e.createDocumentFragment();Ke.appendChild(pe),ge&&(pe.innerHTML=ge);let Ve;for(;Ve=pe.firstChild;)Ke.appendChild(Ve);return Ke.removeChild(pe),Ke},Fn=(ge,pe)=>bt(ge,Ke=>{const Ve=X.fromDom(Ke);return pe&&we(gr(Ve),Nt=>{Co(Nt)&&Nt.dom.length===0?go(Nt):hr(Ve,Nt)}),go(Ve),Ve.dom}),Cs=ge=>bt(ge,pe=>{const Ke=pe.attributes;for(let Ve=Ke.length-1;Ve>=0;Ve--)pe.removeAttributeNode(Ke.item(Ve))}),Xi=ge=>M.parse(ge),Ml=(ge,pe)=>M.serialize(ge,pe),ya=ge=>{if(Fd!==ao.DOM&&e===document){if(o[ge])return;o[ge]=!0}let pe=e.getElementById("mceDefaultStyles");if(!pe){pe=e.createElement("style"),pe.id="mceDefaultStyles",pe.type="text/css";const Ke=e.head;Ke.firstChild?Ke.insertBefore(pe,Ke.firstChild):Ke.appendChild(pe)}pe.styleSheet?pe.styleSheet.cssText+=ge:pe.appendChild(e.createTextNode(ge))},Fc=ge=>{ge||(ge=""),we(ge.split(","),pe=>{c[pe]=!0,C.load(pe).catch(Bt)})},Ji=(ge,pe,Ke)=>{bt(ge,Ve=>{if(pt(Ve)){const Nt=X.fromDom(Ve),mn=pe.split(" ");we(mn,xo=>{Ae(Ke)?(Ke?nf:of)(Nt,xo):Ew(Nt,xo)})}})},Lc=(ge,pe)=>{Ji(ge,pe,!0)},pi=(ge,pe)=>{Ji(ge,pe,!1)},xt=(ge,pe)=>{const Ke=K(ge),Ve=pe.split(" ");return Ae(Ke)&&ur(Ve,Nt=>dh(Ke,Nt))},Cn=ge=>{bt(ge,pe=>Vs(X.fromDom(pe),"display"))},So=ge=>{bt(ge,pe=>tn(X.fromDom(pe),"display","none"))},Vo=ge=>{const pe=K(ge);return Ae(pe)&&jo(Kr(pe,"display"),"none")},ds=ge=>(ge||"mce_")+u++,Ls=ge=>{const pe=K(ge);return Ae(pe)?pt(pe.dom)?pe.dom.outerHTML:gn(pe):""},es=(ge,pe)=>{bt(ge,Ke=>{pt(Ke)&&(Ke.outerHTML=pe)})},ts=(ge,pe)=>{const Ke=Z(pe);return bt(ge,Ve=>{const Nt=Ke==null?void 0:Ke.parentNode,mn=Ke==null?void 0:Ke.nextSibling;return Nt&&(mn?Nt.insertBefore(Ve,mn):Nt.appendChild(Ve)),Ve})},aa=(ge,pe,Ke)=>bt(pe,Ve=>{var Nt;const mn=Tn(pe)?ge.cloneNode(!0):ge;return Ke&&Hv(oS(Ve.childNodes),xo=>{mn.appendChild(xo)}),(Nt=Ve.parentNode)===null||Nt===void 0||Nt.replaceChild(mn,Ve),Ve}),Pl=(ge,pe)=>{if(ge.nodeName!==pe.toUpperCase()){const Ke=rn(pe);return Hv(re(ge),Ve=>{se(Ke,Ve.nodeName,ne(ge,Ve.nodeName))}),aa(Ke,ge,!0),Ke}else return ge},Nl=(ge,pe)=>{let Ke=ge;for(;Ke;){let Ve=pe;for(;Ve&&Ke!==Ve;)Ve=Ve.parentNode;if(Ke===Ve)break;Ke=Ke.parentNode}return!Ke&&ge.ownerDocument?ge.ownerDocument.documentElement:Ke},Qi=(ge,pe,Ke)=>Hc(pe)?ps(D,ge,{...Ke,isContent:Nt=>{const mn=Nt.nodeName.toLowerCase();return!!pe[mn]}}):ps(D,ge,Ke),bi=()=>e.createRange(),rm=(ge,pe,Ke)=>{let Ve=bi(),Nt,mn;if(ge&&pe&&ge.parentNode&&pe.parentNode){const xo=ge.parentNode;return Ve.setStart(xo,Fe(ge)),Ve.setEnd(pe.parentNode,Fe(pe)),Nt=Ve.extractContents(),Ve=bi(),Ve.setStart(pe.parentNode,Fe(pe)+1),Ve.setEnd(xo,Fe(ge)+1),mn=Ve.extractContents(),xo.insertBefore(sc(Fd,Nt,D),ge),Ke?xo.insertBefore(Ke,ge):xo.insertBefore(pe,ge),xo.insertBefore(sc(Fd,mn,D),ge),Fn(ge),Ke||pe}else return},Xp=(ge,pe,Ke,Ve)=>{if(Tn(ge)){let Nt=ge.length;const mn=[];for(;Nt--;)mn[Nt]=Xp(ge[Nt],pe,Ke,Ve);return mn}else return n.collect&&(ge===e||ge===r)&&E.push([ge,pe,Ke,Ve]),B.bind(ge,pe,Ke,Ve||Fd)},Yg=(ge,pe,Ke)=>{if(Tn(ge)){let Ve=ge.length;const Nt=[];for(;Ve--;)Nt[Ve]=Yg(ge[Ve],pe,Ke);return Nt}else{if(E.length>0&&(ge===e||ge===r)){let Ve=E.length;for(;Ve--;){const[Nt,mn,xo]=E[Ve];ge===Nt&&(!pe||pe===mn)&&(!Ke||Ke===xo)&&B.unbind(Nt,mn,xo)}}return B.unbind(ge,pe,Ke)}},ow=(ge,pe,Ke)=>B.dispatch(ge,pe,Ke),Bl=(ge,pe,Ke)=>B.dispatch(ge,pe,Ke),sw=ge=>{if(ge&&ki(ge)){const pe=ge.getAttribute("data-mce-contenteditable");return pe&&pe!=="inherit"?pe:ge.contentEditable!=="inherit"?ge.contentEditable:null}else return null},Fd={doc:e,settings:n,win:r,files:c,stdMode:m,boxModel:v,styleSheetLoader:C,boundEvents:E,styles:M,schema:D,events:B,isBlock:q,root:null,clone:ue,getRoot:Oe,getViewPort:Ue,getRect:wt,getSize:ot,getParent:Un,getParents:hn,get:Z,getNext:co,getPrev:Or,select:Xe,is:Qt,add:kt,create:rn,createHTML:an,createFragment:Fs,remove:Fn,setStyle:$e,getStyle:Ee,setStyles:Ce,removeAllAttribs:Cs,setAttrib:se,setAttribs:En,getAttrib:ne,getPos:st,parseStyle:Xi,serializeStyle:Ml,addStyle:ya,loadCSS:Fc,addClass:Lc,removeClass:pi,hasClass:xt,toggleClass:Ji,show:Cn,hide:So,isHidden:Vo,uniqueId:ds,setHTML:nt,getOuterHTML:Ls,setOuterHTML:es,decode:rt,encode:nn,insertAfter:ts,replace:aa,rename:Pl,findCommonAncestor:Nl,run:bt,getAttribs:re,isEmpty:Qi,createRng:bi,nodeIndex:Fe,split:rm,bind:Xp,unbind:Yg,fire:Bl,dispatch:ow,getContentEditable:sw,getContentEditableParent:ge=>{const pe=Oe();let Ke=null;for(let Ve=ge;Ve&&Ve!==pe&&(Ke=sw(Ve),Ke===null);Ve=Ve.parentNode);return Ke},isEditable:ge=>{if(Ae(ge)){const pe=pt(ge)?ge:ge.parentElement;return Ae(pe)&&ki(pe)&&Mn(X.fromDom(pe))}else return!1},destroy:()=>{if(E.length>0){let ge=E.length;for(;ge--;){const[pe,Ke,Ve]=E[ge];B.unbind(pe,Ke,Ve)}}lt(c,(ge,pe)=>{C.unload(pe),delete c[pe]})},isChildOf:(ge,pe)=>ge===pe||pe.contains(ge),dumpRng:ge=>"startContainer: "+ge.startContainer.nodeName+", startOffset: "+ge.startOffset+", endContainer: "+ge.endContainer.nodeName+", endOffset: "+ge.endOffset},G0=rS(M,n,et(Fd));return Fd};ao.DOM=ao(document),ao.nodeIndex=Fe;const eu=ao.DOM,N1=0,hk=1,tu=2,B1=3;class Pi{constructor(n={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=n}_setReferrerPolicy(n){this.settings.referrerPolicy=n}loadScript(n){return new Promise((o,r)=>{const c=eu;let u;const m=()=>{c.remove(E),u&&(u.onerror=u.onload=u=null)},v=()=>{m(),o()},C=()=>{m(),r("Failed to load script: "+n)},E=c.uniqueId();u=document.createElement("script"),u.id=E,u.type="text/javascript",u.src=ze._addCacheSuffix(n),this.settings.referrerPolicy&&c.setAttrib(u,"referrerpolicy",this.settings.referrerPolicy),u.onload=v,u.onerror=C,(document.getElementsByTagName("head")[0]||document.body).appendChild(u)})}isDone(n){return this.states[n]===tu}markDone(n){this.states[n]=tu}add(n){const o=this;return o.queue.push(n),o.states[n]===void 0&&(o.states[n]=N1),new Promise((c,u)=>{o.scriptLoadedCallbacks[n]||(o.scriptLoadedCallbacks[n]=[]),o.scriptLoadedCallbacks[n].push({resolve:c,reject:u})})}load(n){return this.add(n)}remove(n){delete this.states[n],delete this.scriptLoadedCallbacks[n]}loadQueue(){const n=this.queue;return this.queue=[],this.loadScripts(n)}loadScripts(n){const o=this,r=(C,E)=>{mo(o.scriptLoadedCallbacks,E).each(D=>{we(D,M=>M[C](E))}),delete o.scriptLoadedCallbacks[E]},c=C=>{const E=Mt(C,D=>D.status==="rejected");return E.length>0?Promise.reject(vc(E,({reason:D})=>Tn(D)?D:[D])):Promise.resolve()},u=C=>Promise.allSettled(Xt(C,E=>o.states[E]===tu?(r("resolve",E),Promise.resolve()):o.states[E]===B1?(r("reject",E),Promise.reject(E)):(o.states[E]=hk,o.loadScript(E).then(()=>{o.states[E]=tu,r("resolve",E);const D=o.queue;return D.length>0?(o.queue=[],u(D).then(c)):Promise.resolve()},()=>(o.states[E]=B1,r("reject",E),Promise.reject(E)))))),m=C=>(o.loading=!0,u(C).then(E=>{o.loading=!1;const D=o.queueLoadedCallbacks.shift();return L.from(D).each(ia),c(E)})),v=r1(n);return o.loading?new Promise((C,E)=>{o.queueLoadedCallbacks.push(()=>{m(v).then(C,E)})}):m(v)}}Pi.ScriptLoader=new Pi;const aS=(e,n)=>{const o=e.indexOf(n);return o!==-1&&e.indexOf(n,o+1)>o},zv=e=>sn(e)&&Ft(e,"raw"),oo=e=>Tn(e)&&e.length>1,Vm={},Oo=lo("en"),cS=()=>mo(Vm,Oo.get()),Ms={getData:()=>Ln(Vm,e=>({...e})),setCode:e=>{e&&Oo.set(e)},getCode:()=>Oo.get(),add:(e,n)=>{let o=Vm[e];o||(Vm[e]=o={});const r=Xt(Wr(n),c=>c.toLowerCase());lt(n,(c,u)=>{const m=u.toLowerCase();m!==u&&aS(r,m)?(Ft(n,m)||(o[m]=c),o[u]=c):o[m]=c})},translate:e=>{const n=cS().getOr({}),o=m=>oe(m)?Object.prototype.toString.call(m):r(m)?"":""+m,r=m=>m===""||m===null||m===void 0,c=m=>{const v=o(m);return Ft(n,v)?o(n[v]):mo(n,v.toLowerCase()).map(o).getOr(v)},u=m=>m.replace(/{context:\w+}$/,"");if(r(e))return"";if(zv(e))return o(e.raw);if(oo(e)){const m=e.slice(1),v=c(e[0]).replace(/\{([0-9]+)\}/g,(C,E)=>Ft(m,E)?o(m[E]):C);return u(v)}return u(c(e))},isRtl:()=>cS().bind(e=>mo(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>Ft(Vm,e)},Yr=()=>{const e=[],n={},o={},r=[],c=(Z,K)=>{const ne=Mt(r,re=>re.name===Z&&re.state===K);we(ne,re=>re.resolve())},u=Z=>Ft(n,Z),m=Z=>Ft(o,Z),v=Z=>{if(o[Z])return o[Z].instance},C=(Z,K)=>{const ne=Ms.getCode(),re=","+(K||"")+",";!ne||K&&re.indexOf(","+ne+",")===-1||Pi.ScriptLoader.add(n[Z]+"/langs/"+ne+".js")},E=(Z,K)=>{Yr.languageLoad!==!1&&(u(Z)?C(Z,K):q(Z,"loaded").then(()=>C(Z,K)))},D=(Z,K)=>(e.push(K),o[Z]={instance:K},c(Z,"added"),K),M=Z=>{delete n[Z],delete o[Z]},B=(Z,K)=>ee(K)?ee(Z)?{prefix:"",resource:K,suffix:""}:{prefix:Z.prefix,resource:K,suffix:Z.suffix}:K,W=(Z,K)=>{if(n[Z])return Promise.resolve();let ne=ee(K)?K:K.prefix+K.resource+K.suffix;ne.indexOf("/")!==0&&ne.indexOf("://")===-1&&(ne=Yr.baseURL+"/"+ne),n[Z]=ne.substring(0,ne.lastIndexOf("/"));const re=()=>(c(Z,"loaded"),Promise.resolve());return o[Z]?re():Pi.ScriptLoader.add(ne).then(re)},q=(Z,K="added")=>K==="added"&&m(Z)||K==="loaded"&&u(Z)?Promise.resolve():new Promise(ne=>{r.push({name:Z,state:K,resolve:ne})});return{items:e,urls:n,lookup:o,get:v,requireLangPack:E,add:D,remove:M,createUrl:B,load:W,waitFor:q}};Yr.languageLoad=!0,Yr.baseURL="",Yr.PluginManager=Yr(),Yr.ThemeManager=Yr(),Yr.ModelManager=Yr();const Ph=(e,n)=>{let o=null;return{cancel:()=>{ae(o)||(clearTimeout(o),o=null)},throttle:(...u)=>{ae(o)&&(o=setTimeout(()=>{o=null,e.apply(null,u)},n))}}},Ju=(e,n)=>{let o=null;const r=()=>{ae(o)||(clearTimeout(o),o=null)};return{cancel:r,throttle:(...u)=>{r(),o=setTimeout(()=>{o=null,e.apply(null,u)},n)}}},Uv=(e,n,o)=>Et(e,n,o).isSome(),Um=et("mce-annotation"),hl=et("data-mce-annotation"),Wm=et("data-mce-annotation-uid"),pf=et("data-mce-annotation-active"),Qu=et("data-mce-annotation-classes"),pl=et("data-mce-annotation-attrs"),bf=e=>n=>Wn(n,e),vf=(e,n)=>{const o=e.selection.getRng(),r=X.fromDom(o.startContainer),c=X.fromDom(e.getBody()),u=n.fold(()=>"."+Um(),C=>`[${hl()}="${C}"]`),m=Bu(r,o.startOffset).getOr(r);return af(m,u,bf(c)).bind(C=>xi(C,`${Wm()}`).bind(E=>xi(C,`${hl()}`).map(D=>{const M=$1(e,E);return{uid:E,name:D,elements:M}})))},Ck=e=>Xa(e)&&dh(e,Um()),Wv=(e,n)=>tf(e,"data-mce-bogus")||Uv(e,'[data-mce-bogus="all"]',bf(n)),$1=(e,n)=>{const o=X.fromDom(e.getBody()),r=sr(o,`[${Wm()}="${n}"]`);return Mt(r,c=>!Wv(c,o))},iS=(e,n)=>{const o=X.fromDom(e.getBody()),r=sr(o,`[${hl()}="${n}"]`),c={};return we(r,u=>{if(!Wv(u,o)){const m=Es(u,Wm()),v=mo(c,m).getOr([]);c[m]=v.concat([u])}}),c},Zv=(e,n)=>{const o=lo({}),r=()=>({listeners:[],previous:vr()}),c=(M,B)=>{u(M,W=>(B(W),W))},u=(M,B)=>{const W=o.get(),q=mo(W,M).getOrThunk(r),Z=B(q);W[M]=Z,o.set(W)},m=(M,B,W)=>{c(M,q=>{we(q.listeners,Z=>Z(!0,M,{uid:B,nodes:Xt(W,K=>K.dom)}))})},v=M=>{c(M,B=>{we(B.listeners,W=>W(!1,M))})},C=(M,B)=>{we($1(e,M),W=>{B?io(W,pf(),"true"):Rs(W,pf())})},E=Ju(()=>{const M=Io(n.getNames());we(M,B=>{u(B,W=>{const q=W.previous.get();return vf(e,L.some(B)).fold(()=>{q.each(Z=>{v(B),W.previous.clear(),C(Z,!1)})},({uid:Z,name:K,elements:ne})=>{jo(q,Z)||(q.each(re=>C(re,!1)),m(K,Z,ne),W.previous.set(Z),C(Z,!0))}),{previous:W.previous,listeners:W.listeners}})})},30);return e.on("remove",()=>{E.cancel()}),e.on("NodeChange",()=>{E.throttle()}),{addListener:(M,B)=>{u(M,W=>({previous:W.previous,listeners:W.listeners.concat([B])}))}}},I1=(e,n)=>{const o=hl(),r=u=>L.from(u.attr(o)).bind(n.lookup),c=u=>{var m,v;u.attr(Wm(),null),u.attr(hl(),null),u.attr(pf(),null);const C=L.from(u.attr(pl())).map(B=>B.split(",")).getOr([]),E=L.from(u.attr(Qu())).map(B=>B.split(",")).getOr([]);we(C,B=>u.attr(B,null));const D=(v=(m=u.attr("class"))===null||m===void 0?void 0:m.split(" "))!==null&&v!==void 0?v:[],M=o1(D,[Um()].concat(E));u.attr("class",M.length>0?M.join(" "):null),u.attr(Qu(),null),u.attr(pl(),null)};e.serializer.addTempAttr(pf()),e.serializer.addAttributeFilter(o,u=>{for(const m of u)r(m).each(v=>{v.persistent===!1&&(m.name==="span"?m.unwrap():c(m))})})},jv=()=>{const e={};return{register:(c,u)=>{e[c]={name:c,settings:u}},lookup:c=>mo(e,c).map(u=>u.settings),getNames:()=>Wr(e)}};let F1=0;const Zm=e=>{const o=new Date().getTime(),r=Math.floor(Math.random()*1e9);return F1++,e+"_"+r+F1+String(o)},L1=(e,n)=>{we(n,o=>{nf(e,o)})},aM=(e,n)=>{we(n,o=>{of(e,o)})},wk=(e,n)=>X.fromDom(e.dom.cloneNode(n)),Ni=e=>wk(e,!1),jm=e=>wk(e,!0),lS=(e,n)=>{const o=X.fromTag(n),r=ym(e);return Zl(o,r),o},uS=(e,n)=>{const o=lS(e,n);sl(e,o);const r=gr(e);return Iu(o,r),go(e),o},H1=(e,n,o=De)=>{const r=new zs(e,n),c=u=>{let m;do m=r[u]();while(m&&!Me(m)&&!o(m));return L.from(m).filter(Me)};return{current:()=>L.from(r.current()).filter(Me),next:()=>c("next"),prev:()=>c("prev"),prev2:()=>c("prev2")}},ed=(e,n)=>{const o=n||(m=>e.isBlock(m)||Bo(m)||ho(m)),r=(m,v,C,E)=>{if(Me(m)){const D=E(m,v,m.data);if(D!==-1)return L.some({container:m,offset:D})}return C().bind(D=>r(D.container,D.offset,C,E))};return{backwards:(m,v,C,E)=>{const D=H1(m,E??e.getRoot(),o);return r(m,v,()=>D.prev().map(M=>({container:M,offset:M.length})),C).getOrNull()},forwards:(m,v,C,E)=>{const D=H1(m,E??e.getRoot(),o);return r(m,v,()=>D.next().map(M=>({container:M,offset:0})),C).getOrNull()}}},Gv=((e,n)=>{const o=u=>{if(!e(u))throw new Error("Can only get "+n+" value of a "+n+" node");return r(u).getOr("")},r=u=>e(u)?L.from(u.dom.nodeValue):L.none();return{get:o,getOption:r,set:(u,m)=>{if(!e(u))throw new Error("Can only set raw "+n+" value of a "+n+" node");u.dom.nodeValue=m}}})(Co,"text"),Nh=e=>Gv.get(e),xk=e=>Gv.getOption(e),V1=(e,n)=>Gv.set(e,n),Gm=["td","th"],dS=["thead","tbody","tfoot"],z1=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],qv=["li","dd","dt"],fS=["ul","ol","dl"],Cr=["pre","script","textarea","style"],Bh=e=>{let n;return o=>(n=n||As(e,dt),Ft(n,On(o)))},Kv=e=>On(e)==="table",qm=e=>Xa(e)&&On(e)==="br",mS=Bh(z1),Bi=Bh(fS),ga=Bh(qv),Km=Bh(dS),Ym=Bh(Gm),$h=Bh(Cr),_k=e=>{const n=[];let o=e.dom;for(;o;)n.push(X.fromDom(o)),o=o.lastChild;return n},Ek=e=>{const n=sr(e,"br"),o=Mt(_k(e).slice(-1),qm);n.length===o.length&&we(o,go)},Xm=()=>{const e=X.fromTag("br");return io(e,"data-mce-bogus","1"),e},$a=e=>{Fu(e),gs(e,Xm())},gS=(e,n)=>{Kc(e).each(o=>{qc(o).each(r=>{n.isBlock(On(e))&&qm(o)&&n.isBlock(On(r))&&go(o)})})},Ko=Hu,yf=pr,Ia=$t,cM=e=>e.insertContent(Ko,{preserve_zwsp:!0}),U1=pt,Jm=Me,Cf=e=>(Jm(e)&&(e=e.parentNode),U1(e)&&e.hasAttribute("data-mce-caret")),$i=e=>Jm(e)&&yf(e.data),Fa=e=>Cf(e)||$i(e),Yv=e=>e.firstChild!==e.lastChild||!Bo(e.firstChild),Xv=(e,n)=>{var o;const c=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(Ko),u=e.parentNode;if(n){const m=e.previousSibling;if(Jm(m)){if(Fa(m))return m;if(bl(m))return m.splitText(m.data.length-1)}u==null||u.insertBefore(c,e)}else{const m=e.nextSibling;if(Jm(m)){if(Fa(m))return m;if(Sf(m))return m.splitText(1),m}e.nextSibling?u==null||u.insertBefore(c,e.nextSibling):u==null||u.appendChild(c)}return c},Jv=e=>{const n=e.container();return Me(n)?n.data.charAt(e.offset())===Ko||e.isAtStart()&&$i(n.previousSibling):!1},wf=e=>{const n=e.container();return Me(n)?n.data.charAt(e.offset()-1)===Ko||e.isAtEnd()&&$i(n.nextSibling):!1},Tk=(e,n,o)=>{var r;const u=((r=n.ownerDocument)!==null&&r!==void 0?r:document).createElement(e);u.setAttribute("data-mce-caret",o?"before":"after"),u.setAttribute("data-mce-bogus","all"),u.appendChild(Xm().dom);const m=n.parentNode;return o?m==null||m.insertBefore(u,n):n.nextSibling?m==null||m.insertBefore(u,n.nextSibling):m==null||m.appendChild(u),u},Sf=e=>Jm(e)&&e.data[0]===Ko,bl=e=>Jm(e)&&e.data[e.data.length-1]===Ko,Ih=e=>{var n;const o=e.getElementsByTagName("br"),r=o[o.length-1];Ai(r)&&((n=r.parentNode)===null||n===void 0||n.removeChild(r))},vn=e=>e&&e.hasAttribute("data-mce-caret")?(Ih(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,Xr=e=>Cf(e.startContainer),kc=Math.round,nu=e=>e?{left:kc(e.left),top:kc(e.top),bottom:kc(e.bottom),right:kc(e.right),width:kc(e.width),height:kc(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},so=(e,n)=>(e=nu(e),n||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),hS=(e,n)=>e.left===n.left&&e.top===n.top&&e.bottom===n.bottom&&e.right===n.right,W1=(e,n,o)=>e>=0&&e<=Math.min(n.height,o.height)/2,Fh=(e,n)=>{const o=Math.min(n.height/2,e.height/2);return e.bottom-o<n.top?!0:e.top>n.bottom?!1:W1(n.top-e.bottom,e,n)},Z1=(e,n)=>e.top>n.bottom?!0:e.bottom<n.top?!1:W1(n.bottom-e.top,e,n),kk=(e,n,o)=>n>=e.left&&n<=e.right&&o>=e.top&&o<=e.bottom,wo=e=>Wo(e,(n,o)=>n.fold(()=>L.some(o),r=>{const c=Math.min(o.left,r.left),u=Math.min(o.top,r.top),m=Math.max(o.right,r.right),v=Math.max(o.bottom,r.bottom);return L.some({top:u,right:m,bottom:v,left:c,width:m-c,height:v-u})}),L.none()),Qv=(e,n,o)=>{const r=Math.max(Math.min(n,e.left+e.width),e.left),c=Math.max(Math.min(o,e.top+e.height),e.top);return Math.sqrt((n-r)*(n-r)+(o-c)*(o-c))},Ok=(e,n)=>Math.max(0,Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top)),Ak=(e,n,o)=>Math.min(Math.max(e,n),o),Qm=e=>{const n=e.startContainer,o=e.startOffset;return n===e.endContainer&&n.hasChildNodes()&&e.endOffset===o+1?n.childNodes[o]:null},ut=(e,n)=>{if(pt(e)&&e.hasChildNodes()){const o=e.childNodes,r=Ak(n,0,o.length-1);return o[r]}else return e},Rk=(e,n)=>{if(!(n<0&&pt(e)&&e.hasChildNodes()))return ut(e,n)},pS=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),j1=e=>ee(e)&&e.charCodeAt(0)>=768&&pS.test(e),ey=(...e)=>n=>{for(let o=0;o<e.length;o++)if(e[o](n))return!0;return!1},Dk=(...e)=>n=>{for(let o=0;o<e.length;o++)if(!e[o](n))return!1;return!0},Lh=as,Hh=ho,xf=Bo,iM=Me,vl=Xc(["script","style","textarea"]),Mk=Xc(["img","input","textarea","hr","iframe","video","audio","object","embed"]),ou=Xc(["table"]),bS=Fa,Ii=e=>bS(e)?!1:iM(e)?!vl(e.parentNode):Mk(e)||xf(e)||ou(e)||eg(e),vS=e=>pt(e)&&e.getAttribute("unselectable")==="true",eg=e=>!vS(e)&&Hh(e),Pk=(e,n)=>{for(let o=e.parentNode;o&&o!==n;o=o.parentNode){if(eg(o))return!1;if(Lh(o))return!0}return!0},Nk=e=>eg(e)?!Wo(_a(e.getElementsByTagName("*")),(n,o)=>n||Lh(o),!1):!1,Bk=e=>Mk(e)||Nk(e),ty=(e,n)=>Ii(e)&&Pk(e,n),G1=pt,yS=Ii,ny=Oi("display","block table"),$k=Oi("float","left right"),Vh=Dk(G1,yS,Uo($k)),td=Uo(Oi("white-space","pre pre-line pre-wrap")),tg=Me,q1=Bo,oy=ao.nodeIndex,K1=Rk,sy=e=>e?e.createRange():ao.DOM.createRng(),ry=e=>ee(e)&&/[\r\n\t ]/.test(e),ay=e=>!!e.setStart&&!!e.setEnd,CS=e=>{const n=e.startContainer,o=e.startOffset;if(ry(e.toString())&&td(n.parentNode)&&Me(n)){const r=n.data;if(ry(r[o-1])||ry(r[o+1]))return!0}return!1},Zs=e=>{const n=e.ownerDocument,o=sy(n),r=n.createTextNode(Us),c=e.parentNode;c.insertBefore(r,e),o.setStart(r,0),o.setEnd(r,1);const u=nu(o.getBoundingClientRect());return c.removeChild(r),u},Ik=e=>{const n=e.startContainer,o=e.endContainer,r=e.startOffset,c=e.endOffset;if(n===o&&Me(o)&&r===0&&c===1){const u=e.cloneRange();return u.setEndAfter(o),nd(u)}else return null},wS=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,nd=e=>{var n;let o;const r=e.getClientRects();return r.length>0?o=nu(r[0]):o=nu(e.getBoundingClientRect()),!ay(e)&&q1(e)&&wS(o)?Zs(e):wS(o)&&ay(e)&&(n=Ik(e))!==null&&n!==void 0?n:o},_f=(e,n)=>{const o=so(e,n);return o.width=1,o.right=o.left+1,o},cy=e=>{const n=[],o=m=>{m.height!==0&&(n.length>0&&hS(m,n[n.length-1])||n.push(m))},r=(m,v)=>{const C=sy(m.ownerDocument);if(v<m.data.length){if(j1(m.data[v]))return;if(j1(m.data[v-1])&&(C.setStart(m,v),C.setEnd(m,v+1),!CS(C))){o(_f(nd(C),!1));return}}v>0&&(C.setStart(m,v-1),C.setEnd(m,v),CS(C)||o(_f(nd(C),!1))),v<m.data.length&&(C.setStart(m,v),C.setEnd(m,v+1),CS(C)||o(_f(nd(C),!0)))},c=e.container(),u=e.offset();if(tg(c))return r(c,u),n;if(G1(c))if(e.isAtEnd()){const m=K1(c,u);tg(m)&&r(m,m.data.length),Vh(m)&&!q1(m)&&o(_f(nd(m),!1))}else{const m=K1(c,u);if(tg(m)&&r(m,0),Vh(m)&&e.isAtEnd())return o(_f(nd(m),!1)),n;const v=K1(e.container(),e.offset()-1);Vh(v)&&!q1(v)&&(ny(v)||ny(m)||!Vh(m))&&o(_f(nd(v),!1)),Vh(m)&&o(_f(nd(m),!0))}return n},he=(e,n,o)=>{const r=()=>(tg(e),n===0),c=()=>tg(e)?n>=e.data.length:n>=e.childNodes.length,u=()=>{const D=sy(e.ownerDocument);return D.setStart(e,n),D.setEnd(e,n),D},m=()=>(o||(o=cy(he(e,n))),o),v=()=>m().length>0,C=D=>D&&e===D.container()&&n===D.offset(),E=D=>K1(e,D?n-1:n);return{container:et(e),offset:et(n),toRange:u,getClientRects:m,isVisible:v,isAtStart:r,isAtEnd:c,isEqual:C,getNode:E}};he.fromRangeStart=e=>he(e.startContainer,e.startOffset),he.fromRangeEnd=e=>he(e.endContainer,e.endOffset),he.after=e=>he(e.parentNode,oy(e)+1),he.before=e=>he(e.parentNode,oy(e)),he.isAbove=(e,n)=>mr(Dr(n.getClientRects()),Ll(e.getClientRects()),Fh).getOr(!1),he.isBelow=(e,n)=>mr(Ll(n.getClientRects()),Dr(e.getClientRects()),Z1).getOr(!1),he.isAtStart=e=>e?e.isAtStart():!1,he.isAtEnd=e=>e?e.isAtEnd():!1,he.isTextPosition=e=>e?Me(e.container()):!1,he.isElementPosition=e=>!he.isTextPosition(e);const yl=(e,n)=>{Me(n)&&n.data.length===0&&e.remove(n)},Fk=(e,n,o)=>{n.insertNode(o),yl(e,o.previousSibling),yl(e,o.nextSibling)},SS=(e,n,o)=>{const r=L.from(o.firstChild),c=L.from(o.lastChild);n.insertNode(o),r.each(u=>yl(e,u.previousSibling)),c.each(u=>yl(e,u.nextSibling))},zh=(e,n,o)=>{rr(o)?SS(e,n,o):Fk(e,n,o)},Oc=Me,Uh=Ai,xS=ao.nodeIndex,iy=e=>{const n=e.parentNode;return Uh(n)?iy(n):n},Ir=e=>e?qa(e.childNodes,(n,o)=>(Uh(o)&&o.nodeName!=="BR"?n=n.concat(Ir(o)):n.push(o),n),[]):[],Y1=(e,n)=>{let o=e;for(;(o=o.previousSibling)&&Oc(o);)n+=o.data.length;return n},_S=e=>n=>e===n,Lk=e=>{let n,o;n=Ir(iy(e)),o=Do(n,_S(e),e),n=n.slice(0,o+1);const r=qa(n,(c,u,m)=>(Oc(u)&&Oc(n[m-1])&&c++,c),0);return n=a1(n,Xc([e.nodeName])),o=Do(n,_S(e),e),o-r},ES=e=>(Oc(e)?"text()":e.nodeName.toLowerCase())+"["+Lk(e)+"]",Hk=(e,n,o)=>{const r=[];for(let c=n.parentNode;c&&c!==e;c=c.parentNode)r.push(c);return r},TS=(e,n)=>{let o=[],r=n.container(),c=n.offset(),u;if(Oc(r))u=Y1(r,c);else{const v=r.childNodes;c>=v.length?(u="after",c=v.length-1):u="before",r=v[c]}o.push(ES(r));let m=Hk(e,r);return m=a1(m,Uo(Ai)),o=o.concat(nl(m,v=>ES(v))),o.reverse().join("/")+","+u},Vk=(e,n,o)=>{let r=Ir(e);return r=a1(r,(c,u)=>!Oc(c)||!Oc(r[u-1])),r=a1(r,Xc([n])),r[o]},zk=(e,n)=>{let o=e,r=0;for(;Oc(o);){const c=o.data.length;if(n>=r&&n<=r+c){e=o,n=n-r;break}if(!Oc(o.nextSibling)){e=o,n=c;break}r+=c,o=o.nextSibling}return Oc(e)&&n>e.data.length&&(n=e.data.length),he(e,n)},kS=(e,n)=>{if(!n)return null;const o=n.split(","),r=o[0].split("/"),c=o.length>1?o[1]:"before",u=qa(r,(m,v)=>{const C=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(v);return C?(C[1]==="text()"&&(C[1]="#text"),Vk(m,C[1],parseInt(C[2],10))):null},e);if(!u)return null;if(!Oc(u)&&u.parentNode){let m;return c==="after"?m=xS(u)+1:m=xS(u),he(u.parentNode,m)}return zk(u,parseInt(c,10))},ng=ho,Uk=(e,n,o)=>{let r=e(n.data.slice(0,o)).length;for(let c=n.previousSibling;c&&Me(c);c=c.previousSibling)r+=e(c.data).length;return r},OS=(e,n,o,r,c)=>{const u=c?r.startContainer:r.endContainer;let m=c?r.startOffset:r.endOffset;const v=[],C=e.getRoot();if(Me(u))v.push(o?Uk(n,u,m):m);else{let E=0;const D=u.childNodes;m>=D.length&&D.length&&(E=1,m=Math.max(0,D.length-1)),v.push(e.nodeIndex(D[m],o)+E)}for(let E=u;E&&E!==C;E=E.parentNode)v.push(e.nodeIndex(E,o));return v},Lo=(e,n,o,r)=>{const c=n.dom,u=OS(c,e,o,r,!0),m=n.isForward(),v=Xr(r)?{isFakeCaret:!0}:{};if(n.isCollapsed())return{start:u,forward:m,...v};{const C=OS(c,e,o,r,!1);return{start:u,end:C,forward:m,...v}}},X1=(e,n,o)=>{let r=0;return ze.each(e.select(n),c=>{if(c.getAttribute("data-mce-bogus")!=="all"){if(c===o)return!1;r++;return}}),r},AS=(e,n)=>{let o=n?e.startContainer:e.endContainer,r=n?e.startOffset:e.endOffset;if(pt(o)&&o.nodeName==="TR"){const c=o.childNodes;o=c[Math.min(n?r:r-1,c.length-1)],o&&(r=n?0:o.childNodes.length,n?e.setStart(o,r):e.setEnd(o,r))}},RS=e=>(AS(e,!0),AS(e,!1),e),J1=(e,n)=>{if(pt(e)&&(e=ut(e,n),ng(e)))return e;if(Fa(e)){Me(e)&&Cf(e)&&(e=e.parentNode);let o=e.previousSibling;if(ng(o)||(o=e.nextSibling,ng(o)))return o}},wr=e=>J1(e.startContainer,e.startOffset)||J1(e.endContainer,e.endOffset),Fr=(e,n,o)=>{const r=o.getNode(),c=o.getRng();if(r.nodeName==="IMG"||ng(r)){const m=r.nodeName;return{name:m,index:X1(o.dom,m,r)}}const u=wr(c);if(u){const m=u.tagName;return{name:m,index:X1(o.dom,m,u)}}return Lo(e,o,n,c)},DS=e=>{const n=e.getRng();return{start:TS(e.dom.getRoot(),he.fromRangeStart(n)),end:TS(e.dom.getRoot(),he.fromRangeEnd(n)),forward:e.isForward()}},MS=e=>({rng:e.getRng(),forward:e.isForward()}),ly=(e,n,o)=>{const r={"data-mce-type":"bookmark",id:n,style:"overflow:hidden;line-height:0px"};return o?e.create("span",r,"&#xFEFF;"):e.create("span",r)},PS=(e,n)=>{const o=e.dom;let r=e.getRng();const c=o.uniqueId(),u=e.isCollapsed(),m=e.getNode(),v=m.nodeName,C=e.isForward();if(v==="IMG")return{name:v,index:X1(o,v,m)};const E=RS(r.cloneRange());if(!u){E.collapse(!1);const M=ly(o,c+"_end",n);zh(o,E,M)}r=RS(r),r.collapse(!0);const D=ly(o,c+"_start",n);return zh(o,r,D),e.moveToBookmark({id:c,keep:!0,forward:C}),{id:c,forward:C}},NS=(e,n,o=!1)=>n===2?Fr(Ia,o,e):n===3?DS(e):n?MS(e):PS(e,!1),uy=Be(Fr,zo,!0),dy=e=>{const n=u=>u(e),o=et(e),r=()=>c,c={tag:!0,inner:e,fold:(u,m)=>m(e),isValue:dt,isError:De,map:u=>Jr.value(u(e)),mapError:r,bind:n,exists:n,forall:n,getOr:o,or:r,getOrThunk:o,orThunk:r,getOrDie:o,each:u=>{u(e)},toOptional:()=>L.some(e)};return c},Q1=e=>{const n=()=>o,o={tag:!1,inner:e,fold:(r,c)=>r(e),isValue:De,isError:dt,map:n,mapError:r=>Jr.error(r(e)),bind:n,exists:De,forall:dt,getOr:zo,or:zo,getOrThunk:os,orThunk:os,getOrDie:ja(String(e)),each:Bt,toOptional:L.none};return o},Jr={value:dy,error:Q1,fromOption:(e,n)=>e.fold(()=>Q1(n),dy)},$n={generate:e=>{if(!Tn(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const n=[],o={};return we(e,(r,c)=>{const u=Wr(r);if(u.length!==1)throw new Error("one and only one name per case");const m=u[0],v=r[m];if(o[m]!==void 0)throw new Error("duplicate key detected:"+m);if(m==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Tn(v))throw new Error("case arguments must be an array");n.push(m),o[m]=(...C)=>{const E=C.length;if(E!==v.length)throw new Error("Wrong number of arguments to case "+m+". Expected "+v.length+" ("+v+"), got "+E);return{fold:(...M)=>{if(M.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+M.length);return M[c].apply(null,C)},match:M=>{const B=Wr(M);if(n.length!==B.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+`
Actual: `+B.join(","));if(!ur(n,q=>Gt(B,q)))throw new Error("Not all branches were specified when using match. Specified: "+B.join(", ")+`
Required: `+n.join(", "));return M[m].apply(null,C)},log:M=>{console.log(M,{constructors:n,constructor:m,params:C})}}}}),o}};$n.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Fi=e=>{const n=[],o=[];return we(e,r=>{r.fold(c=>{n.push(c)},c=>{o.push(c)})}),{errors:n,values:o}},Wh=e=>e.type==="inline-command"||e.type==="inline-format",BS=e=>e.type==="block-command"||e.type==="block-format",eb=(e,n)=>(e.type==="block-command"||e.type==="block-format")&&e.trigger===n,tb=e=>{var n;const o=c=>Jr.error({message:c,pattern:e}),r=(c,u,m)=>{if(e.format!==void 0){let v;if(Tn(e.format)){if(!ur(e.format,ee))return o(c+" pattern has non-string items in the `format` array");v=e.format}else if(ee(e.format))v=[e.format];else return o(c+" pattern has non-string `format` parameter");return Jr.value(u(v))}else return e.cmd!==void 0?ee(e.cmd)?Jr.value(m(e.cmd,e.value)):o(c+" pattern has non-string `cmd` parameter"):o(c+" pattern is missing both `format` and `cmd` parameters")};if(!sn(e))return o("Raw pattern is not an object");if(!ee(e.start))return o("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!ee(e.end))return o("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return o("Inline pattern has empty `start` and `end` parameters");let c=e.start,u=e.end;return u.length===0&&(u=c,c=""),r("Inline",m=>({type:"inline-format",start:c,end:u,format:m}),(m,v)=>({type:"inline-command",start:c,end:u,cmd:m,value:v}))}else{if(e.replacement!==void 0)return ee(e.replacement)?e.start.length===0?o("Replacement pattern has empty `start` parameter"):Jr.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):o("Replacement pattern has non-string `replacement` parameter");{const c=(n=e.trigger)!==null&&n!==void 0?n:"space";return e.start.length===0?o("Block pattern has empty `start` parameter"):r("Block",u=>({type:"block-format",start:e.start,format:u[0],trigger:c}),(u,m)=>({type:"block-command",start:e.start,cmd:u,value:m,trigger:c}))}}},od=e=>Mt(e,BS),js=e=>Mt(e,Wh),sd=(e,n)=>({inlinePatterns:js(e),blockPatterns:od(e),dynamicPatternsLookup:n}),my=(e,n)=>({...e,blockPatterns:Mt(e.blockPatterns,o=>eb(o,n))}),$S=e=>{const n=Fi(Xt(e,tb));return we(n.errors,o=>console.error(o.message,o.pattern)),n.values},Wk=e=>n=>{const o=e(n);return $S(o)},og=wi().deviceType,gy=og.isTouch(),hy=ao.DOM,py=e=>{const n=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return Wo(n,(o,r)=>{const c=r.split("="),u=c[0],m=c.length>1?c[1]:u;return o[Kd(u)]=Kd(m),o},{})},by=e=>Gn(e,RegExp),ft=e=>n=>n.options.get(e),Zh=e=>ee(e)||sn(e),vy=(e,n="")=>o=>{const r=ee(o);if(r)if(o.indexOf("=")!==-1){const c=py(o);return{value:mo(c,e.id).getOr(n),valid:r}}else return{value:o,valid:r};else return{valid:!1,message:"Must be a string."}},sg=e=>{const n=e.options.register;n("id",{processor:"string",default:e.id}),n("selector",{processor:"string"}),n("target",{processor:"object"}),n("suffix",{processor:"string"}),n("cache_suffix",{processor:"string"}),n("base_url",{processor:"string"}),n("referrer_policy",{processor:"string",default:""}),n("language_load",{processor:"boolean",default:!0}),n("inline",{processor:"boolean",default:!1}),n("iframe_attrs",{processor:"object",default:{}}),n("doctype",{processor:"string",default:"<!DOCTYPE html>"}),n("document_base_url",{processor:"string",default:e.documentBaseUrl}),n("body_id",{processor:vy(e,"tinymce"),default:"tinymce"}),n("body_class",{processor:vy(e),default:""}),n("content_security_policy",{processor:"string",default:""}),n("br_in_pre",{processor:"boolean",default:!0}),n("forced_root_block",{processor:o=>{const r=ee(o)&&no(o);return r?{value:o,valid:r}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),n("forced_root_block_attrs",{processor:"object",default:{}}),n("newline_behavior",{processor:o=>{const r=Gt(["block","linebreak","invert","default"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),n("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),n("no_newline_selector",{processor:"string",default:""}),n("keep_styles",{processor:"boolean",default:!0}),n("end_container_on_empty_block",{processor:o=>bn(o)?{valid:!0,value:o}:ee(o)?{valid:!0,value:o}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),n("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),n("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),n("font_size_classes",{processor:"string",default:""}),n("automatic_uploads",{processor:"boolean",default:!0}),n("images_reuse_filename",{processor:"boolean",default:!1}),n("images_replace_blob_uris",{processor:"boolean",default:!0}),n("icons",{processor:"string",default:""}),n("icons_url",{processor:"string",default:""}),n("images_upload_url",{processor:"string",default:""}),n("images_upload_base_path",{processor:"string",default:""}),n("images_upload_credentials",{processor:"boolean",default:!1}),n("images_upload_handler",{processor:"function"}),n("language",{processor:"string",default:"en"}),n("language_url",{processor:"string",default:""}),n("entity_encoding",{processor:"string",default:"named"}),n("indent",{processor:"boolean",default:!0}),n("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_use_margin",{processor:"boolean",default:!1}),n("indentation",{processor:"string",default:"40px"}),n("content_css",{processor:o=>{const r=o===!1||ee(o)||eo(o,ee);return r?ee(o)?{value:Xt(o.split(","),Kd),valid:r}:Tn(o)?{value:o,valid:r}:o===!1?{value:[],valid:r}:{value:o,valid:r}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:Of(e)?[]:["default"]}),n("content_style",{processor:"string"}),n("content_css_cors",{processor:"boolean",default:!1}),n("font_css",{processor:o=>{const r=ee(o)||eo(o,ee);return r?{value:Tn(o)?o:Xt(o.split(","),Kd),valid:r}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),n("inline_boundaries",{processor:"boolean",default:!0}),n("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),n("object_resizing",{processor:o=>{const r=bn(o)||ee(o);return r?o===!1||og.isiPhone()||og.isiPad()?{value:"",valid:r}:{value:o===!0?"table,img,figure.image,div,video,iframe":o,valid:r}:{valid:!1,message:"Must be boolean or a string"}},default:!gy}),n("resize_img_proportional",{processor:"boolean",default:!0}),n("event_root",{processor:"string"}),n("service_message",{processor:"string"}),n("theme",{processor:o=>o===!1||ee(o)||oe(o),default:"silver"}),n("theme_url",{processor:"string"}),n("formats",{processor:"object"}),n("format_empty_lines",{processor:"boolean",default:!1}),n("format_noneditable_selector",{processor:"string",default:""}),n("preview_styles",{processor:o=>{const r=o===!1||ee(o);return r?{value:o===!1?"":o,valid:r}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),n("custom_ui_selector",{processor:"string",default:""}),n("hidden_input",{processor:"boolean",default:!0}),n("submit_patch",{processor:"boolean",default:!0}),n("encoding",{processor:"string"}),n("add_form_submit_trigger",{processor:"boolean",default:!0}),n("add_unload_trigger",{processor:"boolean",default:!0}),n("custom_undo_redo_levels",{processor:"number",default:0}),n("disable_nodechange",{processor:"boolean",default:!1}),n("readonly",{processor:"boolean",default:!1}),n("editable_root",{processor:"boolean",default:!0}),n("plugins",{processor:"string[]",default:[]}),n("external_plugins",{processor:"object"}),n("forced_plugins",{processor:"string[]"}),n("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),n("model_url",{processor:"string"}),n("block_unsupported_drop",{processor:"boolean",default:!0}),n("visual",{processor:"boolean",default:!0}),n("visual_table_class",{processor:"string",default:"mce-item-table"}),n("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),n("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),n("setup",{processor:"function"}),n("init_instance_callback",{processor:"function"}),n("url_converter",{processor:"function",default:e.convertURL}),n("url_converter_scope",{processor:"object",default:e}),n("urlconverter_callback",{processor:"function"}),n("allow_conditional_comments",{processor:"boolean",default:!1}),n("allow_html_data_urls",{processor:"boolean",default:!1}),n("allow_svg_data_urls",{processor:"boolean"}),n("allow_html_in_named_anchor",{processor:"boolean",default:!1}),n("allow_script_urls",{processor:"boolean",default:!1}),n("allow_unsafe_link_target",{processor:"boolean",default:!1}),n("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),n("fix_list_elements",{processor:"boolean",default:!1}),n("preserve_cdata",{processor:"boolean",default:!1}),n("remove_trailing_brs",{processor:"boolean",default:!0}),n("pad_empty_with_br",{processor:"boolean",default:!1}),n("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),n("element_format",{processor:"string",default:"html"}),n("entities",{processor:"string"}),n("schema",{processor:"string",default:"html5"}),n("convert_urls",{processor:"boolean",default:!0}),n("relative_urls",{processor:"boolean",default:!0}),n("remove_script_host",{processor:"boolean",default:!0}),n("custom_elements",{processor:Zh}),n("extended_valid_elements",{processor:"string"}),n("invalid_elements",{processor:"string"}),n("invalid_styles",{processor:Zh}),n("valid_children",{processor:"string"}),n("valid_classes",{processor:Zh}),n("valid_elements",{processor:"string"}),n("valid_styles",{processor:Zh}),n("verify_html",{processor:"boolean",default:!0}),n("auto_focus",{processor:o=>ee(o)||o===!0}),n("browser_spellcheck",{processor:"boolean",default:!1}),n("protect",{processor:"array"}),n("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),n("deprecation_warnings",{processor:"boolean",default:!0}),n("a11y_advanced_options",{processor:"boolean",default:!1}),n("api_key",{processor:"string"}),n("license_key",{processor:"string"}),n("paste_block_drop",{processor:"boolean",default:!1}),n("paste_data_images",{processor:"boolean",default:!0}),n("paste_preprocess",{processor:"function"}),n("paste_postprocess",{processor:"function"}),n("paste_webkit_styles",{processor:"string",default:"none"}),n("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),n("paste_merge_formats",{processor:"boolean",default:!0}),n("smart_paste",{processor:"boolean",default:!0}),n("paste_as_text",{processor:"boolean",default:!1}),n("paste_tab_spaces",{processor:"number",default:4}),n("text_patterns",{processor:o=>eo(o,sn)||o===!1?{value:$S(o===!1?[]:o),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),n("text_patterns_lookup",{processor:o=>oe(o)?{value:Wk(o),valid:!0}:{valid:!1,message:"Must be a single function"},default:o=>[]}),n("noneditable_class",{processor:"string",default:"mceNonEditable"}),n("editable_class",{processor:"string",default:"mceEditable"}),n("noneditable_regexp",{processor:o=>eo(o,by)?{value:o,valid:!0}:by(o)?{value:[o],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),n("table_tab_navigation",{processor:"boolean",default:!0}),n("highlight_on_focus",{processor:"boolean",default:!0}),n("xss_sanitization",{processor:"boolean",default:!0}),n("details_initial_state",{processor:o=>{const r=Gt(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("details_serialized_state",{processor:o=>{const r=Gt(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("init_content_sync",{processor:"boolean",default:!1}),n("newdocument_content",{processor:"string",default:""}),n("sandbox_iframes",{processor:"boolean",default:!0}),n("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),n("convert_unsafe_embeds",{processor:"boolean",default:!0}),e.on("ScriptsLoaded",()=>{n("directionality",{processor:"string",default:Ms.isRtl()?"rtl":void 0}),n("placeholder",{processor:"string",default:hy.getAttrib(e.getElement(),"placeholder")})})},oi=ft("iframe_attrs"),Zk=ft("doctype"),Gs=ft("document_base_url"),jk=ft("body_id"),rd=ft("body_class"),yy=ft("content_security_policy"),IS=ft("br_in_pre"),Sr=ft("forced_root_block"),ad=ft("forced_root_block_attrs"),nb=ft("newline_behavior"),cd=ft("br_newline_selector"),Gk=ft("no_newline_selector"),qk=ft("keep_styles"),bs=ft("end_container_on_empty_block"),cs=ft("automatic_uploads"),vs=ft("images_reuse_filename"),Zn=ft("images_replace_blob_uris"),Os=ft("icons"),is=ft("icons_url"),Cy=ft("images_upload_url"),ob=ft("images_upload_base_path"),wy=ft("images_upload_credentials"),FS=ft("images_upload_handler"),LS=ft("content_css_cors"),sb=ft("referrer_policy"),rb=ft("language"),Ef=ft("language_url"),Sy=ft("indent_use_margin"),AL=ft("indentation"),Tf=ft("content_css"),Kk=ft("content_style"),ha=ft("font_css"),lM=ft("directionality"),Yk=ft("inline_boundaries_selector"),rc=ft("object_resizing"),jh=ft("resize_img_proportional"),Gh=ft("placeholder"),Li=ft("event_root"),Qr=ft("service_message"),id=ft("theme"),xy=ft("theme_url"),ab=ft("model"),HS=ft("model_url"),kf=ft("inline_boundaries"),_y=ft("formats"),Ey=ft("preview_styles"),VS=ft("format_empty_lines"),zS=ft("format_noneditable_selector"),qh=ft("custom_ui_selector"),Of=ft("inline"),Ty=ft("hidden_input"),ky=ft("submit_patch"),US=ft("add_form_submit_trigger"),WS=ft("add_unload_trigger"),Xk=ft("custom_undo_redo_levels"),cb=ft("disable_nodechange"),ZS=ft("readonly"),Jk=ft("editable_root"),jS=ft("content_css_cors"),Kh=ft("plugins"),Qk=ft("external_plugins"),GS=ft("block_unsupported_drop"),ea=ft("visual"),Oy=ft("visual_table_class"),Ay=ft("visual_anchor_class"),Ry=ft("iframe_aria_text"),ib=ft("setup"),e4=ft("init_instance_callback"),t4=ft("urlconverter_callback"),lb=ft("auto_focus"),qS=ft("browser_spellcheck"),Dy=ft("protect"),My=ft("paste_block_drop"),Yh=ft("paste_data_images"),Py=ft("paste_preprocess"),KS=ft("paste_postprocess"),YS=ft("newdocument_content"),XS=ft("paste_webkit_styles"),n4=ft("paste_remove_styles_if_webkit"),JS=ft("paste_merge_formats"),QS=ft("smart_paste"),ex=ft("paste_as_text"),ub=ft("paste_tab_spaces"),rg=ft("allow_html_data_urls"),tx=ft("text_patterns"),o4=ft("text_patterns_lookup"),db=ft("noneditable_class"),s4=ft("editable_class"),si=ft("noneditable_regexp"),fb=ft("preserve_cdata"),mb=ft("highlight_on_focus"),gb=ft("xss_sanitization"),ta=ft("init_content_sync"),ld=e=>e.options.isSet("text_patterns_lookup"),ud=e=>ze.explode(e.options.get("font_size_style_values")),r4=e=>ze.explode(e.options.get("font_size_classes")),dd=e=>e.options.get("encoding")==="xml",Xh=e=>ze.explode(e.options.get("images_file_types")),a4=ft("table_tab_navigation"),c4=ft("details_initial_state"),nx=ft("details_serialized_state"),hb=ft("sandbox_iframes"),pb=e=>e.options.get("sandbox_iframes_exclusions"),i4=ft("convert_unsafe_embeds"),Jh=ft("license_key"),Ny=ft("api_key"),l4=pt,By=Me,$y=e=>{const n=e.parentNode;n&&n.removeChild(e)},bb=e=>{const n=Ia(e);return{count:e.length-n.length,text:n}},u4=e=>{let n;for(;(n=e.data.lastIndexOf(Ko))!==-1;)e.deleteData(n,1)},Af=(e,n)=>(fd(e),n),ox=(e,n)=>{const o=bb(e.data.substr(0,n.offset())),r=bb(e.data.substr(n.offset()));return(o.text+r.text).length>0?(u4(e),he(e,n.offset()-o.count)):n},Iy=(e,n)=>{const o=n.container(),r=WT(_a(o.childNodes),e).map(c=>c<n.offset()?he(o,n.offset()-1):n).getOr(n);return fd(e),r},sx=(e,n)=>By(e)&&n.container()===e?ox(e,n):Af(e,n),vb=(e,n)=>n.container()===e.parentNode?Iy(e,n):Af(e,n),d4=(e,n)=>he.isTextPosition(n)?sx(e,n):vb(e,n),fd=e=>{l4(e)&&Fa(e)&&(Yv(e)?e.removeAttribute("data-mce-caret"):$y(e)),By(e)&&(u4(e),e.data.length===0&&$y(e))},uM=ho,ag=cl,yb=Go,cg="*[contentEditable=false],video,audio,embed,object",ig=(e,n,o)=>{const r=so(n.getBoundingClientRect(),o);let c,u;if(e.tagName==="BODY"){const v=e.ownerDocument.documentElement;c=e.scrollLeft||v.scrollLeft,u=e.scrollTop||v.scrollTop}else{const v=e.getBoundingClientRect();c=e.scrollLeft-v.left,u=e.scrollTop-v.top}r.left+=c,r.right+=c,r.top+=u,r.bottom+=u,r.width=1;let m=n.offsetWidth-n.clientWidth;return m>0&&(o&&(m*=-1),r.left+=m,r.right+=m),r},f4=e=>{var n,o;const r=sr(X.fromDom(e),cg);for(let c=0;c<r.length;c++){const u=r[c].dom;let m=u.previousSibling;if(bl(m)){const v=m.data;v.length===1?(n=m.parentNode)===null||n===void 0||n.removeChild(m):m.deleteData(v.length-1,1)}m=u.nextSibling,Sf(m)&&(m.data.length===1?(o=m.parentNode)===null||o===void 0||o.removeChild(m):m.deleteData(0,1))}},rx=(e,n,o,r)=>{const c=vr();let u,m;const v=Sr(e),C=e.dom,E=(Z,K)=>{let ne;if(D(),yb(K))return null;if(o(K)){const re=Tk(v,K,Z),se=ig(n,K,Z);C.setStyle(re,"top",se.top),C.setStyle(re,"caret-color","transparent"),m=re;const ue=C.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});C.setStyles(ue,{...se}),C.add(n,ue),c.set({caret:ue,element:K,before:Z}),Z&&C.addClass(ue,"mce-visual-caret-before"),M(),ne=K.ownerDocument.createRange(),ne.setStart(re,0),ne.setEnd(re,0)}else return m=Xv(K,Z),ne=K.ownerDocument.createRange(),Cb(m.nextSibling)?(ne.setStart(m,0),ne.setEnd(m,0)):(ne.setStart(m,1),ne.setEnd(m,1)),ne;return ne},D=()=>{f4(n),m&&(fd(m),m=null),c.on(Z=>{C.remove(Z.caret),c.clear()}),u&&(clearInterval(u),u=void 0)},M=()=>{u=setInterval(()=>{c.on(Z=>{r()?C.toggleClass(Z.caret,"mce-visual-caret-hidden"):C.addClass(Z.caret,"mce-visual-caret-hidden")})},500)};return{show:E,hide:D,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{c.on(Z=>{const K=ig(n,Z.element,Z.before);C.setStyles(Z.caret,{...K})})},destroy:()=>clearInterval(u)}},m4=()=>ct.browser.isFirefox(),Cb=e=>uM(e)||ag(e),ru=e=>(Cb(e)||al(e)&&m4())&&mh(X.fromDom(e)).exists(Mn),Fy=as,Ly=ho,g4=cl,Hy=Oi("display","block table table-cell table-caption list-item"),ax=Fa,cx=Cf,ix=pt,lg=Me,wb=Ii,Rf=e=>e>0,au=e=>e<0,Qh=(e,n)=>{let o;for(;o=e(n);)if(!cx(o))return o;return null},ug=(e,n,o,r,c)=>{const u=new zs(e,r),m=Ly(e)||cx(e);let v;if(au(n)){if(m&&(v=Qh(u.prev.bind(u),!0),o(v)))return v;for(;v=Qh(u.prev.bind(u),c);)if(o(v))return v}if(Rf(n)){if(m&&(v=Qh(u.next.bind(u),!0),o(v)))return v;for(;v=Qh(u.next.bind(u),c);)if(o(v))return v}return null},h4=(e,n)=>{const o=c=>Fy(c.dom),r=c=>c.dom===n;return Mo(X.fromDom(e),o,r).map(c=>c.dom).getOr(n)},Hi=(e,n)=>{for(;e&&e!==n;){if(Hy(e))return e;e=e.parentNode}return null},ac=(e,n,o)=>Hi(e.container(),o)===Hi(n.container(),o),Sb=(e,n)=>{if(!n)return L.none();const o=n.container(),r=n.offset();return ix(o)?L.from(o.childNodes[r+e]):L.none()},p4=(e,n)=>{var o;const c=((o=n.ownerDocument)!==null&&o!==void 0?o:document).createRange();return e?(c.setStartBefore(n),c.setEndBefore(n)):(c.setStartAfter(n),c.setEndAfter(n)),c},dM=(e,n,o)=>Hi(n,e)===Hi(o,e),Df=(e,n,o)=>{const r=e?"previousSibling":"nextSibling";let c=o;for(;c&&c!==n;){let u=c[r];if(u&&ax(u)&&(u=u[r]),Ly(u)||g4(u)){if(dM(n,u,c))return u;break}if(wb(u))break;c=c.parentNode}return null},dg=Be(p4,!0),fg=Be(p4,!1),xr=(e,n,o)=>{let r;const c=Be(Df,!0,n),u=Be(Df,!1,n),m=o.startContainer,v=o.startOffset;if(Cf(m)){const C=lg(m)?m.parentNode:m,E=C.getAttribute("data-mce-caret");if(E==="before"&&(r=C.nextSibling,ru(r)))return dg(r);if(E==="after"&&(r=C.previousSibling,ru(r)))return fg(r)}if(!o.collapsed)return o;if(Me(m)){if(ax(m)){if(e===1){if(r=u(m),r)return dg(r);if(r=c(m),r)return fg(r)}if(e===-1){if(r=c(m),r)return fg(r);if(r=u(m),r)return dg(r)}return o}if(bl(m)&&v>=m.data.length-1)return e===1&&(r=u(m),r)?dg(r):o;if(Sf(m)&&v<=1)return e===-1&&(r=c(m),r)?fg(r):o;if(v===m.data.length)return r=u(m),r?dg(r):o;if(v===0)return r=c(m),r?fg(r):o}return o},xb=(e,n)=>Sb(e?0:-1,n).filter(Ly),Mf=(e,n,o)=>{const r=xr(e,n,o);return e===-1?he.fromRangeStart(r):he.fromRangeEnd(r)},_b=e=>L.from(e.getNode()).map(X.fromDom),lx=e=>L.from(e.getNode(!0)).map(X.fromDom),Vy=(e,n)=>{let o=n;for(;o=e(o);)if(o.isVisible())return o;return o},Eb=(e,n)=>{const o=ac(e,n);return!o&&Bo(e.getNode())?!0:o};var Ps;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(Ps||(Ps={}));const Tb=ho,ri=Me,zy=pt,Uy=Bo,cu=Ii,ux=Bk,md=ty,kb=(e,n)=>{const o=[];let r=e;for(;r&&r!==n;)o.push(r),r=r.parentNode;return o},Ob=(e,n)=>e.hasChildNodes()&&n<e.childNodes.length?e.childNodes[n]:null,Wy=(e,n)=>{if(Rf(e)){if(cu(n.previousSibling)&&!ri(n.previousSibling))return he.before(n);if(ri(n))return he(n,0)}if(au(e)){if(cu(n.nextSibling)&&!ri(n.nextSibling))return he.after(n);if(ri(n))return he(n,n.data.length)}return au(e)?Uy(n)?he.before(n):he.after(n):he.before(n)},Pf=(e,n)=>{const o=n.nextSibling;return o&&cu(o)?ri(o)?he(o,0):he.before(o):mg(Ps.Forwards,he.after(n),e)},mg=(e,n,o)=>{let r,c,u,m;if(!zy(o)||!n)return null;if(n.isEqual(he.after(o))&&o.lastChild){if(m=he.after(o.lastChild),au(e)&&cu(o.lastChild)&&zy(o.lastChild))return Uy(o.lastChild)?he.before(o.lastChild):m}else m=n;const v=m.container();let C=m.offset();if(ri(v)){if(au(e)&&C>0)return he(v,--C);if(Rf(e)&&C<v.length)return he(v,++C);r=v}else{if(au(e)&&C>0&&(c=Ob(v,C-1),cu(c)))return!ux(c)&&(u=ug(c,e,md,c),u)?ri(u)?he(u,u.data.length):he.after(u):ri(c)?he(c,c.data.length):he.before(c);if(Rf(e)&&C<v.childNodes.length&&(c=Ob(v,C),cu(c)))return Uy(c)?Pf(o,c):!ux(c)&&(u=ug(c,e,md,c),u)?ri(u)?he(u,0):he.before(u):ri(c)?he(c,0):he.after(c);r=c||m.getNode()}if(r&&(Rf(e)&&m.isAtEnd()||au(e)&&m.isAtStart())&&(r=ug(r,e,dt,o,!0),md(r,o)))return Wy(e,r);c=r&&ug(r,e,md,o);const E=Vc(Mt(kb(v,o),Tb));return E&&(!c||!E.contains(c))?(Rf(e)?m=he.after(E):m=he.before(E),m):c?Wy(e,c):null},ir=e=>({next:n=>mg(Ps.Forwards,n,e),prev:n=>mg(Ps.Backwards,n,e)}),dx=(e,n,o)=>{const r=e?he.before(o):he.after(o);return cc(e,n,r)},Zy=e=>Bo(e)?he.before(e):he.after(e),jy=e=>he.isTextPosition(e)?e.offset()===0:Ii(e.getNode()),fx=e=>{if(he.isTextPosition(e)){const n=e.container();return e.offset()===n.data.length}else return Ii(e.getNode(!0))},Gy=(e,n)=>!he.isTextPosition(e)&&!he.isTextPosition(n)&&e.getNode()===n.getNode(!0),mx=e=>!he.isTextPosition(e)&&Bo(e.getNode()),gx=(e,n,o)=>e?!Gy(n,o)&&!mx(n)&&fx(n)&&jy(o):!Gy(o,n)&&jy(n)&&fx(o),cc=(e,n,o)=>{const r=ir(n);return L.from(e?r.next(o):r.prev(o))},iu=(e,n,o)=>cc(e,n,o).bind(r=>ac(o,r,n)&&gx(e,o,r)?cc(e,n,r):L.some(r)),hx=(e,n,o,r)=>iu(e,n,o).bind(c=>r(c)?hx(e,n,c,r):L.some(c)),Nf=(e,n)=>{const o=e?n.firstChild:n.lastChild;return Me(o)?L.some(he(o,e?0:o.data.length)):o?Ii(o)?L.some(e?he.before(o):Zy(o)):dx(e,n,o):L.none()},Lr=Be(cc,!0),La=Be(cc,!1),Hr=Be(Nf,!0),ic=Be(Nf,!1),Ab="_mce_caret",lc=e=>pt(e)&&e.id===Ab,Bf=(e,n)=>{let o=n;for(;o&&o!==e;){if(lc(o))return o;o=o.parentNode}return null},b4=e=>ee(e.start),px=e=>Ft(e,"rng"),v4=e=>Ft(e,"id"),bx=e=>Ft(e,"name"),vx=e=>ze.isArray(e.start),qy=e=>!bx(e)&&bn(e.forward)?e.forward:!0,Ky=(e,n)=>(pt(n)&&e.isBlock(n)&&!n.innerHTML&&(n.innerHTML='<br data-mce-bogus="1" />'),n),qs=(e,n)=>{const o=L.from(kS(e.getRoot(),n.start)),r=L.from(kS(e.getRoot(),n.end));return mr(o,r,(c,u)=>{const m=e.createRng();return m.setStart(c.container(),c.offset()),m.setEnd(u.container(),u.offset()),{range:m,forward:qy(n)}})},Yy=(e,n)=>{var o;const c=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(Ko);e.appendChild(c),n.setStart(c,0),n.setEnd(c,0)},gd=e=>!e.hasChildNodes(),gg=(e,n)=>ic(e).fold(De,o=>(n.setStart(o.container(),o.offset()),n.setEnd(o.container(),o.offset()),!0)),Xy=(e,n,o)=>gd(n)&&Bf(e,n)?(Yy(n,o),!0):!1,Rb=(e,n,o,r)=>{const c=o[n?"start":"end"],u=e.getRoot();if(c){let m=u,v=c[0];for(let C=c.length-1;m&&C>=1;C--){const E=m.childNodes;if(Xy(u,m,r))return!0;if(c[C]>E.length-1)return Xy(u,m,r)?!0:gg(m,r);m=E[c[C]]}Me(m)&&(v=Math.min(c[0],m.data.length)),pt(m)&&(v=Math.min(c[0],m.childNodes.length)),n?r.setStart(m,v):r.setEnd(m,v)}return!0},ep=e=>Me(e)&&e.data.length>0,Jy=(e,n,o)=>{const r=e.get(o.id+"_"+n),c=r==null?void 0:r.parentNode,u=o.keep;if(r&&c){let m,v;if(n==="start"?u?r.hasChildNodes()?(m=r.firstChild,v=1):ep(r.nextSibling)?(m=r.nextSibling,v=0):ep(r.previousSibling)?(m=r.previousSibling,v=r.previousSibling.data.length):(m=c,v=e.nodeIndex(r)+1):(m=c,v=e.nodeIndex(r)):u?r.hasChildNodes()?(m=r.firstChild,v=1):ep(r.previousSibling)?(m=r.previousSibling,v=r.previousSibling.data.length):(m=c,v=e.nodeIndex(r)):(m=c,v=e.nodeIndex(r)),!u){const C=r.previousSibling,E=r.nextSibling;ze.each(ze.grep(r.childNodes),M=>{Me(M)&&(M.data=M.data.replace(/\uFEFF/g,""))});let D;for(;D=e.get(o.id+"_"+n);)e.remove(D,!0);if(Me(E)&&Me(C)&&!ct.browser.isOpera()){const M=C.data.length;C.appendData(E.data),e.remove(E),m=C,v=M}}return L.some(he(m,v))}else return L.none()},hg=(e,n)=>{const o=e.createRng();return Rb(e,!0,n,o)&&Rb(e,!1,n,o)?L.some({range:o,forward:qy(n)}):L.none()},Qy=(e,n)=>{const o=Jy(e,"start",n),r=Jy(e,"end",n);return mr(o,r.or(o),(c,u)=>{const m=e.createRng();return m.setStart(Ky(e,c.container()),c.offset()),m.setEnd(Ky(e,u.container()),u.offset()),{range:m,forward:qy(n)}})},Cl=(e,n)=>L.from(e.select(n.name)[n.index]).map(o=>{const r=e.createRng();return r.selectNode(o),{range:r,forward:!0}}),$f=(e,n)=>{const o=e.dom;if(n){if(vx(n))return hg(o,n);if(b4(n))return qs(o,n);if(v4(n))return Qy(o,n);if(bx(n))return Cl(o,n);if(px(n))return L.some({range:n.rng,forward:qy(n)})}return L.none()},yx=(e,n,o)=>NS(e,n,o),lu=(e,n)=>{$f(e,n).each(({range:o,forward:r})=>{e.setRng(o,r)})},uc=e=>pt(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",wl=(e=>n=>e===n)(Us),If=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,e2=e=>!If(e)&&!wl(e)&&!pr(e),Db=e=>{const n=[];if(e)for(let o=0;o<e.rangeCount;o++)n.push(e.getRangeAt(o));return n},wx=e=>vc(e,n=>{const o=Qm(n);return o?[X.fromDom(o)]:[]}),y4=e=>Db(e).length>1,C4=e=>Mt(wx(e),Ym),Sx=e=>sr(e,"td[data-mce-selected],th[data-mce-selected]"),hd=(e,n)=>{const o=Sx(n);return o.length>0?o:C4(e)},pg=e=>hd(Db(e.selection.getSel()),X.fromDom(e.getBody())),tp=(e,n)=>Et(e,"table",n),w4=e=>{const n=e.startContainer,o=e.startOffset;return Me(n)?o===0?L.some(X.fromDom(n)):L.none():L.from(n.childNodes[o]).map(X.fromDom)},S4=e=>{const n=e.endContainer,o=e.endOffset;return Me(n)?o===n.data.length?L.some(X.fromDom(n)):L.none():L.from(n.childNodes[o-1]).map(X.fromDom)},bg=e=>_m(e).fold(et([e]),n=>[e].concat(bg(n))),t2=e=>Kc(e).fold(et([e]),n=>On(n)==="br"?qc(n).map(o=>[e].concat(t2(o))).getOr([]):[e].concat(t2(n))),Mb=(e,n)=>mr(w4(n),S4(n),(o,r)=>{const c=ss(bg(e),Be(Wn,o)),u=ss(t2(e),Be(Wn,r));return c.isSome()&&u.isSome()}).getOr(!1),n2=(e,n,o,r)=>{const c=o,u=new zs(o,c),m=_o(e.schema.getMoveCaretBeforeOnEnterElements(),(C,E)=>!Gt(["td","th","table"],E.toLowerCase()));let v=o;do{if(Me(v)&&ze.trim(v.data).length!==0){r?n.setStart(v,0):n.setEnd(v,v.data.length);return}if(m[v.nodeName]){r?n.setStartBefore(v):v.nodeName==="BR"?n.setEndBefore(v):n.setEndAfter(v);return}}while(v=r?u.next():u.prev());c.nodeName==="BODY"&&(r?n.setStart(c,0):n.setEnd(c,c.childNodes.length))},o2=e=>{const n=e.selection.getSel();return Ae(n)&&n.rangeCount>0},vg=(e,n)=>{const o=pg(e);o.length>0?we(o,r=>{const c=r.dom,u=e.dom.createRng();u.setStartBefore(c),u.setEndAfter(c),n(u,!0)}):n(e.selection.getRng(),!1)},s2=(e,n,o)=>{const r=PS(e,n);o(r),e.moveToBookmark(r)},yg=e=>Za(e==null?void 0:e.nodeType),r2=e=>pt(e)&&!uc(e)&&!lc(e)&&!Ai(e),wn=(e,n)=>{if(r2(n)&&!/^(TD|TH)$/.test(n.nodeName)){const o=e.getAttrib(n,"data-mce-selected"),r=parseInt(o,10);return!isNaN(r)&&r>0}else return!1},Sl=(e,n,o)=>{const{selection:r,dom:c}=e,u=r.getNode(),m=ho(u);s2(r,!0,()=>{n()}),m&&ho(u)&&c.isChildOf(u,e.getBody())?e.selection.select(u):o(r.getStart())&&Ff(c,r)},Ff=(e,n)=>{var o,r;const c=n.getRng(),{startContainer:u,startOffset:m}=c,v=n.getNode();if(!wn(e,v)&&pt(u)){const C=u.childNodes,E=e.getRoot();let D;if(m<C.length){const M=C[m];D=new zs(M,(o=e.getParent(M,e.isBlock))!==null&&o!==void 0?o:E)}else{const M=C[C.length-1];D=new zs(M,(r=e.getParent(M,e.isBlock))!==null&&r!==void 0?r:E),D.next(!0)}for(let M=D.current();M;M=D.next()){if(e.getContentEditable(M)==="false")return;if(Me(M)&&!c2(M)){c.setStart(M,0),n.setRng(c);return}}}},np=(e,n,o)=>{if(e){const r=n?"nextSibling":"previousSibling";for(e=e[r];e;e=e[r])if(pt(e)||!c2(e))return e}},a2=(e,n)=>!!e.getTextBlockElements()[n.nodeName.toLowerCase()]||Wu(e,n),uu=(e,n,o)=>e.schema.isValidChild(n,o),c2=(e,n=!1)=>{if(Ae(e)&&Me(e)){const o=n?e.data.replace(/ /g," "):e.data;return rl(o)}else return!1},Pb=e=>Ae(e)&&Me(e)&&e.length===0,i2=(e,n)=>{const o="[data-mce-cef-wrappable]",r=zS(e),c=Ka(r)?o:`${o},${r}`;return Ja(X.fromDom(n),c)},l2=(e,n)=>{const o=e.dom;return r2(n)&&o.getContentEditable(n)==="false"&&i2(e,n)&&o.select('[contenteditable="true"]',n).length===0},Lf=(e,n)=>oe(e)?e(n):(Ae(n)&&(e=e.replace(/%(\w+)/g,(o,r)=>n[r]||o)),e),Nb=(e,n)=>(e=e||"",n=n||"",e=""+(e.nodeName||e),n=""+(n.nodeName||n),e.toLowerCase()===n.toLowerCase()),Hf=(e,n)=>{if(_n(e))return null;{let o=String(e);return(n==="color"||n==="backgroundColor")&&(o=Mi(o)),n==="fontWeight"&&e===700&&(o="bold"),n==="fontFamily"&&(o=o.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),o}},Bb=(e,n,o)=>{const r=e.getStyle(n,o);return Hf(r,o)},xx=(e,n)=>{let o;return e.getParent(n,r=>pt(r)?(o=e.getStyle(r,"text-decoration"),!!o&&o!=="none"):!1),o},Cg=(e,n,o)=>e.getParents(n,o,e.getRoot()),$b=(e,n,o)=>{const r=e.formatter.get(n);return Ae(r)&&vo(r,o)},x4=(e,n)=>$b(e,n,r=>{const c=u=>oe(u)||u.length>1&&u.charAt(0)==="%";return vo(["styles","attributes"],u=>mo(r,u).exists(m=>{const v=Tn(m)?m:dm(m);return vo(v,c)}))}),Ib=(e,n,o)=>{const r=["inline","block","selector","attributes","styles","classes"],c=u=>_o(u,(m,v)=>vo(r,C=>C===v));return $b(e,n,u=>{const m=c(u);return $b(e,o,v=>{const C=c(v);return qd(m,C)})})},du=e=>Ea(e,"block"),_4=e=>du(e)&&e.wrapper===!0,op=e=>du(e)&&e.wrapper!==!0,Ac=e=>Ea(e,"selector"),Ns=e=>Ea(e,"inline"),E4=e=>Ac(e)&&Ns(e)&&jo(mo(e,"mixed"),!0),Vi=e=>Ac(e)&&e.expand!==!1&&!Ns(e),T4=e=>{const n=[];let o=e;for(;o;){if(Me(o)&&o.data!==Ko||o.childNodes.length>1)return[];pt(o)&&n.push(o),o=o.firstChild}return n},_x=e=>T4(e).length>0,sp=e=>lc(e.dom)&&_x(e.dom),wg=uc,Ex=Cg,Tx=c2,fM=a2,mM=e=>Bo(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,kx=(e,n)=>{let o=n;for(;o;){if(pt(o)&&e.getContentEditable(o))return e.getContentEditable(o)==="false"?o:n;o=o.parentNode}return n},Ox=(e,n,o,r)=>{const c=n.data;if(e){for(let u=o;u>0;u--)if(r(c.charAt(u-1)))return u}else for(let u=o;u<c.length;u++)if(r(c.charAt(u)))return u;return-1},it=(e,n,o)=>Ox(e,n,o,r=>wl(r)||If(r)),Bs=(e,n,o)=>Ox(e,n,o,e2),rp=(e,n,o,r,c,u)=>{let m;const v=e.getParent(o,e.isBlock)||n,C=(D,M,B)=>{const W=ed(e),q=c?W.backwards:W.forwards;return L.from(q(D,M,(Z,K)=>wg(Z.parentNode)?-1:(m=Z,B(c,Z,K)),v))};return C(o,r,it).bind(D=>u?C(D.container,D.offset+(c?-1:0),Bs):L.some(D)).orThunk(()=>m?L.some({container:m,offset:c?0:m.length}):L.none())},$s=(e,n,o,r,c)=>{const u=r[c];Me(r)&&Ka(r.data)&&u&&(r=u);const m=Ex(e,r);for(let v=0;v<m.length;v++)for(let C=0;C<n.length;C++){const E=n[C];if(!(Ae(E.collapsed)&&E.collapsed!==o.collapsed)&&Ac(E)&&e.is(m[v],E.selector))return m[v]}return r},Rc=(e,n,o,r)=>{var c;let u=o;const m=e.getRoot(),v=n[0];if(du(v)&&(u=v.wrapper?null:e.getParent(o,v.block,m)),!u){const C=(c=e.getParent(o,"LI,TD,TH,SUMMARY"))!==null&&c!==void 0?c:m;u=e.getParent(Me(o)?o.parentNode:o,E=>E!==m&&fM(e.schema,E),C)}if(u&&du(v)&&v.wrapper&&(u=Ex(e,u,"ul,ol").reverse()[0]||u),!u)for(u=o;u&&u[r]&&!e.isBlock(u[r])&&(u=u[r],!Nb(u,"br")););return u||o},u2=(e,n,o,r)=>{const c=o.parentNode;return Ae(o[r])?!1:c===n||_n(c)||e.isBlock(c)?!0:u2(e,n,c,r)},Vf=(e,n,o,r,c)=>{let u=o;const m=c?"previousSibling":"nextSibling",v=e.getRoot();if(Me(o)&&!Tx(o)&&(c?r>0:r<o.data.length))return o;for(;u;){if(!n[0].block_expand&&e.isBlock(u))return u;for(let C=u[m];C;C=C[m]){const E=Me(C)&&!u2(e,v,C,m);if(!wg(C)&&!mM(C)&&!Tx(C,E))return u}if(u===v||u.parentNode===v){o=u;break}u=u.parentNode}return o},Fb=e=>wg(e.parentNode)||wg(e),pd=(e,n,o,r=!1)=>{let{startContainer:c,startOffset:u,endContainer:m,endOffset:v}=n;const C=o[0];return pt(c)&&c.hasChildNodes()&&(c=ut(c,u),Me(c)&&(u=0)),pt(m)&&m.hasChildNodes()&&(m=ut(m,n.collapsed?v:v-1),Me(m)&&(v=m.data.length)),c=kx(e,c),m=kx(e,m),Fb(c)&&(c=wg(c)?c:c.parentNode,n.collapsed?c=c.previousSibling||c:c=c.nextSibling||c,Me(c)&&(u=n.collapsed?c.length:0)),Fb(m)&&(m=wg(m)?m:m.parentNode,n.collapsed?m=m.nextSibling||m:m=m.previousSibling||m,Me(m)&&(v=n.collapsed?0:m.length)),n.collapsed&&(rp(e,e.getRoot(),c,u,!0,r).each(({container:M,offset:B})=>{c=M,u=B}),rp(e,e.getRoot(),m,v,!1,r).each(({container:M,offset:B})=>{m=M,v=B})),(Ns(C)||C.block_expand)&&((!Ns(C)||!Me(c)||u===0)&&(c=Vf(e,o,c,u,!0)),(!Ns(C)||!Me(m)||v===m.data.length)&&(m=Vf(e,o,m,v,!1))),Vi(C)&&(c=$s(e,o,n,c,"previousSibling"),m=$s(e,o,n,m,"nextSibling")),(du(C)||Ac(C))&&(c=Rc(e,o,c,"previousSibling"),m=Rc(e,o,m,"nextSibling"),du(C)&&(e.isBlock(c)||(c=Vf(e,o,c,u,!0),Me(c)&&(u=0)),e.isBlock(m)||(m=Vf(e,o,m,v,!1),Me(m)&&(v=m.data.length)))),pt(c)&&c.parentNode&&(u=e.nodeIndex(c),c=c.parentNode),pt(m)&&m.parentNode&&(v=e.nodeIndex(m)+1,m=m.parentNode),{startContainer:c,startOffset:u,endContainer:m,endOffset:v}},ap=(e,n,o)=>{var r;const c=n.startOffset,u=ut(n.startContainer,c),m=n.endOffset,v=ut(n.endContainer,m-1),C=K=>{const ne=K[0];Me(ne)&&ne===u&&c>=ne.data.length&&K.splice(0,1);const re=K[K.length-1];return m===0&&K.length>0&&re===v&&Me(re)&&K.splice(K.length-1,1),K},E=(K,ne,re)=>{const se=[];for(;K&&K!==re;K=K[ne])se.push(K);return se},D=(K,ne)=>e.getParent(K,re=>re.parentNode===ne,ne),M=(K,ne,re)=>{const se=re?"nextSibling":"previousSibling";for(let ue=K,Oe=ue.parentNode;ue&&ue!==ne;ue=Oe){Oe=ue.parentNode;const Ue=E(ue===K?ue:ue[se],se);Ue.length&&(re||Ue.reverse(),o(C(Ue)))}};if(u===v)return o(C([u]));const B=(r=e.findCommonAncestor(u,v))!==null&&r!==void 0?r:e.getRoot();if(e.isChildOf(u,v))return M(u,B,!0);if(e.isChildOf(v,u))return M(v,B);const W=D(u,B)||u,q=D(v,B)||v;M(u,W,!0);const Z=E(W===u?W:W.nextSibling,"nextSibling",q===v?q.nextSibling:q);Z.length&&o(C(Z)),M(v,q)},Ax=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],k4=e=>Co(e)&&Nh(e)===Ko,O4=(e,n,o,r)=>wc(n).fold(()=>"skipping",c=>r==="br"||k4(n)?"valid":Ck(n)?"existing":lc(n.dom)?"caret":vo(Ax,u=>Ja(n,u))?"valid-block":!uu(e,o,r)||!uu(e,On(c),o)?"invalid-child":"valid"),A4=(e,n)=>{const o=pd(e.dom,n,[{inline:"span"}]);n.setStart(o.startContainer,o.startOffset),n.setEnd(o.endContainer,o.endOffset),e.selection.setRng(n)},bd=(e,n,o,r,c,u)=>{const{uid:m=n,...v}=o;nf(e,Um()),io(e,`${Wm()}`,m),io(e,`${hl()}`,r);const{attributes:C={},classes:E=[]}=c(m,v);if(Zl(e,C),L1(e,E),u){E.length>0&&io(e,`${Qu()}`,E.join(","));const D=Wr(C);D.length>0&&io(e,`${pl()}`,D.join(","))}},cp=e=>{of(e,Um()),Rs(e,`${Wm()}`),Rs(e,`${hl()}`),Rs(e,`${pf()}`);const n=xi(e,`${pl()}`).map(r=>r.split(",")).getOr([]),o=xi(e,`${Qu()}`).map(r=>r.split(",")).getOr([]);we(n,r=>Rs(e,r)),aM(e,o),Rs(e,`${Qu()}`),Rs(e,`${pl()}`)},ip=(e,n,o,r,c)=>{const u=X.fromTag("span",e);return bd(u,n,o,r,c,!1),u},Lb=(e,n,o,r,c,u)=>{const m=[],v=ip(e.getDoc(),o,u,r,c),C=vr(),E=()=>{C.clear()},D=()=>C.get().getOrThunk(()=>{const q=Ni(v);return m.push(q),C.set(q),q}),M=q=>{we(q,B)},B=q=>{switch(O4(e,q,"span",On(q))){case"invalid-child":{E();const K=gr(q);M(K),E();break}case"valid-block":{E(),bd(q,o,u,r,c,!0);break}case"valid":{const K=D();Qo(q,K);break}}},W=q=>{const Z=Xt(q,X.fromDom);M(Z)};return ap(e.dom,n,q=>{E(),W(q)}),m},Ha=(e,n,o,r)=>{e.undoManager.transact(()=>{const c=e.selection,u=c.getRng(),m=pg(e).length>0,v=Zm("mce-annotation");if(u.collapsed&&!m&&A4(e,u),c.getRng().collapsed&&!m){const C=ip(e.getDoc(),v,r,n,o.decorate);_c(C,Us),c.getRng().insertNode(C.dom),c.select(C.dom)}else s2(c,!1,()=>{vg(e,C=>{Lb(e,C,v,n,o.decorate,r)})})})},xl=e=>{const n=jv();I1(e,n);const o=Zv(e,n),r=bm("span"),c=u=>{we(u,m=>{r(m)?cf(m):cp(m)})};return{register:(u,m)=>{n.register(u,m)},annotate:(u,m)=>{n.lookup(u).each(v=>{Ha(e,u,v,m)})},annotationChanged:(u,m)=>{o.addListener(u,m)},remove:u=>{vf(e,L.some(u)).each(({elements:m})=>{const v=e.selection.getBookmark();c(m),e.selection.moveToBookmark(v)})},removeAll:u=>{const m=e.selection.getBookmark();lt(iS(e,u),(v,C)=>{c(v)}),e.selection.moveToBookmark(m)},getAll:u=>{const m=iS(e,u);return Ln(m,v=>Xt(v,C=>C.dom))}}},vd=e=>({getBookmark:Be(yx,e),moveToBookmark:Be(lu,e)});vd.isBookmarkNode=uc;const yd=(e,n,o)=>o.collapsed?!1:vo(o.getClientRects(),r=>kk(r,e,n)),R4=(e,n)=>e.dispatch("PreProcess",n),Hb=(e,n)=>e.dispatch("PostProcess",n),Vb=e=>{e.dispatch("remove")},D4=e=>{e.dispatch("detach")},M4=(e,n)=>{e.dispatch("SwitchMode",{mode:n})},P4=(e,n,o,r,c)=>{e.dispatch("ObjectResizeStart",{target:n,width:o,height:r,origin:c})},N4=(e,n,o,r,c)=>{e.dispatch("ObjectResized",{target:n,width:o,height:r,origin:c})},Rx=e=>{e.dispatch("PreInit")},zb=e=>{e.dispatch("PostRender")},B4=e=>{e.dispatch("Init")},Ub=(e,n)=>{e.dispatch("PlaceholderToggle",{state:n})},lr=(e,n,o)=>{e.dispatch(n,o)},Dc=(e,n,o,r)=>{e.dispatch("FormatApply",{format:n,node:o,vars:r})},dc=(e,n,o,r)=>{e.dispatch("FormatRemove",{format:n,node:o,vars:r})},Wb=(e,n)=>e.dispatch("BeforeSetContent",n),Zb=(e,n)=>e.dispatch("SetContent",n),Dx=(e,n)=>e.dispatch("BeforeGetContent",n),d2=(e,n)=>e.dispatch("GetContent",n),Mx=(e,n)=>{e.dispatch("AutocompleterStart",n)},f2=(e,n)=>{e.dispatch("AutocompleterUpdate",n)},Px=(e,n)=>{e.dispatch("AutocompleterUpdateActiveRange",n)},Nx=e=>{e.dispatch("AutocompleterEnd")},$4=(e,n,o)=>e.dispatch("PastePreProcess",{content:n,internal:o}),I4=(e,n,o)=>e.dispatch("PastePostProcess",{node:n,internal:o}),jb=(e,n)=>e.dispatch("PastePlainTextToggle",{state:n}),m2=(e,n)=>e.dispatch("EditableRootStateChange",{state:n}),He={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||He.metaKeyPressed(e),metaKeyPressed:e=>ct.os.isMacOS()||ct.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},na="data-mce-selected",Bx="table,img,figure.image,hr,video,span.mce-preview-object,details",g2=Math.abs,lp=Math.round,up={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},Gb=e=>e.type==="longpress"||e.type.indexOf("touch")===0,dp=(e,n)=>{const o=n.dom,r=n.getDoc(),c=document,u=n.getBody();let m,v,C,E,D,M,B,W,q,Z,K,ne,re,se,ue,Oe,Ue;const st=rt=>Ae(rt)&&(ke(rt)||o.is(rt,"figure.image")),$e=rt=>cl(rt)||o.hasClass(rt,"mce-preview-object"),Ce=(rt,nn)=>{if(Gb(rt)){const an=rt.touches[0];return st(rt.target)&&!yd(an.clientX,an.clientY,nn)}else return st(rt.target)&&!yd(rt.clientX,rt.clientY,nn)},Ee=rt=>{const nn=rt.target;Ce(rt,n.selection.getRng())&&!rt.isDefaultPrevented()&&n.selection.select(nn)},ot=rt=>o.hasClass(rt,"mce-preview-object")&&Ae(rt.firstElementChild)?[rt,rt.firstElementChild]:o.is(rt,"figure.image")?[rt.querySelector("img")]:[rt],wt=rt=>{const nn=rc(n);return!nn||rt.getAttribute("data-mce-resize")==="false"||rt===n.getBody()?!1:o.hasClass(rt,"mce-preview-object")&&Ae(rt.firstElementChild)?Ja(X.fromDom(rt.firstElementChild),nn):Ja(X.fromDom(rt),nn)},Qt=(rt,nn)=>{if($e(nn))return rt.create("img",{src:ct.transparentSrc});if(al(nn)){const Fs=ms(E.name,"n")?Dr:Ll,Fn=nn.cloneNode(!0);return Fs(rt.select("tr",Fn)).each(Cs=>{const Xi=rt.select("td,th",Cs);rt.setStyle(Cs,"height",null),we(Xi,Ml=>rt.setStyle(Ml,"height",null))}),Fn}else return nn.cloneNode(!0)},hn=(rt,nn,an)=>{if(Ae(an)){const Fs=ot(rt);we(Fs,Fn=>{Fn.style[nn]||!n.schema.isValid(Fn.nodeName.toLowerCase(),nn)?o.setStyle(Fn,nn,an):o.setAttrib(Fn,nn,""+an)})}},Un=(rt,nn,an)=>{hn(rt,"width",nn),hn(rt,"height",an)},Xn=rt=>{let nn,an,Fs,Fn,Cs;nn=rt.screenX-M,an=rt.screenY-B,se=nn*E[2]+Z,ue=an*E[3]+K,se=se<5?5:se,ue=ue<5?5:ue,(st(m)||$e(m))&&jh(n)!==!1?Fs=!He.modifierPressed(rt):Fs=He.modifierPressed(rt),Fs&&(g2(nn)>g2(an)?(ue=lp(se*ne),se=lp(ue/ne)):(se=lp(ue/ne),ue=lp(se*ne))),Un(v,se,ue),Fn=E.startPos.x+nn,Cs=E.startPos.y+an,Fn=Fn>0?Fn:0,Cs=Cs>0?Cs:0,o.setStyles(C,{left:Fn,top:Cs,display:"block"}),C.innerHTML=se+" &times; "+ue,E[2]<0&&v.clientWidth<=se&&o.setStyle(v,"left",W+(Z-se)),E[3]<0&&v.clientHeight<=ue&&o.setStyle(v,"top",q+(K-ue)),nn=u.scrollWidth-Oe,an=u.scrollHeight-Ue,nn+an!==0&&o.setStyles(C,{left:Fn-nn,top:Cs-an}),re||(P4(n,m,Z,K,"corner-"+E.name),re=!0)},co=()=>{const rt=re;re=!1,rt&&(hn(m,"width",se),hn(m,"height",ue)),o.unbind(r,"mousemove",Xn),o.unbind(r,"mouseup",co),c!==r&&(o.unbind(c,"mousemove",Xn),o.unbind(c,"mouseup",co)),o.remove(v),o.remove(C),o.remove(D),Or(m),rt&&(N4(n,m,se,ue,"corner-"+E.name),o.setAttrib(m,"style",o.getAttrib(m,"style"))),n.nodeChanged()},Or=rt=>{nt();const nn=o.getPos(rt,u),an=nn.x,Fs=nn.y,Fn=rt.getBoundingClientRect(),Cs=Fn.width||Fn.right-Fn.left,Xi=Fn.height||Fn.bottom-Fn.top;m!==rt&&(Xe(),m=rt,se=ue=0);const Ml=n.dispatch("ObjectSelected",{target:rt});wt(rt)&&!Ml.isDefaultPrevented()?lt(up,(ya,Fc)=>{const Ji=pi=>{const xt=ot(m)[0];M=pi.screenX,B=pi.screenY,Z=xt.clientWidth,K=xt.clientHeight,ne=K/Z,E=ya,E.name=Fc,E.startPos={x:Cs*ya[0]+an,y:Xi*ya[1]+Fs},Oe=u.scrollWidth,Ue=u.scrollHeight,D=o.add(u,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),o.setStyles(D,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),v=Qt(o,m),o.addClass(v,"mce-clonedresizable"),o.setAttrib(v,"data-mce-bogus","all"),v.contentEditable="false",o.setStyles(v,{left:an,top:Fs,margin:0}),Un(v,Cs,Xi),v.removeAttribute(na),u.appendChild(v),o.bind(r,"mousemove",Xn),o.bind(r,"mouseup",co),c!==r&&(o.bind(c,"mousemove",Xn),o.bind(c,"mouseup",co)),C=o.add(u,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},Z+" &times; "+K)};let Lc=o.get("mceResizeHandle"+Fc);Lc&&o.remove(Lc),Lc=o.add(u,"div",{id:"mceResizeHandle"+Fc,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+Fc+"-resize; margin:0; padding:0"}),o.bind(Lc,"mousedown",pi=>{pi.stopImmediatePropagation(),pi.preventDefault(),Ji(pi)}),ya.elm=Lc,o.setStyles(Lc,{left:Cs*ya[0]+an-Lc.offsetWidth/2,top:Xi*ya[1]+Fs-Lc.offsetHeight/2})}):Xe(!1)},Jn=Ph(Or,0),Xe=(rt=!0)=>{Jn.cancel(),nt(),m&&rt&&m.removeAttribute(na),lt(up,(nn,an)=>{const Fs=o.get("mceResizeHandle"+an);Fs&&(o.unbind(Fs),o.remove(Fs))})},bt=(rt,nn)=>o.isChildOf(rt,nn),En=rt=>{if(re||n.removed||n.composing)return;const nn=rt.type==="mousedown"?rt.target:e.getNode(),an=af(X.fromDom(nn),Bx).map(Fn=>Fn.dom).filter(Fn=>o.isEditable(Fn.parentElement)||Fn.nodeName==="IMG"&&o.isEditable(Fn)).getOrUndefined(),Fs=Ae(an)?o.getAttrib(an,na,"1"):"1";if(we(o.select(`img[${na}],hr[${na}]`),Fn=>{Fn.removeAttribute(na)}),Ae(an)&&bt(an,u)&&n.hasFocus()){kt();const Fn=e.getStart(!0);if(bt(Fn,an)&&bt(e.getEnd(!0),an)){o.setAttrib(an,na,Fs),Jn.throttle(an);return}}Xe()},nt=()=>{lt(up,rt=>{rt.elm&&(o.unbind(rt.elm),delete rt.elm)})},kt=()=>{try{n.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return n.on("init",()=>{kt(),n.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",En),n.on("keyup compositionend",rt=>{m&&m.nodeName==="TABLE"&&En(rt)}),n.on("hide blur",Xe),n.on("contextmenu longpress",Ee,!0)}),n.on("remove",nt),{isResizable:wt,showResizeRect:Or,hideResizeRect:Xe,updateResizeRect:En,destroy:()=>{Jn.cancel(),m=v=D=null}}},$x=(e,n)=>{n.fold(o=>{e.setStartBefore(o.dom)},(o,r)=>{e.setStart(o.dom,r)},o=>{e.setStartAfter(o.dom)})},Ix=(e,n)=>{n.fold(o=>{e.setEndBefore(o.dom)},(o,r)=>{e.setEnd(o.dom,r)},o=>{e.setEndAfter(o.dom)})},h2=(e,n,o)=>{const r=e.document.createRange();return $x(r,n),Ix(r,o),r},p2=(e,n,o,r,c)=>{const u=e.document.createRange();return u.setStart(n.dom,o),u.setEnd(r.dom,c),u},fu=$n.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),b2=(e,n,o)=>n(X.fromDom(o.startContainer),o.startOffset,X.fromDom(o.endContainer),o.endOffset),Fx=(e,n)=>n.match({domRange:o=>({ltr:et(o),rtl:L.none}),relative:(o,r)=>({ltr:ol(()=>h2(e,o,r)),rtl:ol(()=>L.some(h2(e,r,o)))}),exact:(o,r,c,u)=>({ltr:ol(()=>p2(e,o,r,c,u)),rtl:ol(()=>L.some(p2(e,c,u,o,r)))})}),F4=(e,n)=>{const o=n.ltr();return o.collapsed?n.rtl().filter(c=>c.collapsed===!1).map(c=>fu.rtl(X.fromDom(c.endContainer),c.endOffset,X.fromDom(c.startContainer),c.startOffset)).getOrThunk(()=>b2(e,fu.ltr,o)):b2(e,fu.ltr,o)},L4=(e,n)=>{const o=Fx(e,n);return F4(e,o)};fu.ltr,fu.rtl;const pa={create:(e,n,o,r)=>({start:e,soffset:n,finish:o,foffset:r})},Vr=(e,n,o)=>{var r,c;return L.from((c=(r=e.dom).caretPositionFromPoint)===null||c===void 0?void 0:c.call(r,n,o)).bind(u=>{if(u.offsetNode===null)return L.none();const m=e.dom.createRange();return m.setStart(u.offsetNode,u.offset),m.collapse(),L.some(m)})},Sg=(e,n,o)=>{var r,c;return L.from((c=(r=e.dom).caretRangeFromPoint)===null||c===void 0?void 0:c.call(r,n,o))},gM=document.caretPositionFromPoint?Vr:document.caretRangeFromPoint?Sg:L.none,H4=(e,n,o)=>{const r=X.fromDom(e.document);return gM(r,n,o).map(c=>pa.create(X.fromDom(c.startContainer),c.startOffset,X.fromDom(c.endContainer),c.endOffset))},v2=$n.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),yn=(e,n,o,r)=>e.fold(n,o,r),hM=e=>e.fold(zo,zo,zo),Hx=v2.before,Vx=v2.on,pM=v2.after,Cd={before:Hx,on:Vx,after:pM,cata:yn,getStart:hM},fp=$n.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),V4=e=>fp.exact(e.start,e.soffset,e.finish,e.foffset),z4=e=>e.match({domRange:n=>X.fromDom(n.startContainer),relative:(n,o)=>Cd.getStart(n),exact:(n,o,r,c)=>n}),U4=fp.domRange,qb=fp.relative,mp=fp.exact,zx=e=>{const n=z4(e);return fh(n)},bM=pa.create,xg={domRange:U4,relative:qb,exact:mp,exactFromRange:V4,getWin:zx,range:bM},y2=(e,n)=>{const o=On(e);return o==="input"?Cd.after(e):Gt(["br","img"],o)?n===0?Cd.before(e):Cd.after(e):Cd.on(e,n)},vM=(e,n)=>{const o=e.fold(Cd.before,y2,Cd.after),r=n.fold(Cd.before,y2,Cd.after);return xg.relative(o,r)},Ux=(e,n,o,r)=>{const c=y2(e,n),u=y2(o,r);return xg.relative(c,u)},W4=e=>e.match({domRange:n=>{const o=X.fromDom(n.startContainer),r=X.fromDom(n.endContainer);return Ux(o,n.startOffset,r,n.endOffset)},relative:vM,exact:Ux}),Pt=(e,n)=>{const r=document.createDocumentFragment();return we(e,c=>{r.appendChild(c.dom)}),X.fromDom(r)},l=e=>{const n=xg.getWin(e).dom,o=(c,u,m,v)=>p2(n,c,u,m,v),r=W4(e);return L4(n,r).match({ltr:o,rtl:o})},f=(e,n,o)=>H4(e,n,o),p=(e,n,o)=>{const r=fh(X.fromDom(o));return f(r.dom,e,n).map(c=>{const u=o.createRange();return u.setStart(c.start.dom,c.soffset),u.setEnd(c.finish.dom,c.foffset),u}).getOrUndefined()},y=(e,n)=>Ae(e)&&Ae(n)&&e.startContainer===n.startContainer&&e.startOffset===n.startOffset&&e.endContainer===n.endContainer&&e.endOffset===n.endOffset,_=(e,n,o)=>{let r=e;for(;r&&r!==n;){if(o(r))return r;r=r.parentNode}return null},O=(e,n,o)=>_(e,n,o)!==null,$=(e,n,o)=>O(e,n,r=>r.nodeName===o),U=(e,n)=>Fa(e)&&!O(e,n,lc),G=(e,n,o)=>{const r=n.parentNode;if(r){const c=new zs(n,e.getParent(r,e.isBlock)||e.getRoot());let u;for(;u=c[o?"prev":"next"]();)if(Bo(u))return!0}return!1},Q=(e,n)=>{var o;return((o=e.previousSibling)===null||o===void 0?void 0:o.nodeName)===n},fe=(e,n)=>{let o=n;for(;o&&o!==e;){if(ho(o))return!0;o=o.parentNode}return!1},Pe=(e,n,o,r,c)=>{const u=e.getRoot(),m=e.schema.getNonEmptyElements(),v=c.parentNode;let C,E;if(!v)return L.none();const D=e.getParent(v,e.isBlock)||u;if(r&&Bo(c)&&n&&e.isEmpty(D))return L.some(he(v,e.nodeIndex(c)));const M=new zs(c,D);for(;E=M[r?"prev":"next"]();){if(e.getContentEditableParent(E)==="false"||U(E,u))return L.none();if(Me(E)&&E.data.length>0)return $(E,u,"A")?L.none():L.some(he(E,r?E.data.length:0));if(e.isBlock(E)||m[E.nodeName.toLowerCase()])return L.none();C=E}return ql(C)?L.none():o&&C?L.some(he(C,0)):L.none()},tt=(e,n,o,r)=>{const c=e.getRoot();let u,m=!1,v=o?r.startContainer:r.endContainer,C=o?r.startOffset:r.endOffset;const E=pt(v)&&C===v.childNodes.length,D=e.schema.getNonEmptyElements();let M=o;if(Fa(v))return L.none();if(pt(v)&&C>v.childNodes.length-1&&(M=!1),rs(v)&&(v=c,C=0),v===c){if(M&&(u=v.childNodes[C>0?C-1:0],u&&(Fa(u)||D[u.nodeName]||al(u))))return L.none();if(v.hasChildNodes()){if(C=Math.min(!M&&C>0?C-1:C,v.childNodes.length-1),v=v.childNodes[C],C=Me(v)&&E?v.data.length:0,!n&&v===c.lastChild&&al(v)||fe(c,v)||Fa(v)||Ev(v))return L.none();if(v.hasChildNodes()&&!al(v)){u=v;const B=new zs(v,c);do{if(ho(u)||Fa(u)){m=!1;break}if(Me(u)&&u.data.length>0){C=M?0:u.data.length,v=u,m=!0;break}if(D[u.nodeName.toLowerCase()]&&!Kl(u)){C=e.nodeIndex(u),v=u.parentNode,M||C++,m=!0;break}}while(u=M?B.next():B.prev())}}}return n&&(Me(v)&&C===0&&Pe(e,E,n,!0,v).each(B=>{v=B.container(),C=B.offset(),m=!0}),pt(v)&&(u=v.childNodes[C],u||(u=v.childNodes[C-1]),u&&Bo(u)&&!Q(u,"A")&&!G(e,u,!1)&&!G(e,u,!0)&&Pe(e,E,n,!0,u).each(B=>{v=B.container(),C=B.offset(),m=!0}))),M&&!n&&Me(v)&&C===v.data.length&&Pe(e,E,n,!1,v).each(B=>{v=B.container(),C=B.offset(),m=!0}),m&&v?L.some(he(v,C)):L.none()},Ye=(e,n)=>{const o=n.collapsed,r=n.cloneRange(),c=he.fromRangeStart(n);return tt(e,o,!0,r).each(u=>{(!o||!he.isAbove(c,u))&&r.setStart(u.container(),u.offset())}),o||tt(e,o,!1,r).each(u=>{r.setEnd(u.container(),u.offset())}),o&&r.collapse(!0),y(n,r)?L.none():L.some(r)},We=(e,n)=>e.splitText(n),gt=e=>{let n=e.startContainer,o=e.startOffset,r=e.endContainer,c=e.endOffset;if(n===r&&Me(n)){if(o>0&&o<n.data.length)if(r=We(n,o),n=r.previousSibling,c>o){c=c-o;const u=We(r,c).previousSibling;n=r=u,c=u.data.length,o=0}else c=0}else if(Me(n)&&o>0&&o<n.data.length&&(n=We(n,o),o=0),Me(r)&&c>0&&c<r.data.length){const u=We(r,c).previousSibling;r=u,c=u.data.length}return{startContainer:n,startOffset:o,endContainer:r,endOffset:c}},Re=e=>({walk:(u,m)=>ap(e,u,m),split:gt,expand:(u,m={type:"word"})=>{if(m.type==="word"){const v=pd(e,u,[{inline:"span"}]),C=e.createRng();return C.setStart(v.startContainer,v.startOffset),C.setEnd(v.endContainer,v.endOffset),C}return u},normalize:u=>Ye(e,u).fold(De,m=>(u.setStart(m.startContainer,m.startOffset),u.setEnd(m.endContainer,m.endOffset),!0))});Re.compareRanges=y,Re.getCaretRangeFromPoint=p,Re.getSelectedNode=Qm,Re.getNode=ut;const At=((e,n)=>{const o=(v,C)=>{if(!Za(C)&&!C.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+C);const E=v.dom;Tm(E)&&(E.style[e]=C+"px")},r=v=>{const C=n(v);if(C<=0||C===null){const E=Yc(v,e);return parseFloat(E)||0}return C},c=r,u=(v,C)=>Wo(C,(E,D)=>{const M=Yc(v,D),B=M===void 0?0:parseInt(M,10);return isNaN(B)?E:E+B},0);return{set:o,get:r,getOuter:c,aggregate:u,max:(v,C,E)=>{const D=u(v,E);return C>D?C-D:0}}})("height",e=>{const n=e.dom;return rf(e)?n.getBoundingClientRect().height:n.offsetHeight}),Je=e=>At.get(e),An=()=>X.fromDom(document),jn=(e,n)=>e.view(n).fold(et([]),r=>{const c=e.owner(r),u=jn(e,c);return[r].concat(u)}),Hn=(e,n)=>{const o=n.owner(e);return jn(n,o)};var _l=Object.freeze({__proto__:null,view:e=>{var n;return(e.dom===document?L.none():L.from((n=e.dom.defaultView)===null||n===void 0?void 0:n.frameElement)).map(X.fromDom)},owner:e=>jr(e)});const wd=e=>{const n=An(),o=vv(n),r=Hn(e,_l),c=Aa(e),u=Zd(r,(m,v)=>{const C=Aa(v);return{left:m.left+C.left,top:m.top+C.top}},{left:0,top:0});return Gl(u.left+c.left+o.left,u.top+c.top+o.top)},Sd=e=>On(e)==="textarea",In=(e,n)=>e.dispatch("ScrollIntoView",n).isDefaultPrevented(),oa=(e,n)=>{e.dispatch("AfterScrollIntoView",n)},sa=(e,n)=>{const o=gr(e);if(o.length===0||Sd(e))return{element:e,offset:n};if(n<o.length&&!Sd(o[n]))return{element:o[n],offset:0};{const r=o[o.length-1];return Sd(r)?{element:e,offset:n}:On(r)==="img"?{element:r,offset:1}:Co(r)?{element:r,offset:Nh(r).length}:{element:r,offset:gr(r).length}}},Mc=(e,n)=>{const o=Fw(e),r=Je(e);return{element:e,bottom:o.top+r,height:r,pos:o,cleanup:n}},Pc=(e,n)=>{const o=sa(e,n),r=X.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+Ko+"</span>");return hr(o.element,r),Mc(r,()=>go(r))},ln=e=>Mc(X.fromDom(e),Bt),Ho=(e,n,o,r)=>{Kt(e,(c,u)=>gp(e,n,o,r),o)},El=(e,n,o,r,c)=>{const u={elm:r.element.dom,alignToTop:c};if(In(e,u))return;const m=vv(n).top;o(e,n,m,r,c),oa(e,u)},gp=(e,n,o,r)=>{const c=X.fromDom(e.getBody()),u=X.fromDom(e.getDoc());Mw(c);const m=Pc(X.fromDom(o.startContainer),o.startOffset);El(e,u,n,m,r),m.cleanup()},Va=(e,n,o,r)=>{const c=X.fromDom(e.getDoc());El(e,c,o,ln(n),r)},Kt=(e,n,o)=>{const r=o.startContainer,c=o.startOffset,u=o.endContainer,m=o.endOffset;n(X.fromDom(r),X.fromDom(u));const v=e.dom.createRng();v.setStart(r,c),v.setEnd(u,m),e.selection.setRng(o)},C2=(e,n,o,r,c)=>{const u=n.pos;if(r)bh(u.left,u.top,c);else{const m=u.top-o+n.height;bh(-e.getBody().getBoundingClientRect().left,m,c)}},w2=(e,n,o,r,c,u)=>{const m=r+o,v=c.pos.top,C=c.bottom,E=C-v>=r;v<o?C2(e,c,r,u!==!1,n):v>m?C2(e,c,r,E?u!==!1:u===!0,n):C>m&&!E&&C2(e,c,r,u===!0,n)},Kb=(e,n,o,r,c)=>{const u=fh(n).dom.innerHeight;w2(e,n,o,u,r,c)},Wx=(e,n,o,r,c)=>{const u=fh(n).dom.innerHeight;w2(e,n,o,u,r,c);const m=wd(r.element),v=Lu(window);m.top<v.y?Am(r.element,c!==!1):m.top>v.bottom&&Am(r.element,c===!0)},zf=(e,n,o)=>Ho(e,Kb,n,o),mu=(e,n,o)=>Va(e,n,Kb,o),Zx=(e,n,o)=>Ho(e,Wx,n,o),hp=(e,n,o)=>Va(e,n,Wx,o),RL=(e,n,o)=>{(e.inline?mu:hp)(e,n,o)},S2=(e,n,o)=>{(e.inline?zf:Zx)(e,n,o)},Yb=(e,n=!1)=>e.dom.focus({preventScroll:n}),pp=e=>{const n=jl(e).dom;return e.dom===n.activeElement},Z4=(e=An())=>L.from(e.dom.activeElement).map(X.fromDom),yM=e=>Z4(jl(e)).filter(n=>e.dom.contains(n.dom)),CM=(e,n)=>{const o=Co(n)?Nh(n).length:gr(n).length+1;return e>o?o:e<0?0:e},DL=e=>xg.range(e.start,CM(e.soffset,e.start),e.finish,CM(e.foffset,e.finish)),wM=(e,n)=>!hs(n.dom)&&(_i(e,n)||Wn(e,n)),j4=e=>n=>wM(e,n.start)&&wM(e,n.finish),Hq=e=>e.inline||ct.browser.isFirefox(),ML=e=>xg.range(X.fromDom(e.startContainer),e.startOffset,X.fromDom(e.endContainer),e.endOffset),SM=e=>{const n=e.getSelection();return(!n||n.rangeCount===0?L.none():L.from(n.getRangeAt(0))).map(ML)},G4=e=>{const n=fh(e);return SM(n.dom).filter(j4(e))},q4=(e,n)=>L.from(n).filter(j4(e)).map(DL),K4=e=>{const n=document.createRange();try{return n.setStart(e.start.dom,e.soffset),n.setEnd(e.finish.dom,e.foffset),L.some(n)}catch{return L.none()}},x2=e=>{const n=Hq(e)?G4(X.fromDom(e.getBody())):L.none();e.bookmark=n.isSome()?n:e.bookmark},jx=e=>(e.bookmark?e.bookmark:L.none()).bind(o=>q4(X.fromDom(e.getBody()),o)).bind(K4),xM=e=>{jx(e).each(n=>e.selection.setRng(n))},_M={isEditorUIElement:e=>{const n=e.className.toString();return n.indexOf("tox-")!==-1||n.indexOf("mce-")!==-1}},EM=(e,n)=>(Za(n)||(n=0),setTimeout(e,n)),PL=(e,n)=>(Za(n)||(n=0),setInterval(e,n)),ai={setEditorTimeout:(e,n,o)=>EM(()=>{e.removed||n()},o),setEditorInterval:(e,n,o)=>{const r=PL(()=>{e.removed?clearInterval(r):n()},o);return r}},TM=e=>e.type==="nodechange"&&e.selectionChange,kM=(e,n)=>{const o=()=>{n.throttle()};ao.DOM.bind(document,"mouseup",o),e.on("remove",()=>{ao.DOM.unbind(document,"mouseup",o)})},OM=(e,n)=>{e.on("mouseup touchend",o=>{n.throttle()})},AM=(e,n)=>{OM(e,n),e.on("keyup NodeChange AfterSetSelectionRange",o=>{TM(o)||x2(e)})},NL=e=>{const n=Ph(()=>{x2(e)},0);e.on("init",()=>{e.inline&&kM(e,n),AM(e,n)}),e.on("remove",()=>{n.cancel()})};let Xb;const X4=ao.DOM,BL=e=>pt(e)&&_M.isEditorUIElement(e),J4=e=>{const n=e.classList;return n!==void 0?n.contains("tox-edit-area")||n.contains("tox-edit-area__iframe")||n.contains("mce-content-body"):!1},Gx=(e,n)=>{const o=qh(e);return X4.getParent(n,c=>BL(c)||(o?e.dom.is(c,o):!1))!==null},Q4=e=>{try{const n=jl(X.fromDom(e.getElement()));return Z4(n).fold(()=>document.body,o=>o.dom)}catch{return document.body}},$L=(e,n)=>{const o=n.editor;NL(o);const r=(c,u)=>{if(mb(c)&&c.inline!==!0){const m=X.fromDom(c.getContainer());u(m,"tox-edit-focus")}};o.on("focusin",()=>{const c=e.focusedEditor;J4(Q4(o))&&r(o,nf),c!==o&&(c&&c.dispatch("blur",{focusedEditor:o}),e.setActive(o),e.focusedEditor=o,o.dispatch("focus",{blurredEditor:c}),o.focus(!0))}),o.on("focusout",()=>{ai.setEditorTimeout(o,()=>{const c=e.focusedEditor;(!J4(Q4(o))||c!==o)&&r(o,of),!Gx(o,Q4(o))&&c===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),Xb||(Xb=c=>{const u=e.activeEditor;u&&y1(c).each(m=>{const v=m;v.ownerDocument===document&&v!==document.body&&!Gx(u,v)&&e.focusedEditor===u&&(u.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},X4.bind(document,"focusin",Xb))},qx=(e,n)=>{e.focusedEditor===n.editor&&(e.focusedEditor=null),!e.activeEditor&&Xb&&(X4.unbind(document,"focusin",Xb),Xb=null)},RM=e=>{e.on("AddEditor",Be($L,e)),e.on("RemoveEditor",Be(qx,e))},IL=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="true"),DM=e=>e.collapsed?L.from(ut(e.startContainer,e.startOffset)).map(X.fromDom):L.none(),MM=(e,n)=>DM(n).bind(o=>Km(o)?L.some(o):_i(e,o)?L.none():L.some(e)),PM=(e,n)=>{MM(X.fromDom(e.getBody()),n).bind(o=>Hr(o.dom)).fold(()=>{e.selection.normalize()},o=>e.selection.setRng(o.toRange()))},eO=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},FL=e=>pp(e)||yM(e).isSome(),LL=e=>Ae(e.iframeElement)&&pp(X.fromDom(e.iframeElement)),HL=e=>{const n=e.getBody();return n&&FL(X.fromDom(n))},NM=e=>{const n=jl(X.fromDom(e.getElement()));return Z4(n).filter(o=>!J4(o.dom)&&Gx(e,o.dom)).isSome()},_g=e=>e.inline?HL(e):LL(e),_2=e=>_g(e)||NM(e),VL=e=>{const n=e.selection,o=e.getBody();let r=n.getRng();e.quirks.refreshContentEditable(),Ae(e.bookmark)&&!_g(e)&&jx(e).each(u=>{e.selection.setRng(u),r=u});const c=IL(e,n.getNode());if(c&&e.dom.isChildOf(c,o)){eO(c),PM(e,r),tO(e);return}e.inline||(ct.browser.isOpera()||eO(o),e.getWin().focus()),(ct.browser.isFirefox()||e.inline)&&(eO(o),PM(e,r)),tO(e)},tO=e=>e.editorManager.setActive(e),nO=(e,n)=>{e.removed||(n?tO(e):VL(e))},BM=(e,n)=>n.collapsed?e.isEditable(n.startContainer):e.isEditable(n.startContainer)&&e.isEditable(n.endContainer),oO=(e,n,o,r,c)=>{const u=o?n.startContainer:n.endContainer,m=o?n.startOffset:n.endOffset;return L.from(u).map(X.fromDom).map(v=>!r||!n.collapsed?Bu(v,c(v,m)).getOr(v):v).bind(v=>Xa(v)?L.some(v):wc(v).filter(Xa)).map(v=>v.dom).getOr(e)},sO=(e,n,o=!1)=>oO(e,n,!0,o,(r,c)=>Math.min(Gr(r),c)),rO=(e,n,o=!1)=>oO(e,n,!1,o,(r,c)=>c>0?c-1:c),$M=(e,n)=>{const o=e;for(;e&&Me(e)&&e.length===0;)e=n?e.nextSibling:e.previousSibling;return e||o},zL=(e,n)=>{if(!n)return e;let o=n.startContainer,r=n.endContainer;const c=n.startOffset,u=n.endOffset;let m=n.commonAncestorContainer;n.collapsed||(o===r&&u-c<2&&o.hasChildNodes()&&(m=o.childNodes[c]),Me(o)&&Me(r)&&(o.length===c?o=$M(o.nextSibling,!0):o=o.parentNode,u===0?r=$M(r.previousSibling,!1):r=r.parentNode,o&&o===r&&(m=o)));const v=Me(m)?m.parentNode:m;return ki(v)?v:e},UL=(e,n,o,r)=>{const c=[],u=e.getRoot(),m=e.getParent(o||sO(u,n,n.collapsed),e.isBlock),v=e.getParent(r||rO(u,n,n.collapsed),e.isBlock);if(m&&m!==u&&c.push(m),m&&v&&m!==v){let C;const E=new zs(m,u);for(;(C=E.next())&&C!==v;)e.isBlock(C)&&c.push(C)}return v&&m!==v&&v!==u&&c.push(v),c},WL=(e,n,o)=>L.from(n).bind(r=>L.from(r.parentNode).map(c=>{const u=e.nodeIndex(r),m=e.createRng();return m.setStart(c,u),m.setEnd(c,u+1),o&&(n2(e,m,r,!0),n2(e,m,r,!1)),m})),Jb=(e,n)=>Xt(n,o=>{const r=e.dispatch("GetSelectionRange",{range:o});return r.range!==o?r.range:o}),IM={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},E2=(e,n,o)=>{const r=o?"lastChild":"firstChild",c=o?"prev":"next";if(e[r])return e[r];if(e!==n){let u=e[c];if(u)return u;for(let m=e.parent;m&&m!==n;m=m.parent)if(u=m[c],u)return u}},FM=e=>{var n;const o=(n=e.value)!==null&&n!==void 0?n:"";if(!rl(o))return!1;const r=e.parent;return!(r&&(r.name!=="span"||r.attr("style"))&&/^[ ]+$/.test(o))},aO=e=>{const n=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||n};class za{static create(n,o){const r=new za(n,IM[n]||1);return o&&lt(o,(c,u)=>{r.attr(u,c)}),r}constructor(n,o){this.name=n,this.type=o,o===1&&(this.attributes=[],this.attributes.map={})}replace(n){const o=this;return n.parent&&n.remove(),o.insert(n,o),o.remove(),o}attr(n,o){const r=this;if(!ee(n))return Ae(n)&&lt(n,(u,m)=>{r.attr(m,u)}),r;const c=r.attributes;if(c){if(o!==void 0){if(o===null){if(n in c.map){delete c.map[n];let u=c.length;for(;u--;)if(c[u].name===n)return c.splice(u,1),r}return r}if(n in c.map){let u=c.length;for(;u--;)if(c[u].name===n){c[u].value=o;break}}else c.push({name:n,value:o});return c.map[n]=o,r}return c.map[n]}}clone(){const n=this,o=new za(n.name,n.type),r=n.attributes;if(r){const c=[];c.map={};for(let u=0,m=r.length;u<m;u++){const v=r[u];v.name!=="id"&&(c[c.length]={name:v.name,value:v.value},c.map[v.name]=v.value)}o.attributes=c}return o.value=n.value,o}wrap(n){const o=this;return o.parent&&(o.parent.insert(n,o),n.append(o)),o}unwrap(){const n=this;for(let o=n.firstChild;o;){const r=o.next;n.insert(o,n,!0),o=r}n.remove()}remove(){const n=this,o=n.parent,r=n.next,c=n.prev;return o&&(o.firstChild===n?(o.firstChild=r,r&&(r.prev=null)):c&&(c.next=r),o.lastChild===n?(o.lastChild=c,c&&(c.next=null)):r&&(r.prev=c),n.parent=n.next=n.prev=null),n}append(n){const o=this;n.parent&&n.remove();const r=o.lastChild;return r?(r.next=n,n.prev=r,o.lastChild=n):o.lastChild=o.firstChild=n,n.parent=o,n}insert(n,o,r){n.parent&&n.remove();const c=o.parent||this;return r?(o===c.firstChild?c.firstChild=n:o.prev&&(o.prev.next=n),n.prev=o.prev,n.next=o,o.prev=n):(o===c.lastChild?c.lastChild=n:o.next&&(o.next.prev=n),n.next=o.next,n.prev=o,o.next=n),n.parent=c,n}getAll(n){const o=this,r=[];for(let c=o.firstChild;c;c=E2(c,o))c.name===n&&r.push(c);return r}children(){const n=this,o=[];for(let r=n.firstChild;r;r=r.next)o.push(r);return o}empty(){const n=this;if(n.firstChild){const o=[];for(let c=n.firstChild;c;c=E2(c,n))o.push(c);let r=o.length;for(;r--;){const c=o[r];c.parent=c.firstChild=c.lastChild=c.next=c.prev=null}}return n.firstChild=n.lastChild=null,n}isEmpty(n,o={},r){var c;const u=this;let m=u.firstChild;if(aO(u))return!1;if(m)do{if(m.type===1){if(m.attr("data-mce-bogus"))continue;if(n[m.name]||aO(m))return!1}if(m.type===8||m.type===3&&!FM(m)||m.type===3&&m.parent&&o[m.parent.name]&&rl((c=m.value)!==null&&c!==void 0?c:"")||r&&r(m))return!1}while(m=E2(m,u));return!0}walk(n){return E2(this,null,n)}}const ZL=ze.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),LM=e=>ee(e.nodeValue)&&e.nodeValue.includes(Ko),HM=e=>`${e.length===0?"":`${Xt(e,n=>`[${n}]`).join(",")},`}[data-mce-bogus="all"]`,jL=(e,n)=>n.querySelectorAll(HM(e)),VM=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,n=>LM(n)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),zM=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,n=>{if(LM(n)){const o=n.parentNode;return o&&Ft(ZL,o.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}else return NodeFilter.FILTER_SKIP}),GL=e=>VM(e).nextNode()!==null,qL=e=>zM(e).nextNode()!==null,KL=(e,n)=>n.querySelector(HM(e))!==null,YL=(e,n)=>{we(jL(e,n),o=>{const r=X.fromDom(o);Es(r,"data-mce-bogus")==="all"?go(r):we(e,c=>{tf(r,c)&&Rs(r,c)})})},UM=e=>{let n=e.nextNode();for(;n!==null;)n.nodeValue=null,n=e.nextNode()},Kx=A(UM,VM),WM=A(UM,zM),cO=(e,n)=>{const o=[{condition:Be(KL,n),action:Be(YL,n)},{condition:GL,action:Kx},{condition:qL,action:WM}];let r=e,c=!1;return we(o,({condition:u,action:m})=>{u(r)&&(c||(r=e.cloneNode(!0),c=!0),m(r))}),r},ZM=e=>{const n=sr(e,"[data-mce-bogus]");we(n,o=>{Es(o,"data-mce-bogus")==="all"?go(o):qm(o)?(hr(o,X.fromText(Hu)),go(o)):cf(o)})},jM=e=>{const n=sr(e,"input");we(n,o=>{Rs(o,"name")})},XL=(e,n)=>{const o=Sr(e),r=new RegExp(`^(<${o}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${o}>[\r
]*|<br \\/>[\r
]*)$`);return n.replace(r,"")},JL=(e,n)=>{const o=e.getDoc(),r=jl(X.fromDom(e.getBody())),c=X.fromTag("div",o);io(c,"data-mce-bogus","all"),qr(c,{position:"fixed",left:"-9999999px",top:"0"}),_c(c,n.innerHTML),ZM(c),jM(c);const u=ek(r);gs(u,c);const m=Ia(c.dom.innerText);return go(c),m},QL=(e,n,o)=>{let r;return n.format==="raw"?r=ze.trim(Ia(cO(o,e.serializer.getTempAttrs()).innerHTML)):n.format==="text"?r=JL(e,o):n.format==="tree"?r=e.serializer.serialize(o,n):r=XL(e,e.serializer.serialize(o,n)),n.format!=="text"&&!$h(X.fromDom(o))&&ee(r)?ze.trim(r):r},e7=(e,n)=>L.from(e.getBody()).fold(et(n.format==="tree"?new za("body",11):""),o=>QL(e,n,o)),iO=ze.makeMap,GM=e=>{const n=[];e=e||{};const o=e.indent,r=iO(e.indent_before||""),c=iO(e.indent_after||""),u=qu.getEncodeFunc(e.entity_encoding||"raw",e.entities),m=e.element_format!=="xhtml";return{start:(v,C,E)=>{if(o&&r[v]&&n.length>0){const D=n[n.length-1];D.length>0&&D!==`
`&&n.push(`
`)}if(n.push("<",v),C)for(let D=0,M=C.length;D<M;D++){const B=C[D];n.push(" ",B.name,'="',u(B.value,!0),'"')}if(!E||m?n[n.length]=">":n[n.length]=" />",E&&o&&c[v]&&n.length>0){const D=n[n.length-1];D.length>0&&D!==`
`&&n.push(`
`)}},end:v=>{let C;n.push("</",v,">"),o&&c[v]&&n.length>0&&(C=n[n.length-1],C.length>0&&C!==`
`&&n.push(`
`))},text:(v,C)=>{v.length>0&&(n[n.length]=C?v:u(v))},cdata:v=>{n.push("<![CDATA[",v,"]]>")},comment:v=>{n.push("<!--",v,"-->")},pi:(v,C)=>{C?n.push("<?",v," ",u(C),"?>"):n.push("<?",v,"?>"),o&&n.push(`
`)},doctype:v=>{n.push("<!DOCTYPE",v,">",o?`
`:"")},reset:()=>{n.length=0},getContent:()=>n.join("").replace(/\n$/,"")}},Uf=(e={},n=Bn())=>{const o=GM(e);return e.validate="validate"in e?e.validate:!0,{serialize:c=>{const u=e.validate,m={3:C=>{var E;o.text((E=C.value)!==null&&E!==void 0?E:"",C.raw)},8:C=>{var E;o.comment((E=C.value)!==null&&E!==void 0?E:"")},7:C=>{o.pi(C.name,C.value)},10:C=>{var E;o.doctype((E=C.value)!==null&&E!==void 0?E:"")},4:C=>{var E;o.cdata((E=C.value)!==null&&E!==void 0?E:"")},11:C=>{let E=C;if(E=E.firstChild)do v(E);while(E=E.next)}};o.reset();const v=C=>{var E;const D=m[C.type];if(D)D(C);else{const M=C.name,B=M in n.getVoidElements();let W=C.attributes;if(u&&W&&W.length>1){const q=[];q.map={};const Z=n.getElementRule(C.name);if(Z){for(let K=0,ne=Z.attributesOrder.length;K<ne;K++){const re=Z.attributesOrder[K];if(re in W.map){const se=W.map[re];q.map[re]=se,q.push({name:re,value:se})}}for(let K=0,ne=W.length;K<ne;K++){const re=W[K].name;if(!(re in q.map)){const se=W.map[re];q.map[re]=se,q.push({name:re,value:se})}}W=q}}if(o.start(M,W,B),ko(M))ee(C.value)&&o.text(C.value,!0),o.end(M);else if(!B){let q=C.firstChild;if(q){(M==="pre"||M==="textarea")&&q.type===3&&((E=q.value)===null||E===void 0?void 0:E[0])===`
`&&o.text(`
`,!0);do v(q);while(q=q.next)}o.end(M)}}};return c.type===1&&!e.inner?v(c):c.type===3?m[3](c):m[11](c),o.getContent()}}},lO=new Set;we(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],n=>{lO.add(n)});const qM=["font","text-decoration","text-emphasis"],uO=(e,n)=>Wr(e.parseStyle(e.getAttrib(n,"style"))),t7=e=>lO.has(e),n7=(e,n)=>ur(uO(e,n),o=>!t7(o)),o7=e=>Mt(e,n=>vo(qM,o=>ms(n,o))),s7=(e,n,o)=>{const r=uO(e,n),c=uO(e,o),u=m=>{var v,C;const E=(v=e.getStyle(n,m))!==null&&v!==void 0?v:"",D=(C=e.getStyle(o,m))!==null&&C!==void 0?C:"";return no(E)&&no(D)&&E!==D};return vo(r,m=>{const v=C=>vo(C,E=>E===m);if(!v(c)&&v(qM)){const C=o7(c);return vo(C,u)}else return u(m)})},KM=(e,n,o)=>L.from(o.container()).filter(Me).exists(r=>{const c=e?0:-1;return n(r.data.charAt(o.offset()+c))}),dO=Be(KM,!0,If),fO=Be(KM,!1,If),r7=e=>{const n=e.container();return Me(n)&&(n.data.length===0||yf(n.data)&&vd.isBookmarkNode(n.parentNode))},Eg=(e,n)=>o=>Sb(e?0:-1,o).filter(n).isSome(),YM=e=>ke(e)&&Yc(X.fromDom(e),"display")==="block",XM=e=>ho(e)&&!Hw(e),a7=Eg(!0,YM),c7=Eg(!1,YM),T2=Eg(!0,cl),k2=Eg(!1,cl),JM=Eg(!0,al),QM=Eg(!1,al),yt=Eg(!0,XM),Wf=Eg(!1,XM),eP=e=>e.slice(0,-1),i7=(e,n,o)=>_i(n,e)?eP(mv(e,r=>o(r)||Wn(r,n))):[],Yx=(e,n)=>i7(e,n,De),Zf=(e,n)=>[e].concat(Yx(e,n)),mO=(e,n,o)=>hx(e,n,o,r7),l7=e=>n=>e.isBlock(On(n)),tP=(e,n,o)=>ss(Zf(X.fromDom(n.container()),e),l7(o)),nP=(e,n,o,r)=>mO(e,n.dom,o).forall(c=>tP(n,o,r).fold(()=>!ac(c,o,n.dom),u=>!ac(c,o,n.dom)&&_i(u,X.fromDom(c.container())))),O2=(e,n,o,r)=>tP(n,o,r).fold(()=>mO(e,n.dom,o).forall(c=>!ac(c,o,n.dom)),c=>mO(e,c.dom,o).isNone()),Xx=Be(O2,!1),u7=Be(O2,!0),d7=Be(nP,!1),Vt=Be(nP,!0),f7=e=>_b(e).exists(qm),Jt=(e,n,o,r)=>{const c=Mt(Zf(X.fromDom(o.container()),n),m=>r.isBlock(On(m))),u=Dr(c).getOr(n);return cc(e,u.dom,o).filter(f7)},Jx=(e,n,o)=>_b(n).exists(qm)||Jt(!0,e,n,o).isSome(),oP=(e,n,o)=>lx(n).exists(qm)||Jt(!1,e,n,o).isSome(),Vq=Be(Jt,!1),m7=Be(Jt,!0),g7=e=>he.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),h7=(e,n,o)=>{const r=Mt(Zf(X.fromDom(n.container()),e),c=>o.isBlock(On(c)));return Dr(r).getOr(e)},sP=(e,n,o)=>g7(n)?fO(n):fO(n)||La(h7(e,n,o).dom,n).exists(fO),rP=(e,n,o)=>g7(n)?dO(n):dO(n)||Lr(h7(e,n,o).dom,n).exists(dO),It=e=>Gt(["pre","pre-wrap"],e),gO=e=>_b(e).bind(n=>Nr(n,Xa)).exists(n=>It(Yc(n,"white-space"))),p7=(e,n)=>La(e.dom,n).isNone(),b7=(e,n)=>Lr(e.dom,n).isNone(),A2=(e,n,o)=>p7(e,n)||b7(e,n)||Xx(e,n,o)||u7(e,n,o)||oP(e,n,o)||Jx(e,n,o),aP=e=>Ae(e)&&ho(e)&&Hy(e),cP=(e,n)=>o=>aP(new zs(o,e)[n]()),v7=(e,n)=>{const o=Lr(e.dom,n).getOr(n),r=cP(e.dom,"next");return n.isAtEnd()&&(r(n.container())||r(o.container()))},y7=(e,n)=>{const o=La(e.dom,n).getOr(n),r=cP(e.dom,"prev");return n.isAtStart()&&(r(n.container())||r(o.container()))},hO=(e,n,o)=>gO(n)?!1:A2(e,n,o)||sP(e,n,o)||rP(e,n,o),R2=(e,n,o)=>gO(n)?!1:Xx(e,n,o)||d7(e,n,o)||oP(e,n,o)||sP(e,n,o)||y7(e,n),zq=e=>{const n=e.container(),o=e.offset();return Me(n)&&o<n.data.length?he(n,o+1):e},Qx=(e,n,o)=>gO(n)?!1:u7(e,n,o)||Vt(e,n,o)||Jx(e,n,o)||rP(e,n,o)||v7(e,n),pO=(e,n,o)=>R2(e,n,o)||Qx(e,zq(n),o),iP=(e,n)=>wl(e.charAt(n)),lP=(e,n)=>If(e.charAt(n)),C7=e=>{const n=e.container();return Me(n)&&dr(n.data,Us)},uP=e=>{const n=e.split("");return Xt(n,(o,r)=>wl(o)&&r>0&&r<n.length-1&&e2(n[r-1])&&e2(n[r+1])?" ":o).join("")},dP=(e,n,o,r)=>{const c=n.data,u=he(n,0);return!o&&iP(c,0)&&!pO(e,u,r)?(n.data=" "+c.slice(1),!0):o&&lP(c,0)&&R2(e,u,r)?(n.data=Us+c.slice(1),!0):!1},on=e=>{const n=e.data,o=uP(n);return o!==n?(e.data=o,!0):!1},bO=(e,n,o,r)=>{const c=n.data,u=he(n,c.length-1);return!o&&iP(c,c.length-1)&&!pO(e,u,r)?(n.data=c.slice(0,-1)+" ",!0):o&&lP(c,c.length-1)&&Qx(e,u,r)?(n.data=c.slice(0,-1)+Us,!0):!1},e_=(e,n,o)=>{const r=n.container();if(!Me(r))return L.none();if(C7(n)){const c=dP(e,r,!1,o)||on(r)||bO(e,r,!1,o);return kn(c,n)}else if(pO(e,n,o)){const c=dP(e,r,!0,o)||bO(e,r,!0,o);return kn(c,n)}else return L.none()},fP=e=>{const n=X.fromDom(e.getBody());e.selection.isCollapsed()&&e_(n,he.fromRangeStart(e.selection.getRng()),e.schema).each(o=>{e.selection.setRng(o.toRange())})},vO=(e,n,o,r)=>{if(o===0)return;const c=X.fromDom(e),u=Mo(c,E=>r.isBlock(On(E))).getOr(c),m=e.data.slice(n,n+o),v=n+o>=e.data.length&&Qx(u,he(e,e.data.length),r),C=n===0&&R2(u,he(e,0),r);e.replaceData(n,o,vh(m,4,C,v))},D2=(e,n,o)=>{const r=e.data.slice(n),c=r.length-oh(r).length;vO(e,n,c,o)},t_=(e,n,o)=>{const r=e.data.slice(0,n),c=r.length-gm(r).length;vO(e,n-c,c,o)},n_=(e,n,o,r,c=!0)=>{const u=gm(e.data).length,m=c?e:n,v=c?n:e;return c?m.appendData(v.data):m.insertData(0,v.data),go(X.fromDom(v)),r&&D2(m,u,o),m},w7=(e,n)=>{const o=e.container(),r=e.offset();return!he.isTextPosition(e)&&o===n.parentNode&&r>he.before(n).offset()},mP=(e,n)=>w7(n,e)?he(n.container(),n.offset()-1):n,S7=e=>Me(e)?he(e,0):he.before(e),x7=e=>Me(e)?he(e,e.data.length):he.after(e),gP=e=>Ii(e.previousSibling)?L.some(x7(e.previousSibling)):e.previousSibling?ic(e.previousSibling):L.none(),hP=e=>Ii(e.nextSibling)?L.some(S7(e.nextSibling)):e.nextSibling?Hr(e.nextSibling):L.none(),_7=(e,n)=>L.from(n.previousSibling?n.previousSibling:n.parentNode).bind(o=>La(e,he.before(o))).orThunk(()=>Lr(e,he.after(n))),E7=(e,n)=>Lr(e,he.after(n)).orThunk(()=>La(e,he.before(n))),T7=(e,n)=>gP(n).orThunk(()=>hP(n)).orThunk(()=>_7(e,n)),k7=(e,n)=>hP(n).orThunk(()=>gP(n)).orThunk(()=>E7(e,n)),yO=(e,n,o)=>e?k7(n,o):T7(n,o),CO=(e,n,o)=>yO(e,n,o).map(Be(mP,o)),pP=(e,n,o)=>{o.fold(()=>{e.focus()},r=>{e.selection.setRng(r.toRange(),n)})},O7=e=>n=>n.dom===e,A7=(e,n)=>n&&Ft(e.schema.getBlockElements(),On(n)),R7=(e,n,o)=>{if(br(e,n)){const r=X.fromHtml('<br data-mce-bogus="1">');return o?we(gr(n),c=>{sp(c)||go(c)}):Fu(n),gs(n,r),L.some(he.before(r.dom))}else return L.none()},D7=(e,n,o,r)=>{const c=qc(e).filter(Co),u=xm(e).filter(Co);return go(e),Mu(c,u,n,(m,v,C)=>{const E=m.dom,D=v.dom,M=E.data.length;return n_(E,D,o,r),C.container()===D?he(E,M):C}).orThunk(()=>(r&&(c.each(m=>t_(m.dom,m.dom.length,o)),u.each(m=>D2(m.dom,0,o))),n))},M7=(e,n)=>Ft(e.schema.getTextInlineElements(),On(n)),bp=(e,n,o,r=!0,c=!1)=>{const u=CO(n,e.getBody(),o.dom),m=Mo(o,Be(A7,e),O7(e.getBody())),v=D7(o,u,e.schema,M7(e,o));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):m.bind(C=>R7(e.schema,C,c)).fold(()=>{r&&pP(e,n,v)},C=>{r&&pP(e,n,L.some(C))})},P7=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,bP=e=>P7.test(e),vp=(e,n)=>Ja(X.fromDom(n),Yk(e))&&!Wu(e.schema,n)&&e.dom.isEditable(n),vP=e=>{var n;return ao.DOM.getStyle(e,"direction",!0)==="rtl"||bP((n=e.textContent)!==null&&n!==void 0?n:"")},yp=(e,n,o)=>Mt(ao.DOM.getParents(o.container(),"*",n),e),Tg=(e,n,o)=>{const r=yp(e,n,o);return L.from(r[r.length-1])},yP=(e,n,o)=>{const r=Hi(n,e),c=Hi(o,e);return Ae(r)&&r===c},N7=e=>Jv(e)||wf(e),zi=(e,n)=>{const o=n.container(),r=n.offset();return e?$i(o)?Me(o.nextSibling)?he(o.nextSibling,0):he.after(o):Jv(n)?he(o,r+1):n:$i(o)?Me(o.previousSibling)?he(o.previousSibling,o.previousSibling.data.length):he.before(o):wf(n)?he(o,r-1):n},wO=Be(zi,!0),SO=Be(zi,!1),xO=(e,n)=>{const o=r=>r.stopImmediatePropagation();e.on("beforeinput input",o,!0),e.getDoc().execCommand(n),e.off("beforeinput input",o)},CP=e=>{e.execCommand("delete")},ra=e=>xO(e,"Delete"),B7=e=>xO(e,"ForwardDelete"),$7=e=>n=>jo(wc(n),e,Wn),I7=e=>mS(e)||ga(e),o_=(e,n)=>_i(e,n)?Nr(n,I7,$7(e)):L.none(),_O=(e,n=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!n})},kg=(e,n,o)=>mr(Hr(o),ic(o),(r,c)=>{const u=zi(!0,r),m=zi(!1,c),v=zi(!1,n);return e?Lr(o,v).exists(C=>C.isEqual(m)&&n.isEqual(u)):La(o,v).exists(C=>C.isEqual(u)&&n.isEqual(m))}).getOr(!0),wP=e=>(pm(e)?qc(e):Kc(e)).bind(wP).orThunk(()=>L.some(e)),SP=(e,n,o,r=!0)=>{var c;n.deleteContents();const u=wP(o).getOr(o),m=X.fromDom((c=e.dom.getParent(u.dom,e.dom.isBlock))!==null&&c!==void 0?c:o.dom);if(m.dom===e.getBody()?_O(e,r):br(e.schema,m,{checkRootAsContent:!1})&&($a(m),r&&e.selection.setCursorLocation(m.dom,0)),!Wn(o,m)){const v=jo(wc(m),o)?[]:Rw(m);we(v.concat(gr(o)),C=>{!Wn(C,m)&&!_i(C,m)&&br(e.schema,C)&&go(C)})}},Ao=e=>n=>Wn(e,n),Qb=e=>sr(e,"td,th"),Cp=(e,n)=>tp(X.fromDom(e),n),F7=e=>mr(e.startTable,e.endTable,(n,o)=>{const r=Lw(n,u=>Wn(u,o)),c=Lw(o,u=>Wn(u,n));return!r&&!c?e:{...e,startTable:r?L.none():e.startTable,endTable:c?L.none():e.endTable,isSameTable:!1,isMultiTable:!1}}).getOr(e),e0=e=>F7(e),Ui=(e,n)=>{const o=Cp(e.startContainer,n),r=Cp(e.endContainer,n),c=o.isSome(),u=r.isSome(),m=mr(o,r,Wn).getOr(!1);return e0({startTable:o,endTable:r,isStartInTable:c,isEndInTable:u,isSameTable:m,isMultiTable:!m&&c&&u})},wp=(e,n)=>({start:e,end:n}),to=(e,n,o)=>({rng:e,table:n,cells:o}),jf=$n.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),M2=(e,n)=>af(X.fromDom(e),"td,th",n),EO=e=>!Wn(e.start,e.end),s_=(e,n)=>tp(e.start,n).bind(o=>tp(e.end,n).bind(r=>kn(Wn(o,r),o))),TO=(e,n)=>!EO(e)&&s_(e,n).exists(o=>{const r=o.dom.rows;return r.length===1&&r[0].cells.length===1}),kO=(e,n)=>{const o=M2(e.startContainer,n),r=M2(e.endContainer,n);return mr(o,r,wp)},OO=e=>n=>tp(n,e).bind(o=>Ll(Qb(o)).map(r=>wp(n,r))),r_=e=>n=>tp(n,e).bind(o=>Dr(Qb(o)).map(r=>wp(r,n))),P2=e=>n=>s_(n,e).map(o=>to(n,o,Qb(o))),AO=(e,n,o,r)=>{if(o.collapsed||!e.forall(EO))return L.none();if(n.isSameTable){const c=e.bind(P2(r));return L.some({start:c,end:c})}else{const c=M2(o.startContainer,r),u=M2(o.endContainer,r),m=c.bind(OO(r)).bind(P2(r)),v=u.bind(r_(r)).bind(P2(r));return L.some({start:m,end:v})}},RO=(e,n)=>xa(e,o=>Wn(o,n)),a_=e=>mr(RO(e.cells,e.rng.start),RO(e.cells,e.rng.end),(n,o)=>e.cells.slice(n,o+1)),xP=(e,n,o)=>e.exists(r=>TO(r,o)&&Mb(r.start,n)),DO=(e,n)=>{const{startTable:o,endTable:r}=n,c=e.cloneRange();return o.each(u=>c.setStartAfter(u.dom)),r.each(u=>c.setEndBefore(u.dom)),c},t0=(e,n,o,r)=>AO(e,n,o,r).bind(({start:c,end:u})=>c.or(u)).bind(c=>{const{isSameTable:u}=n,m=a_(c).getOr([]);if(u&&c.cells.length===m.length)return L.some(jf.fullTable(c.table));if(m.length>0){if(u)return L.some(jf.partialTable(m,L.none()));{const v=DO(o,n);return L.some(jf.partialTable(m,L.some({...n,rng:v})))}}else return L.none()}),_P=(e,n,o,r)=>AO(e,n,o,r).bind(({start:c,end:u})=>{const m=c.bind(a_).getOr([]),v=u.bind(a_).getOr([]);if(m.length>0&&v.length>0){const C=DO(o,n);return L.some(jf.multiTable(m,v,C))}else return L.none()}),MO=(e,n)=>{const o=Ao(e),r=kO(n,o),c=Ui(n,o);return xP(r,n,o)?r.map(u=>jf.singleCellTable(n,u.start)):c.isMultiTable?_P(r,c,n,o):t0(r,c,n,o)},EP=e=>we(e,n=>{Rs(n,"contenteditable"),$a(n)}),L7=(e,n)=>L.from(e.dom.getParent(n,e.dom.isBlock)).map(X.fromDom),TP=(e,n,o)=>{o.each(r=>{n?go(r):($a(r),e.selection.setCursorLocation(r.dom,0))})},c_=(e,n,o,r)=>{const c=o.cloneRange();r?(c.setStart(o.startContainer,o.startOffset),c.setEndAfter(n.dom.lastChild)):(c.setStartBefore(n.dom.firstChild),c.setEnd(o.endContainer,o.endOffset)),i_(e,c,n,!1).each(u=>u())},PO=e=>{const n=pg(e),o=X.fromDom(e.selection.getNode());Go(o.dom)&&br(e.schema,o)?e.selection.setCursorLocation(o.dom,0):e.selection.collapse(!0),n.length>1&&vo(n,r=>Wn(r,o))&&io(o,"data-mce-selected","1")},N2=(e,n,o)=>L.some(()=>{const r=e.selection.getRng(),c=o.bind(({rng:u,isStartInTable:m})=>{const v=L7(e,m?u.endContainer:u.startContainer);u.deleteContents(),TP(e,m,v.filter(Be(br,e.schema)));const C=m?n[0]:n[n.length-1];return c_(e,C,r,m),br(e.schema,C)?L.none():L.some(m?n.slice(1):n.slice(0,-1))}).getOr(n);EP(c),PO(e)}),kP=(e,n,o,r)=>L.some(()=>{const c=e.selection.getRng(),u=n[0],m=o[o.length-1];c_(e,u,c,!0),c_(e,m,c,!1);const v=br(e.schema,u)?n:n.slice(1),C=br(e.schema,m)?o:o.slice(0,-1);EP(v.concat(C)),r.deleteContents(),PO(e)}),i_=(e,n,o,r=!0)=>L.some(()=>{SP(e,n,o,r)}),OP=(e,n)=>L.some(()=>bp(e,!1,n)),AP=(e,n,o)=>MO(n,o).bind(r=>r.fold(Be(i_,e),Be(OP,e),Be(N2,e),Be(kP,e))),RP=(e,n)=>n0(e,n),DP=(e,n,o,r)=>l_(n,r).fold(()=>AP(e,n,o),c=>RP(e,c)),MP=(e,n,o)=>{const r=X.fromDom(e.getBody()),c=e.selection.getRng();return o.length!==0?N2(e,o,L.none()):DP(e,r,c,n)},NO=(e,n)=>ss(Zf(n,e),Ym),l_=(e,n)=>ss(Zf(n,e),bm("caption")),PP=(e,n,o,r,c)=>iu(o,e.getBody(),c).bind(u=>NO(n,X.fromDom(u.getNode())).bind(m=>Wn(m,r)?L.none():L.some(Bt))),n0=(e,n)=>L.some(()=>{$a(n),e.selection.setCursorLocation(n.dom,0)}),NP=(e,n,o,r)=>Hr(e.dom).bind(c=>ic(e.dom).map(u=>n?o.isEqual(c)&&r.isEqual(u):o.isEqual(u)&&r.isEqual(c))).getOr(!0),BP=(e,n)=>n0(e,n),$P=(e,n,o)=>l_(e,X.fromDom(o.getNode())).fold(()=>L.some(Bt),r=>kn(!Wn(r,n),Bt)),IP=(e,n,o,r,c)=>iu(o,e.getBody(),c).fold(()=>L.some(Bt),u=>NP(r,o,c,u)?BP(e,r):$P(n,r,u)),FP=(e,n,o,r)=>{const c=he.fromRangeStart(e.selection.getRng());return NO(o,r).bind(u=>br(e.schema,u,{checkRootAsContent:!1})?n0(e,u):PP(e,o,n,u,c))},LP=(e,n,o,r)=>{const c=he.fromRangeStart(e.selection.getRng());return br(e.schema,r)?n0(e,r):IP(e,o,n,r,c)},u_=(e,n)=>e?JM(n):QM(n),d_=(e,n)=>{const o=he.fromRangeStart(e.selection.getRng());return u_(n,o)||cc(n,e.getBody(),o).exists(r=>u_(n,r))},BO=(e,n,o)=>{const r=X.fromDom(e.getBody());return l_(r,o).fold(()=>FP(e,n,r,o).orThunk(()=>kn(d_(e,n),Bt)),c=>LP(e,n,r,c))},o0=(e,n)=>{const o=X.fromDom(e.selection.getStart(!0)),r=pg(e);return e.selection.isCollapsed()&&r.length===0?BO(e,n,o):MP(e,o,r)},Og=(e,n)=>{let o=n;for(;o&&o!==e;){if(as(o)||ho(o))return o;o=o.parentNode}return null},f_=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],$O=ze.each,Sp=e=>{const n=e.dom,o=new Set(e.serializer.getTempAttrs()),r=(u,m)=>{if(u.nodeName!==m.nodeName||u.nodeType!==m.nodeType)return!1;const v=E=>{const D={};return $O(n.getAttribs(E),M=>{const B=M.nodeName.toLowerCase();B!=="style"&&!c(B)&&(D[B]=n.getAttrib(E,B))}),D},C=(E,D)=>{for(const M in E)if(Ft(E,M)){const B=D[M];if(fs(B)||E[M]!==B)return!1;delete D[M]}for(const M in D)if(Ft(D,M))return!1;return!0};return pt(u)&&pt(m)&&(!C(v(u),v(m))||!C(n.parseStyle(n.getAttrib(u,"style")),n.parseStyle(n.getAttrib(m,"style"))))?!1:!uc(u)&&!uc(m)},c=u=>vo(f_,m=>ms(u,m))||o.has(u);return{compare:r,isAttributeInternal:c}},m_=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),HP=e=>e.name==="summary",s0=(e,n)=>{let o=e;for(;o=o.walk();)n(o)},g_=(e,n,o,r)=>{const c=o.name;for(let u=0,m=e.length;u<m;u++){const v=e[u];if(v.name===c){const C=r.nodes[c];C?C.nodes.push(o):r.nodes[c]={filter:v,nodes:[o]}}}if(o.attributes)for(let u=0,m=n.length;u<m;u++){const v=n[u],C=v.name;if(C in o.attributes.map){const E=r.attributes[C];E?E.nodes.push(o):r.attributes[C]={filter:v,nodes:[o]}}}},IO=(e,n,o)=>{const r={nodes:{},attributes:{}};return o.firstChild&&s0(o,c=>{g_(e,n,c,r)}),r},xp=(e,n)=>{const o=(r,c)=>{lt(r,u=>{const m=_a(u.nodes);we(u.filter.callbacks,v=>{for(let C=m.length-1;C>=0;C--){const E=m[C];(!(c?E.attr(u.filter.name)!==void 0:E.name===u.filter.name)||_n(E.parent))&&m.splice(C,1)}m.length>0&&v(m,u.filter.name,n)})})};o(e.nodes,!1),o(e.attributes,!0)},Gf=(e,n,o,r={})=>{const c=IO(e,n,o);xp(c,r)},h_=(e,n,o,r)=>{if((e.pad_empty_with_br||n.insert)&&o(r)){const u=new za("br",1);n.insert&&u.attr("data-mce-bogus","1"),r.empty().append(u)}else r.empty().append(new za("#text",3)).value=Us},H7=e=>{var n;return VP(e,"#text")&&((n=e==null?void 0:e.firstChild)===null||n===void 0?void 0:n.value)===Us},VP=(e,n)=>{const o=e==null?void 0:e.firstChild;return Ae(o)&&o===e.lastChild&&o.name===n},zP=(e,n)=>{const o=e.getElementRule(n.name);return(o==null?void 0:o.paddEmpty)===!0},r0=(e,n,o,r)=>r.isEmpty(n,o,c=>zP(e,c)),V7=(e,n)=>Ae(e)&&(n(e)||e.name==="br"),Ag=e=>{let n;for(let o=e;o;o=o.parent){const r=o.attr("contenteditable");if(r==="false")break;r==="true"&&(n=o)}return L.from(n)},qf=(e,n,o=e.parent)=>{if(n.getSpecialElements()[e.name])e.empty().remove();else{const r=e.children();for(const c of r)o&&!n.isValidChild(o.name,c.name)&&qf(c,n,o);e.unwrap()}},UP=(e,n,o,r=Bt)=>{const c=n.getTextBlockElements(),u=n.getNonEmptyElements(),m=n.getWhitespaceElements(),v=ze.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),C=new Set,E=D=>D!==o&&!v[D.name];for(let D=0;D<e.length;D++){const M=e[D];let B,W,q;if(!M.parent||C.has(M))continue;if(c[M.name]&&M.parent.name==="li"){let K=M.next;for(;K&&c[K.name];){K.name="li",C.add(K),M.parent.insert(K,M.parent);K=K.next}M.unwrap();continue}const Z=[M];for(B=M.parent;B&&!n.isValidChild(B.name,M.name)&&E(B);B=B.parent)Z.push(B);if(B&&Z.length>1)if(FO(n,M,B))qf(M,n);else{Z.reverse(),W=Z[0].clone(),r(W);let K=W;for(let ne=0;ne<Z.length-1;ne++){n.isValidChild(K.name,Z[ne].name)&&ne>0?(q=Z[ne].clone(),r(q),K.append(q)):q=K;for(let re=Z[ne].firstChild;re&&re!==Z[ne+1];){const se=re.next;q.append(re),re=se}K=q}r0(n,u,m,W)?B.insert(M,Z[0],!0):(B.insert(W,Z[0],!0),B.insert(M,W)),B=Z[0],(r0(n,u,m,B)||VP(B,"br"))&&B.empty().remove()}else if(M.parent){if(M.name==="li"){let K=M.prev;if(K&&(K.name==="ul"||K.name==="ol")){K.append(M);continue}if(K=M.next,K&&(K.name==="ul"||K.name==="ol")&&K.firstChild){K.insert(M,K.firstChild,!0);continue}const ne=new za("ul",1);r(ne),M.wrap(ne);continue}if(n.isValidChild(M.parent.name,"div")&&n.isValidChild("div",M.name)){const K=new za("div",1);r(K),M.wrap(K)}else qf(M,n)}}},_r=(e,n)=>{let o=e;for(;o;){if(o.name===n)return!0;o=o.parent}return!1},FO=(e,n,o=n.parent)=>o?e.children[n.name]&&!e.isValidChild(o.name,n.name)||n.name==="a"&&_r(o,"a")?!0:HP(o)&&m_(n)?!((o==null?void 0:o.firstChild)===n&&(o==null?void 0:o.lastChild)===n):!1:!1,z7=(e,n,o,r)=>{const c=document.createRange();return c.setStart(e,n),c.setEnd(o,r),c},Kf=e=>{const n=he.fromRangeStart(e),o=he.fromRangeEnd(e),r=e.commonAncestorContainer;return cc(!1,r,o).map(c=>!ac(n,o,r)&&ac(n,c,r)?z7(n.container(),n.offset(),c.container(),c.offset()):e).getOr(e)},Pn=e=>e.collapsed?e:Kf(e),Uq=e=>Ae(e.firstChild)&&e.firstChild===e.lastChild,U7=e=>e.name==="br"||e.value===Us,W7=(e,n)=>e.getBlockElements()[n.name]&&Uq(n)&&U7(n.firstChild),uo=(e,n)=>{const o=e.getNonEmptyElements();return Ae(n)&&(n.isEmpty(o)||W7(e,n))},WP=(e,n)=>{let o=n.firstChild,r=n.lastChild;return o&&o.name==="meta"&&(o=o.next),r&&r.attr("id")==="mce_marker"&&(r=r.prev),uo(e,r)&&(r=r==null?void 0:r.prev),!o||o!==r?!1:o.name==="ul"||o.name==="ol"},B2=e=>{var n,o;const r=e.firstChild,c=e.lastChild;return r&&r.nodeName==="META"&&((n=r.parentNode)===null||n===void 0||n.removeChild(r)),c&&c.id==="mce_marker"&&((o=c.parentNode)===null||o===void 0||o.removeChild(c)),e},$2=(e,n,o)=>{const r=n.serialize(o),c=e.createFragment(r);return B2(c)},p_=e=>{var n;return Mt((n=e==null?void 0:e.childNodes)!==null&&n!==void 0?n:[],o=>o.nodeName==="LI")},b_=e=>e.data===Us||Bo(e),ZP=e=>Ae(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&b_(e.firstChild),Wq=e=>!e.firstChild||ZP(e),Z7=e=>e.length>0&&Wq(e[e.length-1])?e.slice(0,-1):e,jP=(e,n)=>{const o=e.getParent(n,e.isBlock);return o&&o.nodeName==="LI"?o:null},j7=(e,n)=>!!jP(e,n),G7=(e,n)=>{const o=n.cloneRange(),r=n.cloneRange();return o.setStartBefore(e),r.setEndAfter(e),[o.cloneContents(),r.cloneContents()]},Zq=(e,n)=>{const o=he.before(e),c=ir(n).next(o);return c?c.toRange():null},GP=(e,n)=>{const o=he.after(e),c=ir(n).prev(o);return c?c.toRange():null},Er=(e,n,o,r)=>{const c=G7(e,r),u=e.parentNode;return u&&(u.insertBefore(c[0],e),ze.each(n,m=>{u.insertBefore(m,e)}),u.insertBefore(c[1],e),u.removeChild(e)),GP(n[n.length-1],o)},qP=(e,n,o)=>{const r=e.parentNode;return r&&ze.each(n,c=>{r.insertBefore(c,e)}),Zq(e,o)},KP=(e,n,o,r)=>(r.insertAfter(n.reverse(),e),GP(n[0],o)),q7=(e,n,o,r)=>{const c=$2(n,e,r),u=jP(n,o.startContainer),m=Z7(p_(c.firstChild)),v=1,C=2,E=n.getRoot(),D=M=>{const B=he.fromRangeStart(o),W=ir(n.getRoot()),q=M===v?W.prev(B):W.next(B),Z=q==null?void 0:q.getNode();return Z?jP(n,Z)!==u:!0};return u?D(v)?qP(u,m,E):D(C)?KP(u,m,E,n):Er(u,m,E,o):null},K7=["pre"],Y7=(e,n,o,r)=>{var c;const u=n.firstChild,m=n.lastChild,v=m.attr("data-mce-type")==="bookmark"?m.prev:m,C=u===v,E=Gt(K7,u.name);if(C&&E){const D=u.attr("contenteditable")!=="false",M=((c=e.getParent(o,e.isBlock))===null||c===void 0?void 0:c.nodeName.toLowerCase())===u.name,B=L.from(Og(r,o)).forall(as);return D&&M&&B}else return!1},Ua=Go,gu=(e,n,o)=>{if(Ae(o)){const r=e.getParent(n.endContainer,Ua);return o===r&&Mb(X.fromDom(o),n)}else return!1},X7=(e,n,o)=>{var r;if(o.getAttribute("data-mce-bogus")==="all")(r=o.parentNode)===null||r===void 0||r.insertBefore(e.dom.createFragment(n),o);else{const c=o.firstChild,u=o.lastChild;!c||c===u&&c.nodeName==="BR"?e.dom.setHTML(o,n):e.selection.setContent(n,{no_events:!0})}},LO=(e,n,o)=>{L.from(e.getParent(n,"td,th")).map(X.fromDom).each(r=>gS(r,o))},HO=(e,n)=>{const o=e.schema.getTextInlineElements(),r=e.dom;if(n){const c=e.getBody(),u=Sp(e);ze.each(r.select("*[data-mce-fragment]"),m=>{if(Ae(o[m.nodeName.toLowerCase()])&&n7(r,m)){for(let C=m.parentElement;Ae(C)&&C!==c&&!s7(r,m,C);C=C.parentElement)if(u.compare(C,m)){r.remove(m,!0);break}}})}},J7=e=>{let n=e;for(;n=n.walk();)n.type===1&&n.attr("data-mce-fragment","1")},Q7=e=>{ze.each(e.getElementsByTagName("*"),n=>{n.removeAttribute("data-mce-fragment")})},I2=e=>!!e.getAttribute("data-mce-fragment"),v_=(e,n)=>Ae(n)&&!e.schema.getVoidElements()[n.nodeName],VO=(e,n)=>{var o,r,c;let u;const m=e.dom,v=e.selection;if(!n)return;v.scrollIntoView(n);const C=Og(e.getBody(),n);if(C&&m.getContentEditable(C)==="false"){m.remove(n),v.select(C);return}let E=m.createRng();const D=n.previousSibling;if(Me(D)){E.setStart(D,(r=(o=D.nodeValue)===null||o===void 0?void 0:o.length)!==null&&r!==void 0?r:0);const W=n.nextSibling;Me(W)&&(D.appendData(W.data),(c=W.parentNode)===null||c===void 0||c.removeChild(W))}else E.setStartBefore(n),E.setEndBefore(n);const M=W=>{let q=he.fromRangeStart(W);return q=ir(e.getBody()).next(q),q==null?void 0:q.toRange()},B=m.getParent(n,m.isBlock);if(m.remove(n),B&&m.isEmpty(B)){const W=Ua(B);Fu(X.fromDom(B)),E.setStart(B,0),E.setEnd(B,0),!W&&!I2(B)&&(u=M(E))?(E=u,m.remove(B)):m.add(B,m.create("br",W?{}:{"data-mce-bogus":"1"}))}v.setRng(E)},e8=e=>{const n=e.dom,o=Pn(e.selection.getRng());e.selection.setRng(o);const r=n.getParent(o.startContainer,Ua);gu(n,o,r)?i_(e,o,X.fromDom(r)):o.startContainer===o.endContainer&&o.endOffset-o.startOffset===1&&Me(o.startContainer.childNodes[o.startOffset])?o.deleteContents():e.getDoc().execCommand("Delete",!1)},hu=e=>{for(let n=e;n;n=n.walk())if(n.attr("id")==="mce_marker")return L.some(n);return L.none()},t8=(e,n,o)=>{var r;return vo(o.children(),m_)&&((r=e.getParent(n,e.isBlock))===null||r===void 0?void 0:r.nodeName)==="SUMMARY"},n8=(e,n,o)=>{var r,c;const u=e.selection,m=e.dom,v=e.parser,C=o.merge,E=Uf({validate:!0},e.schema),D='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';o.preserve_zwsp||(n=Ia(n)),n.indexOf("{$caret}")===-1&&(n+="{$caret}"),n=n.replace(/\{\$caret\}/,D);let M=u.getRng();const B=M.startContainer,W=e.getBody();B===W&&u.isCollapsed()&&m.isBlock(W.firstChild)&&v_(e,W.firstChild)&&m.isEmpty(W.firstChild)&&(M=m.createRng(),M.setStart(W.firstChild,0),M.setEnd(W.firstChild,0),u.setRng(M)),u.isCollapsed()||e8(e);const q=u.getNode(),Z={context:q.nodeName.toLowerCase(),data:o.data,insert:!0},K=v.parse(n,Z);if(o.paste===!0&&WP(e.schema,K)&&j7(m,q))return M=q7(E,m,u.getRng(),K),M&&u.setRng(M),n;o.paste===!0&&Y7(m,K,q,e.getBody())&&((r=K.firstChild)===null||r===void 0||r.unwrap()),J7(K);let ne=K.lastChild;if(ne&&ne.attr("id")==="mce_marker"){const re=ne;for(ne=ne.prev;ne;ne=ne.walk(!0))if(ne.type===3||!m.isBlock(ne.name)){ne.parent&&e.schema.isValidChild(ne.parent.name,"span")&&ne.parent.insert(re,ne,ne.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(q),!Z.invalid&&!t8(m,q,K))n=E.serialize(K),X7(e,n,q);else{e.selection.setContent(D);let re=u.getNode(),se;const ue=e.getBody();for(rs(re)?re=se=ue:se=re;se&&se!==ue;)re=se,se=se.parentNode;n=re===ue?ue.innerHTML:m.getOuterHTML(re);const Oe=v.parse(n),Ue=hu(Oe),st=Ue.bind(Ag).getOr(Oe);Ue.each(ot=>ot.replace(K));const $e=K.children(),Ce=(c=K.parent)!==null&&c!==void 0?c:Oe;K.unwrap();const Ee=Mt($e,ot=>FO(e.schema,ot,Ce));UP(Ee,e.schema,st),Gf(v.getNodeFilters(),v.getAttributeFilters(),Oe),n=E.serialize(Oe),re===ue?m.setHTML(ue,n):m.setOuterHTML(re,n)}return HO(e,C),VO(e,m.get("mce_marker")),Q7(e.getBody()),LO(m,u.getStart(),e.schema),Yl(e.schema,e.getBody(),u.getStart()),n},fc=e=>e instanceof za,F2=e=>{_g(e)&&Hr(e.getBody()).each(n=>{const o=n.getNode(),r=al(o)?Hr(o).getOr(n):n;e.selection.setRng(r.toRange())})},ci=(e,n,o)=>{e.dom.setHTML(e.getBody(),n),o!==!0&&F2(e)},o8=(e,n,o,r)=>{if(o=Ia(o),o.length===0||/^\s+$/.test(o)){const c='<br data-mce-bogus="1">';n.nodeName==="TABLE"?o="<tr><td>"+c+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(o="<li>"+c+"</li>");const u=Sr(e);return e.schema.isValidChild(n.nodeName.toLowerCase(),u.toLowerCase())?(o=c,o=e.dom.createHTML(u,ad(e),o)):o||(o=c),ci(e,o,r.no_selection),{content:o,html:o}}else{r.format!=="raw"&&(o=Uf({validate:!1},e.schema).serialize(e.parser.parse(o,{isRootContent:!0,insert:!0})));const c=$h(X.fromDom(n))?o:ze.trim(o);return ci(e,c,r.no_selection),{content:c,html:c}}},Kn=(e,n,o,r)=>{Gf(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),o);const c=Uf({validate:!1},e.schema).serialize(o),u=Ia($h(X.fromDom(n))?c:ze.trim(c));return ci(e,u,r.no_selection),{content:o,html:u}},a0=(e,n,o)=>L.from(e.getBody()).map(r=>fc(n)?Kn(e,r,n,o):o8(e,r,n,o)).getOr({content:n,html:fc(o.content)?"":o.content}),L2=e=>oe(e)?e:De,YP=(e,n,o)=>{let r=e.dom;const c=L2(o);for(;r.parentNode;){r=r.parentNode;const u=X.fromDom(r),m=n(u);if(m.isSome())return m;if(c(u))break}return L.none()},H2=(e,n,o)=>{const r=n(e),c=L2(o);return r.orThunk(()=>c(e)?L.none():YP(e,n,c))},V2=Nb,XP=(e,n,o)=>{const r=e.formatter.get(o);if(r)for(let c=0;c<r.length;c++){const u=r[c];if(Ac(u)&&u.inherit===!1&&e.dom.is(n,u.selector))return!0}return!1},z2=(e,n,o,r,c)=>{const u=e.dom.getRoot();if(n===u)return!1;const m=e.dom.getParent(n,v=>XP(e,v,o)?!0:v.parentNode===u||!!pu(e,v,o,r,!0));return!!pu(e,m,o,r,c)},y_=(e,n,o)=>Ns(o)&&V2(n,o.inline)||du(o)&&V2(n,o.block)?!0:Ac(o)?pt(n)&&e.is(n,o.selector):!1,zO=(e,n,o,r,c,u)=>{const m=o[r],v=r==="attributes";if(oe(o.onmatch))return o.onmatch(n,o,r);if(m){if(nv(m)){for(let C=0;C<m.length;C++)if(v?e.getAttrib(n,m[C]):Bb(e,n,m[C]))return!0}else for(const C in m)if(Ft(m,C)){const E=v?e.getAttrib(n,C):Bb(e,n,C),D=Lf(m[C],u),M=_n(E)||Ka(E);if(M&&_n(D))continue;if(c&&M&&!o.exact||(!c||o.exact)&&!V2(E,Hf(D,C)))return!1}}return!0},pu=(e,n,o,r,c)=>{const u=e.formatter.get(o),m=e.dom;if(u&&pt(n))for(let v=0;v<u.length;v++){const C=u[v];if(y_(e.dom,n,C)&&zO(m,n,C,"attributes",c,r)&&zO(m,n,C,"styles",c,r)){const E=C.classes;if(E){for(let D=0;D<E.length;D++)if(!e.dom.hasClass(n,Lf(E[D],r)))return}return C}}},U2=(e,n,o,r,c)=>{if(r)return z2(e,r,n,o,c);if(r=e.selection.getNode(),z2(e,r,n,o,c))return!0;const u=e.selection.getStart();return!!(u!==r&&z2(e,u,n,o,c))},JP=(e,n,o)=>{const r=[],c={},u=e.selection.getStart();return e.dom.getParent(u,m=>{for(let v=0;v<n.length;v++){const C=n[v];!c[C]&&pu(e,m,C,o)&&(c[C]=!0,r.push(C))}},e.dom.getRoot()),r},C_=(e,n)=>{const o=c=>Wn(c,X.fromDom(e.getBody())),r=(c,u)=>pu(e,c.dom,u)?L.some(u):L.none();return L.from(e.selection.getStart(!0)).bind(c=>H2(X.fromDom(c),u=>jd(n,m=>r(u,m)),o)).getOrNull()},s8=(e,n)=>{const o=e.formatter.get(n),r=e.dom;if(o&&e.selection.isEditable()){const c=e.selection.getStart(),u=Cg(r,c);for(let m=o.length-1;m>=0;m--){const v=o[m];if(!Ac(v))return!0;for(let C=u.length-1;C>=0;C--)if(r.is(u[C],v.selector))return!0}}return!1},r8=(e,n,o)=>Wo(o,(r,c)=>{const u=x4(e,c);return e.formatter.matchNode(n,c,{},u)?r.concat([c]):r},[]),W2=Ko,a8=(e,n)=>e.importNode(n,!0),QP=e=>{if(e){const n=new zs(e,e);for(let o=n.current();o;o=n.next())if(Me(o))return o}return null},w_=e=>{const n=X.fromTag("span");return Zl(n,{id:Ab,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&gs(n,X.fromText(W2)),n},c8=e=>{const n=QP(e);return n&&n.data.charAt(0)===W2&&n.deleteData(0,1),n},UO=(e,n,o)=>{const r=e.dom,c=e.selection;if(_x(n))bp(e,!1,X.fromDom(n),o,!0);else{const u=c.getRng(),m=r.getParent(n,r.isBlock),v=u.startContainer,C=u.startOffset,E=u.endContainer,D=u.endOffset,M=c8(n);r.remove(n,!0),v===M&&C>0&&u.setStart(M,C-1),E===M&&D>0&&u.setEnd(M,D-1),m&&r.isEmpty(m)&&$a(X.fromDom(m)),c.setRng(u)}},S_=(e,n,o)=>{const r=e.dom,c=e.selection;if(n)UO(e,n,o);else if(n=Bf(e.getBody(),c.getStart()),!n)for(;n=r.get(Ab);)UO(e,n,o)},eN=(e,n,o)=>{var r,c;const u=e.dom,m=u.getParent(o,Be(a2,e.schema));m&&u.isEmpty(m)?(r=o.parentNode)===null||r===void 0||r.replaceChild(n,o):(Ek(X.fromDom(o)),u.isEmpty(o)?(c=o.parentNode)===null||c===void 0||c.replaceChild(n,o):u.insertAfter(n,o))},tN=(e,n)=>(e.appendChild(n),n),nN=(e,n)=>{var o;const r=Zd(e,(u,m)=>tN(u,m.cloneNode(!1)),n),c=(o=r.ownerDocument)!==null&&o!==void 0?o:document;return tN(r,c.createTextNode(W2))},oN=(e,n,o,r,c,u)=>{const m=e.formatter,v=e.dom,C=Mt(Wr(m.get()),M=>M!==r&&!dr(M,"removeformat")),E=r8(e,o,C);if(Mt(E,M=>!Ib(e,M,r)).length>0){const M=o.cloneNode(!1);return v.add(n,M),m.remove(r,c,M,u),v.remove(M),L.some(M)}else return L.none()},i8=(e,n,o)=>{let r;const c=e.selection,u=e.formatter.get(n);if(!u)return;const m=c.getRng();let v=m.startOffset;const E=m.startContainer.nodeValue;r=Bf(e.getBody(),c.getStart());const D=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(E&&v>0&&v<E.length&&D.test(E.charAt(v))&&D.test(E.charAt(v-1))){const M=c.getBookmark();m.collapse(!0);let B=pd(e.dom,m,u);B=gt(B),e.formatter.apply(n,o,B),c.moveToBookmark(M)}else{let M=r?QP(r):null;(!r||(M==null?void 0:M.data)!==W2)&&(r=a8(e.getDoc(),w_(!0).dom),M=r.firstChild,m.insertNode(r),v=1),e.formatter.apply(n,o,r),c.setCursorLocation(M,v)}},sN=(e,n,o,r)=>{const c=e.dom,u=e.selection;let m=!1;const v=e.formatter.get(n);if(!v)return;const C=u.getRng(),E=C.startContainer,D=C.startOffset;let M=E;Me(E)&&(D!==E.data.length&&(m=!0),M=M.parentNode);const B=[];let W;for(;M;){if(pu(e,M,n,o,r)){W=M;break}M.nextSibling&&(m=!0),B.push(M),M=M.parentNode}if(W)if(m){const q=u.getBookmark();C.collapse(!0);let Z=pd(c,C,v,!0);Z=gt(Z),e.formatter.remove(n,o,Z,r),u.moveToBookmark(q)}else{const q=Bf(e.getBody(),W),Z=Ae(q)?c.getParents(W.parentNode,dt,q):[],K=w_(!1).dom;eN(e,K,q??W);const ne=oN(e,K,W,n,o,r),re=nN([...B,...ne.toArray(),...Z],K);q&&UO(e,q,Ae(q)),u.setCursorLocation(re,1),c.isEmpty(W)&&c.remove(W)}},ii=(e,n,o)=>{const r=e.selection,c=e.getBody();S_(e,null,o),(n===8||n===46)&&r.isCollapsed()&&r.getStart().innerHTML===W2&&S_(e,Bf(c,r.getStart()),!0),(n===37||n===39)&&S_(e,Bf(c,r.getStart()),!0)},l8=e=>Me(e)&&zl(e.data,Us),rN=e=>{e.on("mouseup keydown",n=>{ii(e,n.keyCode,l8(e.selection.getRng().endContainer))})},x_=e=>{const n=w_(!1),o=nN(e,n.dom);return{caretContainer:n,caretPosition:he(o,0)}},__=(e,n)=>{const{caretContainer:o,caretPosition:r}=x_(n);return hr(X.fromDom(e),o),go(X.fromDom(e)),r},aN=(e,n)=>{const{caretContainer:o,caretPosition:r}=x_(n);return e.insertNode(o.dom),r},WO=(e,n)=>{if(lc(n.dom))return!1;const o=e.schema.getTextInlineElements();return Ft(o,On(n))&&!lc(n.dom)&&!Ai(n.dom)},Z2={},cN=Xc(["pre"]),ZO=(e,n)=>{Z2[e]||(Z2[e]=[]),Z2[e].push(n)},iN=(e,n)=>{Ft(Z2,e)&&we(Z2[e],o=>{o(n)})};ZO("pre",e=>{const n=e.selection.getRng(),o=c=>u=>{const m=u.previousSibling;return cN(m)&&Gt(c,m)},r=(c,u)=>{const m=X.fromDom(u),v=jr(m).dom;go(m),Iu(X.fromDom(c),[X.fromTag("br",v),X.fromTag("br",v),...gr(m)])};if(!n.collapsed){const c=e.selection.getSelectedBlocks(),u=Mt(Mt(c,cN),o(c));we(u,m=>{r(m.previousSibling,m)})}});const Wi=["fontWeight","fontStyle","color","fontSize","fontFamily"],u8=e=>sn(e.styles)&&vo(Wr(e.styles),n=>Gt(Wi,n)),d8=e=>ss(e,n=>Ns(n)&&n.inline==="span"&&u8(n)),f8=(e,n)=>{const o=e.get(n);return Tn(o)?d8(o):L.none()},E_=(e,n)=>La(n,he.fromRangeStart(e)).isNone(),lN=(e,n)=>Lr(n,he.fromRangeEnd(e)).exists(o=>!Bo(o.getNode())||Lr(n,o).isSome())===!1,m8=e=>n=>Jc(n)&&e.isEditable(n),g8=e=>{const n=e.getSelectedBlocks(),o=e.getRng();if(e.isCollapsed())return[];if(n.length===1)return E_(o,n[0])&&lN(o,n[0])?n:[];{const r=Dr(n).filter(m=>E_(o,m)).toArray(),c=Ll(n).filter(m=>lN(o,m)).toArray(),u=n.slice(1,-1);return r.concat(u).concat(c)}},jO=e=>Mt(g8(e),m8(e.dom)),Tl=e=>Mt(e.getSelectedBlocks(),m8(e.dom)),j2=ze.each,c0=e=>pt(e)&&!uc(e)&&!lc(e)&&!Ai(e),T_=(e,n)=>{for(let o=e;o;o=o[n]){if(Me(o)&&no(o.data))return e;if(pt(o)&&!uc(o))return o}return e},uN=(e,n,o)=>{const r=Sp(e),c=ki(n)&&e.dom.isEditable(n),u=ki(o)&&e.dom.isEditable(o);if(c&&u){const m=T_(n,"previousSibling"),v=T_(o,"nextSibling");if(r.compare(m,v)){for(let C=m.nextSibling;C&&C!==v;){const E=C;C=C.nextSibling,m.appendChild(E)}return e.dom.remove(v),ze.each(ze.grep(v.childNodes),C=>{m.appendChild(C)}),m}}return o},GO=(e,n,o,r)=>{var c;if(r&&n.merge_siblings!==!1){const u=(c=uN(e,np(r),r))!==null&&c!==void 0?c:r;uN(e,u,np(u,!0))}},h8=(e,n,o)=>{if(n.clear_child_styles){const r=n.links?"*:not(a)":"*";j2(e.select(r,o),c=>{c0(c)&&e.isEditable(c)&&j2(n.styles,(u,m)=>{e.setStyle(c,m,"")})})}},k_=(e,n,o)=>{j2(e.childNodes,r=>{c0(r)&&(n(r)&&o(r),r.hasChildNodes()&&k_(r,n,o))})},qO=(e,n)=>{n.nodeName==="SPAN"&&e.getAttribs(n).length===0&&e.remove(n,!0)},dN=(e,n)=>o=>!!(o&&Bb(e,o,n)),KO=(e,n,o)=>r=>{e.setStyle(r,n,o),r.getAttribute("style")===""&&r.removeAttribute("style"),qO(e,r)},_p=$n.generate([{keep:[]},{rename:["name"]},{removed:[]}]),Ep=/^(src|href|style)$/,O_=ze.each,A_=Nb,fN=e=>/^(TR|TH|TD)$/.test(e.nodeName),mN=(e,n,o)=>e.isChildOf(n,o)&&n!==o&&!e.isBlock(o),gN=(e,n,o)=>{let r=n[o?"startContainer":"endContainer"],c=n[o?"startOffset":"endOffset"];if(pt(r)){const u=r.childNodes.length-1;!o&&c&&c--,r=r.childNodes[c>u?u:c]}return Me(r)&&o&&c>=r.data.length&&(r=new zs(r,e.getBody()).next()||r),Me(r)&&!o&&c===0&&(r=new zs(r,e.getBody()).prev()||r),r},hN=(e,n)=>{const o=n?"firstChild":"lastChild",r=e[o];return fN(e)&&r?e.nodeName==="TR"&&r[o]||r:e},YO=(e,n,o,r)=>{var c;const u=e.create(o,r);return(c=n.parentNode)===null||c===void 0||c.insertBefore(u,n),u.appendChild(n),u},pN=(e,n,o,r,c)=>{const u=X.fromDom(n),m=X.fromDom(e.create(r,c)),v=o?Sc(u):gv(u);return Iu(m,v),o?(hr(u,m),$u(m,u)):(sl(u,m),gs(m,u)),m.dom},bN=(e,n)=>n.links&&e.nodeName==="A",vN=(e,n,o)=>{const r=n.parentNode;let c;const u=e.dom,m=Sr(e);du(o)&&r===u.getRoot()&&(!o.list_block||!A_(n,o.list_block))&&we(_a(n.childNodes),v=>{uu(e,m,v.nodeName.toLowerCase())?c?c.appendChild(v):(c=YO(u,v,m),u.setAttribs(c,ad(e))):c=null}),!(E4(o)&&!A_(o.inline,n))&&u.remove(n,!0)},R_=(e,n,o)=>Za(e)?{name:n,value:null}:{name:e,value:Lf(n,o)},Rg=(e,n)=>{e.getAttrib(n,"style")===""&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style"))},yN=(e,n,o,r,c)=>{let u=!1;O_(o.styles,(m,v)=>{const{name:C,value:E}=R_(v,m,r),D=Hf(E,C);(o.remove_similar||ae(E)||!pt(c)||A_(Bb(e,c,C),D))&&e.setStyle(n,C,""),u=!0}),u&&Rg(e,n)},p8=(e,n,o)=>{n==="removeformat"?we(Tl(e.selection),r=>{we(Wi,c=>e.dom.setStyle(r,c,"")),Rg(e.dom,r)}):f8(e.formatter,n).each(r=>{we(Tl(e.selection),c=>yN(e.dom,c,r,o,null))})},G2=(e,n,o,r,c)=>{const u=e.dom,m=Sp(e),v=e.schema;if(Ns(n)&&Pm(v,n.inline)&&Wu(v,r)&&r.parentElement===e.getBody())return vN(e,r,n),_p.removed();if(!n.ceFalseOverride&&r&&u.getContentEditableParent(r)==="false"||r&&!y_(u,r,n)&&!bN(r,n))return _p.keep();const C=r,E=n.preserve_attributes;if(Ns(n)&&n.remove==="all"&&Tn(E)){const D=Mt(u.getAttribs(C),M=>Gt(E,M.name.toLowerCase()));if(u.removeAllAttribs(C),we(D,M=>u.setAttrib(C,M.name,M.value)),D.length>0)return _p.rename("span")}if(n.remove!=="all"){yN(u,C,n,o,c),O_(n.attributes,(M,B)=>{const{name:W,value:q}=R_(B,M,o);if(n.remove_similar||ae(q)||!pt(c)||A_(u.getAttrib(c,W),q)){if(W==="class"){const Z=u.getAttrib(C,W);if(Z){let K="";if(we(Z.split(/\s+/),ne=>{/mce\-\w+/.test(ne)&&(K+=(K?" ":"")+ne)}),K){u.setAttrib(C,W,K);return}}}if(Ep.test(W)&&C.removeAttribute("data-mce-"+W),W==="style"&&Xc(["li"])(C)&&u.getStyle(C,"list-style-type")==="none"){C.removeAttribute(W),u.setStyle(C,"list-style-type","none");return}W==="class"&&C.removeAttribute("className"),C.removeAttribute(W)}}),O_(n.classes,M=>{M=Lf(M,o),(!pt(c)||u.hasClass(c,M))&&u.removeClass(C,M)});const D=u.getAttribs(C);for(let M=0;M<D.length;M++){const B=D[M].nodeName;if(!m.isAttributeInternal(B))return _p.keep()}}return n.remove!=="none"?(vN(e,C,n),_p.removed()):_p.keep()},CN=(e,n,o,r,c)=>{let u;return n.parentNode&&we(Cg(e.dom,n.parentNode).reverse(),m=>{if(!u&&pt(m)&&m.id!=="_start"&&m.id!=="_end"){const v=pu(e,m,o,r,c);v&&v.split!==!1&&(u=m)}}),u},wN=(e,n,o,r)=>G2(e,n,o,r,r).fold(et(r),c=>(e.dom.createFragment().appendChild(r),e.dom.rename(r,c)),et(null)),b8=(e,n,o,r,c,u,m,v)=>{var C,E;let D,M;const B=e.dom;if(o){const W=o.parentNode;for(let q=r.parentNode;q&&q!==W;q=q.parentNode){let Z=B.clone(q,!1);for(let K=0;K<n.length&&(Z=wN(e,n[K],v,Z),Z!==null);K++);Z&&(D&&Z.appendChild(D),M||(M=Z),D=Z)}(!m.mixed||!B.isBlock(o))&&(r=(C=B.split(o,r))!==null&&C!==void 0?C:r),D&&M&&((E=c.parentNode)===null||E===void 0||E.insertBefore(D,c),M.appendChild(c),Ns(m)&&GO(e,m,v,D))}return r},SN=(e,n,o,r,c)=>{const u=e.formatter.get(n),m=u[0],v=e.dom,C=e.selection,E=Z=>{const K=CN(e,Z,n,o,c);return b8(e,u,K,Z,Z,!0,m,o)},D=Z=>uc(Z)&&pt(Z)&&(Z.id==="_start"||Z.id==="_end"),M=Z=>vo(u,K=>bu(e,K,o,Z,Z)),B=Z=>{const K=_a(Z.childNodes),re=M(Z)||vo(u,Oe=>y_(v,Z,Oe)),se=Z.parentNode;if(!re&&Ae(se)&&Vi(m)&&M(se),m.deep&&K.length)for(let Oe=0;Oe<K.length;Oe++)B(K[Oe]);we(["underline","line-through","overline"],Oe=>{pt(Z)&&e.dom.getStyle(Z,"text-decoration")===Oe&&Z.parentNode&&xx(v,Z.parentNode)===Oe&&bu(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:Oe}},void 0,Z)})},W=Z=>{const K=v.get(Z?"_start":"_end");if(K){let ne=K[Z?"firstChild":"lastChild"];return D(ne)&&(ne=ne[Z?"firstChild":"lastChild"]),Me(ne)&&ne.data.length===0&&(ne=Z?K.previousSibling||K.nextSibling:K.nextSibling||K.previousSibling),v.remove(K,!0),ne}else return null},q=Z=>{let K,ne,re=pd(v,Z,u,Z.collapsed);if(m.split){if(re=gt(re),K=gN(e,re,!0),ne=gN(e,re),K!==ne){if(K=hN(K,!0),ne=hN(ne,!1),mN(v,K,ne)){const ue=L.from(K.firstChild).getOr(K);E(pN(v,ue,!0,"span",{id:"_start","data-mce-type":"bookmark"})),W(!0);return}if(mN(v,ne,K)){const ue=L.from(ne.lastChild).getOr(ne);E(pN(v,ue,!1,"span",{id:"_end","data-mce-type":"bookmark"})),W(!1);return}K=YO(v,K,"span",{id:"_start","data-mce-type":"bookmark"}),ne=YO(v,ne,"span",{id:"_end","data-mce-type":"bookmark"});const se=v.createRng();se.setStartAfter(K),se.setEndBefore(ne),ap(v,se,ue=>{we(ue,Oe=>{!uc(Oe)&&!uc(Oe.parentNode)&&E(Oe)})}),E(K),E(ne),K=W(!0),ne=W()}else K=ne=E(K);re.startContainer=K.parentNode?K.parentNode:K,re.startOffset=v.nodeIndex(K),re.endContainer=ne.parentNode?ne.parentNode:ne,re.endOffset=v.nodeIndex(ne)+1}ap(v,re,se=>{we(se,B)})};if(r){if(yg(r)){const Z=v.createRng();Z.setStartBefore(r),Z.setEndAfter(r),q(Z)}else q(r);dc(e,n,r,o);return}!C.isCollapsed()||!Ns(m)||pg(e).length?(Sl(e,()=>vg(e,q),Z=>Ns(m)&&U2(e,n,o,Z)),e.nodeChanged()):sN(e,n,o,c),p8(e,n,o),dc(e,n,r,o)},xN=(e,n,o,r,c)=>{(r||e.selection.isEditable())&&SN(e,n,o,r,c)},bu=(e,n,o,r,c)=>G2(e,n,o,r,c).fold(De,u=>(e.dom.rename(r,u),!0),dt),XO=ze.each,_N=(e,n,o,r)=>{const c=u=>{if(ki(u)&&pt(u.parentNode)&&e.isEditable(u)){const m=xx(e,u.parentNode);e.getStyle(u,"color")&&m?e.setStyle(u,"text-decoration",m):e.getStyle(u,"text-decoration")===m&&e.setStyle(u,"text-decoration",null)}};n.styles&&(n.styles.color||n.styles.textDecoration)&&(ze.walk(r,c,"childNodes"),c(r))},EN=(e,n,o,r)=>{if(n.styles&&n.styles.backgroundColor){const c=dN(e,"fontSize");k_(r,u=>c(u)&&e.isEditable(u),KO(e,"backgroundColor",Lf(n.styles.backgroundColor,o)))}},D_=(e,n,o,r)=>{if(Ns(n)&&(n.inline==="sub"||n.inline==="sup")){const c=dN(e,"fontSize");k_(r,m=>c(m)&&e.isEditable(m),KO(e,"fontSize",""));const u=Mt(e.select(n.inline==="sup"?"sub":"sup",r),e.isEditable);e.remove(u,!0)}},TN=(e,n,o,r)=>{XO(n,c=>{Ns(c)&&XO(e.dom.select(c.inline,r),u=>{c0(u)&&bu(e,c,o,u,c.exact?u:null)}),h8(e.dom,c,r)})},v8=(e,n,o,r,c)=>{const u=c.parentNode;pu(e,u,o,r)&&bu(e,n,r,c)||n.merge_with_parents&&u&&e.dom.getParent(u,m=>pu(e,m,o,r)?(bu(e,n,r,c),!0):!1)},q2=ze.each,y8=(e,n,o,r)=>{if(VS(e)&&Ns(n)&&o.parentNode){const c=Jw(e.schema),u=xv(X.fromDom(o),m=>lc(m.dom));return Ea(c,r)&&ps(e.schema,o.parentNode,{skipBogus:!1,includeZwsp:!0})&&!u}else return!1},kN=(e,n,o,r)=>{if(q2(o.styles,(c,u)=>{e.setStyle(n,u,Lf(c,r))}),o.styles){const c=e.getAttrib(n,"style");c&&e.setAttrib(n,"data-mce-style",c)}},M_=(e,n,o,r)=>{const c=e.formatter.get(n),u=c[0],m=!r&&e.selection.isCollapsed(),v=e.dom,C=e.selection,E=(q,Z=u)=>{oe(Z.onformat)&&Z.onformat(q,Z,o,r),kN(v,q,Z,o),q2(Z.attributes,(K,ne)=>{v.setAttrib(q,ne,Lf(K,o))}),q2(Z.classes,K=>{const ne=Lf(K,o);v.hasClass(q,ne)||v.addClass(q,ne)})},D=(q,Z)=>{let K=!1;return q2(q,ne=>Ac(ne)?v.getContentEditable(Z)==="false"&&!ne.ceFalseOverride||Ae(ne.collapsed)&&ne.collapsed!==m?!0:v.is(Z,ne.selector)&&!lc(Z)?(E(Z,ne),K=!0,!1):!0:!1),K},M=q=>{if(ee(q)){const Z=v.create(q);return E(Z),Z}else return null},B=(q,Z,K)=>{const ne=[];let re=!0;const se=u.inline||u.block,ue=M(se),Oe=$e=>_4(u)&&pu(e,$e,n,o),Ue=($e,Ce,Ee)=>{const ot=op(u)&&a2(e.schema,$e)&&uu(e,Ce,se);return Ee&&ot},st=($e,Ce,Ee,ot)=>{const wt=$e.nodeName.toLowerCase(),Qt=uu(e,se,wt)&&uu(e,Ce,se),hn=!K&&Me($e)&&yf($e.data),Un=lc($e),Xn=!Ns(u)||!q.isBlock($e);return(Ee||ot)&&Qt&&!hn&&!Un&&Xn};ap(q,Z,$e=>{let Ce;const Ee=ot=>{let wt=!1,Qt=re,hn=!1;const Un=ot.parentNode,Xn=Un.nodeName.toLowerCase(),co=q.getContentEditable(ot);Ae(co)&&(Qt=re,re=co==="true",wt=!0,hn=l2(e,ot));const Or=re&&!wt;if(Bo(ot)&&!y8(e,u,ot,Xn)){Ce=null,du(u)&&q.remove(ot);return}if(Oe(ot)){Ce=null;return}if(Ue(ot,Xn,Or)){const Jn=q.rename(ot,se);E(Jn),ne.push(Jn),Ce=null;return}if(Ac(u)){let Jn=D(c,ot);if(!Jn&&Ae(Un)&&Vi(u)&&(Jn=D(c,Un)),!Ns(u)||Jn){Ce=null;return}}Ae(ue)&&st(ot,Xn,Or,hn)?(Ce||(Ce=q.clone(ue,!1),Un.insertBefore(Ce,ot),ne.push(Ce)),hn&&wt&&(re=Qt),Ce.appendChild(ot)):(Ce=null,we(_a(ot.childNodes),Ee),wt&&(re=Qt),Ce=null)};we($e,Ee)}),u.links===!0&&we(ne,$e=>{const Ce=Ee=>{Ee.nodeName==="A"&&E(Ee,u),we(_a(Ee.childNodes),Ce)};Ce($e)}),we(ne,$e=>{const Ce=wt=>{let Qt=0;return we(wt.childNodes,hn=>{!Pb(hn)&&!uc(hn)&&Qt++}),Qt},Ee=wt=>ss(wt.childNodes,r2).filter(hn=>q.getContentEditable(hn)!=="false"&&y_(q,hn,u)).map(hn=>{const Un=q.clone(hn,!1);return E(Un),q.replace(Un,wt,!0),q.remove(hn,!0),Un}).getOr(wt),ot=Ce($e);if((ne.length>1||!q.isBlock($e))&&ot===0){q.remove($e,!0);return}(Ns(u)||du(u)&&u.wrapper)&&(!u.exact&&ot===1&&($e=Ee($e)),TN(e,c,o,$e),v8(e,u,n,o,$e),EN(q,u,o,$e),_N(q,u,o,$e),D_(q,u,o,$e),GO(e,u,o,$e))})},W=yg(r)?r:C.getNode();if(v.getContentEditable(W)==="false"&&!l2(e,W)){r=W,D(c,r),Dc(e,n,r,o);return}if(u){if(r)if(yg(r)){if(!D(c,r)){const q=v.createRng();q.setStartBefore(r),q.setEndAfter(r),B(v,pd(v,q,c),!0)}}else B(v,r,!0);else!m||!Ns(u)||pg(e).length?(C.setRng(Pn(C.getRng())),Sl(e,()=>{vg(e,(q,Z)=>{const K=Z?q:pd(v,q,c);B(v,K,!1)})},dt),e.nodeChanged()):i8(e,n,o),f8(e.formatter,n).each(q=>{we(jO(e.selection),Z=>kN(v,Z,q,o))});iN(n,e)}Dc(e,n,r,o)},JO=(e,n,o,r)=>{(r||e.selection.isEditable())&&M_(e,n,o,r)},P_=e=>Ft(e,"vars"),C8=(e,n)=>{e.set({}),n.on("NodeChange",o=>{eA(n,o.element,e.get())}),n.on("FormatApply FormatRemove",o=>{const r=L.from(o.node).map(c=>yg(c)?c:c.startContainer).bind(c=>pt(c)?L.some(c):L.from(c.parentElement)).getOrThunk(()=>ON(n));eA(n,r,e.get())})},ON=e=>e.selection.getStart(),QO=(e,n,o,r,c)=>eh(n,v=>{const C=e.formatter.matchNode(v,o,c??{},r);return!fs(C)},v=>XP(e,v,o)?!0:r?!1:Ae(e.formatter.matchNode(v,o,c,!0))),N_=(e,n)=>{const o=n??ON(e);return Mt(Cg(e.dom,o),r=>pt(r)&&!Ai(r))},eA=(e,n,o)=>{const r=N_(e,n);lt(o,(c,u)=>{const m=v=>{const C=QO(e,r,u,v.similar,P_(v)?v.vars:void 0),E=C.isSome();if(v.state.get()!==E){v.state.set(E);const D=C.getOr(n);P_(v)?v.callback(E,{node:D,format:u,parents:r}):we(v.callbacks,M=>M(E,{node:D,format:u,parents:r}))}};we([c.withSimilar,c.withoutSimilar],m),we(c.withVars,m)})},w8=(e,n,o,r,c,u)=>{const m=n.get();we(o.split(","),v=>{const C=mo(m,v).getOrThunk(()=>{const D={withSimilar:{state:lo(!1),similar:!0,callbacks:[]},withoutSimilar:{state:lo(!1),similar:!1,callbacks:[]},withVars:[]};return m[v]=D,D}),E=()=>{const D=N_(e);return QO(e,D,v,c,u).isSome()};if(fs(u)){const D=c?C.withSimilar:C.withoutSimilar;D.callbacks.push(r),D.callbacks.length===1&&D.state.set(E())}else C.withVars.push({state:lo(E()),similar:c,vars:u,callback:r})}),n.set(m)},S8=(e,n,o)=>{const r=e.get();we(n.split(","),c=>mo(r,c).each(u=>{r[c]={withSimilar:{...u.withSimilar,callbacks:Mt(u.withSimilar.callbacks,m=>m!==o)},withoutSimilar:{...u.withoutSimilar,callbacks:Mt(u.withoutSimilar.callbacks,m=>m!==o)},withVars:Mt(u.withVars,m=>m.callback!==o)}})),e.set(r)},x8=(e,n,o,r,c,u)=>(w8(e,n,o,r,c,u),{unbind:()=>S8(n,o,r)}),B_=(e,n,o,r)=>{const c=e.formatter.get(n);c&&(U2(e,n,o,r)&&(!("toggle"in c[0])||c[0].toggle)?xN(e,n,o,r):JO(e,n,o,r))},xd=ze.explode,AN=()=>{const e={};return{addFilter:(c,u)=>{we(xd(c),m=>{Ft(e,m)||(e[m]={name:m,callbacks:[]}),e[m].callbacks.push(u)})},getFilters:()=>dm(e),removeFilter:(c,u)=>{we(xd(c),m=>{if(Ft(e,m))if(Ae(u)){const v=e[m],C=Mt(v.callbacks,E=>E!==u);C.length>0?v.callbacks=C:delete e[m]}else delete e[m]})}}},tA=(e,n)=>{we(n,o=>{e.attr(o,null)})},us=(e,n,o)=>{e.addNodeFilter("font",r=>{we(r,c=>{const u=n.parse(c.attr("style")),m=c.attr("color"),v=c.attr("face"),C=c.attr("size");m&&(u.color=m),v&&(u["font-family"]=v),C&&Yd(C).each(E=>{u["font-size"]=o[E-1]}),c.name="span",c.attr("style",n.serialize(u)),tA(c,["color","face","size"])})})},nA=(e,n,o)=>{e.addNodeFilter("strike",r=>{const c=n.type!=="html4";we(r,u=>{if(c)u.name="s";else{const m=o.parse(u.attr("style"));m["text-decoration"]="line-through",u.name="span",u.attr("style",o.serialize(m))}})})},oA=(e,n,o)=>{var r;const c=Iv();n.convert_fonts_to_spans&&us(e,c,ze.explode((r=n.font_size_legacy_values)!==null&&r!==void 0?r:"")),nA(e,o,c)},Yf=(e,n,o)=>{n.inline_styles&&oA(e,n,o)},RN=e=>fetch(e).then(n=>n.ok?n.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),DN=e=>{const n=/([a-z0-9+\/=\s]+)/i.exec(e);return n?n[1]:""},Tp=e=>{const[n,...o]=e.split(","),r=o.join(","),c=/data:([^/]+\/[^;]+)(;.+)?/.exec(n);if(c){const u=c[2]===";base64",m=u?DN(r):decodeURIComponent(r);return L.some({type:c[1],data:m,base64Encoded:u})}else return L.none()},MN=(e,n,o=!0)=>{let r=n;if(o)try{r=atob(n)}catch{return L.none()}const c=new Uint8Array(r.length);for(let u=0;u<c.length;u++)c[u]=r.charCodeAt(u);return L.some(new Blob([c],{type:e}))},_8=e=>new Promise((n,o)=>{Tp(e).bind(({type:r,data:c,base64Encoded:u})=>MN(r,c,u)).fold(()=>o("Invalid data URI"),n)}),i0=e=>ms(e,"blob:")?RN(e):ms(e,"data:")?_8(e):Promise.reject("Unknown URI format"),PN=e=>new Promise((n,o)=>{const r=new FileReader;r.onloadend=()=>{n(r.result)},r.onerror=()=>{var c;o((c=r.error)===null||c===void 0?void 0:c.message)},r.readAsDataURL(e)});let kp=0;const E8=e=>"blobid"+kp++,Xf=(e,n,o)=>Tp(e).bind(({data:r,type:c,base64Encoded:u})=>{if(n&&!u)return L.none();{const m=u?r:btoa(r);return o(m,c)}}),li=(e,n,o)=>{const r=e.create(E8(),n,o);return e.add(r),r},l0=(e,n,o=!1)=>Xf(n,o,(r,c)=>L.from(e.getByData(r,c)).orThunk(()=>MN(c,r).map(u=>li(e,u,r)))),sA=(e,n)=>{const o=()=>Promise.reject("Invalid data URI");if(ms(n,"blob:")){const r=e.getByUri(n);return Ae(r)?Promise.resolve(r):i0(n).then(c=>PN(c).then(u=>Xf(u,!1,m=>L.some(li(e,c,m))).getOrThunk(o)))}else return ms(n,"data:")?l0(e,n).fold(o,r=>Promise.resolve(r)):Promise.reject("Unknown image data format")},rA=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,T8=e=>L.from(e.match(rA)).bind(n=>um(n,1)).map(n=>ms(n,"www.")?n.substring(4):n),K2=(e,n)=>{L.from(e.attr("src")).bind(T8).forall(o=>!Gt(n,o))&&e.attr("sandbox","")},aA=(e,n)=>ms(e,`${n}/`),kl=e=>fs(e)?"iframe":aA(e,"image")?"img":aA(e,"video")?"video":aA(e,"audio")?"audio":"iframe",$_=({type:e,src:n,width:o,height:r}={},c,u)=>{const m=kl(e),v=new za(m,1);return v.attr(m==="audio"?{src:n}:{src:n,width:o,height:r}),(m==="audio"||m==="video")&&v.attr("controls",""),m==="iframe"&&c&&K2(v,u),v},NN=e=>Ae(e.attr("data-mce-bogus")),cA=e=>e.attr("src")===ct.transparentSrc||Ae(e.attr("data-mce-placeholder")),iA=(e,n)=>{const{blob_cache:o}=n;if(o){const r=c=>{const u=c.attr("src");cA(c)||NN(c)||_n(u)||l0(o,u,!0).each(m=>{c.attr("src",m.blobUri())})};e.addAttributeFilter("src",c=>we(c,r))}},Op=(e,n)=>{var o,r;const c=e.schema;e.addAttributeFilter("href",C=>{let E=C.length;const D=B=>B.split(" ").filter(q=>q.length>0).concat(["noopener"]).sort().join(" "),M=B=>{const W=B?ze.trim(B):"";return/\b(noopener)\b/g.test(W)?W:D(W)};if(!n.allow_unsafe_link_target)for(;E--;){const B=C[E];B.name==="a"&&B.attr("target")==="_blank"&&B.attr("rel",M(B.attr("rel")))}}),n.allow_html_in_named_anchor||e.addAttributeFilter("id,name",C=>{let E=C.length,D,M,B,W;for(;E--;)if(W=C[E],W.name==="a"&&W.firstChild&&!W.attr("href"))for(B=W.parent,D=W.lastChild;D&&B;)M=D.prev,B.insert(D,W),D=M}),n.fix_list_elements&&e.addNodeFilter("ul,ol",C=>{let E=C.length,D,M;for(;E--;)if(D=C[E],M=D.parent,M&&(M.name==="ul"||M.name==="ol"))if(D.prev&&D.prev.name==="li")D.prev.append(D);else{const B=new za("li",1);B.attr("style","list-style-type: none"),D.wrap(B)}});const u=c.getValidClasses();n.validate&&u&&e.addAttributeFilter("class",C=>{var E;let D=C.length;for(;D--;){const M=C[D],B=(E=M.attr("class"))!==null&&E!==void 0?E:"",W=ze.explode(B," ");let q="";for(let Z=0;Z<W.length;Z++){const K=W[Z];let ne=!1,re=u["*"];re&&re[K]&&(ne=!0),re=u[M.name],!ne&&re&&re[K]&&(ne=!0),ne&&(q&&(q+=" "),q+=K)}q.length||(q=null),M.attr("class",q)}}),iA(e,n);const m=(o=n.sandbox_iframes)!==null&&o!==void 0?o:!1,v=th((r=n.sandbox_iframes_exclusions)!==null&&r!==void 0?r:[]);n.convert_unsafe_embeds&&e.addNodeFilter("object,embed",C=>we(C,E=>{E.replace($_({type:E.attr("type"),src:E.name==="object"?E.attr("data"):E.attr("src"),width:E.attr("width"),height:E.attr("height")},m,v))})),m&&e.addNodeFilter("iframe",C=>we(C,E=>K2(E,v)))},{entries:I_,setPrototypeOf:BN,isFrozen:$N,getPrototypeOf:k8,getOwnPropertyDescriptor:O8}=Object;let{freeze:Nc,seal:vu,create:Y2}=Object,{apply:lA,construct:F_}=typeof Reflect<"u"&&Reflect;lA||(lA=function(n,o,r){return n.apply(o,r)}),Nc||(Nc=function(n){return n}),vu||(vu=function(n){return n}),F_||(F_=function(n,o){return new n(...o)});const uA=Ol(Array.prototype.forEach),A8=Ol(Array.prototype.pop),u0=Ol(Array.prototype.push),X2=Ol(String.prototype.toLowerCase),dA=Ol(String.prototype.toString),R8=Ol(String.prototype.match),yu=Ol(String.prototype.replace),D8=Ol(String.prototype.indexOf),M8=Ol(String.prototype.trim),Zi=Ol(RegExp.prototype.test),J2=P8(TypeError);function Ol(e){return function(n){for(var o=arguments.length,r=new Array(o>1?o-1:0),c=1;c<o;c++)r[c-1]=arguments[c];return lA(e,n,r)}}function P8(e){return function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return F_(e,o)}}function Yn(e,n,o){var r;o=(r=o)!==null&&r!==void 0?r:X2,BN&&BN(e,null);let c=n.length;for(;c--;){let u=n[c];if(typeof u=="string"){const m=o(u);m!==u&&($N(n)||(n[c]=m),u=m)}e[u]=!0}return e}function d0(e){const n=Y2(null);for(const[o,r]of I_(e))n[o]=r;return n}function L_(e,n){for(;e!==null;){const r=O8(e,n);if(r){if(r.get)return Ol(r.get);if(typeof r.value=="function")return Ol(r.value)}e=k8(e)}function o(r){return console.warn("fallback value for",r),null}return o}const IN=Nc(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),H_=Nc(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),fA=Nc(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),f0=Nc(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),mA=Nc(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),N8=Nc(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),FN=Nc(["#text"]),LN=Nc(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),V_=Nc(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),HN=Nc(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),z_=Nc(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),B8=vu(/\{\{[\w\W]*|[\w\W]*\}\}/gm),$8=vu(/<%[\w\W]*|[\w\W]*%>/gm),I8=vu(/\${[\w\W]*}/gm),F8=vu(/^data-[\-\w.\u00B7-\uFFFF]/),L8=vu(/^aria-[\-\w]+$/),VN=vu(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),H8=vu(/^(?:\w+script|data):/i),V8=vu(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),U_=vu(/^html$/i);var gA=Object.freeze({__proto__:null,MUSTACHE_EXPR:B8,ERB_EXPR:$8,TMPLIT_EXPR:I8,DATA_ATTR:F8,ARIA_ATTR:L8,IS_ALLOWED_URI:VN,IS_SCRIPT_OR_DATA:H8,ATTR_WHITESPACE:V8,DOCTYPE_NAME:U_});const jq=()=>typeof window>"u"?null:window,Q2=function(n,o){if(typeof n!="object"||typeof n.createPolicy!="function")return null;let r=null;const c="data-tt-policy-suffix";o&&o.hasAttribute(c)&&(r=o.getAttribute(c));const u="dompurify"+(r?"#"+r:"");try{return n.createPolicy(u,{createHTML(m){return m},createScriptURL(m){return m}})}catch{return console.warn("TrustedTypes policy "+u+" could not be created."),null}};function zN(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:jq();const n=dn=>zN(dn);if(n.version="3.0.5",n.removed=[],!e||!e.document||e.document.nodeType!==9)return n.isSupported=!1,n;const o=e.document,r=o.currentScript;let{document:c}=e;const{DocumentFragment:u,HTMLTemplateElement:m,Node:v,Element:C,NodeFilter:E,NamedNodeMap:D=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:M,DOMParser:B,trustedTypes:W}=e,q=C.prototype,Z=L_(q,"cloneNode"),K=L_(q,"nextSibling"),ne=L_(q,"childNodes"),re=L_(q,"parentNode");if(typeof m=="function"){const dn=c.createElement("template");dn.content&&dn.content.ownerDocument&&(c=dn.content.ownerDocument)}let se,ue="";const{implementation:Oe,createNodeIterator:Ue,createDocumentFragment:st,getElementsByTagName:$e}=c,{importNode:Ce}=o;let Ee={};n.isSupported=typeof I_=="function"&&typeof re=="function"&&Oe&&Oe.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:ot,ERB_EXPR:wt,TMPLIT_EXPR:Qt,DATA_ATTR:hn,ARIA_ATTR:Un,IS_SCRIPT_OR_DATA:Xn,ATTR_WHITESPACE:co}=gA;let{IS_ALLOWED_URI:Or}=gA,Jn=null;const Xe=Yn({},[...IN,...H_,...fA,...mA,...FN]);let bt=null;const En=Yn({},[...LN,...V_,...HN,...z_]);let nt=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),kt=null,rn=null,rt=!0,nn=!0,an=!1,Fs=!0,Fn=!1,Cs=!1,Xi=!1,Ml=!1,ya=!1,Fc=!1,Ji=!1,Lc=!0,pi=!1;const xt="user-content-";let Cn=!0,So=!1,Vo={},ds=null;const Ls=Yn({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let es=null;const ts=Yn({},["audio","video","img","source","image","track"]);let aa=null;const Pl=Yn({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Nl="http://www.w3.org/1998/Math/MathML",Qi="http://www.w3.org/2000/svg",bi="http://www.w3.org/1999/xhtml";let rm=bi,Xp=!1,Yg=null;const ow=Yn({},[Nl,Qi,bi],dA);let Bl;const sw=["application/xhtml+xml","text/html"],$D="text/html";let zr,am=null;const ID=c.createElement("form"),DT=function(be){return be instanceof RegExp||be instanceof Function},Fd=function(be){if(!(am&&am===be)){if((!be||typeof be!="object")&&(be={}),be=d0(be),Bl=sw.indexOf(be.PARSER_MEDIA_TYPE)===-1?Bl=$D:Bl=be.PARSER_MEDIA_TYPE,zr=Bl==="application/xhtml+xml"?dA:X2,Jn="ALLOWED_TAGS"in be?Yn({},be.ALLOWED_TAGS,zr):Xe,bt="ALLOWED_ATTR"in be?Yn({},be.ALLOWED_ATTR,zr):En,Yg="ALLOWED_NAMESPACES"in be?Yn({},be.ALLOWED_NAMESPACES,dA):ow,aa="ADD_URI_SAFE_ATTR"in be?Yn(d0(Pl),be.ADD_URI_SAFE_ATTR,zr):Pl,es="ADD_DATA_URI_TAGS"in be?Yn(d0(ts),be.ADD_DATA_URI_TAGS,zr):ts,ds="FORBID_CONTENTS"in be?Yn({},be.FORBID_CONTENTS,zr):Ls,kt="FORBID_TAGS"in be?Yn({},be.FORBID_TAGS,zr):{},rn="FORBID_ATTR"in be?Yn({},be.FORBID_ATTR,zr):{},Vo="USE_PROFILES"in be?be.USE_PROFILES:!1,rt=be.ALLOW_ARIA_ATTR!==!1,nn=be.ALLOW_DATA_ATTR!==!1,an=be.ALLOW_UNKNOWN_PROTOCOLS||!1,Fs=be.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Fn=be.SAFE_FOR_TEMPLATES||!1,Cs=be.WHOLE_DOCUMENT||!1,ya=be.RETURN_DOM||!1,Fc=be.RETURN_DOM_FRAGMENT||!1,Ji=be.RETURN_TRUSTED_TYPE||!1,Ml=be.FORCE_BODY||!1,Lc=be.SANITIZE_DOM!==!1,pi=be.SANITIZE_NAMED_PROPS||!1,Cn=be.KEEP_CONTENT!==!1,So=be.IN_PLACE||!1,Or=be.ALLOWED_URI_REGEXP||VN,rm=be.NAMESPACE||bi,nt=be.CUSTOM_ELEMENT_HANDLING||{},be.CUSTOM_ELEMENT_HANDLING&&DT(be.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(nt.tagNameCheck=be.CUSTOM_ELEMENT_HANDLING.tagNameCheck),be.CUSTOM_ELEMENT_HANDLING&&DT(be.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(nt.attributeNameCheck=be.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),be.CUSTOM_ELEMENT_HANDLING&&typeof be.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(nt.allowCustomizedBuiltInElements=be.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Fn&&(nn=!1),Fc&&(ya=!0),Vo&&(Jn=Yn({},[...FN]),bt=[],Vo.html===!0&&(Yn(Jn,IN),Yn(bt,LN)),Vo.svg===!0&&(Yn(Jn,H_),Yn(bt,V_),Yn(bt,z_)),Vo.svgFilters===!0&&(Yn(Jn,fA),Yn(bt,V_),Yn(bt,z_)),Vo.mathMl===!0&&(Yn(Jn,mA),Yn(bt,HN),Yn(bt,z_))),be.ADD_TAGS&&(Jn===Xe&&(Jn=d0(Jn)),Yn(Jn,be.ADD_TAGS,zr)),be.ADD_ATTR&&(bt===En&&(bt=d0(bt)),Yn(bt,be.ADD_ATTR,zr)),be.ADD_URI_SAFE_ATTR&&Yn(aa,be.ADD_URI_SAFE_ATTR,zr),be.FORBID_CONTENTS&&(ds===Ls&&(ds=d0(ds)),Yn(ds,be.FORBID_CONTENTS,zr)),Cn&&(Jn["#text"]=!0),Cs&&Yn(Jn,["html","head","body"]),Jn.table&&(Yn(Jn,["tbody"]),delete kt.tbody),be.TRUSTED_TYPES_POLICY){if(typeof be.TRUSTED_TYPES_POLICY.createHTML!="function")throw J2('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof be.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw J2('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');se=be.TRUSTED_TYPES_POLICY,ue=se.createHTML("")}else se===void 0&&(se=Q2(W,r)),se!==null&&typeof ue=="string"&&(ue=se.createHTML(""));Nc&&Nc(be),am=be}},G0=Yn({},["mi","mo","mn","ms","mtext"]),ge=Yn({},["foreignobject","desc","title","annotation-xml"]),pe=Yn({},["title","style","font","a","script"]),Ke=Yn({},H_);Yn(Ke,fA),Yn(Ke,f0);const Ve=Yn({},mA);Yn(Ve,N8);const Nt=function(be){let Ct=re(be);(!Ct||!Ct.tagName)&&(Ct={namespaceURI:rm,tagName:"template"});const Lt=X2(be.tagName),Xo=X2(Ct.tagName);return Yg[be.namespaceURI]?be.namespaceURI===Qi?Ct.namespaceURI===bi?Lt==="svg":Ct.namespaceURI===Nl?Lt==="svg"&&(Xo==="annotation-xml"||G0[Xo]):!!Ke[Lt]:be.namespaceURI===Nl?Ct.namespaceURI===bi?Lt==="math":Ct.namespaceURI===Qi?Lt==="math"&&ge[Xo]:!!Ve[Lt]:be.namespaceURI===bi?Ct.namespaceURI===Qi&&!ge[Xo]||Ct.namespaceURI===Nl&&!G0[Xo]?!1:!Ve[Lt]&&(pe[Lt]||!Ke[Lt]):!!(Bl==="application/xhtml+xml"&&Yg[be.namespaceURI]):!1},mn=function(be){u0(n.removed,{element:be});try{be.parentNode.removeChild(be)}catch{be.remove()}},xo=function(be,Ct){try{u0(n.removed,{attribute:Ct.getAttributeNode(be),from:Ct})}catch{u0(n.removed,{attribute:null,from:Ct})}if(Ct.removeAttribute(be),be==="is"&&!bt[be])if(ya||Fc)try{mn(Ct)}catch{}else try{Ct.setAttribute(be,"")}catch{}},$l=function(be){let Ct,Lt;if(Ml)be="<remove></remove>"+be;else{const Il=R8(be,/^[\r\n\t ]+/);Lt=Il&&Il[0]}Bl==="application/xhtml+xml"&&rm===bi&&(be='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+be+"</body></html>");const Xo=se?se.createHTML(be):be;if(rm===bi)try{Ct=new B().parseFromString(Xo,Bl)}catch{}if(!Ct||!Ct.documentElement){Ct=Oe.createDocument(rm,"template",null);try{Ct.documentElement.innerHTML=Xp?ue:Xo}catch{}}const Ca=Ct.body||Ct.documentElement;return be&&Lt&&Ca.insertBefore(c.createTextNode(Lt),Ca.childNodes[0]||null),rm===bi?$e.call(Ct,Cs?"html":"body")[0]:Cs?Ct.documentElement:Ca},rw=function(be){return Ue.call(be.ownerDocument||be,be,E.SHOW_ELEMENT|E.SHOW_COMMENT|E.SHOW_TEXT,null,!1)},RG=function(be){return be instanceof M&&(typeof be.nodeName!="string"||typeof be.textContent!="string"||typeof be.removeChild!="function"||!(be.attributes instanceof D)||typeof be.removeAttribute!="function"||typeof be.setAttribute!="function"||typeof be.namespaceURI!="string"||typeof be.insertBefore!="function"||typeof be.hasChildNodes!="function")},aw=function(be){return typeof v=="object"?be instanceof v:be&&typeof be=="object"&&typeof be.nodeType=="number"&&typeof be.nodeName=="string"},Tu=function(be,Ct,Lt){Ee[be]&&uA(Ee[be],Xo=>{Xo.call(n,Ct,Lt,am)})},K6=function(be){let Ct;if(Tu("beforeSanitizeElements",be,null),RG(be))return mn(be),!0;const Lt=zr(be.nodeName);if(Tu("uponSanitizeElement",be,{tagName:Lt,allowedTags:Jn}),be.hasChildNodes()&&!aw(be.firstElementChild)&&(!aw(be.content)||!aw(be.content.firstElementChild))&&Zi(/<[/\w]/g,be.innerHTML)&&Zi(/<[/\w]/g,be.textContent))return mn(be),!0;if(!Jn[Lt]||kt[Lt]){if(!kt[Lt]&&FD(Lt)&&(nt.tagNameCheck instanceof RegExp&&Zi(nt.tagNameCheck,Lt)||nt.tagNameCheck instanceof Function&&nt.tagNameCheck(Lt)))return!1;if(Cn&&!ds[Lt]){const Xo=re(be)||be.parentNode,Ca=ne(be)||be.childNodes;if(Ca&&Xo){const Il=Ca.length;for(let Qs=Il-1;Qs>=0;--Qs)Xo.insertBefore(Z(Ca[Qs],!0),K(be))}}return mn(be),!0}return be instanceof C&&!Nt(be)||(Lt==="noscript"||Lt==="noembed"||Lt==="noframes")&&Zi(/<\/no(script|embed|frames)/i,be.innerHTML)?(mn(be),!0):(Fn&&be.nodeType===3&&(Ct=be.textContent,Ct=yu(Ct,ot," "),Ct=yu(Ct,wt," "),Ct=yu(Ct,Qt," "),be.textContent!==Ct&&(u0(n.removed,{element:be.cloneNode()}),be.textContent=Ct)),Tu("afterSanitizeElements",be,null),!1)},Y6=function(be,Ct,Lt){if(Lc&&(Ct==="id"||Ct==="name")&&(Lt in c||Lt in ID))return!1;if(!(nn&&!rn[Ct]&&Zi(hn,Ct))){if(!(rt&&Zi(Un,Ct))){if(!bt[Ct]||rn[Ct]){if(!(FD(be)&&(nt.tagNameCheck instanceof RegExp&&Zi(nt.tagNameCheck,be)||nt.tagNameCheck instanceof Function&&nt.tagNameCheck(be))&&(nt.attributeNameCheck instanceof RegExp&&Zi(nt.attributeNameCheck,Ct)||nt.attributeNameCheck instanceof Function&&nt.attributeNameCheck(Ct))||Ct==="is"&&nt.allowCustomizedBuiltInElements&&(nt.tagNameCheck instanceof RegExp&&Zi(nt.tagNameCheck,Lt)||nt.tagNameCheck instanceof Function&&nt.tagNameCheck(Lt))))return!1}else if(!aa[Ct]){if(!Zi(Or,yu(Lt,co,""))){if(!((Ct==="src"||Ct==="xlink:href"||Ct==="href")&&be!=="script"&&D8(Lt,"data:")===0&&es[be])){if(!(an&&!Zi(Xn,yu(Lt,co,"")))){if(Lt)return!1}}}}}}return!0},FD=function(be){return be.indexOf("-")>0},X6=function(be){let Ct,Lt,Xo,Ca;Tu("beforeSanitizeAttributes",be,null);const{attributes:Il}=be;if(!Il)return;const Qs={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:bt};for(Ca=Il.length;Ca--;){Ct=Il[Ca];const{name:Fl,namespaceURI:t}=Ct;Lt=Fl==="value"?Ct.value:M8(Ct.value);const s=Lt;if(Xo=zr(Fl),Qs.attrName=Xo,Qs.attrValue=Lt,Qs.keepAttr=!0,Qs.forceKeepAttr=void 0,Tu("uponSanitizeAttribute",be,Qs),Lt=Qs.attrValue,Qs.forceKeepAttr)continue;if(!Qs.keepAttr){xo(Fl,be);continue}if(!Fs&&Zi(/\/>/i,Lt)){xo(Fl,be);continue}Fn&&(Lt=yu(Lt,ot," "),Lt=yu(Lt,wt," "),Lt=yu(Lt,Qt," "));const a=zr(be.nodeName);if(!Y6(a,Xo,Lt)){xo(Fl,be);continue}if(pi&&(Xo==="id"||Xo==="name")&&(xo(Fl,be),Lt=xt+Lt),se&&typeof W=="object"&&typeof W.getAttributeType=="function"&&!t)switch(W.getAttributeType(a,Xo)){case"TrustedHTML":{Lt=se.createHTML(Lt);break}case"TrustedScriptURL":{Lt=se.createScriptURL(Lt);break}}if(Lt!==s)try{t?be.setAttributeNS(t,Fl,Lt):be.setAttribute(Fl,Lt)}catch{xo(Fl,be)}}Tu("afterSanitizeAttributes",be,null)},DG=function dn(be){let Ct;const Lt=rw(be);for(Tu("beforeSanitizeShadowDOM",be,null);Ct=Lt.nextNode();)Tu("uponSanitizeShadowNode",Ct,null),!K6(Ct)&&(Ct.content instanceof u&&dn(Ct.content),X6(Ct));Tu("afterSanitizeShadowDOM",be,null)};return n.sanitize=function(dn){let be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ct,Lt,Xo,Ca;if(Xp=!dn,Xp&&(dn="<!-->"),typeof dn!="string"&&!aw(dn))if(typeof dn.toString=="function"){if(dn=dn.toString(),typeof dn!="string")throw J2("dirty is not a string, aborting")}else throw J2("toString is not a function");if(!n.isSupported)return dn;if(Xi||Fd(be),n.removed=[],typeof dn=="string"&&(So=!1),So){if(dn.nodeName){const Fl=zr(dn.nodeName);if(!Jn[Fl]||kt[Fl])throw J2("root node is forbidden and cannot be sanitized in-place")}}else if(dn instanceof v)Ct=$l("<!---->"),Lt=Ct.ownerDocument.importNode(dn,!0),Lt.nodeType===1&&Lt.nodeName==="BODY"||Lt.nodeName==="HTML"?Ct=Lt:Ct.appendChild(Lt);else{if(!ya&&!Fn&&!Cs&&dn.indexOf("<")===-1)return se&&Ji?se.createHTML(dn):dn;if(Ct=$l(dn),!Ct)return ya?null:Ji?ue:""}Ct&&Ml&&mn(Ct.firstChild);const Il=rw(So?dn:Ct);for(;Xo=Il.nextNode();)K6(Xo)||(Xo.content instanceof u&&DG(Xo.content),X6(Xo));if(So)return dn;if(ya){if(Fc)for(Ca=st.call(Ct.ownerDocument);Ct.firstChild;)Ca.appendChild(Ct.firstChild);else Ca=Ct;return(bt.shadowroot||bt.shadowrootmode)&&(Ca=Ce.call(o,Ca,!0)),Ca}let Qs=Cs?Ct.outerHTML:Ct.innerHTML;return Cs&&Jn["!doctype"]&&Ct.ownerDocument&&Ct.ownerDocument.doctype&&Ct.ownerDocument.doctype.name&&Zi(U_,Ct.ownerDocument.doctype.name)&&(Qs="<!DOCTYPE "+Ct.ownerDocument.doctype.name+`>
`+Qs),Fn&&(Qs=yu(Qs,ot," "),Qs=yu(Qs,wt," "),Qs=yu(Qs,Qt," ")),se&&Ji?se.createHTML(Qs):Qs},n.setConfig=function(dn){Fd(dn),Xi=!0},n.clearConfig=function(){am=null,Xi=!1},n.isValidAttribute=function(dn,be,Ct){am||Fd({});const Lt=zr(dn),Xo=zr(be);return Y6(Lt,Xo,Ct)},n.addHook=function(dn,be){typeof be=="function"&&(Ee[dn]=Ee[dn]||[],u0(Ee[dn],be))},n.removeHook=function(dn){if(Ee[dn])return A8(Ee[dn])},n.removeHooks=function(dn){Ee[dn]&&(Ee[dn]=[])},n.removeAllHooks=function(){Ee={}},n}var W_=zN();const UN=ze.each,Z_=ze.trim,WN=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],Is={ftp:21,http:80,https:443,mailto:25},Gq=["img","video"],qq=(e,n)=>Ae(e)?!e:Ae(n)?!Gt(Gq,n):!0,Kq=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},z8=(e,n,o)=>{const r=Kq(n).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(r)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(r)?qq(e.allow_svg_data_urls,o)&&/^data:image\/svg\+xml/i.test(r):/^data:/i.test(r)};class Ys{static parseDataUri(n){let o;const r=decodeURIComponent(n).split(","),c=/data:([^;]+)/.exec(r[0]);return c&&(o=c[1]),{type:o,data:r[1]}}static isDomSafe(n,o,r={}){if(r.allow_script_urls)return!0;{const c=qu.decode(n).replace(/[\s\u0000-\u001F]+/g,"");return!z8(r,c,o)}}static getDocumentBaseUrl(n){var o;let r;return n.protocol.indexOf("http")!==0&&n.protocol!=="file:"?r=(o=n.href)!==null&&o!==void 0?o:"":r=n.protocol+"//"+n.host+n.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}constructor(n,o={}){this.path="",this.directory="",n=Z_(n),this.settings=o;const r=o.base_uri,c=this;if(/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n)){c.source=n;return}const u=n.indexOf("//")===0;if(n.indexOf("/")===0&&!u&&(n=(r&&r.protocol||"http")+"://mce_host"+n),!/^[\w\-]*:?\/\//.test(n)){const v=r?r.path:new Ys(document.location.href).directory;if((r==null?void 0:r.protocol)==="")n="//mce_host"+c.toAbsPath(v,n);else{const C=/([^#?]*)([#?]?.*)/.exec(n);C&&(n=(r&&r.protocol||"http")+"://mce_host"+c.toAbsPath(v,C[1])+C[2])}}n=n.replace(/@@/g,"(mce_at)");const m=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n);m&&UN(WN,(v,C)=>{let E=m[C];E&&(E=E.replace(/\(mce_at\)/g,"@@")),c[v]=E}),r&&(c.protocol||(c.protocol=r.protocol),c.userInfo||(c.userInfo=r.userInfo),!c.port&&c.host==="mce_host"&&(c.port=r.port),(!c.host||c.host==="mce_host")&&(c.host=r.host),c.source=""),u&&(c.protocol="")}setPath(n){const o=/^(.*?)\/?(\w+)?$/.exec(n);o&&(this.path=o[0],this.directory=o[1],this.file=o[2]),this.source="",this.getURI()}toRelative(n){if(n==="./")return n;const o=new Ys(n,{base_uri:this});if(o.host!=="mce_host"&&this.host!==o.host&&o.host||this.port!==o.port||this.protocol!==o.protocol&&o.protocol!=="")return o.getURI();const r=this.getURI(),c=o.getURI();if(r===c||r.charAt(r.length-1)==="/"&&r.substr(0,r.length-1)===c)return r;let u=this.toRelPath(this.path,o.path);return o.query&&(u+="?"+o.query),o.anchor&&(u+="#"+o.anchor),u}toAbsolute(n,o){const r=new Ys(n,{base_uri:this});return r.getURI(o&&this.isSameOrigin(r))}isSameOrigin(n){if(this.host==n.host&&this.protocol==n.protocol){if(this.port==n.port)return!0;const o=this.protocol?Is[this.protocol]:null;if(o&&(this.port||o)==(n.port||o))return!0}return!1}toRelPath(n,o){let r=0,c="",u,m;const v=n.substring(0,n.lastIndexOf("/")).split("/"),C=o.split("/");if(v.length>=C.length){for(u=0,m=v.length;u<m;u++)if(u>=C.length||v[u]!==C[u]){r=u+1;break}}if(v.length<C.length){for(u=0,m=C.length;u<m;u++)if(u>=v.length||v[u]!==C[u]){r=u+1;break}}if(r===1)return o;for(u=0,m=v.length-(r-1);u<m;u++)c+="../";for(u=r-1,m=C.length;u<m;u++)u!==r-1?c+="/"+C[u]:c+=C[u];return c}toAbsPath(n,o){let r=0;const c=/\/$/.test(o)?"/":"",u=n.split("/"),m=o.split("/"),v=[];UN(u,M=>{M&&v.push(M)});const C=[];for(let M=m.length-1;M>=0;M--)if(!(m[M].length===0||m[M]===".")){if(m[M]===".."){r++;continue}if(r>0){r--;continue}C.push(m[M])}const E=v.length-r;let D;return E<=0?D=$o(C).join("/"):D=v.slice(0,E).join("/")+"/"+$o(C).join("/"),D.indexOf("/")!==0&&(D="/"+D),c&&D.lastIndexOf("/")!==D.length-1&&(D+=c),D}getURI(n=!1){let o;return(!this.source||n)&&(o="",n||(this.protocol?o+=this.protocol+"://":o+="//",this.userInfo&&(o+=this.userInfo+"@"),this.host&&(o+=this.host),this.port&&(o+=":"+this.port)),this.path&&(o+=this.path),this.query&&(o+="?"+this.query),this.anchor&&(o+="#"+this.anchor),this.source=o),this.source}}const j_=ze.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),_d="data-mce-type";let Jf=0;const ZN=(e,n,o,r,c)=>{var u,m,v,C;const E=n.validate,D=o.getSpecialElements();e.nodeType===_w&&!n.allow_conditional_comments&&/^\[if/i.test((u=e.nodeValue)!==null&&u!==void 0?u:"")&&(e.nodeValue=" "+e.nodeValue);const M=(m=c==null?void 0:c.tagName)!==null&&m!==void 0?m:e.nodeName.toLowerCase();if(r!=="html"&&o.isValid(r)){Ae(c)&&(c.allowedTags[M]=!0);return}if(e.nodeType!==Si||M==="body")return;const B=X.fromDom(e),W=tf(B,_d),q=Es(B,"data-mce-bogus");if(!W&&ee(q)){q==="all"?go(B):cf(B);return}const Z=o.getElementRule(M);if(E&&!Z){Ft(D,M)?go(B):cf(B);return}else Ae(c)&&(c.allowedTags[M]=!0);if(E&&Z&&!W){if(we((v=Z.attributesForced)!==null&&v!==void 0?v:[],K=>{io(B,K.name,K.value==="{$uid}"?`mce_${Jf++}`:K.value)}),we((C=Z.attributesDefault)!==null&&C!==void 0?C:[],K=>{tf(B,K.name)||io(B,K.name,K.value==="{$uid}"?`mce_${Jf++}`:K.value)}),Z.attributesRequired&&!vo(Z.attributesRequired,K=>tf(B,K))){cf(B);return}if(Z.removeEmptyAttrs&&Gc(B)){cf(B);return}Z.outputName&&Z.outputName!==M&&uS(B,Z.outputName)}},U8=(e,n,o,r,c)=>{const u=e.tagName.toLowerCase(),{attrName:m,attrValue:v}=c;c.keepAttr=Ap(n,o,r,u,m,v),c.keepAttr?(c.allowedAttributes[m]=!0,Dp(m,o)&&(c.attrValue=m),n.allow_svg_data_urls&&ms(v,"data:image/svg+xml")&&(c.forceKeepAttr=!0)):Rp(e,m)&&(c.forceKeepAttr=!0)},Ap=(e,n,o,r,c,u)=>o!=="html"&&!ko(r)?!0:!(c in j_&&z8(e,u,r))&&(!e.validate||n.isValid(r,c)||ms(c,"data-")||ms(c,"aria-")),Rp=(e,n)=>e.hasAttribute(_d)&&(n==="id"||n==="class"||n==="style"),Dp=(e,n)=>e in n.getBoolAttrs(),hA=(e,n,o,r)=>{const{attributes:c}=e;for(let u=c.length-1;u>=0;u--){const m=c[u],v=m.name,C=m.value;!Ap(n,o,r,e.tagName.toLowerCase(),v,C)&&!Rp(e,v)?e.removeAttribute(v):Dp(v,o)&&e.setAttribute(v,v)}},pA=(e,n,o)=>{const r=W_();return r.addHook("uponSanitizeElement",(c,u)=>{ZN(c,e,n,o.track(c),u)}),r.addHook("uponSanitizeAttribute",(c,u)=>{U8(c,e,n,o.current(),u)}),r},jN=(e,n)=>{const r={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]}};return r.PARSER_MEDIA_TYPE=n,e.allow_script_urls?r.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(r.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),r},GN=e=>{const n=Tc(e);if(n==="svg"){const o=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(c=>`xlink:${c}`),r={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:o};W_().sanitize(e,r)}else if(n==="math"){const o={IN_PLACE:!0,USE_PROFILES:{mathMl:!0}};W_().sanitize(e,o)}else throw new Error("Not a namespace element")},W8=(e,n)=>{const o=rM();if(e.sanitize){const r=pA(e,n,o);return{sanitizeHtmlElement:(u,m)=>{r.sanitize(u,jN(e,m)),r.removed=[],o.reset()},sanitizeNamespaceElement:GN}}else return{sanitizeHtmlElement:(u,m)=>{const v=document.createNodeIterator(u,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let C;for(;C=v.nextNode();){const E=o.track(C);ZN(C,e,n,E),pt(C)&&hA(C,e,n,E)}o.reset()},sanitizeNamespaceElement:Bt}},qN=ze.makeMap,bA=ze.extend,KN=(e,n,o,r)=>{const c=e.name,u=c in o&&c!=="title"&&c!=="textarea",m=n.childNodes;for(let v=0,C=m.length;v<C;v++){const E=m[v],D=new za(E.nodeName.toLowerCase(),E.nodeType);if(pt(E)){const M=E.attributes;for(let B=0,W=M.length;B<W;B++){const q=M[B];D.attr(q.name,q.value)}ko(D.name)&&(r(E),D.value=E.innerHTML)}else Me(E)?(D.value=E.data,u&&(D.raw=!0)):(ql(E)||Ri(E)||Ra(E))&&(D.value=E.data);ko(D.name)||KN(D,E,o,r),e.append(D)}},Z8=(e,n,o)=>{const r=[];for(let c=e,u=c;c;u=c,c=c.walk()){const m=c;we(n,v=>v(m)),_n(m.parent)&&m!==e?c=u:r.push(m)}for(let c=r.length-1;c>=0;c--){const u=r[c];we(o,m=>m(u))}},j8=(e,n,o,r)=>{const c=o.validate,u=n.getNonEmptyElements(),m=n.getWhitespaceElements(),v=bA(qN("script,style,head,html,body,title,meta,param"),n.getBlockElements()),C=Jw(n),E=/[ \t\r\n]+/g,D=/^[ \t\r\n]+/,M=/[ \t\r\n]+$/,B=re=>{let se=re.parent;for(;Ae(se);){if(se.name in m)return!0;se=se.parent}return!1},W=re=>{let se=re;for(;Ae(se);){if(se.name in C)return r0(n,u,m,se);se=se.parent}return!1},q=re=>re.name in v||O1(n,re)||ko(re.name)&&re.parent===e,Z=(re,se)=>{const ue=se?re.prev:re.next;return Ae(ue)||_n(re.parent)?!1:q(re.parent)&&(re.parent!==e||r.isRootContent===!0)};return[re=>{var se;if(re.type===3&&!B(re)){let ue=(se=re.value)!==null&&se!==void 0?se:"";ue=ue.replace(E," "),(V7(re.prev,q)||Z(re,!0))&&(ue=ue.replace(D,"")),ue.length===0?re.remove():re.value=ue}},re=>{var se;if(re.type===1){const ue=n.getElementRule(re.name);if(c&&ue){const Oe=r0(n,u,m,re);ue.paddInEmptyBlock&&Oe&&W(re)?h_(o,r,q,re):ue.removeEmpty&&Oe?q(re)?re.remove():re.unwrap():ue.paddEmpty&&(Oe||H7(re))&&h_(o,r,q,re)}}else if(re.type===3&&!B(re)){let ue=(se=re.value)!==null&&se!==void 0?se:"";(re.next&&q(re.next)||Z(re,!1))&&(ue=ue.replace(M,"")),ue.length===0?re.remove():re.value=ue}}]},G8=(e,n)=>{var o;const r=(o=n.forced_root_block)!==null&&o!==void 0?o:e.forced_root_block;return r===!1?"":r===!0?"p":r},m0=(e={},n=Bn())=>{const o=AN(),r=AN(),c={validate:!0,root_name:"body",sanitize:!0,...e},u=new DOMParser,m=W8(c,n),v=(se,ue,Oe="html")=>{const Ue=Oe==="xhtml"?"application/xhtml+xml":"text/html",st=Ft(n.getSpecialElements(),ue.toLowerCase()),$e=st?`<${ue}>${se}</${ue}>`:se,Ce=Oe==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${$e}</body></html>`:`<body>${$e}</body>`,Ee=u.parseFromString(Ce,Ue).body;return m.sanitizeHtmlElement(Ee,Ue),st?Ee.firstChild:Ee},C=o.addFilter,E=o.getFilters,D=o.removeFilter,M=r.addFilter,B=r.getFilters,W=r.removeFilter,q=(se,ue)=>{FO(n,se)&&ue.push(se)},Z=(se,ue)=>{const Oe=ee(ue.attr(_d)),Ue=ue.type===1&&!Ft(se,ue.name)&&!O1(n,ue)&&!ko(ue.name);return ue.type===3||Ue&&!Oe},K=(se,ue)=>{const Oe=bA(qN("script,style,head,html,body,title,meta,param"),n.getBlockElements()),Ue=/^[ \t\r\n]+/,st=/[ \t\r\n]+$/;let $e=se.firstChild,Ce=null;const Ee=ot=>{var wt,Qt;ot&&($e=ot.firstChild,$e&&$e.type===3&&($e.value=(wt=$e.value)===null||wt===void 0?void 0:wt.replace(Ue,"")),$e=ot.lastChild,$e&&$e.type===3&&($e.value=(Qt=$e.value)===null||Qt===void 0?void 0:Qt.replace(st,"")))};if(n.isValidChild(se.name,ue.toLowerCase())){for(;$e;){const ot=$e.next;Z(Oe,$e)?(Ce||(Ce=new za(ue,1),Ce.attr(c.forced_root_block_attrs),se.insert(Ce,$e)),Ce.append($e)):(Ee(Ce),Ce=null),$e=ot}Ee(Ce)}},re={schema:n,addAttributeFilter:M,getAttributeFilters:B,removeAttributeFilter:W,addNodeFilter:C,getNodeFilters:E,removeNodeFilter:D,parse:(se,ue={})=>{var Oe;const Ue=c.validate,st=(Oe=ue.context)!==null&&Oe!==void 0?Oe:c.root_name,$e=v(se,st,ue.format);E1(n,$e);const Ce=new za(st,11);KN(Ce,$e,n.getSpecialElements(),m.sanitizeNamespaceElement),$e.innerHTML="";const[Ee,ot]=j8(Ce,n,c,ue),wt=[],Qt=Ue?co=>q(co,wt):Bt,hn={nodes:{},attributes:{}},Un=co=>g_(E(),B(),co,hn);if(Z8(Ce,[Ee,Un],[ot,Qt]),wt.reverse(),Ue&&wt.length>0)if(ue.context){const{pass:co,fail:Or}=Rr(wt,Jn=>Jn.parent===Ce);UP(Or,n,Ce,Un),ue.invalid=co.length>0}else UP(wt,n,Ce,Un);const Xn=G8(c,ue);return Xn&&(Ce.name==="body"||ue.isRootContent)&&K(Ce,Xn),ue.invalid||xp(hn,ue),Ce}};return Op(re,c),Yf(re,c,n),re},YN=e=>fc(e)?Uf({validate:!1}).serialize(e):e,XN=(e,n,o)=>{const r=YN(e),c=n(r);if(c.isDefaultPrevented())return c;if(fc(e))if(c.content!==r){const u=m0({validate:!1,forced_root_block:!1,...o}).parse(c.content,{context:e.name});return{...c,content:u}}else return{...c,content:e};else return c},g0=e=>({sanitize:gb(e),sandbox_iframes:hb(e),sandbox_iframes_exclusions:pb(e)}),vA=(e,n)=>{if(n.no_events)return Jr.value(n);{const o=Dx(e,n);return o.isDefaultPrevented()?Jr.error(d2(e,{content:"",...o}).content):Jr.value(o)}},JN=(e,n,o)=>o.no_events?n:XN(n,c=>d2(e,{...o,content:c}),g0(e)).content,G_=(e,n)=>{if(n.no_events)return Jr.value(n);{const o=XN(n.content,r=>Wb(e,{...n,content:r}),g0(e));return o.isDefaultPrevented()?(Zb(e,o),Jr.error(void 0)):Jr.value(o)}},yA=(e,n,o)=>{o.no_events||Zb(e,{...o,content:n})},q_=(e,n,o)=>({element:e,width:n,rows:o}),QN=(e,n)=>({element:e,cells:n}),q8=(e,n)=>({x:e,y:n}),CA=(e,n)=>xi(e,n).bind(Yd).getOr(1),eB=(e,n,o,r,c)=>{const u=CA(c,"rowspan"),m=CA(c,"colspan"),v=e.rows;for(let C=o;C<o+u;C++){v[C]||(v[C]=QN(jm(r),[]));for(let E=n;E<n+m;E++){const D=v[C].cells;D[E]=C===o&&E===n?c:Ni(c)}}},tB=(e,n,o)=>{const r=e.rows;return!!(r[o]?r[o].cells:[])[n]},nB=(e,n,o)=>{for(;tB(e,n,o);)n++;return n},wA=e=>Wo(e,(n,o)=>o.cells.length>n?o.cells.length:n,0),SA=(e,n)=>{const o=e.rows;for(let r=0;r<o.length;r++){const c=o[r].cells;for(let u=0;u<c.length;u++)if(Wn(c[u],n))return L.some(q8(u,r))}return L.none()},oB=(e,n,o,r,c)=>{const u=[],m=e.rows;for(let v=o;v<=c;v++){const C=m[v].cells,E=n<r?C.slice(n,r+1):C.slice(r,n+1);u.push(QN(m[v].element,E))}return u},K8=(e,n,o)=>{const r=n.x,c=n.y,u=o.x,m=o.y,v=c<m?oB(e,r,c,u,m):oB(e,r,m,u,c);return q_(e.element,wA(v),v)},Y8=(e,n)=>{const o=Ni(e.element),r=X.fromTag("tbody");return Iu(r,n),gs(o,r),o},xA=e=>Xt(e.rows,n=>{const o=Xt(n.cells,c=>{const u=jm(c);return Rs(u,"colspan"),Rs(u,"rowspan"),u}),r=Ni(n.element);return Iu(r,o),r}),eC=e=>{const n=q_(Ni(e),0,[]);return we(sr(e,"tr"),(o,r)=>{we(sr(o,"td,th"),(c,u)=>{eB(n,nB(n,u,r),r,o,c)})}),q_(n.element,wA(n.rows),n.rows)},sB=e=>Y8(e,xA(e)),rB=(e,n,o)=>SA(e,n).bind(r=>SA(e,o).map(c=>K8(e,r,c))),K_=e=>ss(e,n=>On(n)==="ul"||On(n)==="ol"),X8=(e,n)=>ss(e,o=>On(o)==="li"&&Mb(o,n)).fold(et([]),o=>K_(e).map(r=>{const c=X.fromTag(On(r)),u=_o(tc(r),(m,v)=>ms(v,"list-style"));return qr(c,u),[X.fromTag("li"),c]}).getOr([])),J8=(e,n)=>{const o=Wo(n,(r,c)=>(gs(c,r),c),e);return n.length>0?Pt([o]):o},Dg=e=>ga(e)?wc(e).filter(Bi).fold(et([]),n=>[e,n]):Bi(e)?[e]:[],_A=(e,n,o)=>{const r=X.fromDom(n.commonAncestorContainer),c=Zf(r,e),u=Mt(c,C=>o.isWrapper(On(C))),m=X8(c,n),v=u.concat(m.length?m:Dg(r));return Xt(v,Ni)},EA=()=>Pt([]),tC=(e,n,o)=>J8(X.fromDom(n.cloneContents()),_A(e,n,o)),aB=(e,n)=>Et(n,"table",Be(Wn,e)),TA=(e,n)=>aB(e,n[0]).bind(o=>{const r=n[0],c=n[n.length-1],u=eC(o);return rB(u,r,c).map(m=>Pt([sB(m)]))}).getOrThunk(EA),cB=(e,n,o)=>n.length>0&&n[0].collapsed?EA():tC(e,n[0],o),iB=(e,n,o)=>{const r=hd(n,e);return r.length>0?TA(e,r):cB(e,n,o)},Y_=(e,n)=>n>=0&&n<e.length&&If(e.charAt(n)),lB=e=>Ia(e.innerText),Q8=e=>e.map(n=>n.nodeName).getOr("div").toLowerCase(),kA=e=>L.from(e.selection.getRng()).map(n=>{var o;const r=L.from(e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock)),c=e.getBody(),u=Q8(r),m=X.fromDom(n.cloneContents());ZM(m),jM(m);const v=e.dom.add(c,u,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},m.dom),C=lB(v),E=Ia((o=v.textContent)!==null&&o!==void 0?o:"");if(e.dom.remove(v),Y_(E,0)||Y_(E,E.length-1)){const D=r.getOr(c),M=lB(D),B=M.indexOf(C);if(B===-1)return C;{const W=Y_(M,B-1),q=Y_(M,B+C.length);return(W?" ":"")+C+(q?" ":"")}}else return C}).getOr(""),eH=(e,n)=>{const o=e.selection.getRng(),r=e.dom.create("body"),c=e.selection.getSel(),u=Jb(e,Db(c)),m=n.contextual?iB(X.fromDom(e.getBody()),u,e.schema).dom:o.cloneContents();return m&&r.appendChild(m),e.selection.serializer.serialize(r,n)},uB=(e,n)=>{if(n.format==="text")return kA(e);{const o=eH(e,n);return n.format==="tree"?o:e.selection.isCollapsed()?"":o}},tH=(e,n)=>({...e,format:n,get:!0,selection:!0,getInner:!0}),nH=(e,n,o={})=>{const r=tH(o,n);return vA(e,r).fold(zo,c=>{const u=uB(e,c);return JN(e,u,c)})},OA=0,dB=1,fB=2,oH=(e,n)=>{const o=e.length+n.length+2,r=new Array(o),c=new Array(o),u=(D,M,B)=>({start:D,end:M,diag:B}),m=(D,M,B,W,q)=>{const Z=C(D,M,B,W);if(Z===null||Z.start===M&&Z.diag===M-W||Z.end===D&&Z.diag===D-B){let K=D,ne=B;for(;K<M||ne<W;)K<M&&ne<W&&e[K]===n[ne]?(q.push([OA,e[K]]),++K,++ne):M-D>W-B?(q.push([fB,e[K]]),++K):(q.push([dB,n[ne]]),++ne)}else{m(D,Z.start,B,Z.start-Z.diag,q);for(let K=Z.start;K<Z.end;++K)q.push([OA,e[K]]);m(Z.end,M,Z.end-Z.diag,W,q)}},v=(D,M,B,W)=>{let q=D;for(;q-M<W&&q<B&&e[q]===n[q-M];)++q;return u(D,q,M)},C=(D,M,B,W)=>{const q=M-D,Z=W-B;if(q===0||Z===0)return null;const K=q-Z,ne=Z+q,re=(ne%2===0?ne:ne+1)/2;r[1+re]=D,c[1+re]=M+1;let se,ue,Oe,Ue,st;for(se=0;se<=re;++se){for(ue=-se;ue<=se;ue+=2){for(Oe=ue+re,ue===-se||ue!==se&&r[Oe-1]<r[Oe+1]?r[Oe]=r[Oe+1]:r[Oe]=r[Oe-1]+1,Ue=r[Oe],st=Ue-D+B-ue;Ue<M&&st<W&&e[Ue]===n[st];)r[Oe]=++Ue,++st;if(K%2!==0&&K-se<=ue&&ue<=K+se&&c[Oe-K]<=r[Oe])return v(c[Oe-K],ue+D-B,M,W)}for(ue=K-se;ue<=K+se;ue+=2){for(Oe=ue+re-K,ue===K-se||ue!==K+se&&c[Oe+1]<=c[Oe-1]?c[Oe]=c[Oe+1]-1:c[Oe]=c[Oe-1],Ue=c[Oe]-1,st=Ue-D+B-ue;Ue>=D&&st>=B&&e[Ue]===n[st];)c[Oe]=Ue--,st--;if(K%2===0&&-se<=ue&&ue<=se&&c[Oe]<=r[Oe+K])return v(c[Oe],ue+D-B,M,W)}}return null},E=[];return m(0,e.length,0,n.length,E),E},mB=e=>pt(e)?e.outerHTML:Me(e)?qu.encodeRaw(e.data,!1):ql(e)?"<!--"+e.data+"-->":"",sH=e=>{let n;const o=document.createElement("div"),r=document.createDocumentFragment();for(e&&(o.innerHTML=e);n=o.firstChild;)r.appendChild(n);return r},rH=(e,n,o)=>{const r=sH(n);if(e.hasChildNodes()&&o<e.childNodes.length){const c=e.childNodes[o];e.insertBefore(r,c)}else e.appendChild(r)},X_=(e,n)=>{if(e.hasChildNodes()&&n<e.childNodes.length){const o=e.childNodes[n];e.removeChild(o)}},ba=(e,n)=>{let o=0;we(e,r=>{r[0]===OA?o++:r[0]===dB?(rH(n,r[1],o),o++):r[0]===fB&&X_(n,o)})},aH=(e,n)=>Mt(Xt(_a(e.childNodes),A(Ia,mB)),o=>o.length>0),J_=(e,n)=>{const o=Xt(_a(n.childNodes),mB);return ba(oH(o,e),n),n},Mp=ol(()=>document.implementation.createHTMLDocument("undo")),gB=e=>e.querySelector("iframe")!==null,Bc=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),Pp=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),nC=e=>{const n=e.serializer.getTempAttrs(),o=cO(e.getBody(),n);return gB(o)?Bc(aH(o)):Pp(Ia(o.innerHTML))},AA=(e,n,o)=>{const r=o?n.beforeBookmark:n.bookmark;n.type==="fragmented"?J_(n.fragments,e.getBody()):e.setContent(n.content,{format:"raw",no_selection:Ae(r)&&vx(r)?!r.isFakeCaret:!0}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},Q_=e=>e.type==="fragmented"?e.fragments.join(""):e.content,hB=e=>{const n=X.fromTag("body",Mp());return _c(n,Q_(e)),we(sr(n,"*[data-mce-bogus]"),cf),Nw(n)},pB=(e,n)=>Q_(e)===Q_(n),oC=(e,n)=>hB(e)===hB(n),sC=(e,n)=>!e||!n?!1:pB(e,n)?!0:oC(e,n),RA=e=>e.get()===0,rC=(e,n,o)=>{RA(o)&&(e.typing=n)},bB=(e,n)=>{e.typing&&(rC(e,!1,n),e.add())},DA=e=>{e.typing&&(e.typing=!1,e.add())},MA=(e,n,o)=>{RA(n)&&o.set(uy(e.selection))},cH=(e,n,o,r,c,u,m)=>{const v=nC(e),C=ze.extend(u||{},v);if(!RA(r)||e.removed)return null;const E=n.data[o.get()];if(e.dispatch("BeforeAddUndo",{level:C,lastLevel:E,originalEvent:m}).isDefaultPrevented()||E&&sC(E,C))return null;n.data[o.get()]&&c.get().each(B=>{n.data[o.get()].beforeBookmark=B});const D=Xk(e);if(D&&n.data.length>D){for(let B=0;B<n.data.length-1;B++)n.data[B]=n.data[B+1];n.data.length--,o.set(n.data.length)}C.bookmark=uy(e.selection),o.get()<n.data.length-1&&(n.data.length=o.get()+1),n.data.push(C),o.set(n.data.length-1);const M={level:C,lastLevel:E,originalEvent:m};return o.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",M),e.dispatch("change",M)):e.dispatch("AddUndo",M),C},iH=(e,n,o)=>{n.data=[],o.set(0),n.typing=!1,e.dispatch("ClearUndos")},Ed=(e,n,o,r,c)=>{if(n.transact(r)){const u=n.data[o.get()].bookmark,m=n.data[o.get()-1];AA(e,m,!0),n.transact(c)&&(n.data[o.get()-1].beforeBookmark=u)}},PA=(e,n,o)=>{let r;return n.get()<o.length-1&&(n.set(n.get()+1),r=o[n.get()],AA(e,r,!1),e.setDirty(!0),e.dispatch("Redo",{level:r})),r},lH=(e,n,o,r)=>{let c;return n.typing&&(n.add(),n.typing=!1,rC(n,!1,o)),r.get()>0&&(r.set(r.get()-1),c=n.data[r.get()],AA(e,c,!0),e.setDirty(!0),e.dispatch("Undo",{level:c})),c},eE=e=>{e.clear(),e.add()},NA=(e,n,o)=>o.get()>0||n.typing&&n.data[0]&&!sC(nC(e),n.data[0]),vB=(e,n)=>n.get()<e.data.length-1&&!e.typing,yB=(e,n,o)=>(bB(e,n),e.beforeChange(),e.ignore(o),e.add()),CB=(e,n)=>{try{e.set(e.get()+1),n()}finally{e.set(e.get()-1)}},uH=(e,n)=>{const o=e.dom,r=Ae(n)?n:e.getBody();we(o.select("table,a",r),c=>{switch(c.nodeName){case"TABLE":const u=Oy(e),m=o.getAttrib(c,"border");(!m||m==="0")&&e.hasVisual?o.addClass(c,u):o.removeClass(c,u);break;case"A":if(!o.getAttrib(c,"href")){const v=o.getAttrib(c,"name")||c.id,C=Ay(e);v&&e.hasVisual?o.addClass(c,C):o.removeClass(c,C)}break}}),e.dispatch("VisualAid",{element:n,hasVisual:e.hasVisual})},wB=e=>({init:{bindEvents:Bt},undoManager:{beforeChange:(n,o)=>MA(e,n,o),add:(n,o,r,c,u,m)=>cH(e,n,o,r,c,u,m),undo:(n,o,r)=>lH(e,n,o,r),redo:(n,o)=>PA(e,n,o),clear:(n,o)=>iH(e,n,o),reset:n=>eE(n),hasUndo:(n,o)=>NA(e,n,o),hasRedo:(n,o)=>vB(n,o),transact:(n,o,r)=>yB(n,o,r),ignore:(n,o)=>CB(n,o),extra:(n,o,r,c)=>Ed(e,n,o,r,c)},formatter:{match:(n,o,r,c)=>U2(e,n,o,r,c),matchAll:(n,o)=>JP(e,n,o),matchNode:(n,o,r,c)=>pu(e,n,o,r,c),canApply:n=>s8(e,n),closest:n=>C_(e,n),apply:(n,o,r)=>JO(e,n,o,r),remove:(n,o,r,c)=>xN(e,n,o,r,c),toggle:(n,o,r)=>B_(e,n,o,r),formatChanged:(n,o,r,c,u)=>x8(e,n,o,r,c,u)},editor:{getContent:n=>e7(e,n),setContent:(n,o)=>a0(e,n,o),insertContent:(n,o)=>n8(e,n,o),addVisual:n=>uH(e,n)},selection:{getContent:(n,o)=>nH(e,n,o)},autocompleter:{addDecoration:Bt,removeDecoration:Bt},raw:{getModel:()=>L.none()}}),dH=e=>{const n=E=>sn(E)?E:{},{init:o,undoManager:r,formatter:c,editor:u,selection:m,autocompleter:v,raw:C}=e;return{init:{bindEvents:o.bindEvents},undoManager:{beforeChange:r.beforeChange,add:r.add,undo:r.undo,redo:r.redo,clear:r.clear,reset:r.reset,hasUndo:r.hasUndo,hasRedo:r.hasRedo,transact:(E,D,M)=>r.transact(M),ignore:(E,D)=>r.ignore(D),extra:(E,D,M,B)=>r.extra(M,B)},formatter:{match:(E,D,M,B)=>c.match(E,n(D),B),matchAll:c.matchAll,matchNode:c.matchNode,canApply:E=>c.canApply(E),closest:E=>c.closest(E),apply:(E,D,M)=>c.apply(E,n(D)),remove:(E,D,M,B)=>c.remove(E,n(D)),toggle:(E,D,M)=>c.toggle(E,n(D)),formatChanged:(E,D,M,B,W)=>c.formatChanged(D,M,B,W)},editor:{getContent:E=>u.getContent(E),setContent:(E,D)=>({content:u.setContent(E,D),html:""}),insertContent:(E,D)=>(u.insertContent(E),""),addVisual:u.addVisual},selection:{getContent:(E,D)=>m.getContent(D)},autocompleter:{addDecoration:v.addDecoration,removeDecoration:v.removeDecoration},raw:{getModel:()=>L.some(C.getRawModel())}}},fH=()=>{const e=et(null),n=et("");return{init:{bindEvents:Bt},undoManager:{beforeChange:Bt,add:e,undo:e,redo:e,clear:Bt,reset:Bt,hasUndo:De,hasRedo:De,transact:e,ignore:Bt,extra:Bt},formatter:{match:De,matchAll:et([]),matchNode:et(void 0),canApply:De,closest:n,apply:Bt,remove:Bt,toggle:Bt,formatChanged:et({unbind:Bt})},editor:{getContent:n,setContent:et({content:"",html:""}),insertContent:et(""),addVisual:Bt},selection:{getContent:n},autocompleter:{addDecoration:Bt,removeDecoration:Bt},raw:{getModel:et(L.none())}}},Td=e=>Ft(e.plugins,"rtc"),SB=e=>mo(e.plugins,"rtc").bind(n=>L.from(n.setup)),mH=e=>{const n=e;return SB(e).fold(()=>(n.rtcInstance=wB(e),L.none()),o=>(n.rtcInstance=fH(),L.some(()=>o().then(r=>(n.rtcInstance=dH(r),r.rtc.isRemote)))))},BA=e=>e.rtcInstance?e.rtcInstance:wB(e),Xs=e=>{const n=e.rtcInstance;if(n)return n;throw new Error("Failed to get RTC instance not yet initialized.")},xB=(e,n,o)=>{Xs(e).undoManager.beforeChange(n,o)},$A=(e,n,o,r,c,u,m)=>Xs(e).undoManager.add(n,o,r,c,u,m),IA=(e,n,o,r)=>Xs(e).undoManager.undo(n,o,r),_B=(e,n,o)=>Xs(e).undoManager.redo(n,o),FA=(e,n,o)=>{Xs(e).undoManager.clear(n,o)},EB=(e,n)=>{Xs(e).undoManager.reset(n)},TB=(e,n,o)=>Xs(e).undoManager.hasUndo(n,o),LA=(e,n,o)=>Xs(e).undoManager.hasRedo(n,o),kB=(e,n,o,r)=>Xs(e).undoManager.transact(n,o,r),OB=(e,n,o)=>{Xs(e).undoManager.ignore(n,o)},AB=(e,n,o,r,c)=>{Xs(e).undoManager.extra(n,o,r,c)},gH=(e,n,o,r,c)=>Xs(e).formatter.match(n,o,r,c),HA=(e,n,o)=>Xs(e).formatter.matchAll(n,o),hH=(e,n,o,r,c)=>Xs(e).formatter.matchNode(n,o,r,c),tE=(e,n)=>Xs(e).formatter.canApply(n),pH=(e,n)=>Xs(e).formatter.closest(n),bH=(e,n,o,r)=>{Xs(e).formatter.apply(n,o,r)},vH=(e,n,o,r,c)=>{Xs(e).formatter.remove(n,o,r,c)},RB=(e,n,o,r)=>{Xs(e).formatter.toggle(n,o,r)},DB=(e,n,o,r,c,u)=>Xs(e).formatter.formatChanged(n,o,r,c,u),yH=(e,n)=>BA(e).editor.getContent(n),CH=(e,n,o)=>BA(e).editor.setContent(n,o),wH=(e,n,o)=>BA(e).editor.insertContent(n,o),SH=(e,n,o)=>Xs(e).selection.getContent(n,o),xH=(e,n)=>Xs(e).editor.addVisual(n),VA=e=>Xs(e).init.bindEvents(),Yq=(e,n={})=>{const o=n.format?n.format:"html";return SH(e,o,n)},MB=e=>e.dom.length===0?(go(e),L.none()):L.some(e),_H=(e,n)=>e.filter(o=>vd.isBookmarkNode(o.dom)).bind(n?xm:qc),EH=(e,n,o,r,c)=>{const u=e.dom,m=n.dom,v=r?u.length:m.length;r?(n_(u,m,c,!1,!r),o.setStart(m,v)):(n_(m,u,c,!1,!r),o.setEnd(m,v))},TH=(e,n,o)=>{wc(e).each(r=>{const c=e.dom;n&&R2(r,he(c,0),o)?D2(c,0,o):!n&&Qx(r,he(c,c.length),o)&&t_(c,c.length,o)})},PB=(e,n,o,r,c)=>{e.bind(u=>((r?t_:D2)(u.dom,r?u.dom.length:0,c),n.filter(Co).map(v=>EH(u,v,o,r,c)))).orThunk(()=>_H(n,r).or(n).filter(Co).map(m=>TH(m,r,c)))},kH=(e,n,o)=>{const r=L.from(n.firstChild).map(X.fromDom),c=L.from(n.lastChild).map(X.fromDom);e.deleteContents(),e.insertNode(n);const u=r.bind(qc).filter(Co).bind(MB),m=c.bind(xm).filter(Co).bind(MB);PB(u,r,e,!0,o),PB(m,c,e,!1,o),e.collapse(!1)},OH=(e,n)=>({format:"html",...e,set:!0,selection:!0,content:n}),NB=(e,n)=>{if(n.format!=="raw"){const o=e.selection.getRng(),r=e.dom.getParent(o.commonAncestorContainer,e.dom.isBlock),c=r?{context:r.nodeName.toLowerCase()}:{},u=e.parser.parse(n.content,{forced_root_block:!1,...c,...n});return Uf({validate:!1},e.schema).serialize(u)}else return n.content},AH=(e,n,o={})=>{const r=OH(o,n);G_(e,r).each(c=>{const u=NB(e,c),m=e.selection.getRng();kH(m,m.createContextualFragment(u),e.schema),e.selection.setRng(m),S2(e,m),yA(e,u,c)})},BB=(e,n,o)=>{if(Ft(e,n)){const r=Mt(e[n],c=>c!==o);r.length===0?delete e[n]:e[n]=r}};var RH=(e,n)=>{let o,r;const c=(v,C)=>ss(C,E=>e.is(E,v)),u=v=>e.getParents(v,void 0,e.getRoot()),m=()=>{o={},r={},n.on("NodeChange",v=>{const C=v.element,E=u(C),D={};lt(o,(M,B)=>{c(B,E).each(W=>{r[B]||(we(M,q=>{q(!0,{node:W,selector:B,parents:E})}),r[B]=M),D[B]=M})}),lt(r,(M,B)=>{D[B]||(delete r[B],we(M,W=>{W(!1,{node:C,selector:B,parents:E})}))})})};return{selectorChangedWithUnbind:(v,C)=>(o||m(),o[v]||(o[v]=[]),o[v].push(C),c(v,u(n.selection.getStart())).each(()=>{r[v]=o[v]}),{unbind:()=>{BB(o,v,C),BB(r,v,C)}})}};const $B=e=>!!(e&&e.ownerDocument)&&_i(X.fromDom(e.ownerDocument),X.fromDom(e)),DH=e=>e?$B(e.startContainer)&&$B(e.endContainer):!1,MH=(e,n,o,r)=>{let c,u;const{selectorChangedWithUnbind:m}=RH(e,r),v=(Xe,bt)=>{const En=e.createRng();Ae(Xe)&&Ae(bt)?(En.setStart(Xe,bt),En.setEnd(Xe,bt),ue(En),ne(!1)):(n2(e,En,r.getBody(),!0),ue(En))},C=Xe=>Yq(r,Xe),E=(Xe,bt)=>AH(r,Xe,bt),D=Xe=>sO(r.getBody(),se(),Xe),M=Xe=>rO(r.getBody(),se(),Xe),B=(Xe,bt)=>Or.getBookmark(Xe,bt),W=Xe=>Or.moveToBookmark(Xe),q=(Xe,bt)=>(WL(e,Xe,bt).each(ue),Xe),Z=()=>{const Xe=se(),bt=re();return!Xe||Xe.item?!1:Xe.compareEndPoints?Xe.compareEndPoints("StartToEnd",Xe)===0:!bt||Xe.collapsed},K=()=>{const Xe=se(),bt=r.getBody().querySelectorAll('[data-mce-selected="1"]');return bt.length>0?ur(bt,En=>e.isEditable(En.parentElement)):BM(e,Xe)},ne=Xe=>{const bt=se();bt.collapse(!!Xe),ue(bt)},re=()=>n.getSelection?n.getSelection():n.document.selection,se=()=>{let Xe;const bt=(nt,kt,rn)=>{try{return kt.compareBoundaryPoints(nt,rn)}catch{return-1}},En=n.document;if(Ae(r.bookmark)&&!_g(r)){const nt=jx(r);if(nt.isSome())return nt.map(kt=>Jb(r,[kt])[0]).getOr(En.createRange())}try{const nt=re();nt&&!hs(nt.anchorNode)&&(nt.rangeCount>0?Xe=nt.getRangeAt(0):Xe=En.createRange(),Xe=Jb(r,[Xe])[0])}catch{}if(Xe||(Xe=En.createRange()),rs(Xe.startContainer)&&Xe.collapsed){const nt=e.getRoot();Xe.setStart(nt,0),Xe.setEnd(nt,0)}return c&&u&&(bt(Xe.START_TO_START,Xe,c)===0&&bt(Xe.END_TO_END,Xe,c)===0?Xe=u:(c=null,u=null)),Xe},ue=(Xe,bt)=>{if(!DH(Xe))return;const En=re();if(Xe=r.dispatch("SetSelectionRange",{range:Xe,forward:bt}).range,En){u=Xe;try{En.removeAllRanges(),En.addRange(Xe)}catch{}bt===!1&&En.extend&&(En.collapse(Xe.endContainer,Xe.endOffset),En.extend(Xe.startContainer,Xe.startOffset)),c=En.rangeCount>0?En.getRangeAt(0):null}if(!Xe.collapsed&&Xe.startContainer===Xe.endContainer&&(En!=null&&En.setBaseAndExtent)&&Xe.endOffset-Xe.startOffset<2&&Xe.startContainer.hasChildNodes()){const kt=Xe.startContainer.childNodes[Xe.startOffset];kt&&kt.nodeName==="IMG"&&(En.setBaseAndExtent(Xe.startContainer,Xe.startOffset,Xe.endContainer,Xe.endOffset),(En.anchorNode!==Xe.startContainer||En.focusNode!==Xe.endContainer)&&En.setBaseAndExtent(kt,0,kt,1))}r.dispatch("AfterSetSelectionRange",{range:Xe,forward:bt})},Oe=Xe=>(E(e.getOuterHTML(Xe)),Xe),Ue=()=>zL(r.getBody(),se()),st=(Xe,bt)=>UL(e,se(),Xe,bt),$e=()=>{const Xe=re(),bt=Xe==null?void 0:Xe.anchorNode,En=Xe==null?void 0:Xe.focusNode;if(!Xe||!bt||!En||hs(bt)||hs(En))return!0;const nt=e.createRng(),kt=e.createRng();try{nt.setStart(bt,Xe.anchorOffset),nt.collapse(!0),kt.setStart(En,Xe.focusOffset),kt.collapse(!0)}catch{return!0}return nt.compareBoundaryPoints(nt.START_TO_START,kt)<=0},co={dom:e,win:n,serializer:o,editor:r,expand:(Xe={type:"word"})=>ue(Re(e).expand(se(),Xe)),collapse:ne,setCursorLocation:v,getContent:C,setContent:E,getBookmark:B,moveToBookmark:W,select:q,isCollapsed:Z,isEditable:K,isForward:$e,setNode:Oe,getNode:Ue,getSel:re,setRng:ue,getRng:se,getStart:D,getEnd:M,getSelectedBlocks:st,normalize:()=>{const Xe=se(),bt=re();if(!y4(bt)&&o2(r)){const En=Ye(e,Xe);return En.each(nt=>{ue(nt,$e())}),En.getOr(Xe)}return Xe},selectorChanged:(Xe,bt)=>(m(Xe,bt),co),selectorChangedWithUnbind:m,getScrollContainer:()=>{let Xe,bt=e.getRoot();for(;bt&&bt.nodeName!=="BODY";){if(bt.scrollHeight>bt.clientHeight){Xe=bt;break}bt=bt.parentNode}return Xe},scrollIntoView:(Xe,bt)=>{Ae(Xe)?RL(r,Xe,bt):S2(r,se(),bt)},placeCaretAt:(Xe,bt)=>ue(p(Xe,bt,r.getDoc())),getBoundingClientRect:()=>{const Xe=se();return Xe.collapsed?he.fromRangeStart(Xe).getClientRects()[0]:Xe.getBoundingClientRect()},destroy:()=>{n=c=u=null,Jn.destroy()}},Or=vd(co),Jn=dp(co,r);return co.bookmarkManager=Or,co.controlSelection=Jn,co},Xq=(e,n,o)=>{n.addNodeFilter("br",(r,c,u)=>{const m=ze.extend({},o.getBlockElements()),v=o.getNonEmptyElements(),C=o.getWhitespaceElements();m.body=1;const E=D=>D.name in m||O1(o,D);for(let D=0,M=r.length;D<M;D++){let B=r[D],W=B.parent;if(W&&E(W)&&B===W.lastChild){let q=B.prev;for(;q;){const Z=q.name;if(Z!=="span"||q.attr("data-mce-type")!=="bookmark"){Z==="br"&&(B=null);break}q=q.prev}if(B&&(B.remove(),r0(o,v,C,W))){const Z=o.getElementRule(W.name);Z&&(Z.removeEmpty?W.remove():Z.paddEmpty&&h_(e,u,E,W))}}else{let q=B;for(;W&&W.firstChild===q&&W.lastChild===q&&(q=W,!m[W.name]);)W=W.parent;if(q===W){const Z=new za("#text",3);Z.value=Us,B.replace(Z)}}}})},PH=(e,n,o)=>{e.addAttributeFilter("data-mce-tabindex",(r,c)=>{let u=r.length;for(;u--;){const m=r[u];m.attr("tabindex",m.attr("data-mce-tabindex")),m.attr(c,null)}}),e.addAttributeFilter("src,href,style",(r,c)=>{const u="data-mce-"+c,m=n.url_converter,v=n.url_converter_scope;let C=r.length;for(;C--;){const E=r[C];let D=E.attr(u);D!==void 0?(E.attr(c,D.length>0?D:null),E.attr(u,null)):(D=E.attr(c),c==="style"?D=o.serializeStyle(o.parseStyle(D),E.name):m&&(D=m.call(v,D,c,E.name)),E.attr(c,D.length>0?D:null))}}),e.addAttributeFilter("class",r=>{let c=r.length;for(;c--;){const u=r[c];let m=u.attr("class");m&&(m=m.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),u.attr("class",m.length>0?m:null))}}),e.addAttributeFilter("data-mce-type",(r,c,u)=>{let m=r.length;for(;m--;){const v=r[m];v.attr("data-mce-type")==="bookmark"&&!u.cleanup&&(L.from(v.firstChild).exists(E=>{var D;return!yf((D=E.value)!==null&&D!==void 0?D:"")})?v.unwrap():v.remove())}}),e.addNodeFilter("noscript",r=>{var c;let u=r.length;for(;u--;){const m=r[u].firstChild;m&&(m.value=qu.decode((c=m.value)!==null&&c!==void 0?c:""))}}),e.addNodeFilter("script,style",(r,c)=>{var u;const m=C=>C.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let v=r.length;for(;v--;){const C=r[v],E=C.firstChild,D=(u=E==null?void 0:E.value)!==null&&u!==void 0?u:"";if(c==="script"){const M=C.attr("type");M&&C.attr("type",M==="mce-no/type"?null:M.replace(/^mce\-/,"")),n.element_format==="xhtml"&&E&&D.length>0&&(E.value=`// <![CDATA[
`+m(D)+`
// ]]>`)}else n.element_format==="xhtml"&&E&&D.length>0&&(E.value=`<!--
`+m(D)+`
-->`)}}),e.addNodeFilter("#comment",r=>{let c=r.length;for(;c--;){const u=r[c],m=u.value;n.preserve_cdata&&(m==null?void 0:m.indexOf("[CDATA["))===0?(u.name="#cdata",u.type=4,u.value=o.decode(m.replace(/^\[CDATA\[|\]\]$/g,""))):(m==null?void 0:m.indexOf("mce:protected "))===0&&(u.name="#text",u.type=3,u.raw=!0,u.value=unescape(m).substr(14))}}),e.addNodeFilter("xml:namespace,input",(r,c)=>{let u=r.length;for(;u--;){const m=r[u];m.type===7?m.remove():m.type===1&&c==="input"&&!m.attr("type")&&m.attr("type","text")}}),e.addAttributeFilter("data-mce-type",r=>{we(r,c=>{c.attr("data-mce-type")==="format-caret"&&(c.isEmpty(e.schema.getNonEmptyElements())?c.remove():c.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(r,c)=>{let u=r.length;for(;u--;)r[u].attr(c,null)}),n.remove_trailing_brs&&Xq(n,e,e.schema)},NH=e=>{const n=r=>(r==null?void 0:r.name)==="br",o=e.lastChild;if(n(o)){const r=o.prev;n(r)&&(o.remove(),r.remove())}},Jq=(e,n,o)=>{let r;const c=e.dom;let u=n.cloneNode(!0);const m=document.implementation;if(m.createHTMLDocument){const v=m.createHTMLDocument("");ze.each(u.nodeName==="BODY"?u.childNodes:[u],C=>{v.body.appendChild(v.importNode(C,!0))}),u.nodeName!=="BODY"?u=v.body.firstChild:u=v.body,r=c.doc,c.doc=v}return R4(e,{...o,node:u}),r&&(c.doc=r),u},BH=(e,n)=>Ae(e)&&e.hasEventListeners("PreProcess")&&!n.no_events,Yo=(e,n,o)=>BH(e,o)?Jq(e,n,o):n,zA=(e,n,o)=>{ze.inArray(n,o)===-1&&(e.addAttributeFilter(o,(r,c)=>{let u=r.length;for(;u--;)r[u].attr(c,null)}),n.push(o))},Qq=(e,n,o)=>!n.no_events&&e?Hb(e,{...n,content:o}).content:o,$H=(e,n,o)=>{const r=Ia(o.getInner?n.innerHTML:e.getOuterHTML(n));return o.selection||$h(X.fromDom(n))?r:ze.trim(r)},IH=(e,n,o)=>{const r=o.selection?{forced_root_block:!1,...o}:o,c=e.parse(n,r);return NH(c),c},h0=(e,n,o)=>Uf(e,n).serialize(o),eK=(e,n,o,r,c)=>{const u=h0(n,o,r);return Qq(e,c,u)},tK=(e,n)=>{const o=["data-mce-selected"],r={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},c=n&&n.dom?n.dom:ao.DOM,u=n&&n.schema?n.schema:Bn(r),m=m0(r,u);PH(m,r,c);const v=(C,E={})=>{const D={format:"html",...E},M=Yo(n,C,D),B=$H(c,M,D),W=IH(m,B,D);return D.format==="tree"?W:eK(n,r,u,W,D)};return{schema:u,addNodeFilter:m.addNodeFilter,addAttributeFilter:m.addAttributeFilter,serialize:v,addRules:u.addValidElements,setRules:u.setValidElements,addTempAttr:Be(zA,m,o),getTempAttrs:et(o),getNodeFilters:m.getNodeFilters,getAttributeFilters:m.getAttributeFilters,removeNodeFilter:m.removeNodeFilter,removeAttributeFilter:m.removeAttributeFilter}},Tr=(e,n)=>{const o=tK(e,n);return{schema:o.schema,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:o.serialize,addRules:o.addRules,setRules:o.setRules,addTempAttr:o.addTempAttr,getTempAttrs:o.getTempAttrs,getNodeFilters:o.getNodeFilters,getAttributeFilters:o.getAttributeFilters,removeNodeFilter:o.removeNodeFilter,removeAttributeFilter:o.removeAttributeFilter}},IB="html",FB=(e,n)=>({...e,format:n,get:!0,getInner:!0}),LB=(e,n={})=>{const o=n.format?n.format:IB,r=FB(n,o);return vA(e,r).fold(zo,c=>{const u=yH(e,c);return JN(e,u,c)})},FH="html",LH=(e,n)=>({format:FH,...e,set:!0,content:n}),p0=(e,n,o={})=>{const r=LH(o,n);return G_(e,r).map(c=>{const u=CH(e,c.content,c);return yA(e,u.html,c),u.content}).getOr(n)},HH="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),UA=[],VH="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),WA=[],ZA=(e,n)=>{const o=Mt(n,r=>Ft(e,r));return Io(o)},jA=e=>{const n=ZA(e,HH),o=e.forced_root_block;return(o===!1||o==="")&&n.push("forced_root_block (false only)"),Io(n)},HB=e=>ZA(e,UA),nE=(e,n)=>{const o=ze.makeMap(e.plugins," "),c=Mt(n,u=>Ft(o,u));return Io(c)},zH=e=>nE(e,VH),UH=e=>nE(e,WA.map(n=>n.name)),WH=(e,n)=>{const o=jA(e),r=zH(n),c=r.length>0,u=o.length>0,m=n.theme==="mobile";if(c||u||m){const v=`
- `,C=m?`

Themes:${v}mobile`:"",E=c?`

Plugins:${v}${r.join(v)}`:"",D=u?`

Options:${v}${o.join(v)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 7.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/7/migration-from-6x/ for more information."+C+E+D)}},ji=e=>ss(WA,n=>n.name===e).fold(()=>e,n=>n.replacedWith?`${e}, replaced by ${n.replacedWith}`:e),ZH=(e,n)=>{const o=HB(e),r=UH(n),c=r.length>0,u=o.length>0;if(c||u){const m=`
- `,v=c?`

Plugins:${m}${r.map(ji).join(m)}`:"",C=u?`

Options:${m}${o.join(m)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+v+C)}},jH=(e,n)=>{WH(e,n),ZH(e,n)},oE=ao.DOM,GH=e=>{oE.setStyle(e.id,"display",e.orgDisplay)},sE=e=>L.from(e).each(n=>n.destroy()),VB=e=>{const n=e;n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null;const o=e.selection;if(o){const r=o.dom;n.selection=o.win=o.dom=r.doc=null}},qH=e=>{const n=e.formElement;n&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,delete n._mceOldSubmit),oE.unbind(n,"submit reset",e.formEventDelegate))},KH=e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:o}=e,r=e.getBody(),c=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&Ae(c==null?void 0:c.nextSibling)&&oE.remove(c.nextSibling),Vb(e),e.editorManager.remove(e),!e.inline&&r&&GH(e),D4(e),oE.remove(e.getContainer()),sE(n),sE(o),e.destroy()}},YH=(e,n)=>{const{selection:o,dom:r}=e;if(!e.destroyed){if(!n&&!e.removed){e.remove();return}n||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),sE(o),sE(r)),qH(e),VB(e),e.destroyed=!0}},rE=(()=>{const e={};return{add:(c,u)=>{e[c]=u},get:c=>e[c]?e[c]:{icons:{}},has:c=>Ft(e,c)}})(),b0=Yr.ModelManager,qA=(e,n)=>n.dom[e],aE=(e,n)=>parseInt(Yc(n,e),10),XH=Be(qA,"clientWidth"),JH=Be(qA,"clientHeight"),nK=Be(aE,"margin-top"),QH=Be(aE,"margin-left"),aC=e=>e.dom.getBoundingClientRect(),zB=(e,n,o)=>{const r=XH(e),c=JH(e);return n>=0&&o>=0&&n<=r&&o<=c},UB=(e,n,o,r)=>{const c=aC(n),u=e?c.left+n.dom.clientLeft+QH(n):0,m=e?c.top+n.dom.clientTop+nK(n):0,v=o-u,C=r-m;return{x:v,y:C}},eV=(e,n,o)=>{const r=X.fromDom(e.getBody()),c=e.inline?r:Aw(r),u=UB(e.inline,c,n,o);return zB(c,u.x,u.y)},WB=e=>L.from(e).map(X.fromDom),tV=e=>{const n=e.inline?e.getBody():e.getContentAreaContainer();return WB(n).map(rf).getOr(!1)};var nV=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const ZB=e=>{const n=[],o=()=>{const B=e.theme;return B&&B.getNotificationManagerImpl?B.getNotificationManagerImpl():nV()},r=()=>L.from(n[0]),c=(B,W)=>B.type===W.type&&B.text===W.text&&!B.progressBar&&!B.timeout&&!W.progressBar&&!W.timeout,u=()=>{r().each(B=>{B.reposition()})},m=B=>{n.push(B)},v=B=>{xa(n,W=>W===B).each(W=>{n.splice(W,1)})},C=(B,W=!0)=>e.removed||!tV(e)?{}:(W&&e.dispatch("BeforeOpenNotification",{notification:B}),ss(n,q=>c(o().getArgs(q),B)).getOrThunk(()=>{e.editorManager.setActive(e);const q=o().open(B,()=>{v(q)},()=>_2(e));return m(q),u(),e.dispatch("OpenNotification",{notification:{...q}}),q})),E=()=>{r().each(B=>{o().close(B),v(B),u()})},D=et(n);return(B=>{B.on("SkinLoaded",()=>{const W=Qr(B);W&&C({text:W,type:"warning",timeout:0},!1),u()}),B.on("show ResizeEditor NodeChange",()=>{requestAnimationFrame(u)}),B.on("remove",()=>{we(n.slice(),W=>{o().close(W)})}),B.addShortcut("alt+F12","Focus to notification",()=>r().map(W=>X.fromDom(W.getEl())).each(W=>Yb(W)))})(e),{open:C,close:E,getNotifications:D}},v0=Yr.PluginManager,Mg=Yr.ThemeManager;var oV=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const jB=e=>{let n=[];const o=()=>{const Z=e.theme;return Z&&Z.getWindowManagerImpl?Z.getWindowManagerImpl():oV()},r=(Z,K)=>(...ne)=>K?K.apply(Z,ne):void 0,c=Z=>{e.dispatch("OpenWindow",{dialog:Z})},u=Z=>{e.dispatch("CloseWindow",{dialog:Z})},m=Z=>{n.push(Z),c(Z)},v=Z=>{u(Z),n=Mt(n,K=>K!==Z),n.length===0&&e.focus()},C=()=>L.from(n[n.length-1]),E=Z=>{e.editorManager.setActive(e),x2(e),e.ui.show();const K=Z();return m(K),K},D=(Z,K)=>E(()=>o().open(Z,K,v)),M=Z=>E(()=>o().openUrl(Z,v)),B=(Z,K,ne)=>{const re=o();re.alert(Z,r(ne||re,K))},W=(Z,K,ne)=>{const re=o();re.confirm(Z,r(ne||re,K))},q=()=>{C().each(Z=>{o().close(Z),v(Z)})};return e.on("remove",()=>{we(n,Z=>{o().close(Z)})}),{open:D,openUrl:M,alert:B,confirm:W,close:q}},y0=(e,n)=>{e.notificationManager.open({type:"error",text:n})},cC=(e,n)=>{e._skinLoaded?y0(e,n):e.on("SkinLoaded",()=>{y0(e,n)})},GB=(e,n)=>{cC(e,Ms.translate(["Failed to upload image: {0}",n]))},iC=(e,n,o)=>{lr(e,n,{message:o}),console.error(o)},lC=(e,n,o)=>o?`Failed to load ${e}: ${o} from url ${n}`:`Failed to load ${e} url: ${n}`,sV=(e,n,o)=>{iC(e,"PluginLoadError",lC("plugin",n,o))},qB=(e,n,o)=>{iC(e,"IconsLoadError",lC("icons",n,o))},rV=(e,n,o)=>{iC(e,"LanguageLoadError",lC("language",n,o))},aV=(e,n,o)=>{iC(e,"ThemeLoadError",lC("theme",n,o))},cV=(e,n,o)=>{iC(e,"ModelLoadError",lC("model",n,o))},iV=(e,n,o)=>{const r=Ms.translate(["Failed to initialize plugin: {0}",n]);lr(e,"PluginLoadError",{message:r}),KA(r,o),cC(e,r)},KA=(e,...n)=>{const o=window.console;o&&(o.error?o.error(e,...n):o.log(e,...n))},Cu=e=>/^[a-z0-9\-]+$/i.test(e),uC=e=>"content/"+e+"/content.css",lV=e=>tinymce.Resource.has(uC(e)),uV=e=>KB(e,Tf(e)),dV=e=>KB(e,ha(e)),KB=(e,n)=>{const o=e.editorManager.baseURL+"/skins/content",c=`content${e.editorManager.suffix}.css`;return Xt(n,u=>lV(u)?u:Cu(u)&&!e.inline?`${o}/${u}/${c}`:e.documentBaseURI.toAbsolute(u))},Vn=e=>{e.contentCSS=e.contentCSS.concat(uV(e),dV(e))},fV=e=>e?_a(e.getElementsByTagName("img")):[],dC=(e,n)=>{const o={};return{findAll:(c,u=dt)=>{const m=Mt(fV(c),C=>{const E=C.src;return C.hasAttribute("data-mce-bogus")||C.hasAttribute("data-mce-placeholder")||!E||E===ct.transparentSrc?!1:ms(E,"blob:")?!e.isUploaded(E)&&u(C):ms(E,"data:")?u(C):!1}),v=Xt(m,C=>{const E=C.src;if(Ft(o,E))return o[E].then(D=>ee(D)?D:{image:C,blobInfo:D.blobInfo});{const D=sA(n,E).then(M=>(delete o[E],{image:C,blobInfo:M})).catch(M=>(delete o[E],M));return o[E]=D,D}});return Promise.all(v)}}},YB=()=>{let o={};const r=(B,W)=>({status:B,resultUri:W}),c=B=>B in o;return{hasBlobUri:c,getResultUri:B=>{const W=o[B];return W?W.resultUri:null},isPending:B=>c(B)?o[B].status===1:!1,isUploaded:B=>c(B)?o[B].status===2:!1,markPending:B=>{o[B]=r(1,null)},markUploaded:(B,W)=>{o[B]=r(2,W)},removeFailed:B=>{delete o[B]},destroy:()=>{o={}}}};let mV=0;const gV=()=>{const e=()=>Math.round(Math.random()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},XB=e=>e+mV+++gV(),Pg=()=>{let e=[];const n=M=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[M.toLowerCase()]||"dat",o=(M,B,W,q,Z)=>{if(ee(M))return r({id:M,name:q,filename:Z,blob:B,base64:W});if(sn(M))return r(M);throw new Error("Unknown input type")},r=M=>{if(!M.blob||!M.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const B=M.id||XB("blobid"),W=M.name||B,q=M.blob;return{id:et(B),name:et(W),filename:et(M.filename||W+"."+n(q.type)),blob:et(q),base64:et(M.base64),blobUri:et(M.blobUri||URL.createObjectURL(q)),uri:et(M.uri)}},c=M=>{m(M.id())||e.push(M)},u=M=>ss(e,M).getOrUndefined(),m=M=>u(B=>B.id()===M);return{create:o,add:c,get:m,getByUri:M=>u(B=>B.blobUri()===M),getByData:(M,B)=>u(W=>W.base64()===M&&W.blob().type===B),findFirst:u,removeByUri:M=>{e=Mt(e,B=>B.blobUri()===M?(URL.revokeObjectURL(B.blobUri()),!1):!0)},destroy:()=>{we(e,M=>{URL.revokeObjectURL(M.blobUri())}),e=[]}}},$c=(e,n)=>{const o={},r=(Z,K)=>Z?Z.replace(/\/$/,"")+"/"+K.replace(/^\//,""):K,c=(Z,K)=>new Promise((ne,re)=>{const se=new XMLHttpRequest;se.open("POST",n.url),se.withCredentials=n.credentials,se.upload.onprogress=Oe=>{K(Oe.loaded/Oe.total*100)},se.onerror=()=>{re("Image upload failed due to a XHR Transport error. Code: "+se.status)},se.onload=()=>{if(se.status<200||se.status>=300){re("HTTP Error: "+se.status);return}const Oe=JSON.parse(se.responseText);if(!Oe||!ee(Oe.location)){re("Invalid JSON: "+se.responseText);return}ne(r(n.basePath,Oe.location))};const ue=new FormData;ue.append("file",Z.blob(),Z.filename()),se.send(ue)}),u=oe(n.handler)?n.handler:c,m=()=>new Promise(Z=>{Z([])}),v=(Z,K)=>({url:K,blobInfo:Z,status:!0}),C=(Z,K)=>({url:"",blobInfo:Z,status:!1,error:K}),E=(Z,K)=>{ze.each(o[Z],ne=>{ne(K)}),delete o[Z]},D=(Z,K,ne)=>(e.markPending(Z.blobUri()),new Promise(re=>{let se,ue;try{const Oe=()=>{se&&(se.close(),ue=Bt)},Ue=$e=>{Oe(),e.markUploaded(Z.blobUri(),$e),E(Z.blobUri(),v(Z,$e)),re(v(Z,$e))},st=$e=>{Oe(),e.removeFailed(Z.blobUri()),E(Z.blobUri(),C(Z,$e)),re(C(Z,$e))};ue=$e=>{$e<0||$e>100||L.from(se).orThunk(()=>L.from(ne).map(os)).each(Ce=>{se=Ce,Ce.progressBar.value($e)})},K(Z,ue).then(Ue,$e=>{st(ee($e)?{message:$e}:$e)})}catch(Oe){re(C(Z,Oe))}})),M=Z=>Z===c,B=Z=>{const K=Z.blobUri();return new Promise(ne=>{o[K]=o[K]||[],o[K].push(ne)})},W=(Z,K)=>(Z=ze.grep(Z,ne=>!e.isUploaded(ne.blobUri())),Promise.all(ze.map(Z,ne=>e.isPending(ne.blobUri())?B(ne):D(ne,u,K))));return{upload:(Z,K)=>!n.url&&M(u)?m():W(Z,K)}},C0=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),Qf=(e,n)=>$c(n,{url:Cy(e),basePath:ob(e),credentials:wy(e),handler:FS(e)}),kd=e=>{const n=YB(),o=Qf(e,n);return{upload:(r,c=!0)=>o.upload(r,c?C0(e):void 0)}},fC=(e,n)=>e.dom.isEmpty(n.dom)&&Ae(e.schema.getTextBlockElements()[On(n)]),YA=e=>n=>{fC(e,n)&&gs(n,X.fromHtml('<br data-mce-bogus="1" />'))},XA=e=>{const n=Pg();let o,r;const c=YB(),u=[],m=se=>ue=>e.selection?se(ue):[],v=se=>se+(se.indexOf("?")===-1?"?":"&")+new Date().getTime(),C=(se,ue,Oe)=>{let Ue=0;do Ue=se.indexOf(ue,Ue),Ue!==-1&&(se=se.substring(0,Ue)+Oe+se.substr(Ue+ue.length),Ue+=Oe.length-ue.length+1);while(Ue!==-1);return se},E=(se,ue,Oe)=>{const Ue=`src="${Oe}"${Oe===ct.transparentSrc?' data-mce-placeholder="1"':""}`;return se=C(se,`src="${ue}"`,Ue),se=C(se,'data-mce-src="'+ue+'"','data-mce-src="'+Oe+'"'),se},D=(se,ue)=>{we(e.undoManager.data,Oe=>{Oe.type==="fragmented"?Oe.fragments=Xt(Oe.fragments,Ue=>E(Ue,se,ue)):Oe.content=E(Oe.content,se,ue)})},M=(se,ue)=>{const Oe=e.convertURL(ue,"src");D(se.src,ue),Zl(X.fromDom(se),{src:vs(e)?v(ue):ue,"data-mce-src":Oe})},B=()=>(o||(o=Qf(e,c)),K().then(m(se=>{const ue=Xt(se,Oe=>Oe.blobInfo);return o.upload(ue,C0(e)).then(m(Oe=>{const Ue=[];let st=!1;const $e=Xt(Oe,(Ce,Ee)=>{const{blobInfo:ot,image:wt}=se[Ee];let Qt=!1;return Ce.status&&Zn(e)?(Ce.url&&!dr(wt.src,Ce.url)&&(st=!0),n.removeByUri(wt.src),Td(e)||M(wt,Ce.url)):Ce.error&&(Ce.error.remove&&(D(wt.src,ct.transparentSrc),Ue.push(wt),Qt=!0),GB(e,Ce.error.message)),{element:wt,status:Ce.status,uploadUri:Ce.url,blobInfo:ot,removed:Qt}});return Ue.length>0&&!Td(e)?e.undoManager.transact(()=>{we(Po(Ue),Ce=>{const Ee=wc(Ce);go(Ce),Ee.each(YA(e)),n.removeByUri(Ce.dom.src)})}):st&&e.undoManager.dispatchChange(),$e}))}))),W=()=>cs(e)?B():Promise.resolve([]),q=se=>ur(u,ue=>ue(se)),Z=se=>{u.push(se)},K=()=>(r||(r=dC(c,n)),r.findAll(e.getBody(),q).then(m(se=>{const ue=Mt(se,Oe=>ee(Oe)?(cC(e,Oe),!1):Oe.uriType!=="blob");return Td(e)||we(ue,Oe=>{D(Oe.image.src,Oe.blobInfo.blobUri()),Oe.image.src=Oe.blobInfo.blobUri(),Oe.image.removeAttribute("data-mce-src")}),ue}))),ne=()=>{n.destroy(),c.destroy(),r=o=null},re=se=>se.replace(/src="(blob:[^"]+)"/g,(ue,Oe)=>{const Ue=c.getResultUri(Oe);if(Ue)return'src="'+Ue+'"';let st=n.getByUri(Oe);return st||(st=Wo(e.editorManager.get(),($e,Ce)=>$e||Ce.editorUpload&&Ce.editorUpload.blobCache.getByUri(Oe),void 0)),st?'src="data:'+st.blob().type+";base64,"+st.base64()+'"':ue});return e.on("SetContent",()=>{cs(e)?W():K()}),e.on("RawSaveContent",se=>{se.content=re(se.content)}),e.on("GetContent",se=>{se.source_view||se.format==="raw"||se.format==="tree"||(se.content=re(se.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",se=>{we(se,ue=>{const Oe=ue.attr("src");if(!Oe||n.getByUri(Oe))return;const Ue=c.getResultUri(Oe);Ue&&ue.attr("src",Ue)})})}),{blobCache:n,addFilter:Z,uploadImages:B,uploadImagesAuto:W,scanForImages:K,destroy:ne}},JB=e=>{const n=e.dom,o=e.schema.type,r={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:c=>{n.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:c=>{n.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const c={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},m={inline:"s",remove:"all",preserve_attributes:["class","style"]};return o!=="html4"?[m,c,u]:[c,m,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(c,u,m)=>pt(c)&&c.hasAttribute("href"),onformat:(c,u,m)=>{ze.each(m,(v,C)=>{n.setAttrib(c,C,v)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":c=>{var u;return(u=c==null?void 0:c.customValue)!==null&&u!==void 0?u:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return ze.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),c=>{r[c]={block:c,remove:"all"}}),r},JA={remove_similar:!0,inherit:!1},w0={selector:"td,th",...JA},hV={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...w0},tablecellverticalalign:{styles:{"vertical-align":"%value"},...w0},tablecellbordercolor:{styles:{borderColor:"%value"},...w0},tablecellclass:{classes:["%value"],...w0},tableclass:{selector:"table",classes:["%value"],...JA},tablecellborderstyle:{styles:{borderStyle:"%value"},...w0},tablecellborderwidth:{styles:{borderWidth:"%value"},...w0}},QB=et(hV),e5=e=>{const n={},o=m=>Ae(m)?n[m]:n,r=m=>Ft(n,m),c=(m,v)=>{m&&(ee(m)?(Tn(v)||(v=[v]),we(v,C=>{fs(C.deep)&&(C.deep=!Ac(C)),fs(C.split)&&(C.split=!Ac(C)||Ns(C)),fs(C.remove)&&Ac(C)&&!Ns(C)&&(C.remove="none"),Ac(C)&&Ns(C)&&(C.mixed=!0,C.block_expand=!0),ee(C.classes)&&(C.classes=C.classes.split(/\s+/))}),n[m]=v):lt(m,(C,E)=>{c(E,C)}))},u=m=>(m&&n[m]&&delete n[m],n);return c(JB(e)),c(QB()),c(_y(e)),{get:o,has:r,register:c,unregister:u}},mC=ze.each,ui=ao.DOM,gC=e=>Ae(e)&&sn(e),pV=(e,n)=>{const o=n&&n.schema||Bn({}),r=(C,E)=>{E.classes.length>0&&ui.addClass(C,E.classes.join(" ")),ui.setAttribs(C,E.attrs)},c=C=>{const E=ee(C)?{name:C,classes:[],attrs:{}}:C,D=ui.create(E.name);return r(D,E),D},u=(C,E)=>{const D=o.getElementRule(C.nodeName.toLowerCase()),M=D==null?void 0:D.parentsRequired;return M&&M.length?E&&Gt(M,E)?E:M[0]:!1},m=(C,E,D)=>{let M;const B=E[0],W=gC(B)?B.name:void 0,q=u(C,W);if(q)W===q?(M=B,E=E.slice(1)):M=q;else if(B)M=B,E=E.slice(1);else if(!D)return C;const Z=M?c(M):ui.create("div");Z.appendChild(C),D&&ze.each(D,ne=>{const re=c(ne);Z.insertBefore(re,C)});const K=gC(M)?M.siblings:void 0;return m(Z,E,K)},v=ui.create("div");if(e.length>0){const C=e[0],E=c(C),D=gC(C)?C.siblings:void 0;v.appendChild(m(E,e.slice(1),D))}return v},bV=e=>{e=ze.trim(e);let n="div";const o={name:n,classes:[],attrs:{},selector:e};return e!=="*"&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,c,u,m,v)=>{switch(c){case"#":o.attrs.id=u;break;case".":o.classes.push(u);break;case":":ze.inArray("checked disabled enabled read-only required".split(" "),u)!==-1&&(o.attrs[u]=u);break}if(m==="["){const C=v.match(/([\w\-]+)(?:\=\"([^\"]+))?/);C&&(o.attrs[C[1]]=C[2])}return""})),o.name=n||"div",o},oK=e=>ee(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),ze.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),n=>{const o=ze.map(n.split(/(?:~\+|~|\+)/),bV),r=o.pop();return o.length&&(r.siblings=o),r}).reverse()):[],vV=(e,n)=>{let o="",r=Ey(e);if(r==="")return"";const c=B=>ee(B)?B.replace(/%(\w+)/g,""):"",u=(B,W)=>ui.getStyle(W??e.getBody(),B,!0);if(ee(n)){const B=e.formatter.get(n);if(!B)return"";n=B[0]}if("preview"in n){const B=n.preview;if(B===!1)return"";r=B||r}let m=n.block||n.inline||"span",v;const C=oK(n.selector);C.length>0?(C[0].name||(C[0].name=m),m=n.selector,v=pV(C,e)):v=pV([m],e);const E=ui.select(m,v)[0]||v.firstChild;mC(n.styles,(B,W)=>{const q=c(B);q&&ui.setStyle(E,W,q)}),mC(n.attributes,(B,W)=>{const q=c(B);q&&ui.setAttrib(E,W,q)}),mC(n.classes,B=>{const W=c(B);ui.hasClass(E,W)||ui.addClass(E,W)}),e.dispatch("PreviewFormats"),ui.setStyles(v,{position:"absolute",left:-65535}),e.getBody().appendChild(v);const D=u("fontSize"),M=/px$/.test(D)?parseInt(D,10):0;return mC(r.split(" "),B=>{let W=u(B,E);if(!(B==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(W)&&(W=u(B),Mi(W).toLowerCase()==="#ffffff"))&&!(B==="color"&&Mi(W).toLowerCase()==="#000000")){if(B==="font-size"&&/em|%$/.test(W)){if(M===0)return;W=parseFloat(W)/(/%$/.test(W)?100:1)*M+"px"}B==="border"&&W&&(o+="padding:0 2px;"),o+=B+":"+W+";"}}),e.dispatch("AfterPreviewFormats"),ui.remove(v),o},yV=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let n=1;n<=6;n++)e.addShortcut("access+"+n,"",["FormatBlock",!1,"h"+n]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},wu=e=>{const n=e5(e),o=lo({});return yV(e),rN(e),Td(e)||C8(o,e),{get:n.get,has:n.has,register:n.register,unregister:n.unregister,apply:(r,c,u)=>{bH(e,r,c,u)},remove:(r,c,u,m)=>{vH(e,r,c,u,m)},toggle:(r,c,u)=>{RB(e,r,c,u)},match:(r,c,u,m)=>gH(e,r,c,u,m),closest:r=>pH(e,r),matchAll:(r,c)=>HA(e,r,c),matchNode:(r,c,u,m)=>hH(e,r,c,u,m),canApply:r=>tE(e,r),formatChanged:(r,c,u,m)=>DB(e,o,r,c,u,m),getCssText:Be(vV,e)}},CV=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},sK=(e,n,o)=>{const r=lo(!1),c=C=>{rC(n,!1,o),n.add({},C)};e.on("init",()=>{n.add()}),e.on("BeforeExecCommand",C=>{const E=C.command;CV(E)||(bB(n,o),n.beforeChange())}),e.on("ExecCommand",C=>{const E=C.command;CV(E)||c(C)}),e.on("ObjectResizeStart cut",()=>{n.beforeChange()}),e.on("SaveContent ObjectResized blur",c),e.on("dragend",c),e.on("keyup",C=>{const E=C.keyCode;if(C.isDefaultPrevented())return;const D=ct.os.isMacOS()&&C.key==="Meta";(E>=33&&E<=36||E>=37&&E<=40||E===45||C.ctrlKey||D)&&(c(),e.nodeChanged()),(E===46||E===8)&&e.nodeChanged(),r.get()&&n.typing&&!sC(nC(e),n.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),r.set(!1),e.nodeChanged())}),e.on("keydown",C=>{const E=C.keyCode;if(C.isDefaultPrevented())return;if(E>=33&&E<=36||E>=37&&E<=40||E===45){n.typing&&c(C);return}const D=C.ctrlKey&&!C.altKey||C.metaKey;if((E<16||E>20)&&E!==224&&E!==91&&!n.typing&&!D){n.beforeChange(),rC(n,!0,o),n.add({},C),r.set(!0);return}(ct.os.isMacOS()?C.metaKey:C.ctrlKey&&!C.altKey)&&n.beforeChange()}),e.on("mousedown",C=>{n.typing&&c(C)});const u=C=>C.inputType==="insertReplacementText",m=C=>C.inputType==="insertText"&&C.data===null,v=C=>C.inputType==="insertFromPaste"||C.inputType==="insertFromDrop";e.on("input",C=>{C.inputType&&(u(C)||m(C)||v(C))&&c(C)}),e.on("AddUndo Undo Redo ClearUndos",C=>{C.isDefaultPrevented()||e.nodeChanged()})},wV=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},S0=e=>{const n=vr(),o=lo(0),r=lo(0),c={data:[],typing:!1,beforeChange:()=>{xB(e,o,n)},add:(u,m)=>$A(e,c,r,o,n,u,m),dispatchChange:()=>{e.setDirty(!0);const u=nC(e);u.bookmark=uy(e.selection),e.dispatch("change",{level:u,lastLevel:um(c.data,r.get()).getOrUndefined()})},undo:()=>IA(e,c,o,r),redo:()=>_B(e,r,c.data),clear:()=>{FA(e,c,r)},reset:()=>{EB(e,c)},hasUndo:()=>TB(e,c,r),hasRedo:()=>LA(e,c,r),transact:u=>kB(e,c,o,u),ignore:u=>{OB(e,o,u)},extra:(u,m)=>{AB(e,c,r,u,m)}};return Td(e)||sK(e,c,o),wV(e),c},SV=[9,27,He.HOME,He.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,He.DOWN,He.UP,He.LEFT,He.RIGHT].concat(ct.browser.isFirefox()?[224]:[]),QA="data-mce-placeholder",e3=e=>e.type==="keydown"||e.type==="keyup",t3=e=>{const n=e.keyCode;return n===He.BACKSPACE||n===He.DELETE},xV=e=>{if(e3(e)){const n=e.keyCode;return!t3(e)&&(He.metaKeyPressed(e)||e.altKey||n>=112&&n<=123||Gt(SV,n))}else return!1},_V=e=>e3(e)&&!(t3(e)||e.type==="keyup"&&e.keyCode===229),Ng=(e,n,o)=>{if(e.isEmpty(n,void 0,{skipBogus:!1,includeZwsp:!0})){const r=n.firstElementChild;return r?e.getStyle(n.firstElementChild,"padding-left")||e.getStyle(n.firstElementChild,"padding-right")?!1:o===r.nodeName.toLowerCase():!0}else return!1},EV=e=>{var n;const o=e.dom,r=Sr(e),c=(n=Gh(e))!==null&&n!==void 0?n:"",u=(m,v)=>{if(xV(m))return;const C=e.getBody(),E=_V(m)?!1:Ng(o,C,r);(o.getAttrib(C,QA)!==""!==E||v)&&(o.setAttrib(C,QA,E?c:null),Ub(e,E),e.on(E?"keydown":"keyup",u),e.off(E?"keyup":"keydown",u))};no(c)&&e.on("init",m=>{u(m,!0),e.on("change SetContent ExecCommand",u),e.on("paste",v=>ai.setEditorTimeout(e,()=>u(v)))})},TV=(e,n)=>({block:e,position:n}),kV=(e,n)=>({from:e,to:n}),n3=(e,n)=>{const o=X.fromDom(e),r=X.fromDom(n.container());return o_(o,r).map(c=>TV(c,n))},OV=e=>!(_i(e.to.block,e.from.block)||_i(e.from.block,e.to.block)),AV=e=>!Wn(e.from.block,e.to.block),t5=(e,n)=>Nr(n,c=>Ym(c)||as(c.dom),c=>Wn(c,e)).filter(Xa).getOr(e),RV=(e,n)=>{const o=X.fromDom(e);return Wn(t5(o,n.from.block),t5(o,n.to.block))},DV=e=>ho(e.from.block.dom)===!1&&ho(e.to.block.dom)===!1,cE=e=>{const n=o=>mS(o)||T1(o.dom)||ga(o);return n(e.from.block)&&n(e.to.block)},MV=(e,n,o,r)=>Bo(r.position.getNode())&&!br(e,r.block)?Nf(!1,r.block.dom).bind(c=>c.isEqual(r.position)?cc(o,n,c).bind(u=>n3(n,u)):L.some(r)).getOr(r):r,PV=(e,n,o,r)=>{const c=n3(n,he.fromRangeStart(r)),u=c.bind(m=>cc(o,n,m.position).bind(v=>n3(n,v).map(C=>MV(e,n,o,C))));return mr(c,u,kV).filter(m=>AV(m)&&RV(n,m)&&DV(m)&&cE(m)&&OV(m))},rK=(e,n,o,r)=>r.collapsed?PV(e,n,o,r):L.none(),hC=(e,n)=>{const o=gr(e);return xa(o,r=>n.isBlock(On(r))).fold(et(o),r=>o.slice(0,r))},n5=(e,n)=>{const o=hC(e,n);return we(o,go),o},iE=(e,n,o)=>{const r=Zf(o,n);return ss(r.reverse(),c=>br(e,c)).each(go)},NV=(e,n)=>Mt(gv(n),o=>!br(e,o)).length===0,BV=(e,n,o,r,c)=>{if(br(r,o))return $a(o),Hr(o.dom);NV(r,c)&&br(r,n)&&hr(c,X.fromTag("br"));const u=La(o.dom,he.before(c.dom));return we(n5(n,r),m=>{hr(c,m)}),iE(r,e,n),u},$V=(e,n)=>e.isInline(On(n)),IV=(e,n,o,r)=>{if(br(r,o)){if(br(r,n)){const m=Zd((v=>{const C=(E,D)=>_m(E).fold(()=>D,M=>$V(r,M)?C(M,D.concat(Ni(M))):D);return C(v,[])})(o),(v,C)=>(Qo(v,C),C),Xm());Fu(n),gs(n,m)}return go(o),Hr(n.dom)}const c=ic(o.dom);return we(n5(n,r),u=>{gs(o,u)}),iE(r,e,n),c},Np=(e,n)=>{const o=Zf(n,e);return L.from(o[o.length-1])},Bp=(e,n)=>_i(n,e)?Np(n,e):L.none(),pC=(e,n)=>{Nf(e,n.dom).bind(o=>L.from(o.getNode())).map(X.fromDom).filter(qm).each(go)},bC=(e,n,o,r)=>(pC(!0,n),pC(!1,o),Bp(n,o).fold(Be(IV,e,n,o,r),Be(BV,e,n,o,r))),Bg=(e,n,o,r,c)=>n?bC(e,r,o,c):bC(e,o,r,c),em=(e,n)=>{const o=X.fromDom(e.getBody());return rK(e.schema,o.dom,n,e.selection.getRng()).map(c=>()=>{Bg(o,n,c.from.block,c.to.block,e.schema).each(u=>{e.selection.setRng(u.toRange())})})},lE=(e,n,o)=>{const r=n.getRng();return mr(o_(e,X.fromDom(r.startContainer)),o_(e,X.fromDom(r.endContainer)),(c,u)=>Wn(c,u)?L.none():L.some(()=>{r.deleteContents(),Bg(e,!0,c,u,o).each(m=>{n.setRng(m.toRange())})})).getOr(L.none())},vC=(e,n)=>{const o=X.fromDom(n),r=Be(Wn,e);return Mo(o,Ym,r).isSome()},o5=(e,n)=>vC(e,n.startContainer)||vC(e,n.endContainer),o3=(e,n)=>{const o=La(e.dom,he.fromRangeStart(n)).isNone(),r=Lr(e.dom,he.fromRangeEnd(n)).isNone();return!o5(e,n)&&o&&r},s3=e=>L.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),s5=e=>{const n=X.fromDom(e.getBody()),o=e.selection.getRng();return o3(n,o)?s3(e):lE(n,e.selection,e.schema)},uE=(e,n)=>e.selection.isCollapsed()?L.none():s5(e),di=(e,n,o,r,c)=>L.from(n._selectionOverrides.showCaret(e,o,r,c)),r5=e=>{const n=e.ownerDocument.createRange();return n.selectNode(e),n},x0=(e,n)=>e.dispatch("BeforeObjectSelected",{target:n}).isDefaultPrevented()?L.none():L.some(r5(n)),a5=(e,n,o)=>{const r=xr(1,e.getBody(),n),c=he.fromRangeStart(r),u=c.getNode();if(Cb(u))return di(1,e,u,!c.isAtEnd(),!1);const m=c.getNode(!0);if(Cb(m))return di(1,e,m,!1,!1);const v=Og(e.dom.getRoot(),c.getNode());return Cb(v)?di(1,e,v,!1,o):L.none()},_0=(e,n,o)=>n.collapsed?a5(e,n,o).getOr(n):n,c5=e=>yt(e)||T2(e),i5=e=>Wf(e)||k2(e),l5=(e,n)=>{Me(n)&&n.data.length===0&&e.remove(n)},r3=(e,n,o,r,c,u)=>{di(r,e,u.getNode(!c),c,!0).each(m=>{if(n.collapsed){const v=n.cloneRange();c?v.setEnd(m.startContainer,m.startOffset):v.setStart(m.endContainer,m.endOffset),v.deleteContents()}else n.deleteContents();e.selection.setRng(m)}),l5(e.dom,o)},tm=(e,n)=>{const o=e.selection.getRng();if(!Me(o.commonAncestorContainer))return L.none();const r=n?Ps.Forwards:Ps.Backwards,c=ir(e.getBody()),u=Be(Vy,n?c.next:c.prev),m=n?c5:i5,v=Mf(r,e.getBody(),o),C=u(v),E=C&&zi(n,C);if(!E||!Eb(v,E))return L.none();if(m(E))return L.some(()=>r3(e,o,v.getNode(),r,n,E));const D=u(E);return D&&m(D)&&Eb(E,D)?L.some(()=>r3(e,o,v.getNode(),r,n,D)):L.none()},Od=(e,n)=>tm(e,n),fi=(e,n)=>{const o=e.getBody();return n?Hr(o).filter(yt):ic(o).filter(Wf)},a3=e=>{const n=e.selection.getRng();return!n.collapsed&&(fi(e,!0).exists(o=>o.isEqual(he.fromRangeStart(n)))||fi(e,!1).exists(o=>o.isEqual(he.fromRangeEnd(n))))},FV=e=>Ae(e)&&(Ym(X.fromDom(e))||ga(X.fromDom(e))),mi=$n.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),LV=(e,n)=>{const o=n.getNode(!e),r=e?"after":"before";return pt(o)&&o.getAttribute("data-mce-caret")===r},HV=(e,n,o,r,c)=>{const u=m=>c.isInline(m.nodeName.toLowerCase())&&!ac(o,r,e);return xb(!n,o).fold(()=>xb(n,r).fold(De,u),u)},u5=(e,n,o,r,c)=>{const u=c.getNode(!o);return o_(X.fromDom(n),X.fromDom(r.getNode())).map(m=>br(e,m)?mi.remove(m.dom):mi.moveToElement(u)).orThunk(()=>L.some(mi.moveToElement(u)))},d5=(e,n,o,r)=>cc(n,e,o).bind(c=>FV(c.getNode())||HV(e,n,o,c,r)?L.none():n&&ho(c.getNode())||!n&&ho(c.getNode(!0))?u5(r,e,n,o,c):n&&Wf(o)||!n&&yt(o)?L.some(mi.moveToPosition(c)):L.none()),VV=(e,n)=>_n(n)?L.none():e&&ho(n.nextSibling)?L.some(mi.moveToElement(n.nextSibling)):!e&&ho(n.previousSibling)?L.some(mi.moveToElement(n.previousSibling)):L.none(),zV=(e,n,o)=>o.fold(r=>L.some(mi.remove(r)),r=>L.some(mi.moveToElement(r)),r=>ac(n,r,e)?L.none():L.some(mi.moveToPosition(r))),UV=(e,n,o,r)=>LV(n,o)?VV(n,o.getNode(!n)).orThunk(()=>d5(e,n,o,r)):d5(e,n,o,r).bind(c=>zV(e,o,c)),WV=(e,n,o,r)=>{const c=xr(n?1:-1,e,o),u=he.fromRangeStart(c),m=X.fromDom(e);return!n&&Wf(u)?L.some(mi.remove(u.getNode(!0))):n&&yt(u)?L.some(mi.remove(u.getNode())):!n&&yt(u)&&oP(m,u,r)?Vq(m,u,r).map(v=>mi.remove(v.getNode())):n&&Wf(u)&&Jx(m,u,r)?m7(m,u,r).map(v=>mi.remove(v.getNode())):UV(e,n,u,r)},ZV=(e,n)=>o=>(e._selectionOverrides.hideFakeCaret(),bp(e,n,X.fromDom(o)),!0),c3=(e,n)=>o=>{const r=n?he.before(o):he.after(o);return e.selection.setRng(r.toRange()),!0},i3=e=>n=>(e.selection.setRng(n.toRange()),!0),l3=(e,n)=>L.from(Og(e.getBody(),n)),jV=(e,n)=>{const o=e.selection.getNode();return l3(e,o).filter(ho).fold(()=>WV(e.getBody(),n,e.selection.getRng(),e.schema).map(r=>()=>r.fold(ZV(e,n),c3(e,n),i3(e))),()=>L.some(Bt))},GV=e=>{we(sr(e,".mce-offscreen-selection"),go)},f5=(e,n)=>{const o=e.selection.getNode();return ho(o)&&!Go(o)?l3(e,o.parentNode).filter(ho).fold(()=>L.some(()=>{GV(X.fromDom(e.getBody())),bp(e,n,X.fromDom(e.selection.getNode())),_O(e)}),()=>L.some(Bt)):a3(e)?L.some(()=>{SP(e,e.selection.getRng(),X.fromDom(e.getBody()))}):L.none()},u3=e=>{const n=e.dom,o=e.selection,r=Og(e.getBody(),o.getNode());if(as(r)&&n.isBlock(r)&&n.isEmpty(r)){const c=n.create("br",{"data-mce-bogus":"1"});n.setHTML(r,""),r.appendChild(c),o.setRng(he.before(c).toRange())}return!0},yC=(e,n)=>e.selection.isCollapsed()?jV(e,n):f5(e,n),m5=(e,n)=>{const o=he.fromRangeStart(e.selection.getRng());return cc(n,e.getBody(),o).filter(r=>n?a7(r):c7(r)).bind(r=>Sb(n?0:-1,r)).map(r=>()=>e.selection.select(r))},dE=(e,n)=>e.selection.isCollapsed()?m5(e,n):L.none(),$g=Me,g5=e=>$g(e)&&e.data[0]===Ko,h5=e=>$g(e)&&e.data[e.data.length-1]===Ko,Su=e=>{var n;return((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(Ko)},Al=e=>{var n;if($g(e.previousSibling))return h5(e.previousSibling)||e.previousSibling.appendData(Ko),e.previousSibling;if($g(e))return g5(e)||e.insertData(0,Ko),e;{const o=Su(e);return(n=e.parentNode)===null||n===void 0||n.insertBefore(o,e),o}},fE=e=>{var n,o;if($g(e.nextSibling))return g5(e.nextSibling)||e.nextSibling.insertData(0,Ko),e.nextSibling;if($g(e))return h5(e)||e.appendData(Ko),e;{const r=Su(e);return e.nextSibling?(n=e.parentNode)===null||n===void 0||n.insertBefore(r,e.nextSibling):(o=e.parentNode)===null||o===void 0||o.appendChild(r),r}},CC=(e,n)=>e?Al(n):fE(n),mE=Be(CC,!0),p5=Be(CC,!1),d3=(e,n)=>Me(e.container())?CC(n,e.container()):CC(n,e.getNode()),f3=(e,n)=>{const o=n.get();return o&&e.container()===o&&$i(o)},gE=(e,n)=>n.fold(o=>{fd(e.get());const r=mE(o);return e.set(r),L.some(he(r,r.length-1))},o=>Hr(o).map(r=>{if(f3(r,e)){const c=e.get();return he(c,1)}else{fd(e.get());const c=d3(r,!0);return e.set(c),he(c,1)}}),o=>ic(o).map(r=>{if(f3(r,e)){const c=e.get();return he(c,c.length-1)}else{fd(e.get());const c=d3(r,!1);return e.set(c),he(c,c.length-1)}}),o=>{fd(e.get());const r=p5(o);return e.set(r),L.some(he(r,1))}),m3=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o].apply(null,n);if(r.isSome())return r}return L.none()},va=$n.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),wC=(e,n)=>{const o=Hi(n,e);return o||e},g3=(e,n,o)=>{const r=wO(o),c=wC(n,r.container());return Tg(e,c,r).fold(()=>Lr(c,r).bind(Be(Tg,e,c)).map(u=>va.before(u)),L.none)},qV=(e,n)=>Bf(e,n)===null,b5=(e,n,o)=>Tg(e,n,o).filter(Be(qV,n)),KV=(e,n,o)=>{const r=SO(o);return b5(e,n,r).bind(c=>La(c,r).isNone()?L.some(va.start(c)):L.none())},YV=(e,n,o)=>{const r=wO(o);return b5(e,n,r).bind(c=>Lr(c,r).isNone()?L.some(va.end(c)):L.none())},v5=(e,n,o)=>{const r=SO(o),c=wC(n,r.container());return Tg(e,c,r).fold(()=>La(c,r).bind(Be(Tg,e,c)).map(u=>va.after(u)),L.none)},y5=e=>!vP(SC(e)),Ad=(e,n,o)=>m3([g3,KV,YV,v5],[e,n,o]).filter(y5),SC=e=>e.fold(zo,zo,zo,zo),C5=e=>e.fold(et("before"),et("start"),et("end"),et("after")),hE=e=>e.fold(va.before,va.before,va.after,va.after),h3=e=>e.fold(va.start,va.start,va.end,va.end),XV=(e,n)=>C5(e)===C5(n)&&SC(e)===SC(n),JV=(e,n,o,r,c,u)=>mr(Tg(n,o,r),Tg(n,o,c),(m,v)=>m!==v&&yP(o,m,v)?va.after(e?m:v):u).getOr(u),QV=(e,n)=>e.fold(dt,o=>!XV(o,n)),ez=(e,n,o,r,c)=>{const u=zi(e,c);return cc(e,o,u).map(Be(zi,e)).fold(()=>r.map(hE),C=>Ad(n,o,C).map(Be(JV,e,n,o,u,C)).filter(Be(QV,r))).filter(y5)},pE=(e,n)=>e?n.fold(A(L.some,va.start),L.none,A(L.some,va.after),L.none):n.fold(L.none,A(L.some,va.before),L.none,A(L.some,va.end)),p3=(e,n,o,r)=>{const c=zi(e,r),u=Ad(n,o,c);return Ad(n,o,c).bind(Be(pE,e)).orThunk(()=>ez(e,n,o,u,r))},tz=e=>oe(e.selection.getSel().modify),w5=(e,n,o)=>{const r=e?1:-1;return n.setRng(he(o.container(),o.offset()+r).toRange()),n.getSel().modify("move",e?"forward":"backward","word"),!0},nz=(e,n)=>{const o=n.selection.getRng(),r=e?he.fromRangeEnd(o):he.fromRangeStart(o);return tz(n)?e&&Jv(r)?w5(!0,n.selection,r):!e&&wf(r)?w5(!1,n.selection,r):!1:!1};var Rd;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(Rd||(Rd={}));const xC=(e,n)=>e===Ps.Backwards?$o(n):n,oz=(e,n,o)=>e===Ps.Forwards?n.next(o):n.prev(o),sz=(e,n,o,r)=>Bo(r.getNode(n===Ps.Forwards))?Rd.Br:ac(o,r)===!1?Rd.Block:Rd.Wrap,bE=(e,n,o,r)=>{const c=ir(o);let u=r;const m=[];for(;u;){const v=oz(n,c,u);if(!v)break;if(Bo(v.getNode(!1)))return n===Ps.Forwards?{positions:xC(n,m).concat([v]),breakType:Rd.Br,breakAt:L.some(v)}:{positions:xC(n,m),breakType:Rd.Br,breakAt:L.some(v)};if(!v.isVisible()){u=v;continue}if(e(u,v)){const C=sz(o,n,u,v);return{positions:xC(n,m),breakType:C,breakAt:L.some(v)}}m.push(v),u=v}return{positions:xC(n,m),breakType:Rd.Eol,breakAt:L.none()}},S5=(e,n,o,r)=>n(o,r).breakAt.map(c=>{const u=n(o,c).positions;return e===Ps.Backwards?u.concat(c):[c].concat(u)}).getOr([]),b3=(e,n)=>Wo(e,(o,r)=>o.fold(()=>L.some(r),c=>mr(Dr(c.getClientRects()),Dr(r.getClientRects()),(u,m)=>{const v=Math.abs(n-u.left);return Math.abs(n-m.left)<=v?r:c}).or(o)),L.none()),vE=(e,n)=>Dr(n.getClientRects()).bind(o=>b3(e,o.left)),_C=Be(bE,he.isAbove,-1),EC=Be(bE,he.isBelow,1),x5=Be(S5,-1,_C),_5=Be(S5,1,EC),TC=(e,n)=>_C(e,n).breakAt.isNone(),kC=(e,n)=>EC(e,n).breakAt.isNone(),rz=e=>Hr(e).map(n=>[n].concat(EC(e,n).positions)).getOr([]),az=e=>ic(e).map(n=>_C(e,n).positions.concat(n)).getOr([]),yE=(e,n)=>vE(x5(e,n),n),cz=(e,n)=>vE(_5(e,n),n),iz=ho,E5=(e,n)=>Math.abs(e.left-n),T5=(e,n)=>Math.abs(e.right-n),lz=e=>Ea(e,"node"),k5=(e,n)=>qa(e,(o,r)=>{const c=Math.min(E5(o,n),T5(o,n)),u=Math.min(E5(r,n),T5(r,n));return u===c&&lz(r)&&iz(r.node)||u<c?r:o}),uz=e=>{const n=o=>Xt(o,r=>{const c=nu(r);return c.node=e,c});if(pt(e))return n(e.getClientRects());if(Me(e)){const o=e.ownerDocument.createRange();return o.setStart(e,0),o.setEnd(e,e.data.length),n(o.getClientRects())}else return[]},O5=e=>vc(e,uz);var OC;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(OC||(OC={}));const dz=(e,n,o,r)=>{let c=r;for(;c=ug(c,e,ty,n);)if(o(c))return},A5=(e,n,o,r,c,u)=>{let m=0;const v=[],C=M=>{let B=O5([M]);e===-1&&(B=B.reverse());for(let W=0;W<B.length;W++){const q=B[W];if(!o(q,E)){if(v.length>0&&n(q,Vc(v))&&m++,q.line=m,c(q))return!0;v.push(q)}}return!1},E=Vc(u.getClientRects());if(!E)return v;const D=u.getNode();return D&&(C(D),dz(e,r,C,D)),v},aK=(e,n)=>n.line>e,Rl=(e,n)=>n.line===e,v3=Be(A5,OC.Up,Fh,Z1),R5=Be(A5,OC.Down,Z1,Fh),y3=e=>Vc(e.getClientRects()),fz=(e,n,o,r)=>{const c=ir(n);let u,m,v,C;const E=[];let D=0;e===1?(u=c.next,m=Z1,v=Fh,C=he.after(r)):(u=c.prev,m=Fh,v=Z1,C=he.before(r));const M=y3(C);do{if(!C.isVisible())continue;const B=y3(C);if(v(B,M))continue;E.length>0&&m(B,Vc(E))&&D++;const W=nu(B);if(W.position=C,W.line=D,o(W))return E;E.push(W)}while(C=u(C));return E},C3=e=>n=>aK(e,n),w3=e=>n=>Rl(e,n),Dd=(e,n)=>{e.selection.setRng(n),S2(e,e.selection.getRng())},S3=(e,n,o)=>L.some(_0(e,n,o)),D5=(e,n,o,r,c,u)=>{const m=n===Ps.Forwards,v=ir(e.getBody()),C=Be(Vy,m?v.next:v.prev),E=m?r:c;if(!o.collapsed){const q=Qm(o);if(u(q))return di(n,e,q,n===Ps.Backwards,!1);if(a3(e)){const Z=o.cloneRange();return Z.collapse(n===Ps.Backwards),L.from(Z)}}const D=Mf(n,e.getBody(),o);if(E(D))return x0(e,D.getNode(!m));let M=C(D);const B=Xr(o);if(M)M=zi(m,M);else return B?L.some(o):L.none();if(E(M))return di(n,e,M.getNode(!m),m,!1);const W=C(M);return W&&E(W)&&Eb(M,W)?di(n,e,W.getNode(!m),m,!1):B?S3(e,M.toRange(),!1):L.none()},M5=(e,n,o,r,c,u)=>{const m=Mf(n,e.getBody(),o),v=Vc(m.getClientRects()),C=n===OC.Down,E=e.getBody();if(!v)return L.none();if(a3(e)){const K=C?he.fromRangeEnd(o):he.fromRangeStart(o);return(C?cz:yE)(E,K).orThunk(()=>L.from(K)).map(re=>re.toRange())}const M=(C?R5:v3)(E,C3(1),m),B=Mt(M,w3(1)),W=v.left,q=k5(B,W);if(q&&u(q.node)){const K=Math.abs(W-q.left),ne=Math.abs(W-q.right);return di(n,e,q.node,K<ne,!1)}let Z;if(r(m)?Z=m.getNode():c(m)?Z=m.getNode(!0):Z=Qm(o),Z){const K=fz(n,E,C3(1),Z);let ne=k5(Mt(K,w3(1)),W);if(ne||(ne=Vc(Mt(K,w3(0))),ne))return S3(e,ne.position.toRange(),!1)}return B.length===0?Ig(e,C).filter(C?c:r).map(K=>_0(e,K.toRange(),!1)):L.none()},Ig=(e,n)=>{const o=e.selection.getRng(),r=n?he.fromRangeEnd(o):he.fromRangeStart(o),c=h4(r.container(),e.getBody());if(n){const u=EC(c,r);return Ll(u.positions)}else{const u=_C(c,r);return Dr(u.positions)}},x3=(e,n,o)=>Ig(e,n).filter(o).exists(r=>(e.selection.setRng(r.toRange()),!0)),AC=(e,n)=>{const o=e.dom.createRng();o.setStart(n.container(),n.offset()),o.setEnd(n.container(),n.offset()),e.selection.setRng(o)},_3=(e,n)=>{e?n.setAttribute("data-mce-selected","inline-boundary"):n.removeAttribute("data-mce-selected")},CE=(e,n,o)=>gE(n,o).map(r=>(AC(e,r),o)),mz=(e,n,o)=>{const r=he.fromRangeStart(e);if(e.collapsed)return r;{const c=he.fromRangeEnd(e);return o?La(n,c).getOr(c):Lr(n,r).getOr(r)}},gz=(e,n,o)=>{const r=e.getBody(),c=mz(e.selection.getRng(),r,o),u=Be(vp,e);return p3(o,u,r,c).bind(v=>CE(e,n,v))},hz=(e,n,o)=>{const r=Xt(sr(X.fromDom(n.getRoot()),'*[data-mce-selected="inline-boundary"]'),m=>m.dom),c=Mt(r,e),u=Mt(o,e);we(o1(c,u),Be(_3,!1)),we(o1(u,c),Be(_3,!0))},cK=(e,n)=>{const o=n.get();if(e.selection.isCollapsed()&&!e.composing&&o){const r=he.fromRangeStart(e.selection.getRng());he.isTextPosition(r)&&!N7(r)&&(AC(e,d4(o,r)),n.set(null))}},iK=(e,n,o,r)=>{if(n.selection.isCollapsed()){const c=Mt(r,e);we(c,u=>{const m=he.fromRangeStart(n.selection.getRng());Ad(e,n.getBody(),m).bind(v=>CE(n,o,v))})}},pz=(e,n,o)=>kf(e)?gz(e,n,o).isSome():!1,Gi=(e,n,o)=>kf(n)?nz(e,n):!1,bz=e=>{const n=lo(null),o=Be(vp,e);return e.on("NodeChange",r=>{kf(e)&&(hz(o,e.dom,r.parents),cK(e,n),iK(o,e,n,r.parents))}),n},vz=Be(Gi,!0),$p=Be(Gi,!1),RC=(e,n,o)=>{if(kf(e)){const r=Ig(e,n).getOrThunk(()=>{const c=e.selection.getRng();return n?he.fromRangeEnd(c):he.fromRangeStart(c)});return Ad(Be(vp,e),e.getBody(),r).exists(c=>{const u=hE(c);return gE(o,u).exists(m=>(AC(e,m),!0))})}else return!1},yz=(e,n)=>{const o=document.createRange();return o.setStart(e.container(),e.offset()),o.setEnd(n.container(),n.offset()),o},wE=e=>mr(Hr(e),ic(e),(n,o)=>{const r=zi(!0,n),c=zi(!1,o);return Lr(e,r).forall(u=>u.isEqual(c))}).getOr(!0),P5=(e,n)=>o=>gE(n,o).map(r=>()=>AC(e,r)),N5=(e,n,o,r)=>{const c=e.getBody(),u=Be(vp,e);e.undoManager.ignore(()=>{e.selection.setRng(yz(o,r)),ra(e),Ad(u,c,he.fromRangeStart(e.selection.getRng())).map(h3).bind(P5(e,n)).each(ia)}),e.nodeChanged()},Cz=(e,n)=>{const o=Hi(n,e);return o||e},wz=(e,n,o,r)=>{const c=Cz(e.getBody(),r.container()),u=Be(vp,e),m=Ad(u,c,r);return m.bind(C=>o?C.fold(et(L.some(h3(C))),L.none,et(L.some(hE(C))),L.none):C.fold(L.none,et(L.some(hE(C))),L.none,et(L.some(h3(C))))).map(P5(e,n)).getOrThunk(()=>{const C=iu(o,c,r),E=C.bind(D=>Ad(u,c,D));return mr(m,E,()=>Tg(u,c,r).bind(D=>wE(D)?L.some(()=>{bp(e,o,X.fromDom(D))}):L.none())).getOrThunk(()=>E.bind(()=>C.map(D=>()=>{o?N5(e,n,r,D):N5(e,n,D,r)})))})},SE=(e,n,o)=>{if(e.selection.isCollapsed()&&kf(e)){const r=he.fromRangeStart(e.selection.getRng());return wz(e,n,o,r)}return L.none()},Sz=e=>Gr(e)>1,Md=(e,n)=>{const o=X.fromDom(e.getBody()),r=X.fromDom(e.selection.getStart()),c=Zf(r,o);return xa(c,n).fold(et(c),u=>c.slice(0,u))},xz=e=>Gr(e)===1,_z=e=>Md(e,n=>e.schema.isBlock(On(n))||Sz(n)),Ez=e=>Md(e,n=>e.schema.isBlock(On(n))),B5=(e,n)=>{const o=Be(WO,e);return vc(n,r=>o(r)?[r.dom]:[])},$5=e=>{const n=Ez(e);return B5(e,n)},E3=(e,n,o,r)=>{const c=B5(n,r);if(c.length===0)bp(n,e,o);else{const u=__(o.dom,c);n.selection.setRng(u.toRange())}},T3=(e,n)=>{const o=Mt(_z(e),xz);return Ll(o).bind(r=>{const c=he.fromRangeStart(e.selection.getRng());return kg(n,c,r.dom)&&!sp(r)?L.some(()=>E3(n,e,r,o)):L.none()})},k3=(e,n)=>{const o=n.parentElement;return Bo(n)&&!ae(o)&&e.dom.isEmpty(o)},I5=e=>sp(X.fromDom(e)),O3=(e,n)=>{const o=e.selection.getStart(),r=k3(e,o)||I5(o)?__(o,n):aN(e.selection.getRng(),n);e.selection.setRng(r.toRange())},F5=(e,n)=>{const o=o1(n,$5(e));o.length>0&&O3(e,o)},L5=e=>Me(e.startContainer),DC=e=>e.startOffset===0&&L5(e),xE=(e,n)=>{const o=n.startContainer.parentElement;return!ae(o)&&WO(e,X.fromDom(o))},H5=e=>{const n=e.startContainer.parentNode,o=e.endContainer.parentNode;return!ae(n)&&!ae(o)&&n.isEqualNode(o)},V5=e=>{const n=e.endContainer;return e.endOffset===(Me(n)?n.length:n.childNodes.length)},z5=e=>H5(e)&&V5(e),U5=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),_E=e=>z5(e)||U5(e),A3=e=>{const n=e.selection.getRng();return DC(n)&&xE(e,n)&&_E(n)},MC=e=>{if(A3(e)){const n=$5(e);return L.some(()=>{ra(e),F5(e,n)})}else return L.none()},R3=(e,n)=>e.selection.isCollapsed()?T3(e,n):MC(e),W5=(e,n)=>Sv(e,o=>lc(o.dom),o=>n.isBlock(On(o))),Tz=e=>W5(X.fromDom(e.selection.getStart()),e.schema),kz=e=>{const n=e.selection.getRng();return n.collapsed&&(L5(n)||e.dom.isEmpty(n.startContainer))&&!Tz(e)},E0=e=>(kz(e)&&O3(e,[]),!0),D3=(e,n,o)=>Ae(o)?L.some(()=>{e._selectionOverrides.hideFakeCaret(),bp(e,n,X.fromDom(o))}):L.none(),Z5=(e,n)=>{const o=n?T2:k2,r=n?Ps.Forwards:Ps.Backwards,c=Mf(r,e.getBody(),e.selection.getRng());return o(c)?D3(e,n,c.getNode(!n)):L.from(zi(n,c)).filter(u=>o(u)&&Eb(c,u)).bind(u=>D3(e,n,u.getNode(!n)))},lK=(e,n)=>{const o=e.selection.getNode();return cl(o)?D3(e,n,o):L.none()},M3=(e,n)=>e.selection.isCollapsed()?Z5(e,n):lK(e,n),Oz=e=>Nr(e,n=>as(n.dom)||ho(n.dom)).exists(n=>as(n.dom)),P3=e=>Yd(e??"").getOr(0),j5=(e,n)=>{const o=e||Kv(n)?"margin":"padding",r=Yc(n,"direction")==="rtl"?"-right":"-left";return o+r},Az=(e,n,o,r,c,u)=>{const m=j5(o,X.fromDom(u)),v=P3(e.getStyle(u,m));if(n==="outdent"){const C=Math.max(0,v-r);e.setStyle(u,m,C?C+c:"")}else{const C=v+r+c;e.setStyle(u,m,C)}},Rz=(e,n)=>ur(n,o=>{const r=j5(Sy(e),o),c=Kr(o,r).map(P3).getOr(0);return e.dom.getContentEditable(o.dom)!=="false"&&c>0}),G5=e=>{const n=Y5(e);return!e.mode.isReadOnly()&&(n.length>1||Rz(e,n))},q5=e=>Bi(e)||ga(e),K5=e=>wc(e).exists(q5),Y5=e=>Mt(Po(e.selection.getSelectedBlocks()),n=>!q5(n)&&!K5(n)&&Oz(n)),Fg=(e,n)=>{var o,r;const{dom:c}=e,u=AL(e),m=(r=(o=/[a-z%]+$/i.exec(u))===null||o===void 0?void 0:o[0])!==null&&r!==void 0?r:"px",v=P3(u),C=Sy(e);we(Y5(e),E=>{Az(c,n,C,v,m,E.dom)})},X5=e=>Fg(e,"indent"),EE=e=>Fg(e,"outdent"),N3=e=>{if(e.selection.isCollapsed()&&G5(e)){const n=e.dom,o=e.selection.getRng(),r=he.fromRangeStart(o),c=n.getParent(o.startContainer,n.isBlock);if(c!==null&&Xx(X.fromDom(c),r,e.schema))return L.some(()=>EE(e))}return L.none()},TE=(e,n,o)=>jd([N3,yC,Od,(r,c)=>SE(r,n,c),em,o0,dE,M3,uE,R3],r=>r(e,o)).filter(r=>e.selection.isEditable()),Lg=(e,n)=>{TE(e,n,!1).fold(()=>{e.selection.isEditable()&&(ra(e),_O(e))},ia)},J5=(e,n)=>{TE(e,n,!0).fold(()=>{e.selection.isEditable()&&B7(e)},ia)},qi=(e,n)=>{e.addCommand("delete",()=>{Lg(e,n)}),e.addCommand("forwardDelete",()=>{J5(e,n)})},Hg=5,B3=400,Q5=e=>e.touches===void 0||e.touches.length!==1?L.none():L.some(e.touches[0]),e$=(e,n)=>{const o=Math.abs(e.clientX-n.x),r=Math.abs(e.clientY-n.y);return o>Hg||r>Hg},Dz=e=>{const n=vr(),o=lo(!1),r=Ju(c=>{e.dispatch("longpress",{...c,type:"longpress"}),o.set(!0)},B3);e.on("touchstart",c=>{Q5(c).each(u=>{r.cancel();const m={x:u.clientX,y:u.clientY,target:c.target};r.throttle(c),o.set(!1),n.set(m)})},!0),e.on("touchmove",c=>{r.cancel(),Q5(c).each(u=>{n.on(m=>{e$(u,m)&&(n.clear(),o.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",c=>{r.cancel(),c.type!=="touchcancel"&&n.get().filter(u=>u.target.isEqualNode(c.target)).each(()=>{o.get()?c.preventDefault():e.dispatch("tap",{...c,type:"tap"})})},!0)},$3=(e,n)=>Ft(e,n.nodeName),Mz=(e,n)=>Me(n)?!0:pt(n)?!$3(e.getBlockElements(),n)&&!uc(n)&&!Wu(e,n)&&!Vw(n):!1,Pz=(e,n,o)=>vo(Yx(X.fromDom(o),X.fromDom(n)),r=>$3(e,r.dom)),Nz=(e,n)=>{if(Me(n)){if(n.data.length===0)return!0;if(/^\s+$/.test(n.data))return!n.nextSibling||$3(e,n.nextSibling)||Vw(n.nextSibling)}return!1},I3=e=>e.dom.create(Sr(e),ad(e)),Bz=e=>{const n=e.dom,o=e.selection,r=e.schema,c=r.getBlockElements(),u=o.getStart(),m=e.getBody();let v,C,E=!1;const D=Sr(e);if(!u||!pt(u))return;const M=m.nodeName.toLowerCase();if(!r.isValidChild(M,D.toLowerCase())||Pz(c,m,u))return;const B=o.getRng(),{startContainer:W,startOffset:q,endContainer:Z,endOffset:K}=B,ne=_g(e);let re=m.firstChild;for(;re;)if(pt(re)&&dk(r,re),Mz(r,re)){if(Nz(c,re)){C=re,re=re.nextSibling,n.remove(C);continue}v||(v=I3(e),m.insertBefore(v,re),E=!0),C=re,re=re.nextSibling,v.appendChild(C)}else v=null,re=re.nextSibling;E&&ne&&(B.setStart(W,q),B.setEnd(Z,K),o.setRng(B),e.nodeChanged())},t$=(e,n,o)=>{const r=X.fromDom(I3(e)),c=Xm();gs(r,c),o(n,r);const u=document.createRange();return u.setStartBefore(c.dom),u.setEndBefore(c.dom),u},T0=e=>{e.on("NodeChange",Be(Bz,e))},kE=e=>n=>(" "+n.attr("class")+" ").indexOf(e)!==-1,n$=(e,n,o)=>function(r){const c=arguments,u=c[c.length-2],m=u>0?n.charAt(u-1):"";if(m==='"')return r;if(m===">"){const v=n.lastIndexOf("<",u);if(v!==-1&&n.substring(v,u).indexOf('contenteditable="false"')!==-1)return r}return'<span class="'+o+'" data-mce-content="'+e.dom.encode(c[0])+'">'+e.dom.encode(typeof c[1]=="string"?c[1]:c[0])+"</span>"},o$=(e,n,o)=>{let r=n.length,c=o.content;if(o.format!=="raw"){for(;r--;)c=c.replace(n[r],n$(e,c,db(e)));o.content=c}},F3=e=>{const n="contenteditable",o=" "+ze.trim(s4(e))+" ",r=" "+ze.trim(db(e))+" ",c=kE(o),u=kE(r),m=si(e);m.length>0&&e.on("BeforeSetContent",v=>{o$(e,m,v)}),e.parser.addAttributeFilter("class",v=>{let C=v.length;for(;C--;){const E=v[C];c(E)?E.attr(n,"true"):u(E)&&E.attr(n,"false")}}),e.serializer.addAttributeFilter(n,v=>{let C=v.length;for(;C--;){const E=v[C];!c(E)&&!u(E)||(m.length>0&&E.attr("data-mce-content")?(E.name="#text",E.type=3,E.raw=!0,E.value=E.attr("data-mce-content")):E.attr(n,null))}})},$z=e=>Em(X.fromDom(e.getBody()),"*[data-mce-caret]").map(n=>n.dom).getOrNull(),s$=(e,n)=>{n.hasAttribute("data-mce-caret")&&(vn(n),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(n))},Iz=(e,n)=>{const o=$z(e);if(o){if(n.type==="compositionstart"){n.preventDefault(),n.stopPropagation(),s$(e,o);return}Yv(o)&&(s$(e,o),e.undoManager.add())}},Fz=e=>{e.on("keyup compositionstart",Be(Iz,e))},r$=ho,Lz=(e,n,o)=>D5(n,e,o,yt,Wf,r$),Hz=(e,n,o)=>M5(n,e,o,u=>yt(u)||JM(u),u=>Wf(u)||QM(u),r$),a$=e=>{const n=e.dom.create(Sr(e));return n.innerHTML='<br data-mce-bogus="1">',n},c$=(e,n,o)=>{const r=ir(e.getBody()),c=Be(Vy,n===1?r.next:r.prev);if(o.collapsed){const u=e.dom.getParent(o.startContainer,"PRE");if(!u)return;if(!c(he.fromRangeStart(o))){const v=X.fromDom(a$(e));n===1?sl(X.fromDom(u),v):hr(X.fromDom(u),v),e.selection.select(v.dom,!0),e.selection.collapse()}}},Vz=(e,n)=>{const o=n?Ps.Forwards:Ps.Backwards,r=e.selection.getRng();return Lz(o,e,r).orThunk(()=>(c$(e,o,r),L.none()))},gi=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return Hz(o,e,r).orThunk(()=>(c$(e,o,r),L.none()))},zz=(e,n)=>{const o=n?e.getEnd(!0):e.getStart(!0);return vP(o)?!n:n},OE=(e,n)=>Vz(e,zz(e.selection,n)).exists(o=>(Dd(e,o),!0)),L3=(e,n)=>gi(e,n).exists(o=>(Dd(e,o),!0)),AE=(e,n)=>x3(e,n,n?Wf:yt),RE=(e,n)=>fi(e,!n).map(o=>{const r=o.toRange(),c=e.selection.getRng();return n?r.setStart(c.startContainer,c.startOffset):r.setEnd(c.endContainer,c.endOffset),r}).exists(o=>(Dd(e,o),!0)),Uz=e=>Gt(["figcaption"],On(e)),Wz=(e,n,o)=>{const r=Be(Wn,n);return Nr(X.fromDom(e.container()),c=>o.isBlock(On(c)),r).filter(Uz)},Zz=(e,n,o)=>n?kC(e.dom,o):TC(e.dom,o),jz=(e,n)=>{const o=X.fromDom(e.getBody()),r=he.fromRangeStart(e.selection.getRng());return Wz(r,o,e.schema).exists(()=>{if(Zz(o,n,r)){const u=t$(e,o,n?gs:$u);return e.selection.setRng(u),!0}else return!1})},H3=(e,n)=>e.selection.isCollapsed()?jz(e,n):!1,Gz=(e,n,o)=>{const r=e.selection.getRng(),c=he.fromRangeStart(r);return e.getBody().firstChild===n&&TC(o,c)?(e.execCommand("InsertNewBlockBefore"),!0):!1},qz=(e,n)=>{const o=e.selection.getRng(),r=he.fromRangeStart(o);return e.getBody().lastChild===n&&kC(n,r)?(e.execCommand("InsertNewBlockAfter"),!0):!1},PC=(e,n)=>n?L.from(e.dom.getParent(e.selection.getNode(),"details")).map(o=>qz(e,o)).getOr(!1):L.from(e.dom.getParent(e.selection.getNode(),"summary")).bind(o=>L.from(e.dom.getParent(o,"details")).map(r=>Gz(e,r,o))).getOr(!1),Pd=(e,n)=>PC(e,n),Vg={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},DE=e=>Xt(e,n=>({...Vg,...n})),V3=e=>Xt(e,n=>({...Vg,...n})),ME=(e,n)=>n.keyCode===e.keyCode&&n.shiftKey===e.shiftKey&&n.altKey===e.altKey&&n.ctrlKey===e.ctrlKey&&n.metaKey===e.metaKey,i$=(e,n)=>vc(DE(e),o=>ME(o,n)?[o]:[]),Kz=(e,n)=>vc(V3(e),o=>ME(o,n)?[o]:[]),zt=(e,...n)=>()=>e.apply(null,n),k0=(e,n)=>ss(i$(e,n),o=>o.action()),l$=(e,n)=>jd(Kz(e,n),o=>o.action()),u$=(e,n)=>{const o=n?Ps.Forwards:Ps.Backwards,r=e.selection.getRng();return D5(e,o,r,T2,k2,cl).exists(c=>(Dd(e,c),!0))},d$=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return M5(e,o,r,T2,k2,cl).exists(c=>(Dd(e,c),!0))},f$=(e,n)=>x3(e,n,n?k2:T2),m$=$n.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),O0={...m$,none:e=>m$.none(e)},g$=(e,n)=>Yz(e,n,dt),Yz=(e,n,o)=>vc(gr(e),r=>Ja(r,n)?o(r)?[r]:[]:Yz(r,n,o)),dK=(e,n,o=De)=>{if(o(n))return L.none();if(Gt(e,On(n)))return L.some(n);const r=c=>Ja(c,"table")||o(c);return Et(n,e.join(","),r)},fK=(e,n)=>dK(["td","th"],e,n),Xz=e=>g$(e,"th,td"),Jz=(e,n)=>af(e,"table",n),h$=(e,n,o,r,c=dt)=>{const u=r===1;if(!u&&o<=0)return O0.first(e[0]);if(u&&o>=e.length-1)return O0.last(e[e.length-1]);{const m=o+r,v=e[m];return c(v)?O0.middle(n,v):h$(e,n,m,r,c)}},p$=(e,n)=>Jz(e,n).bind(o=>{const r=Xz(o);return xa(r,u=>Wn(e,u)).map(u=>({index:u,all:r}))}),Qz=(e,n,o)=>p$(e,o).fold(()=>O0.none(e),c=>h$(c.all,e,c.index,1,n)),mK=(e,n,o)=>p$(e,o).fold(()=>O0.none(),c=>h$(c.all,e,c.index,-1,n)),e9=e=>xk(e).filter(n=>n.trim().length!==0||n.indexOf(Us)>-1).isSome(),mc=e=>jc(e)&&Es(e,"contenteditable")==="false",b$=["img","br"],NC=e=>e9(e)||Gt(b$,On(e))||mc(e),t9=e=>Br(e,NC),v$=(e,n)=>({left:e.left-n,top:e.top-n,right:e.right+n*2,bottom:e.bottom+n*2,width:e.width+n,height:e.height+n}),y$=(e,n)=>vc(n,o=>{const r=v$(nu(o.getBoundingClientRect()),-1);return[{x:r.left,y:e(r),cell:o},{x:r.right,y:e(r),cell:o}]}),z3=(e,n,o)=>Wo(e,(r,c)=>r.fold(()=>L.some(c),u=>{const m=Math.sqrt(Math.abs(u.x-n)+Math.abs(u.y-o)),v=Math.sqrt(Math.abs(c.x-n)+Math.abs(c.y-o));return L.some(v<m?c:u)}),L.none()),C$=(e,n,o,r,c)=>{const u=sr(X.fromDom(o),"td,th,caption").map(v=>v.dom),m=Mt(y$(e,u),v=>n(v,c));return z3(m,r,c).map(v=>v.cell)},n9=e=>e.bottom,w$=e=>e.top,o9=(e,n)=>e.y<n,s9=(e,n)=>e.y>n,r9=Be(C$,n9,o9),U3=Be(C$,w$,s9),a9=(e,n)=>Dr(n.getClientRects()).bind(o=>r9(e,o.left,o.top)).bind(o=>vE(az(o),n)),c9=(e,n)=>Ll(n.getClientRects()).bind(o=>U3(e,o.left,o.top)).bind(o=>vE(rz(o),n)),gK=(e,n,o)=>o.breakAt.exists(r=>e(n,r).breakAt.isSome()),i9=e=>e.breakType===Rd.Wrap&&e.positions.length===0,S$=e=>e.breakType===Rd.Br&&e.positions.length===1,l9=(e,n,o)=>{const r=e(n,o);return i9(r)||!Bo(o.getNode())&&S$(r)?!gK(e,n,r):r.breakAt.isNone()},u9=Be(l9,_C),d9=Be(l9,EC),f9=(e,n,o)=>{const r=he.fromRangeStart(n);return Nf(!e,o).exists(c=>c.isEqual(r))},W3=(e,n,o,r)=>{const c=e.selection.getRng(),u=n?1:-1;return m4()&&f9(n,c,o)?(di(u,e,o,!n,!1).each(m=>{Dd(e,m)}),!0):!1},PE=(e,n,o)=>a9(n,o).orThunk(()=>Dr(o.getClientRects()).bind(r=>b3(x5(e,he.before(n)),r.left))).getOr(he.before(n)),x$=(e,n,o)=>c9(n,o).orThunk(()=>Dr(o.getClientRects()).bind(r=>b3(_5(e,he.after(n)),r.left))).getOr(he.after(n)),Z3=(e,n)=>{const o=n.getNode(e);return al(o)?L.some(o):L.none()},m9=(e,n,o)=>{n.undoManager.transact(()=>{const r=e?sl:hr,c=t$(n,X.fromDom(o),r);Dd(n,c)})},_$=(e,n,o)=>{const r=Z3(!!n,o),c=n===!1;r.fold(()=>Dd(e,o.toRange()),u=>Nf(c,e.getBody()).filter(m=>m.isEqual(o)).fold(()=>Dd(e,o.toRange()),m=>m9(n,e,u)))},j3=(e,n,o,r)=>{const c=e.selection.getRng(),u=he.fromRangeStart(c),m=e.getBody();if(!n&&u9(r,u)){const v=PE(m,o,u);return _$(e,n,v),!0}else if(n&&d9(r,u)){const v=x$(m,o,u);return _$(e,n,v),!0}else return!1},E$=(e,n,o)=>L.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(r=>L.from(e.dom.getParent(r,"table")).map(c=>o(e,n,c,r))).getOr(!1),T$=(e,n)=>E$(e,n,W3),G3=(e,n)=>E$(e,n,j3),g9=e=>{const n=xg.exact(e,0,e,0);return l(n)},Ki=(e,n,o)=>o.fold(L.none,L.none,(r,c)=>t9(c).map(u=>g9(u)),r=>(e.execCommand("mceTableInsertRowAfter"),q3(e,n,r))),q3=(e,n,o)=>Ki(e,n,Qz(o,Mn)),k$=(e,n,o)=>Ki(e,n,mK(o,Mn)),h9=(e,n)=>{const o=["table","li","dl"],r=X.fromDom(e.getBody()),c=v=>{const C=On(v);return Wn(v,r)||Gt(o,C)},u=e.selection.getRng(),m=X.fromDom(n?u.endContainer:u.startContainer);return fK(m,c).map(v=>(Jz(v,c).each(D=>{e.model.table.clearSelectedCells(D.dom)}),e.selection.collapse(!n),(n?q3:k$)(e,c,v).each(D=>{e.selection.setRng(D)}),!0)).getOr(!1)},hK=(e,n,o)=>{const r=ct.os.isMacOS()||ct.os.isiOS();k0([{keyCode:He.RIGHT,action:zt(OE,e,!0)},{keyCode:He.LEFT,action:zt(OE,e,!1)},{keyCode:He.UP,action:zt(L3,e,!1)},{keyCode:He.DOWN,action:zt(L3,e,!0)},...r?[{keyCode:He.UP,action:zt(RE,e,!1),metaKey:!0,shiftKey:!0},{keyCode:He.DOWN,action:zt(RE,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:He.RIGHT,action:zt(T$,e,!0)},{keyCode:He.LEFT,action:zt(T$,e,!1)},{keyCode:He.UP,action:zt(G3,e,!1)},{keyCode:He.DOWN,action:zt(G3,e,!0)},{keyCode:He.UP,action:zt(G3,e,!1)},{keyCode:He.UP,action:zt(Pd,e,!1)},{keyCode:He.DOWN,action:zt(Pd,e,!0)},{keyCode:He.RIGHT,action:zt(u$,e,!0)},{keyCode:He.LEFT,action:zt(u$,e,!1)},{keyCode:He.UP,action:zt(d$,e,!1)},{keyCode:He.DOWN,action:zt(d$,e,!0)},{keyCode:He.RIGHT,action:zt(pz,e,n,!0)},{keyCode:He.LEFT,action:zt(pz,e,n,!1)},{keyCode:He.RIGHT,ctrlKey:!r,altKey:r,action:zt(vz,e,n)},{keyCode:He.LEFT,ctrlKey:!r,altKey:r,action:zt($p,e,n)},{keyCode:He.UP,action:zt(H3,e,!1)},{keyCode:He.DOWN,action:zt(H3,e,!0)}],o).each(c=>{o.preventDefault()})},pK=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||hK(e,n,o)})},Nd=(e,n)=>({container:e,offset:n}),NE=ao.DOM,Ip=e=>n=>e===n?-1:0,p9=e=>n=>e.isBlock(n)||Gt(["BR","IMG","HR","INPUT"],n.nodeName)||e.getContentEditable(n)==="false",BC=(e,n,o)=>{if(Me(e)&&n>=0)return L.some(Nd(e,n));{const r=ed(NE);return L.from(r.backwards(e,n,Ip(e),o)).map(c=>Nd(c.container,c.container.data.length))}},O$=(e,n,o)=>{if(Me(e)&&n>=e.length)return L.some(Nd(e,n));{const r=ed(NE);return L.from(r.forwards(e,n,Ip(e),o)).map(c=>Nd(c.container,0))}},BE=(e,n,o)=>{if(!Me(e))return L.none();const r=e.data;if(n>=0&&n<=r.length)return L.some(Nd(e,n));{const c=ed(NE);return L.from(c.backwards(e,n,Ip(e),o)).bind(u=>{const m=u.container.data;return BE(u.container,n+m.length,o)})}},K3=(e,n,o)=>{if(!Me(e))return L.none();const r=e.data;if(n<=r.length)return L.some(Nd(e,n));{const c=ed(NE);return L.from(c.forwards(e,n,Ip(e),o)).bind(u=>K3(u.container,n-r.length,o))}},Y3=(e,n,o,r,c)=>{const u=ed(e,p9(e));return L.from(u.backwards(n,o,r,c))},b9=e=>e.collapsed&&Me(e.startContainer),v9=e=>Ia(e.toString().replace(/\u00A0/g," ")),A$=e=>e!==""&&`  \f
\r	\v`.indexOf(e)!==-1,$E=(e,n)=>e.substring(n.length),y9=(e,n,o,r=!1)=>{let c;const u=o.charAt(0);for(c=n-1;c>=0;c--){const m=e.charAt(c);if(!r&&A$(m))return L.none();if(u===m&&dr(e,o,c,n))break}return L.some(c)},X3=(e,n,o,r=!1)=>{if(!b9(n))return L.none();const c={text:"",offset:0},u=(v,C,E)=>(c.text=E+c.text,c.offset+=C,y9(c.text,c.offset,o,r).getOr(C)),m=e.getParent(n.startContainer,e.isBlock)||e.getRoot();return Y3(e,n.startContainer,n.startOffset,u,m).bind(v=>{const C=n.cloneRange();if(C.setStart(v.container,v.offset),C.setEnd(n.endContainer,n.endOffset),C.collapsed)return L.none();const E=v9(C);return E.lastIndexOf(o)!==0?L.none():L.some({text:$E(E,o),range:C,trigger:o})})},C9=e=>e.nodeType===d1,J3=e=>e.nodeType===Si,R$=e=>{if(C9(e))return Nd(e,e.data.length);{const n=e.childNodes;return n.length>0?R$(n[n.length-1]):Nd(e,n.length)}},D$=(e,n)=>{const o=e.childNodes;return o.length>0&&n<o.length?D$(o[n],0):o.length>0&&J3(e)&&o.length===n?R$(o[o.length-1]):Nd(e,n)},M$=(e,n)=>{var o;const r=(o=e.getParent(n.container,e.isBlock))!==null&&o!==void 0?o:e.getRoot();return Y3(e,n.container,n.offset,(c,u)=>u===0?-1:u,r).filter(c=>{const u=c.container.data.charAt(c.offset-1);return!A$(u)}).isSome()},w9=e=>n=>{const o=D$(n.startContainer,n.startOffset);return!M$(e,o)},S9=(e,n,o)=>jd(o.triggers,r=>X3(e,n,r)),x9=(e,n)=>{const o=n(),r=e.selection.getRng();return S9(e.dom,r,o).bind(c=>P$(e,n,c))},P$=(e,n,o,r={})=>{var c;const u=n(),v=(c=e.selection.getRng().startContainer.nodeValue)!==null&&c!==void 0?c:"",C=Mt(u.lookupByTrigger(o.trigger),D=>o.text.length>=D.minChars&&D.matches.getOrThunk(()=>w9(e.dom))(o.range,v,o.text));if(C.length===0)return L.none();const E=Promise.all(Xt(C,D=>D.fetch(o.text,D.maxResults,r).then(B=>({matchText:o.text,items:B,columns:D.columns,onAction:D.onAction,highlightOn:D.highlightOn}))));return L.some({lookupData:E,context:o})};var xu;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(xu||(xu={}));const Q3=(e,n,o)=>e.stype===xu.Error?n(e.serror):o(e.svalue),eR=e=>{const n=[],o=[];return we(e,r=>{Q3(r,c=>o.push(c),c=>n.push(c))}),{values:n,errors:o}},_9=(e,n)=>e.stype===xu.Error?{stype:xu.Error,serror:n(e.serror)}:e,N$=(e,n)=>e.stype===xu.Value?{stype:xu.Value,svalue:n(e.svalue)}:e,E9=(e,n)=>e.stype===xu.Value?n(e.svalue):e,T9=(e,n)=>e.stype===xu.Error?n(e.serror):e,B$=e=>({stype:xu.Value,svalue:e}),$$=e=>({stype:xu.Error,serror:e}),zn={fromResult:e=>e.fold($$,B$),toResult:e=>Q3(e,Jr.error,Jr.value),svalue:B$,partition:eR,serror:$$,bind:E9,bindError:T9,map:N$,mapError:_9,fold:Q3},tR=e=>sn(e)&&Wr(e).length>100?" removed due to size":JSON.stringify(e,null,2),k9=e=>{const n=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:et("... (only showing first ten failures)")}]):e;return Xt(n,o=>"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo())},IE=(e,n)=>zn.serror([{path:e,getErrorInfo:n}]),I$=(e,n,o)=>IE(e,()=>'Could not find valid *required* value for "'+n+'" in '+tR(o)),nR=(e,n)=>IE(e,()=>'Choice schema did not contain choice key: "'+n+'"'),F$=(e,n,o)=>IE(e,()=>'The chosen schema: "'+o+'" did not exist in branches: '+tR(n)),zg=(e,n)=>IE(e,et(n)),oR=(e,n,o,r)=>mo(o,r).fold(()=>F$(e,o,r),u=>u.extract(e.concat(["branch: "+r]),n)),L$=(e,n)=>({extract:(c,u)=>mo(u,e).fold(()=>nR(c,e),v=>oR(c,u,n,v)),toString:()=>"chooseOn("+e+"). Possible values: "+Wr(n)}),sR=(e,n)=>n,rR=(e,n)=>Hc(e)&&Hc(n)?$C(e,n):n,FE=e=>(...n)=>{if(n.length===0)throw new Error("Can't merge zero objects");const o={};for(let r=0;r<n.length;r++){const c=n[r];for(const u in c)Ft(c,u)&&(o[u]=e(o[u],c[u]))}return o},$C=FE(rR),LE=FE(sR),IC=()=>({tag:"required",process:{}}),FC=e=>({tag:"defaultedThunk",process:e}),A0=e=>FC(et(e)),Dl=()=>({tag:"option",process:{}}),LC=(e,n)=>e.length>0?zn.svalue($C(n,LE.apply(void 0,e))):zn.svalue(n),aR=e=>A(zn.serror,n1)(e),H$={consolidateObj:(e,n)=>{const o=zn.partition(e);return o.errors.length>0?aR(o.errors):LC(o.values,n)},consolidateArr:e=>{const n=zn.partition(e);return n.errors.length>0?aR(n.errors):zn.svalue(n.values)}},A9=(e,n,o,r)=>({tag:"field",key:e,newKey:n,presence:o,prop:r}),R9=(e,n)=>({tag:"custom",newKey:e,instantiator:n}),R0=(e,n,o)=>{switch(e.tag){case"field":return n(e.key,e.newKey,e.presence,e.prop);case"custom":return o(e.newKey,e.instantiator)}},cR=e=>{const n=(r,c)=>zn.bindError(e(c),u=>zg(r,u)),o=et("val");return{extract:n,toString:o}},D9=cR(zn.svalue),M9=(e,n,o,r)=>mo(n,o).fold(()=>I$(e,o,n),r),V$=(e,n,o,r)=>{const c=mo(e,n).getOrThunk(()=>o(e));return r(c)},P9=(e,n,o)=>o(mo(e,n)),N9=(e,n,o,r)=>{const c=mo(e,n).map(u=>u===!0?o(e):u);return r(c)},B9=(e,n,o,r,c)=>{const u=v=>c.extract(n.concat([r]),v),m=v=>v.fold(()=>zn.svalue(L.none()),C=>{const E=c.extract(n.concat([r]),C);return zn.map(E,L.some)});switch(e.tag){case"required":return M9(n,o,r,u);case"defaultedThunk":return V$(o,r,e.process,u);case"option":return P9(o,r,m);case"defaultedOptionThunk":return N9(o,r,e.process,m);case"mergeWithThunk":return V$(o,r,et({}),v=>{const C=$C(e.process(o),v);return u(C)})}},$9=(e,n,o)=>{const r={},c=[];for(const u of o)R0(u,(m,v,C,E)=>{const D=B9(C,e,n,m,E);zn.fold(D,M=>{c.push(...M)},M=>{r[v]=M})},(m,v)=>{r[m]=v(n)});return c.length>0?zn.serror(c):zn.svalue(r)},iR=e=>({extract:(r,c)=>$9(r,c,e),toString:()=>`obj{
`+Xt(e,c=>R0(c,(u,m,v,C)=>u+" -> "+C.toString(),(u,m)=>"state("+u+")")).join(`
`)+"}"}),z$=e=>({extract:(r,c)=>{const u=Xt(c,(m,v)=>e.extract(r.concat(["["+v+"]"]),m));return H$.consolidateArr(u)},toString:()=>"array("+e.toString()+")"}),I9=e=>cR(n=>e(n).fold(zn.serror,zn.svalue)),F9=(e,n,o)=>{const r=n.extract([e],o);return zn.mapError(r,c=>({input:o,errors:c}))},L9=(e,n,o)=>zn.toResult(F9(e,n,o)),H9=e=>`Errors: 
`+k9(e.errors).join(`
`)+`

Input object: `+tR(e.input),lR=(e,n)=>L$(e,Ln(n,iR)),U$=et(D9),HC=(e,n)=>cR(o=>{const r=typeof o;return e(o)?zn.svalue(o):zn.serror(`Expected type: ${n} but got: ${r}`)}),V9=HC(Za,"number"),HE=HC(ee,"string"),z9=HC(bn,"boolean"),uR=HC(oe,"function"),D0=A9,W$=R9,Z$=e=>I9(n=>Gt(e,n)?Jr.value(n):Jr.error(`Unsupported value: "${n}", choose one of "${e.join(", ")}".`)),j$=(e,n)=>D0(e,e,IC(),n),dR=e=>j$(e,HE),fR=e=>j$(e,uR),U9=(e,n)=>D0(e,e,IC(),z$(n)),mR=(e,n)=>D0(e,e,Dl(),n),VE=e=>mR(e,HE),W9=e=>mR(e,uR),G$=(e,n)=>D0(e,e,A0(n),U$()),M0=(e,n,o)=>D0(e,e,A0(n),o),q$=(e,n)=>M0(e,n,V9),K$=(e,n)=>M0(e,n,HE),Y$=(e,n,o)=>M0(e,n,Z$(o)),gR=(e,n)=>M0(e,n,z9),zE=(e,n)=>M0(e,n,uR),Z9=(e,n,o)=>M0(e,n,z$(o)),j9=dR("type"),G9=fR("fetch"),UE=fR("onAction"),X$=zE("onSetup",()=>Bt),q9=VE("text"),K9=VE("icon"),Y9=VE("tooltip"),X9=VE("label"),J9=gR("active",!1),Q9=gR("enabled",!0),J$=gR("primary",!1),eU=e=>G$("columns",e),WE=e=>K$("type",e),tU=iR([j9,dR("trigger"),q$("minChars",1),eU(1),q$("maxResults",10),W9("matches"),G9,UE,Z9("highlightOn",[],HE)]),ZE=e=>L9("Autocompleter",tU,e),jE=[Q9,Y9,K9,q9,X$],hR=[J9].concat(jE),nU=[zE("predicate",De),Y$("scope","node",["node","editor"]),Y$("position","selection",["node","selection","line"])],Q$=jE.concat([WE("contextformbutton"),J$,UE,W$("original",zo)]),eI=hR.concat([WE("contextformbutton"),J$,UE,W$("original",zo)]),oU=jE.concat([WE("contextformbutton")]),sU=hR.concat([WE("contextformtogglebutton")]),rU=lR("type",{contextformbutton:Q$,contextformtogglebutton:eI});iR([WE("contextform"),zE("initValue",et("")),X9,U9("commands",rU),mR("launch",lR("type",{contextformbutton:oU,contextformtogglebutton:sU}))].concat(nU));const tI=e=>{const n=e.ui.registry.getAll().popups,o=Ln(n,m=>ZE(m).fold(v=>{throw new Error(H9(v))},zo)),r=r1(Au(o,m=>m.trigger)),c=dm(o);return{dataset:o,triggers:r,lookupByTrigger:m=>Mt(c,v=>v.trigger===m)}},aU=(e,n)=>{const o=Ju(n.load,50);e.on("input",r=>{r.inputType==="insertCompositionText"&&!e.composing||o.throttle()}),e.on("keydown",r=>{const c=r.which;c===8?o.throttle():c===27?(o.cancel(),n.cancelIfNecessary()):(c===38||c===40)&&o.cancel()},!0),e.on("remove",o.cancel)},pR=e=>{const n=vr(),o=lo(!1),r=n.isSet,c=()=>{r()&&(Nx(e),o.set(!1),n.clear())},u=M=>{r()||n.set({trigger:M.trigger,matchLength:M.text.length})},m=ol(()=>tI(e)),v=M=>n.get().map(B=>X3(e.dom,e.selection.getRng(),B.trigger,!0).bind(W=>P$(e,m,W,M))).getOrThunk(()=>x9(e,m)),C=M=>{v(M).fold(c,B=>{u(B.context),B.lookupData.then(W=>{n.get().map(q=>{const Z=B.context;q.trigger===Z.trigger&&(n.set({...q,matchLength:Z.text.length}),o.get()?(Px(e,{range:Z.range}),f2(e,{lookupData:W})):(o.set(!0),Px(e,{range:Z.range}),Mx(e,{lookupData:W})))})})})},E=(M,B)=>{const W=M.compareBoundaryPoints(window.Range.START_TO_START,B),q=M.compareBoundaryPoints(window.Range.END_TO_END,B);return W>=0&&q<=0},D=()=>n.get().bind(({trigger:M})=>{const B=e.selection.getRng();return X3(e.dom,B,M,o.get()).filter(({range:W})=>E(B,W)).map(({range:W})=>W)});e.addCommand("mceAutocompleterReload",(M,B)=>{const W=sn(B)?B.fetchOptions:{};C(W)}),e.addCommand("mceAutocompleterClose",c),e.addCommand("mceAutocompleterRefreshActiveRange",()=>{D().each(M=>{Px(e,{range:M})})}),e.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>D().isSome()),aU(e,{cancelIfNecessary:c,load:C})},cU=wi().browser.isSafari(),nI=e=>$a(X.fromDom(e)),bR=(e,n)=>{var o;return e.startOffset===0&&e.endOffset===((o=n.textContent)===null||o===void 0?void 0:o.length)},GE=(e,n)=>L.from(e.getParent(n.container(),"details")),oI=(e,n)=>GE(e,n).isSome(),iU=(e,n)=>{const o=L.from(e.getParent(n.startContainer,"details")),r=L.from(e.getParent(n.endContainer,"details"));if(o.isSome()||r.isSome()){const c=o.bind(u=>L.from(e.select("summary",u)[0]));return L.some({startSummary:c,startDetails:o,endDetails:r})}else return L.none()},lU=(e,n)=>Hr(n).exists(o=>o.isEqual(e)),uU=(e,n)=>ic(n).exists(o=>Bo(o.getNode())&&La(n,o).exists(r=>r.isEqual(e))||o.isEqual(e)),Js=(e,n)=>n.startSummary.exists(o=>lU(e,o)),Bd=(e,n)=>n.startSummary.exists(o=>uU(e,o)),dU=(e,n)=>n.startDetails.exists(o=>La(o,e).forall(r=>n.startSummary.exists(c=>!c.contains(e.container())&&c.contains(r.container())))),wK=(e,n,o)=>o.startDetails.exists(r=>Lr(e,n).forall(c=>!r.contains(c.container()))),sI=(e,n)=>{const o=n.getNode();fs(o)||e.selection.setCursorLocation(o,n.offset())},rI=(e,n,o)=>{const r=e.dom.getParent(n.container(),"details");if(r&&!r.open){const c=e.dom.select("summary",r)[0];c&&(o?Hr(c):ic(c)).each(m=>sI(e,m))}else sI(e,n)},fU=(e,n)=>{const o=C=>C.contains(e.startContainer),r=C=>C.contains(e.endContainer),c=n.startSummary.exists(o),u=n.startSummary.exists(r),m=n.startDetails.forall(C=>n.endDetails.forall(E=>C!==E));return(c||u)&&!(c&&u)||m},aI=(e,n,o)=>{const{dom:r,selection:c}=e,u=e.getBody();if(o==="character"){const m=he.fromRangeStart(c.getRng()),v=r.getParent(m.container(),r.isBlock),C=GE(r,m),E=v&&r.isEmpty(v),D=ae(v==null?void 0:v.previousSibling),M=ae(v==null?void 0:v.nextSibling);return E&&(n?M:D)&&iu(!n,u,m).exists(q=>oI(r,q)&&!ch(C,GE(r,q)))?!0:iu(n,u,m).fold(De,B=>{const W=GE(r,B);if(oI(r,B)&&!ch(C,W)){if(n||rI(e,B,!1),v&&E){if(n&&D)return!0;if(!n&&M)return!0;rI(e,B,n),e.dom.remove(v)}return!0}else return!1})}else return!1},cI=(e,n,o,r)=>{const u=e.selection.getRng(),m=he.fromRangeStart(u),v=e.getBody();return r==="selection"?fU(u,n):o?Bd(m,n)||wK(v,m,n):Js(m,n)||dU(m,n)},P0=(e,n,o)=>iU(e.dom,e.selection.getRng()).fold(()=>aI(e,n,o),r=>cI(e,r,n,o)||aI(e,n,o)),SK=(e,n,o)=>{const r=e.selection,c=r.getNode(),u=r.getRng(),m=he.fromRangeStart(u);return Vu(c)?(o==="selection"&&bR(u,c)||kg(n,m,c)?nI(c):e.undoManager.transact(()=>{const v=r.getSel();let{anchorNode:C,anchorOffset:E,focusNode:D,focusOffset:M}=v??{};const B=()=>{Ae(C)&&Ae(E)&&Ae(D)&&Ae(M)&&(v==null||v.setBaseAndExtent(C,E,D,M))},W=()=>{C=v==null?void 0:v.anchorNode,E=v==null?void 0:v.anchorOffset,D=v==null?void 0:v.focusNode,M=v==null?void 0:v.focusOffset},q=(K,ne)=>{we(K.childNodes,re=>{yg(re)&&ne.appendChild(re)})},Z=e.dom.create("span",{"data-mce-bogus":"1"});q(c,Z),c.appendChild(Z),B(),(o==="word"||o==="line")&&(v==null||v.modify("extend",n?"right":"left",o)),!r.isCollapsed()&&bR(r.getRng(),Z)?nI(c):(e.execCommand(n?"ForwardDelete":"Delete"),W(),q(Z,c),B()),e.dom.remove(Z)}),!0):!1},Fp=(e,n,o)=>P0(e,n,o)||cU&&SK(e,n,o)?L.some(Bt):L.none(),iI=e=>(n,o,r={})=>{const c=n.getBody(),u={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:c,currentTarget:c,eventPhase:Event.AT_TARGET,originalTarget:c,explicitOriginalTarget:c,isTrusted:!1,srcElement:c,cancelable:!1,preventDefault:Bt,inputType:o},m=ni(new InputEvent(e));return n.dispatch(e,{...m,...u,...r})},Ic=iI("input"),qE=iI("beforeinput"),lI=wi(),vR=lI.os,uI=vR.isMacOS()||vR.isiOS(),$d=lI.browser.isFirefox(),fI=(e,n,o)=>{const r=o.keyCode===He.BACKSPACE?"deleteContentBackward":"deleteContentForward",c=e.selection.isCollapsed(),u=c?"character":"selection",m=v=>c?v?"word":"line":"selection";l$([{keyCode:He.BACKSPACE,action:zt(N3,e)},{keyCode:He.BACKSPACE,action:zt(yC,e,!1)},{keyCode:He.DELETE,action:zt(yC,e,!0)},{keyCode:He.BACKSPACE,action:zt(Od,e,!1)},{keyCode:He.DELETE,action:zt(Od,e,!0)},{keyCode:He.BACKSPACE,action:zt(SE,e,n,!1)},{keyCode:He.DELETE,action:zt(SE,e,n,!0)},{keyCode:He.BACKSPACE,action:zt(o0,e,!1)},{keyCode:He.DELETE,action:zt(o0,e,!0)},{keyCode:He.BACKSPACE,action:zt(Fp,e,!1,u)},{keyCode:He.DELETE,action:zt(Fp,e,!0,u)},...uI?[{keyCode:He.BACKSPACE,altKey:!0,action:zt(Fp,e,!1,m(!0))},{keyCode:He.DELETE,altKey:!0,action:zt(Fp,e,!0,m(!0))},{keyCode:He.BACKSPACE,metaKey:!0,action:zt(Fp,e,!1,m(!1))}]:[{keyCode:He.BACKSPACE,ctrlKey:!0,action:zt(Fp,e,!1,m(!0))},{keyCode:He.DELETE,ctrlKey:!0,action:zt(Fp,e,!0,m(!0))}],{keyCode:He.BACKSPACE,action:zt(dE,e,!1)},{keyCode:He.DELETE,action:zt(dE,e,!0)},{keyCode:He.BACKSPACE,action:zt(M3,e,!1)},{keyCode:He.DELETE,action:zt(M3,e,!0)},{keyCode:He.BACKSPACE,action:zt(uE,e,!1)},{keyCode:He.DELETE,action:zt(uE,e,!0)},{keyCode:He.BACKSPACE,action:zt(em,e,!1)},{keyCode:He.DELETE,action:zt(em,e,!0)},{keyCode:He.BACKSPACE,action:zt(R3,e,!1)},{keyCode:He.DELETE,action:zt(R3,e,!0)}],o).filter(v=>e.selection.isEditable()).each(v=>{o.preventDefault(),qE(e,r).isDefaultPrevented()||(v(),Ic(e,r))})},mI=(e,n,o)=>k0([{keyCode:He.BACKSPACE,action:zt(u3,e)},{keyCode:He.DELETE,action:zt(u3,e)},...uI?[{keyCode:He.BACKSPACE,altKey:!0,action:zt(E0,e)},{keyCode:He.DELETE,altKey:!0,action:zt(E0,e)},...o?[{keyCode:$d?224:91,action:zt(E0,e)}]:[]]:[{keyCode:He.BACKSPACE,ctrlKey:!0,action:zt(E0,e)},{keyCode:He.DELETE,ctrlKey:!0,action:zt(E0,e)}]],n),mU=(e,n)=>{let o=!1;e.on("keydown",r=>{o=r.keyCode===He.BACKSPACE,r.isDefaultPrevented()||fI(e,n,r)}),e.on("keyup",r=>{r.isDefaultPrevented()||mI(e,r,o),o=!1})},KE=e=>{for(;e;){if(pt(e)||Me(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},Ug=(e,n)=>{const o=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!n)return;if(/^(LI|DT|DD)$/.test(n.nodeName)){const u=KE(n.firstChild);u&&/^(UL|OL|DL)$/.test(u.nodeName)&&n.insertBefore(o.doc.createTextNode(Us),n.firstChild)}const c=o.createRng();if(n.normalize(),n.hasChildNodes()){const u=new zs(n,n);let m=n,v;for(;v=u.current();){if(Me(v)){c.setStart(v,0),c.setEnd(v,0);break}if(r[v.nodeName.toLowerCase()]){c.setStartBefore(v),c.setEndBefore(v);break}m=v,v=u.next()}v||(c.setStart(m,0),c.setEnd(m,0))}else Bo(n)?n.nextSibling&&o.isBlock(n.nextSibling)?(c.setStartBefore(n),c.setEndBefore(n)):(c.setStartAfter(n),c.setEndAfter(n)):(c.setStart(n,0),c.setEnd(n,0));e.selection.setRng(c),S2(e,c)},N0=(e,n)=>{const o=e.getRoot();let r,c=n;for(;c!==o&&c&&e.getContentEditable(c)!=="false";){if(e.getContentEditable(c)==="true"){r=c;break}c=c.parentNode}return c!==o?r:o},YE=e=>L.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),gU=e=>YE(e).fold(et(""),n=>n.nodeName.toUpperCase()),hU=e=>YE(e).filter(n=>ga(X.fromDom(n))).isSome(),yR=e=>{e.innerHTML='<br data-mce-bogus="1">'},pU=(e,n,o)=>{const r=e.dom;L.from(o.style).map(r.parseStyle).each(C=>{const D={...tc(X.fromDom(n)),...C};r.setStyles(n,D)});const c=L.from(o.class).map(C=>C.split(/\s+/)),u=L.from(n.className).map(C=>Mt(C.split(/\s+/),E=>E!==""));mr(c,u,(C,E)=>{const D=Mt(E,B=>!Gt(C,B)),M=[...C,...D];r.setAttrib(n,"class",M.join(" "))});const m=["style","class"],v=_o(o,(C,E)=>!Gt(m,E));r.setAttribs(n,v)},VC=(e,n)=>{if(Sr(e).toLowerCase()===n.tagName.toLowerCase()){const r=ad(e);pU(e,n,r)}},CR=(e,n,o,r,c=!0,u,m)=>{const v=e.dom,C=e.schema,E=Sr(e),D=o?o.nodeName.toUpperCase():"";let M=n;const B=C.getTextInlineElements();let W;u||D==="TABLE"||D==="HR"?W=v.create(u||E,m||{}):W=o.cloneNode(!1);let q=W;if(!c)v.setAttrib(W,"style",null),v.setAttrib(W,"class",null);else do if(B[M.nodeName]){if(lc(M)||uc(M))continue;const Z=M.cloneNode(!1);v.setAttrib(Z,"id",""),W.hasChildNodes()?(Z.appendChild(W.firstChild),W.appendChild(Z)):(q=Z,W.appendChild(Z))}while((M=M.parentNode)&&M!==r);return VC(e,W),yR(q),W},bU=(e,n)=>e.dom.getParent(n,Ev),vU=(e,n,o)=>{let r=n;for(;r&&r!==e&&ae(r.nextSibling);){const c=r.parentElement;if(!c||!o(c))return Ev(c);r=c}return!1},yU=(e,n,o)=>!n&&o.nodeName.toLowerCase()===Sr(e)&&e.dom.isEmpty(o)&&vU(e.getBody(),o,r=>Ft(e.schema.getTextBlockElements(),r.nodeName.toLowerCase())),CU=(e,n,o)=>{var r,c,u;const m=n(Sr(e)),v=bU(e,o);v&&(e.dom.insertAfter(m,v),Ug(e,m),((u=(c=(r=o.parentElement)===null||r===void 0?void 0:r.childNodes)===null||c===void 0?void 0:c.length)!==null&&u!==void 0?u:0)>1&&e.dom.remove(o))},wU=(e,n)=>e.firstChild&&e.firstChild.nodeName===n,gI=e=>{var n;return((n=e.parentNode)===null||n===void 0?void 0:n.firstChild)===e},wR=(e,n)=>{const o=e==null?void 0:e.parentNode;return Ae(o)&&o.nodeName===n},hI=e=>Ae(e)&&/^(OL|UL|LI)$/.test(e.nodeName),SR=e=>Ae(e)&&/^(LI|DT|DD)$/.test(e.nodeName),xK=e=>hI(e)&&hI(e.parentNode),B0=e=>{const n=e.parentNode;return SR(n)?n:e},XE=(e,n,o)=>{let r=e[o?"firstChild":"lastChild"];for(;r&&!pt(r);)r=r[o?"nextSibling":"previousSibling"];return r===n},pI=e=>Wo(Au(tc(X.fromDom(e)),(n,o)=>`${o}: ${n};`),(n,o)=>n+o,""),SU=(e,n,o,r,c)=>{const u=e.dom,m=e.selection.getRng(),v=o.parentNode;if(o===e.getBody()||!v)return;xK(o)&&(c="LI");const C=SR(r)?pI(r):void 0;let E=SR(r)&&C?n(c,{style:pI(r)}):n(c);if(XE(o,r,!0)&&XE(o,r,!1))if(wR(o,"LI")){const D=B0(o);u.insertAfter(E,D),gI(o)?u.remove(D):u.remove(o)}else u.replace(E,o);else if(XE(o,r,!0))wR(o,"LI")?(u.insertAfter(E,B0(o)),E.appendChild(u.doc.createTextNode(" ")),E.appendChild(o)):v.insertBefore(E,o),u.remove(r);else if(XE(o,r,!1))u.insertAfter(E,B0(o)),u.remove(r);else{o=B0(o);const D=m.cloneRange();D.setStartAfter(r),D.setEndAfter(o);const M=D.extractContents();if(c==="LI"&&wU(M,"LI")){const B=Mt(Xt(E.children,X.fromDom),Uo(bm("br")));E=M.firstChild,u.insertAfter(M,o),we(B,W=>$u(X.fromDom(E),W)),C&&E.setAttribute("style",C)}else u.insertAfter(M,o),u.insertAfter(E,o);u.remove(r)}Ug(e,E)},bI=e=>{we(wv(X.fromDom(e),Co),n=>{const o=n.dom;o.nodeValue=Ia(o.data)})},xU=(e,n)=>{const o=e.dom.getParent(n,"ol,ul,dl");return o!==null&&e.dom.getContentEditableParent(o)==="false"},vI=(e,n)=>n&&n.nodeName==="A"&&e.isEmpty(n),xR=(e,n)=>e.nodeName===n||e.previousSibling&&e.previousSibling.nodeName===n,_R=(e,n)=>Ae(n)&&e.isBlock(n)&&!/^(TD|TH|CAPTION|FORM)$/.test(n.nodeName)&&!/^(fixed|absolute)/i.test(n.style.position)&&e.isEditable(n.parentNode)&&e.getContentEditable(n)!=="false",_K=(e,n,o)=>{var r;const c=[];if(!o)return;let u=o;for(;u=u.firstChild;){if(e.isBlock(u))return;pt(u)&&!n[u.nodeName.toLowerCase()]&&c.push(u)}let m=c.length;for(;m--;)u=c[m],(!u.hasChildNodes()||u.firstChild===u.lastChild&&((r=u.firstChild)===null||r===void 0?void 0:r.nodeValue)===""||vI(e,u))&&e.remove(u)},kr=(e,n,o)=>Me(n)?e?o===1&&n.data.charAt(o-1)===Ko?0:o:o===n.data.length-1&&n.data.charAt(o)===Ko?n.data.length:o:o,_U=e=>{const n=e.cloneRange();return n.setStart(e.startContainer,kr(!0,e.startContainer,e.startOffset)),n.setEnd(e.endContainer,kr(!1,e.endContainer,e.endOffset)),n},EU=e=>{let n=e;do Me(n)&&(n.data=n.data.replace(/^[\r\n]+/,"")),n=n.firstChild;while(n)},TU=(e,n,o,r,c)=>{var u,m;const v=e.dom,C=(u=N0(v,r))!==null&&u!==void 0?u:v.getRoot();let E=v.getParent(r,v.isBlock);if(!E||!_R(v,E)){if(E=E||C,!E.hasChildNodes()){const W=v.create(n);return VC(e,W),E.appendChild(W),o.setStart(W,0),o.setEnd(W,0),W}let D=r;for(;D&&D.parentNode!==E;)D=D.parentNode;let M;for(;D&&!v.isBlock(D);)M=D,D=D.previousSibling;const B=(m=M==null?void 0:M.parentElement)===null||m===void 0?void 0:m.nodeName;if(M&&B&&e.schema.isValidChild(B,n.toLowerCase())){const W=M.parentNode,q=v.create(n);for(VC(e,q),W.insertBefore(q,M),D=M;D&&!v.isBlock(D);){const Z=D.nextSibling;q.appendChild(D),D=Z}o.setStart(r,c),o.setEnd(r,c)}}return r},kU=(e,n)=>{n.normalize();const o=n.lastChild;(!o||pt(o)&&/^(left|right)$/gi.test(e.getStyle(o,"float",!0)))&&e.add(n,"br")},OU=(e,n)=>{const o=bs(e);return _n(n)?!1:ee(o)?Gt(ze.explode(o),n.nodeName.toLowerCase()):o},zC={insert:(e,n)=>{let o,r,c,u,m=!1;const v=e.dom,C=e.schema,E=C.getNonEmptyElements(),D=e.selection.getRng(),M=Sr(e),B=X.fromDom(D.startContainer),W=Bu(B,D.startOffset),q=W.exists(Ee=>jc(Ee)&&!Mn(Ee)),Z=D.collapsed&&q,K=(Ee,ot)=>CR(e,o,Ue,Oe,qk(e),Ee,ot),ne=Ee=>{const ot=kr(Ee,o,r);if(Me(o)&&(Ee?ot>0:ot<o.data.length))return!1;if((o.parentNode===Ue||o===Ue)&&m&&!Ee||Ee&&pt(o)&&o===Ue.firstChild)return!0;if(xR(o,"TABLE")||xR(o,"HR"))return m&&!Ee||!m&&Ee;const wt=new zs(o,Ue);Me(o)&&(Ee&&ot===0?wt.prev():!Ee&&ot===o.data.length&&wt.next());let Qt;for(;Qt=wt.current();){if(pt(Qt)){if(!Qt.getAttribute("data-mce-bogus")){const hn=Qt.nodeName.toLowerCase();if(E[hn]&&hn!=="br")return!1}}else if(Me(Qt)&&!rl(Qt.data))return!1;Ee?wt.prev():wt.next()}return!0},re=()=>{let Ee;return/^(H[1-6]|PRE|FIGURE)$/.test(c)&&st!=="HGROUP"?Ee=K(M):Ee=K(),OU(e,u)&&_R(v,u)&&v.isEmpty(Ue,void 0,{includeZwsp:!0})?Ee=v.split(u,Ue):v.insertAfter(Ee,Ue),Ug(e,Ee),Ee};Ye(v,D).each(Ee=>{D.setStart(Ee.startContainer,Ee.startOffset),D.setEnd(Ee.endContainer,Ee.endOffset)}),o=D.startContainer,r=D.startOffset;const se=!!(n&&n.shiftKey),ue=!!(n&&n.ctrlKey);pt(o)&&o.hasChildNodes()&&!Z&&(m=r>o.childNodes.length-1,o=o.childNodes[Math.min(r,o.childNodes.length-1)]||o,m&&Me(o)?r=o.data.length:r=0);const Oe=N0(v,o);if(!Oe||xU(e,o))return;se||(o=TU(e,M,D,o,r));let Ue=v.getParent(o,v.isBlock)||v.getRoot();u=Ae(Ue==null?void 0:Ue.parentNode)?v.getParent(Ue.parentNode,v.isBlock):null,c=Ue?Ue.nodeName.toUpperCase():"";const st=u?u.nodeName.toUpperCase():"";if(st==="LI"&&!ue){const Ee=u;Ue=Ee,u=Ee.parentNode,c=st}if(pt(u)&&yU(e,se,Ue))return CU(e,K,Ue);if(/^(LI|DT|DD)$/.test(c)&&pt(u)&&v.isEmpty(Ue)){SU(e,K,u,Ue,M);return}if(!Z&&(Ue===e.getBody()||!_R(v,Ue)))return;const $e=Ue.parentNode;let Ce;if(Z)Ce=K(M),W.fold(()=>{gs(B,X.fromDom(Ce))},Ee=>{hr(Ee,X.fromDom(Ce))}),e.selection.setCursorLocation(Ce,0);else if(Cf(Ue))Ce=vn(Ue),v.isEmpty(Ue)&&yR(Ue),VC(e,Ce),Ug(e,Ce);else if(ne(!1))Ce=re();else if(ne(!0)&&$e){Ce=$e.insertBefore(K(),Ue);const Ee=p1(X.fromDom(D.startContainer))&&D.collapsed;Ug(e,xR(Ue,"HR")||Ee?Ce:Ue)}else{const Ee=_U(D).cloneRange();Ee.setEndAfter(Ue);const ot=Ee.extractContents();bI(ot),EU(ot),Ce=ot.firstChild,v.insertAfter(ot,Ue),_K(v,E,Ce),kU(v,Ue),v.isEmpty(Ue)&&yR(Ue),Ce.normalize(),v.isEmpty(Ce)?(v.remove(Ce),re()):(VC(e,Ce),Ug(e,Ce))}v.setAttrib(Ce,"id",""),e.dispatch("NewBlock",{newBlock:Ce})},fakeEventName:"insertParagraph"},AU=(e,n,o)=>{const r=new zs(n,o);let c;const u=e.getNonEmptyElements();for(;c=r.next();)if(u[c.nodeName.toLowerCase()]||Me(c)&&c.length>0)return!0;return!1},yI=(e,n,o)=>{const r=e.dom.createRng();o?(r.setStartBefore(n),r.setEndBefore(n)):(r.setStartAfter(n),r.setEndAfter(n)),e.selection.setRng(r),S2(e,r)},ER=(e,n)=>{const o=e.selection,r=e.dom,c=o.getRng();let u,m=!1;Ye(r,c).each(W=>{c.setStart(W.startContainer,W.startOffset),c.setEnd(W.endContainer,W.endOffset)});let v=c.startOffset,C=c.startContainer;if(pt(C)&&C.hasChildNodes()){const W=v>C.childNodes.length-1;C=C.childNodes[Math.min(v,C.childNodes.length-1)]||C,W&&Me(C)?v=C.data.length:v=0}let E=r.getParent(C,r.isBlock);const D=E&&E.parentNode?r.getParent(E.parentNode,r.isBlock):null,M=D?D.nodeName.toUpperCase():"",B=!!(n&&n.ctrlKey);M==="LI"&&!B&&(E=D),Me(C)&&v>=C.data.length&&(AU(e.schema,C,E||r.getRoot())||(u=r.create("br"),c.insertNode(u),c.setStartAfter(u),c.setEndAfter(u),m=!0)),u=r.create("br"),zh(r,c,u),yI(e,u,m),e.undoManager.add()},TR=(e,n)=>{const o=X.fromTag("br");hr(X.fromDom(n),o),e.undoManager.add()},RU=(e,n)=>{OK(e.getBody(),n)||sl(X.fromDom(n),X.fromTag("br"));const o=X.fromTag("br");sl(X.fromDom(n),o),yI(e,o.dom,!1),e.undoManager.add()},kK=e=>Bo(e.getNode()),OK=(e,n)=>kK(he.after(n))?!0:Lr(e,he.after(n)).map(o=>Bo(o.getNode())).getOr(!1),DU=e=>e&&e.nodeName==="A"&&"href"in e,MU=e=>e.fold(De,DU,DU,De),PU=e=>{const n=Be(vp,e),o=he.fromRangeStart(e.selection.getRng());return Ad(n,e.getBody(),o).filter(MU)},AK=(e,n)=>{n.fold(Bt,Be(TR,e),Be(RU,e),Bt)},CI={insert:(e,n)=>{const o=PU(e);o.isSome()?o.each(Be(AK,e)):ER(e,n)},fakeEventName:"insertLineBreak"},kR=(e,n)=>YE(e).filter(o=>n.length>0&&Ja(X.fromDom(o),n)).isSome(),NU=e=>kR(e,cd(e)),BU=e=>kR(e,Gk(e)),hi=$n.generate([{br:[]},{block:[]},{none:[]}]),$U=(e,n)=>BU(e),wI=e=>(n,o)=>hU(n)===e,SI=(e,n)=>(o,r)=>gU(o)===e.toUpperCase()===n,IU=e=>{const n=N0(e.dom,e.selection.getStart());return _n(n)},Lp=e=>SI("pre",e),xI=()=>SI("summary",!0),Hp=e=>(n,o)=>IS(n)===e,FU=(e,n)=>NU(e),JE=(e,n)=>n,LU=e=>{const n=Sr(e),o=N0(e.dom,e.selection.getStart());return Ae(o)&&e.schema.isValidChild(o.nodeName,n)},HU=e=>{const n=e.selection.getRng(),o=X.fromDom(n.startContainer),c=Bu(o,n.startOffset).map(u=>jc(u)&&!Mn(u));return n.collapsed&&c.getOr(!0)},Yi=(e,n)=>(o,r)=>Wo(e,(u,m)=>u&&m(o,r),!0)?L.some(n):L.none(),_I=(e,n)=>m3([Yi([$U],hi.none()),Yi([Lp(!0),IU],hi.none()),Yi([xI()],hi.br()),Yi([Lp(!0),Hp(!1),JE],hi.br()),Yi([Lp(!0),Hp(!1)],hi.block()),Yi([Lp(!0),Hp(!0),JE],hi.block()),Yi([Lp(!0),Hp(!0)],hi.br()),Yi([wI(!0),JE],hi.br()),Yi([wI(!0)],hi.block()),Yi([FU],hi.br()),Yi([JE],hi.br()),Yi([LU],hi.block()),Yi([HU],hi.block())],[e,!!(n&&n.shiftKey)]).getOr(hi.none()),QE=(e,n,o)=>{n.selection.isCollapsed()||CP(n),!(Ae(o)&&qE(n,e.fakeEventName).isDefaultPrevented())&&(e.insert(n,o),Ae(o)&&Ic(n,e.fakeEventName))},OR=(e,n)=>{const o=()=>QE(CI,e,n),r=()=>QE(zC,e,n),c=_I(e,n);switch(nb(e)){case"linebreak":c.fold(o,o,Bt);break;case"block":c.fold(r,r,Bt);break;case"invert":c.fold(r,o,Bt);break;default:c.fold(o,r,Bt);break}},AR=wi(),VU=AR.os.isiOS()&&AR.browser.isSafari(),EI=(e,n)=>{n.isDefaultPrevented()||(n.preventDefault(),DA(e.undoManager),e.undoManager.transact(()=>{OR(e,n)}))},RR=e=>{if(!e.collapsed)return!1;const n=e.startContainer;if(Me(n)){const o=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,r=n.data.charAt(e.startOffset-1);return o.test(r)}else return!1},zU=e=>{let n=L.none();const o=c=>{n=L.some(c.selection.getBookmark()),c.undoManager.add()},r=(c,u)=>{c.undoManager.undo(),n.fold(Bt,m=>c.selection.moveToBookmark(m)),EI(c,u),n=L.none()};e.on("keydown",c=>{c.keyCode===He.ENTER&&(VU&&RR(e.selection.getRng())?o(e):EI(e,c))}),e.on("keyup",c=>{c.keyCode===He.ENTER&&n.each(()=>r(e,c))})},UU=(e,n,o)=>{const r=ct.os.isMacOS()||ct.os.isiOS();k0([{keyCode:He.END,action:zt(AE,e,!0)},{keyCode:He.HOME,action:zt(AE,e,!1)},...r?[]:[{keyCode:He.HOME,action:zt(RE,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:He.END,action:zt(RE,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:He.END,action:zt(f$,e,!0)},{keyCode:He.HOME,action:zt(f$,e,!1)},{keyCode:He.END,action:zt(RC,e,!0,n)},{keyCode:He.HOME,action:zt(RC,e,!1,n)}],o).each(c=>{o.preventDefault()})},eT=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||UU(e,n,o)})},WU=e=>{e.on("input",n=>{n.isComposing||fP(e)})},DR=wi(),MR=(e,n,o)=>{k0([{keyCode:He.PAGE_UP,action:zt(RC,e,!1,n)},{keyCode:He.PAGE_DOWN,action:zt(RC,e,!0,n)}],o)},PR=e=>e.stopImmediatePropagation(),TI=e=>e.keyCode===He.PAGE_UP||e.keyCode===He.PAGE_DOWN,ZU=(e,n,o)=>{o&&!e.get()?n.on("NodeChange",PR,!0):!o&&e.get()&&n.off("NodeChange",PR),e.set(o)},Wg=(e,n)=>{if(DR.os.isMacOS())return;const o=lo(!1);e.on("keydown",r=>{TI(r)&&ZU(o,e,!0)}),e.on("keyup",r=>{r.isDefaultPrevented()||MR(e,n,r),TI(r)&&o.get()&&(ZU(o,e,!1),e.nodeChanged())})},jU=e=>{e.on("beforeinput",n=>{(!e.selection.isEditable()||vo(n.getTargetRanges(),o=>!BM(e.dom,o)))&&n.preventDefault()})},kI=(e,n)=>{const o=n.container(),r=n.offset();return Me(o)?(o.insertData(r,e),L.some(he(o,r+e.length))):_b(n).map(c=>{const u=X.fromText(e);return n.isAtEnd()?sl(c,u):hr(c,u),he(u.dom,e.length)})},OI=Be(kI,Us),UC=Be(kI," "),AI=(e,n,o)=>hO(e,n,o)?OI(n):UC(n),RI=e=>n=>n.fold(o=>La(e.dom,he.before(o)),o=>Hr(o),o=>ic(o),o=>Lr(e.dom,he.after(o))),GU=(e,n,o)=>r=>hO(e,r,o)?OI(n):UC(n),NR=e=>n=>{e.selection.setRng(n.toRange()),e.nodeChanged()},qU=(e,n)=>e.isEditable(e.getParent(n,"summary")),KU=e=>{const n=he.fromRangeStart(e.selection.getRng()),o=X.fromDom(e.getBody());if(e.selection.isCollapsed()){const r=Be(vp,e),c=he.fromRangeStart(e.selection.getRng());return Ad(r,e.getBody(),c).bind(RI(o)).map(u=>()=>GU(o,n,e.schema)(u).each(NR(e)))}else return L.none()},YU=e=>{const n=()=>{const o=X.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete");const r=he.fromRangeStart(e.selection.getRng());AI(o,r,e.schema).each(NR(e))};return kn(ct.browser.isFirefox()&&e.selection.isEditable()&&qU(e.dom,e.selection.getRng().startContainer),n)},BR=(e,n)=>{l$([{keyCode:He.SPACEBAR,action:zt(KU,e)},{keyCode:He.SPACEBAR,action:zt(YU,e)}],n).each(o=>{n.preventDefault(),qE(e,"insertText",{data:" "}).isDefaultPrevented()||(o(),Ic(e,"insertText",{data:" "}))})},$R=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||BR(e,n)})},XU=e=>a4(e)?[{keyCode:He.TAB,action:zt(h9,e,!0)},{keyCode:He.TAB,shiftKey:!0,action:zt(h9,e,!1)}]:[],IR=(e,n)=>{k0([...XU(e)],n).each(o=>{n.preventDefault()})},DI=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||IR(e,n)})},tT=e=>{if(e.addShortcut("Meta+P","","mcePrint"),pR(e),Td(e))return lo(null);{const n=bz(e);return jU(e),Fz(e),pK(e,n),mU(e,n),zU(e),$R(e),WU(e),DI(e),eT(e,n),Wg(e,n),n}};class MI{constructor(n){this.lastPath=[],this.editor=n;let o;const r=this;"onselectionchange"in n.getDoc()||n.on("NodeChange click mouseup keyup focus",c=>{const u=n.selection.getRng(),m={startContainer:u.startContainer,startOffset:u.startOffset,endContainer:u.endContainer,endOffset:u.endOffset};(c.type==="nodechange"||!y(m,o))&&n.dispatch("SelectionChange"),o=m}),n.on("contextmenu",()=>{x2(n),n.dispatch("SelectionChange")}),n.on("SelectionChange",()=>{const c=n.selection.getStart(!0);c&&o2(n)&&!r.isSameElementPath(c)&&n.dom.isChildOf(c,n.getBody())&&n.nodeChanged({selectionChange:!0})}),n.on("mouseup",c=>{!c.isDefaultPrevented()&&o2(n)&&(n.selection.getNode().nodeName==="IMG"?ai.setEditorTimeout(n,()=>{n.nodeChanged()}):n.nodeChanged())})}nodeChanged(n={}){const o=this.editor.selection;let r;if(this.editor.initialized&&o&&!cb(this.editor)&&!this.editor.mode.isReadOnly()){const c=this.editor.getBody();r=o.getStart(!0)||c,(r.ownerDocument!==this.editor.getDoc()||!this.editor.dom.isChildOf(r,c))&&(r=c);const u=[];this.editor.dom.getParent(r,m=>m===c?!0:(u.push(m),!1)),this.editor.dispatch("NodeChange",{...n,element:r,parents:u})}}isSameElementPath(n){let o;const r=this.editor,c=$o(r.dom.getParents(n,dt,r.getBody()));if(c.length===this.lastPath.length){for(o=c.length;o>=0&&c[o]===this.lastPath[o];o--);if(o===-1)return this.lastPath=c,!0}return this.lastPath=c,!1}}const FR=Zm("image"),JU=e=>{const n=e;return L.from(n[FR])},QU=(e,n)=>{const o=e;o[FR]=n},$0=Zm("event"),PI=e=>{const n=e;return L.from(n[$0])},nT=e=>n=>{const o=n;o[$0]=e},eW=(e,n)=>nT(n)(e),LR=nT(0),tW=nT(2),nW=nT(1),oW=(e=>n=>{const o=n;return L.from(o[$0]).exists(r=>r===e)})(0),sW=()=>Object.freeze({length:0,item:e=>null}),oT=Zm("mode"),rW=e=>{const n=e;return L.from(n[oT])},WC=e=>n=>{const o=n;o[oT]=e},NI=(e,n)=>WC(n)(e),BI=WC(0),HR=WC(2),aW=WC(1),$I=e=>n=>{const o=n;return L.from(o[oT]).exists(r=>r===e)},_u=$I(0),II=$I(1),cW=(e,n)=>({...n,get length(){return n.length},add:(o,r)=>{if(_u(e))if(ee(o)){if(!fs(r))return n.add(o,r)}else return n.add(o);return null},remove:o=>{_u(e)&&n.remove(o)},clear:()=>{_u(e)&&n.clear()}}),FI=["none","copy","link","move"],iW=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],VR=()=>{const e=new window.DataTransfer;let n="move",o="all";const r={get dropEffect(){return n},set dropEffect(c){Gt(FI,c)&&(n=c)},get effectAllowed(){return o},set effectAllowed(c){oW(r)&&Gt(iW,c)&&(o=c)},get items(){return cW(r,e.items)},get files(){return II(r)?sW():e.files},get types(){return e.types},setDragImage:(c,u,m)=>{_u(r)&&(QU(r,{image:c,x:u,y:m}),e.setDragImage(c,u,m))},getData:c=>II(r)?"":e.getData(c),setData:(c,u)=>{_u(r)&&e.setData(c,u)},clearData:c=>{_u(r)&&e.clearData(c)}};return BI(r),r},lW=e=>{const n=VR(),o=rW(e);return HR(e),LR(n),n.dropEffect=e.dropEffect,n.effectAllowed=e.effectAllowed,JU(e).each(r=>n.setDragImage(r.image,r.x,r.y)),we(e.types,r=>{r!=="Files"&&n.setData(r,e.getData(r))}),we(e.files,r=>n.items.add(r)),PI(e).each(r=>{eW(n,r)}),o.each(r=>{NI(e,r),NI(n,r)}),n},LI=e=>{const n=e.getData("text/html");return n===""?L.none():L.some(n)},HI=(e,n)=>e.setData("text/html",n),VI="x-tinymce/html",zR=et(VI),I0="<!-- "+VI+" -->",uW=e=>I0+e,dW=e=>e.replace(I0,""),zI=e=>e.indexOf(I0)!==-1,fW=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),mW=(e,n)=>{let o="<"+e;const r=Au(n,(c,u)=>u+'="'+qu.encodeAllRaw(c)+'"');return r.length&&(o+=" "+r.join(" ")),o+">"},gW=(e,n,o)=>{const r=e.split(/\n\n/),c=mW(n,o),u="</"+n+">",m=Xt(r,C=>C.split(/\n/).join("<br />")),v=C=>c+C+u;return m.length===1?m[0]:Xt(m,v).join("")},UI="%MCEPASTEBIN%",hW=(e,n)=>{const{dom:o,selection:r}=e,c=e.getBody();n.set(r.getRng());const u=o.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},UI);ct.browser.isFirefox()&&o.setStyle(u,"left",o.getStyle(c,"direction",!0)==="rtl"?65535:-65535),o.bind(u,"beforedeactivate focusin focusout",m=>{m.stopPropagation()}),u.focus(),r.select(u,!0)},pW=(e,n)=>{const o=e.dom;if(UR(e)){let r;const c=n.get();for(;r=UR(e);)o.remove(r),o.unbind(r);c&&e.selection.setRng(c)}n.set(null)},UR=e=>e.dom.get("mcepastebin"),bW=e=>Ae(e)&&e.id==="mcepastebin",vW=e=>{const n=e.dom,o=(m,v)=>{m.appendChild(v),n.remove(v,!0)},[r,...c]=Mt(e.getBody().childNodes,bW);we(c,m=>{o(r,m)});const u=n.select("div[id=mcepastebin]",r);for(let m=u.length-1;m>=0;m--){const v=n.create("div");r.insertBefore(v,u[m]),o(v,u[m])}return r?r.innerHTML:""},WI=e=>e===UI,ro=e=>{const n=lo(null);return{create:()=>hW(e,n),remove:()=>pW(e,n),getEl:()=>UR(e),getHtml:()=>vW(e),getLastRng:n.get}},ZI=(e,n)=>(ze.each(n,o=>{Gn(o,RegExp)?e=e.replace(o,""):e=e.replace(o[0],o[1])}),e),jI=e=>{const n=Bn(),o=m0({},n);let r="";const c=n.getVoidElements(),u=ze.makeMap("script noscript style textarea video audio iframe object"," "),m=n.getBlockElements(),v=C=>{const E=C.name,D=C;if(E==="br"){r+=`
`;return}if(E!=="wbr"){if(c[E]&&(r+=" "),u[E]){r+=" ";return}if(C.type===3&&(r+=C.value),!(C.name in n.getVoidElements())){let M=C.firstChild;if(M)do v(M);while(M=M.next)}m[E]&&D.next&&(r+=`
`,E==="p"&&(r+=`
`))}};return e=ZI(e,[/<!\[[^\]]+\]>/g]),v(o.parse(e)),r},GI=e=>(e=ZI(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(o,r,c)=>!r&&!c?" ":Us],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),WR=e=>{let n=0;return()=>e+n++},qI=e=>{const n=e.toLowerCase(),o={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return ze.hasOwn(o,n)?"image/"+o[n]:"image/"+n},yW=(e,n)=>{const o=m0({sanitize:gb(e),sandbox_iframes:hb(e),sandbox_iframes_exclusions:pb(e),convert_unsafe_embeds:i4(e)},e.schema);o.addNodeFilter("meta",c=>{ze.each(c,u=>{u.remove()})});const r=o.parse(n,{forced_root_block:!1,isRootContent:!0});return Uf({validate:!0},e.schema).serialize(r)},KI=(e,n)=>({content:e,cancelled:n}),YI=(e,n,o)=>{const r=e.dom.create("div",{style:"display:none"},n),c=I4(e,r,o);return KI(c.node.innerHTML,c.isDefaultPrevented())},ZR=(e,n,o)=>{const r=$4(e,n,o),c=yW(e,r.content);return e.hasEventListeners("PastePostProcess")&&!r.isDefaultPrevented()?YI(e,c,o):KI(c,r.isDefaultPrevented())},CW=(e,n,o)=>ZR(e,n,o),jR=(e,n)=>(e.insertContent(n,{merge:JS(e),paste:!0}),!0),GR=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),XI=(e,n)=>GR(n)&&vo(Xh(e),o=>zl(n.toLowerCase(),`.${o.toLowerCase()}`)),wW=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.insertContent('<img src="'+n+'">')}),!0),SW=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.execCommand("mceInsertLink",!1,n)}),!0),F0=(e,n,o)=>!e.selection.isCollapsed()&&GR(n)?SW(e,n,o):!1,xW=(e,n,o)=>XI(e,n)?wW(e,n,o):!1,L0=(e,n)=>{ze.each([F0,xW,jR],o=>!o(e,n,jR))},ZC=(e,n,o)=>{o||!QS(e)?jR(e,n):L0(e,n)},_W=WR("mceclip"),EW=e=>{const n=VR();return HI(n,e),HR(n),n},Vp=(e,n,o,r,c)=>{const u=CW(e,n,o);if(!u.cancelled){const m=u.content,v=()=>ZC(e,m,r);c?qE(e,"insertFromPaste",{dataTransfer:EW(m)}).isDefaultPrevented()||(v(),Ic(e,"insertFromPaste")):v()}},sT=(e,n,o,r)=>{const c=o||zI(n);Vp(e,dW(n),c,!1,r)},jC=(e,n,o)=>{const r=e.dom.encode(n).replace(/\r\n/g,`
`),c=vh(r,ub(e)),u=gW(c,Sr(e),ad(e));Vp(e,u,!1,!0,o)},JI=e=>{const n={};if(e&&e.types)for(let o=0;o<e.types.length;o++){const r=e.types[o];try{n[r]=e.getData(r)}catch{n[r]=""}}return n},nm=(e,n)=>n in e&&e[n].length>0,qR=e=>nm(e,"text/html")||nm(e,"text/plain"),KR=(e,n)=>{const o=n.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return Ae(o)?e.dom.encode(o[1]):void 0},QI=(e,n,o,r)=>{const c=_W(),u=vs(e)&&Ae(o.name),m=u?KR(e,o.name):c,v=u?o.name:void 0,C=n.create(c,o,r,m,v);return n.add(C),C},TW=(e,n)=>{Tp(n.uri).each(({data:o,type:r,base64Encoded:c})=>{const u=c?o:btoa(o),m=n.file,v=e.editorUpload.blobCache,C=v.getByData(u,r),E=C??QI(e,v,m,u);sT(e,`<img src="${E.blobUri()}">`,!1,!0)})},kW=e=>e.type==="paste",eF=e=>Promise.all(Xt(e,n=>PN(n).then(o=>({file:n,uri:o})))),OW=e=>{const n=Xh(e);return o=>ms(o.type,"image/")&&vo(n,r=>qI(r)===o.type)},tF=(e,n)=>{const o=n.items?vc(_a(n.items),c=>c.kind==="file"?[c.getAsFile()]:[]):[],r=n.files?_a(n.files):[];return Mt(o.length>0?o:r,OW(e))},rT=(e,n,o)=>{const r=kW(n)?n.clipboardData:n.dataTransfer;if(Yh(e)&&r){const c=tF(e,r);if(c.length>0)return n.preventDefault(),eF(c).then(u=>{o&&e.selection.setRng(o),we(u,m=>{TW(e,m)})}),!0}return!1},nF=e=>{var n,o;return ct.os.isAndroid()&&((o=(n=e.clipboardData)===null||n===void 0?void 0:n.items)===null||o===void 0?void 0:o.length)===0},AW=e=>He.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,YR=(e,n,o,r,c)=>{let u=GI(o);const m=nm(n,zR())||zI(o),v=!m&&fW(u),C=GR(u);(WI(u)||!u.length||v&&!C)&&(r=!0),(r||C)&&(nm(n,"text/plain")&&v?u=n["text/plain"]:u=jI(u)),!WI(u)&&(r?jC(e,u,c):sT(e,u,m,c))},RW=(e,n,o)=>{let r;const c=()=>n.getLastRng()||e.selection.getRng();e.on("keydown",u=>{AW(u)&&!u.isDefaultPrevented()&&(r=u.shiftKey&&u.keyCode===86)}),e.on("paste",u=>{if(u.isDefaultPrevented()||nF(u))return;const m=o.get()==="text"||r;r=!1;const v=JI(u.clipboardData);!qR(v)&&rT(e,u,c())||(nm(v,"text/html")?(u.preventDefault(),YR(e,v,v["text/html"],m,!0)):nm(v,"text/plain")&&nm(v,"text/uri-list")?(u.preventDefault(),YR(e,v,v["text/plain"],m,!0)):(n.create(),ai.setEditorTimeout(e,()=>{const C=n.getHtml();n.remove(),YR(e,v,C,m,!1)},0)))})},oF=e=>{const n=c=>ms(c,"webkit-fake-url"),o=c=>ms(c,"data:"),r=c=>{var u;return((u=c.data)===null||u===void 0?void 0:u.paste)===!0};e.parser.addNodeFilter("img",(c,u,m)=>{if(!Yh(e)&&r(m))for(const v of c){const C=v.attr("src");ee(C)&&!v.attr("data-mce-object")&&C!==ct.transparentSrc&&(n(C)||!rg(e)&&o(C))&&v.remove()}})},XR=(e,n,o)=>{RW(e,n,o),oF(e)},DW=(e,n)=>{n.get()==="text"?(n.set("html"),jb(e,!1)):(n.set("text"),jb(e,!0)),e.focus()},sF=(e,n)=>{e.addCommand("mceTogglePlainTextPaste",()=>{DW(e,n)}),e.addCommand("mceInsertClipboardContent",(o,r)=>{r.html&&sT(e,r.html,r.internal,!1),r.text&&jC(e,r.text,!1)})},rF=(e,n,o)=>{if(e)try{return e.clearData(),e.setData("text/html",n),e.setData("text/plain",o),e.setData(zR(),n),!0}catch{return!1}else return!1},aF=(e,n,o,r)=>{rF(e.clipboardData,n.html,n.text)?(e.preventDefault(),r()):o(n.html,r)},JR=e=>(n,o)=>{const{dom:r,selection:c}=e,u=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),m=r.create("div",{contenteditable:"true"},n);r.setStyles(u,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),u.appendChild(m),r.add(e.getBody(),u);const v=c.getRng();m.focus();const C=r.createRng();C.selectNodeContents(m),c.setRng(C),ai.setEditorTimeout(e,()=>{c.setRng(v),r.remove(u),o()},0)},cF=e=>({html:uW(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),MW=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),iF=e=>!e.selection.isCollapsed()||MW(e),PW=e=>n=>{!n.isDefaultPrevented()&&iF(e)&&e.selection.isEditable()&&aF(n,cF(e),JR(e),()=>{if(ct.browser.isChromium()||ct.browser.isFirefox()){const o=e.selection.getRng();ai.setEditorTimeout(e,()=>{e.selection.setRng(o),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},NW=e=>n=>{!n.isDefaultPrevented()&&iF(e)&&aF(n,cF(e),JR(e),Bt)},aT=e=>{e.on("cut",PW(e)),e.on("copy",NW(e))},lF=(e,n)=>{var o,r;return Re.getCaretRangeFromPoint((o=n.clientX)!==null&&o!==void 0?o:0,(r=n.clientY)!==null&&r!==void 0?r:0,e.getDoc())},uF=e=>{const n=e["text/plain"];return n?n.indexOf("file://")===0:!1},dF=(e,n)=>{e.focus(),n&&e.selection.setRng(n)},BW=e=>vo(e.files,n=>/^image\//.test(n.type)),fF=(e,n,o,r)=>{const c=e.getParent(o,m=>Wu(n,m));if(!ae(e.getParent(o,"summary")))return!0;if(c&&Ft(r,"text/html")){const m=new DOMParser().parseFromString(r["text/html"],"text/html").body;return!ae(m.querySelector(c.nodeName.toLowerCase()))}else return!1},mF=e=>{e.on("input",n=>{const o=r=>ae(r.querySelector("summary"));if(n.inputType==="deleteByDrag"){const r=Mt(e.dom.select("details"),o);we(r,c=>{Bo(c.firstChild)&&c.firstChild.remove();const u=e.dom.create("summary");u.appendChild(Xm().dom),c.prepend(u)})}})},$W=(e,n)=>{My(e)&&e.on("dragend dragover draggesture dragdrop drop drag",o=>{o.preventDefault(),o.stopPropagation()}),Yh(e)||e.on("drop",o=>{const r=o.dataTransfer;r&&BW(r)&&o.preventDefault()}),e.on("drop",o=>{if(o.isDefaultPrevented())return;const r=lF(e,o);if(_n(r))return;const c=JI(o.dataTransfer),u=nm(c,zR());if((!qR(c)||uF(c))&&rT(e,o,r))return;const m=c[zR()],v=m||c["text/html"]||c["text/plain"],C=fF(e.dom,e.schema,r.startContainer,c),E=n.get();E&&!C||v&&(o.preventDefault(),ai.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{(m||E&&C)&&e.execCommand("Delete"),dF(e,r);const D=GI(v);c["text/html"]?sT(e,D,u,!0):jC(e,D,!0)})}))}),e.on("dragstart",o=>{n.set(!0)}),e.on("dragover dragend",o=>{Yh(e)&&!n.get()&&(o.preventDefault(),dF(e,lF(e,o))),o.type==="dragend"&&n.set(!1)}),mF(e)},IW=e=>{const n=c=>u=>{c(e,u)},o=Py(e);oe(o)&&e.on("PastePreProcess",n(o));const r=KS(e);oe(r)&&e.on("PastePostProcess",n(r))},FW=(e,n)=>{e.on("PastePreProcess",o=>{o.content=n(e,o.content,o.internal)})},LW=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,gF=e=>ze.trim(e).replace(LW,Mi).toLowerCase(),hF=(e,n,o)=>{const r=XS(e);if(o||r==="all"||!n4(e))return n;const c=r?r.split(/[, ]/):[];if(c&&r!=="none"){const u=e.dom,m=e.selection.getNode();n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(v,C,E,D)=>{const M=u.parseStyle(u.decode(E)),B={};for(let q=0;q<c.length;q++){const Z=M[c[q]];let K=Z,ne=u.getStyle(m,c[q],!0);/color/.test(c[q])&&(K=gF(K),ne=gF(ne)),ne!==K&&(B[c[q]]=Z)}const W=u.serializeStyle(B,"span");return W?C+' style="'+W+'"'+D:C+D})}else n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return n=n.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(u,m,v,C)=>m+' style="'+v+'"'+C),n},HW=e=>{(ct.browser.isChromium()||ct.browser.isSafari())&&FW(e,hF)},VW=e=>{const n=lo(!1),o=lo(ex(e)?"text":"html"),r=ro(e);HW(e),sF(e,o),IW(e),e.on("PreInit",()=>{aT(e),$W(e,n),XR(e,r,o)})},zW=e=>{e.on("click",n=>{e.dom.getParent(n.target,"details")&&n.preventDefault()})},UW=e=>{e.parser.addNodeFilter("details",n=>{const o=c4(e);we(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})}),e.serializer.addNodeFilter("details",n=>{const o=nx(e);we(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})})},WW=e=>{zW(e),UW(e)},ZW=Bo,pF=Me,jW=e=>ho(e.dom),bF=e=>as(e.dom),QR=e=>n=>Wn(X.fromDom(e),n),GW=(e,n,o)=>Nr(X.fromDom(e),r=>bF(r)||o.isBlock(On(r)),QR(n)).getOr(X.fromDom(n)).dom,vF=(e,n)=>Nr(X.fromDom(e),jW,QR(n)),yF=(e,n,o)=>{const r=new zs(e,n),c=o?r.next.bind(r):r.prev.bind(r);let u=e;for(let m=o?e:c();m&&!ZW(m);m=c())Ii(m)&&(u=m);return u},qW=(e,n,o)=>{const c=he.fromRangeStart(e).getNode(),u=GW(c,n,o),m=yF(c,u,!1),v=yF(c,u,!0),C=document.createRange();return vF(m,u).fold(()=>{pF(m)?C.setStart(m,0):C.setStartBefore(m)},E=>C.setStartBefore(E.dom)),vF(v,u).fold(()=>{pF(v)?C.setEnd(v,v.data.length):C.setEndAfter(v)},E=>C.setEndAfter(E.dom)),C},KW=e=>{const n=qW(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(Pn(n))},YW=e=>{e.on("mousedown",n=>{n.detail>=3&&(n.preventDefault(),KW(e))})};var H0;(function(e){e.Before="before",e.After="after"})(H0||(H0={}));const cT=(e,n)=>Math.abs(e.left-n),CF=(e,n)=>Math.abs(e.right-n),XW=(e,n)=>e>=n.top&&e<=n.bottom,wF=(e,n)=>e.top<n.bottom&&e.bottom>n.top,SF=(e,n)=>{const o=Ok(e,n)/Math.min(e.height,n.height);return wF(e,n)&&o>.5},eD=(e,n)=>{const o=Mt(e,r=>XW(n,r));return wo(o).fold(()=>[[],e],r=>{const{pass:c,fail:u}=Rr(e,m=>SF(m,r));return[c,u]})},JW=(e,n)=>({node:e.node,position:cT(e,n)<CF(e,n)?H0.Before:H0.After}),xF=(e,n,o)=>n>e.left&&n<e.right?0:Math.min(Math.abs(e.left-n),Math.abs(e.right-n)),tD=(e,n,o,r)=>{const c=M=>Ii(M.node)?L.some(M):pt(M.node)?tD(_a(M.node.childNodes),n,o,!1):L.none(),u=(M,B,W)=>c(B).filter(q=>Math.abs(W(M,n,o)-W(q,n,o))<2&&Me(q.node)),m=(M,B)=>{const W=Io(M,(q,Z)=>B(q,n,o)-B(Z,n,o));return jd(W,c).map(q=>r&&!Me(q.node)&&W.length>1?u(q,W[1],B).getOr(q):q)},[v,C]=eD(O5(e),o),{pass:E,fail:D}=Rr(C,M=>M.top<o);return m(v,xF).orThunk(()=>m(D,Qv)).orThunk(()=>m(E,Qv))},_F=(e,n,o,r)=>{const c=(u,m)=>{const v=E=>pt(E)&&E.classList.contains("mce-drag-container"),C=Mt(u.dom.childNodes,Uo(v));return m.fold(()=>tD(C,o,r,!0),E=>{const D=Mt(C,M=>M!==E.dom);return tD(D,o,r,!0)}).orThunk(()=>(Wn(u,e)?L.none():mh(u)).bind(D=>c(D,L.some(u))))};return c(n,L.none())},QW=(e,n,o)=>{const r=X.fromDom(e),c=jr(r),m=X.fromPoint(c,n,o).filter(v=>_i(r,v)).getOr(r);return _F(r,m,n,o)},nD=(e,n,o)=>QW(e,n,o).filter(r=>ru(r.node)).map(r=>JW(r,n)),EF=e=>{var n,o;const r=e.getBoundingClientRect(),c=e.ownerDocument,u=c.documentElement,m=c.defaultView;return{top:r.top+((n=m==null?void 0:m.scrollY)!==null&&n!==void 0?n:0)-u.clientTop,left:r.left+((o=m==null?void 0:m.scrollX)!==null&&o!==void 0?o:0)-u.clientLeft}},eZ=e=>e.inline?EF(e.getBody()):{left:0,top:0},tZ=e=>{const n=e.getBody();return e.inline?{left:n.scrollLeft,top:n.scrollTop}:{left:0,top:0}},GC=e=>{const n=e.getBody(),o=e.getDoc().documentElement,r={left:n.scrollLeft,top:n.scrollTop},c={left:n.scrollLeft||o.scrollLeft,top:n.scrollTop||o.scrollTop};return e.inline?r:c},nZ=(e,n)=>{if(n.target.ownerDocument!==e.getDoc()){const o=EF(e.getContentAreaContainer()),r=GC(e);return{left:n.pageX-o.left+r.left,top:n.pageY-o.top+r.top}}return{left:n.pageX,top:n.pageY}},oZ=(e,n,o)=>({pageX:o.left-e.left+n.left,pageY:o.top-e.top+n.top}),TF=(e,n)=>oZ(eZ(e),tZ(e),nZ(e,n)),kF=e=>({target:e,srcElement:e}),sZ=(e,n,o,r)=>({...n,dataTransfer:r,type:e,...kF(o)}),rZ=(e,n,o)=>{const r=ja("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:r,initEvent:r,preventDefault:Bt,stopImmediatePropagation:Bt,stopPropagation:Bt,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:r,initMouseEvent:r,getModifierState:r,dataTransfer:o,...kF(n)}},aZ=(e,n)=>{const o=lW(e);return n==="dragstart"?(LR(o),BI(o)):n==="drop"?(tW(o),HR(o)):(nW(o),aW(o)),o},cZ=(e,n,o,r)=>{const c=aZ(o,e);return fs(r)?rZ(e,n,c):sZ(e,r,n,c)},zp=32,OF=100,qC=8,iT=16,AF=ho,iZ=ey(AF,as),MK=(e,n,o)=>AF(o)&&o!==n&&e.isEditable(o.parentElement),lZ=(e,n,o)=>_n(n)||n===o||e.dom.isChildOf(n,o)?!1:e.dom.isEditable(n),RF=(e,n,o,r)=>{const c=e.dom,u=n.cloneNode(!0);c.setStyles(u,{width:o,height:r}),c.setAttrib(u,"data-mce-selected",null);const m=c.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return c.setStyles(m,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:o,height:r}),c.setStyles(u,{margin:0,boxSizing:"border-box"}),m.appendChild(u),m},oD=(e,n)=>{e.parentNode!==n&&n.appendChild(e)},Up=(e,n)=>o=>()=>{const r=e==="left"?o.scrollX:o.scrollY;o.scroll({[e]:r+n,behavior:"smooth"})},DF=Up("left",-zp),MF=Up("left",zp),sD=Up("top",-zp),PF=Up("top",zp),rD=(e,n,o,r,c,u,m,v,C,E,D,M)=>{let B=0,W=0;e.style.left=n.pageX+"px",e.style.top=n.pageY+"px",n.pageX+o>c&&(B=n.pageX+o-c),n.pageY+r>u&&(W=n.pageY+r-u),e.style.width=o-B+"px",e.style.height=r-W+"px";const q=C.clientHeight,Z=C.clientWidth,K=m+C.getBoundingClientRect().top,ne=v+C.getBoundingClientRect().left;D.on(re=>{re.intervalId.clear(),re.dragging&&M&&(m+qC>=q?re.intervalId.set(PF(E)):m-qC<=0?re.intervalId.set(sD(E)):v+qC>=Z?re.intervalId.set(MF(E)):v-qC<=0?re.intervalId.set(DF(E)):K+iT>=window.innerHeight?re.intervalId.set(PF(window)):K-iT<=0?re.intervalId.set(sD(window)):ne+iT>=window.innerWidth?re.intervalId.set(MF(window)):ne-iT<=0&&re.intervalId.set(DF(window)))})},aD=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},uZ=(e,n)=>{const o=e.getParent(n.parentNode,e.isBlock);aD(n),o&&o!==e.getRoot()&&e.isEmpty(o)&&$a(X.fromDom(o))},dZ=e=>e.button===0,NF=(e,n)=>({pageX:n.pageX-e.relX,pageY:n.pageY+5}),fZ=(e,n)=>o=>{if(dZ(o)){const r=ss(n.dom.getParents(o.target),iZ).getOr(null);if(Ae(r)&&MK(n.dom,n.getBody(),r)){const c=n.dom.getPos(r),u=n.getBody(),m=n.getDoc().documentElement;e.set({element:r,dataTransfer:VR(),dragging:!1,screenX:o.screenX,screenY:o.screenY,maxX:(n.inline?u.scrollWidth:m.offsetWidth)-2,maxY:(n.inline?u.scrollHeight:m.offsetHeight)-2,relX:o.pageX-c.x,relY:o.pageY-c.y,width:r.offsetWidth,height:r.offsetHeight,ghost:RF(n,r,r.offsetWidth,r.offsetHeight),intervalId:ll(OF)})}}},PK=(e,n,o)=>{e._selectionOverrides.hideFakeCaret(),nD(e.getBody(),n,o).fold(()=>e.selection.placeCaretAt(n,o),r=>{const c=e._selectionOverrides.showCaret(1,r.node,r.position===H0.Before,!1);c?e.selection.setRng(c):e.selection.placeCaretAt(n,o)})},KC=(e,n,o,r,c)=>{n==="dragstart"&&HI(r,e.dom.getOuterHTML(o));const u=cZ(n,o,r,c);return e.dispatch(n,u)},mZ=(e,n)=>{const o=Ph((c,u)=>PK(n,c,u),0);n.on("remove",o.cancel);const r=e;return c=>e.on(u=>{const m=Math.max(Math.abs(c.screenX-u.screenX),Math.abs(c.screenY-u.screenY));if(!u.dragging&&m>10){const v=KC(n,"dragstart",u.element,u.dataTransfer,c);if(Ae(v.dataTransfer)&&(u.dataTransfer=v.dataTransfer),v.isDefaultPrevented())return;u.dragging=!0,n.focus()}if(u.dragging){const v=c.currentTarget===n.getDoc().documentElement,C=NF(u,TF(n,c));oD(u.ghost,n.getBody()),rD(u.ghost,C,u.width,u.height,u.maxX,u.maxY,c.clientY,c.clientX,n.getContentAreaContainer(),n.getWin(),r,v),o.throttle(c.clientX,c.clientY)}})},gZ=e=>{const n=e.getSel();if(Ae(n)){const r=n.getRangeAt(0).startContainer;return Me(r)?r.parentNode:r}else return null},BF=(e,n)=>o=>{e.on(r=>{var c;if(r.intervalId.clear(),r.dragging){if(lZ(n,gZ(n.selection),r.element)){const u=(c=n.getDoc().elementFromPoint(o.clientX,o.clientY))!==null&&c!==void 0?c:n.getBody();KC(n,"drop",u,r.dataTransfer,o).isDefaultPrevented()||n.undoManager.transact(()=>{uZ(n.dom,r.element),LI(r.dataTransfer).each(v=>n.insertContent(v)),n._selectionOverrides.hideFakeCaret()})}KC(n,"dragend",n.getBody(),r.dataTransfer,o)}}),FF(e)},$F=(e,n,o)=>{e.on(r=>{r.intervalId.clear(),r.dragging&&o.fold(()=>KC(n,"dragend",r.element,r.dataTransfer),c=>KC(n,"dragend",r.element,r.dataTransfer,c))}),FF(e)},IF=(e,n)=>o=>$F(e,n,L.some(o)),FF=e=>{e.on(n=>{n.intervalId.clear(),aD(n.ghost)}),e.clear()},hZ=e=>{const n=vr(),o=ao.DOM,r=document,c=fZ(n,e),u=mZ(n,e),m=BF(n,e),v=IF(n,e);e.on("mousedown",c),e.on("mousemove",u),e.on("mouseup",m),o.bind(r,"mousemove",u),o.bind(r,"mouseup",v),e.on("remove",()=>{o.unbind(r,"mousemove",u),o.unbind(r,"mouseup",v)}),e.on("keydown",C=>{C.keyCode===He.ESC&&$F(n,e,L.none())})},pZ=e=>{const n=c=>{if(!c.isDefaultPrevented()){const u=c.dataTransfer;u&&(Gt(u.types,"Files")||u.files.length>0)&&(c.preventDefault(),c.type==="drop"&&cC(e,"Dropped file type is not supported"))}},o=c=>{Gx(e,c.target)&&n(c)},r=()=>{const c=ao.DOM,u=e.dom,m=document,v=e.inline?e.getBody():e.getDoc(),C=["drop","dragover"];we(C,E=>{c.bind(m,E,o),u.bind(v,E,n)}),e.on("remove",()=>{we(C,E=>{c.unbind(m,E,o),u.unbind(v,E,n)})})};e.on("init",()=>{ai.setEditorTimeout(e,r,0)})},bZ=e=>{hZ(e),GS(e)&&pZ(e)},vZ=e=>{const n=Ph(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const o=e.selection.getRng();if(o.collapsed){const r=_0(e,o,!1);e.selection.setRng(r)}}},0);e.on("focus",()=>{n.throttle()}),e.on("blur",()=>{n.cancel()})},LF=e=>{e.on("init",()=>{e.on("focusin",n=>{const o=n.target;if(cl(o)){const r=Og(e.getBody(),o),c=ho(r)?r:o;e.selection.getNode()!==c&&x0(e,c).each(u=>e.selection.setRng(u))}})})},lT=ho,HF=(e,n)=>Og(e.getBody(),n),VF=e=>{const n=e.selection,o=e.dom,r=e.getBody(),c=rx(e,r,o.isBlock,()=>_g(e)),u="sel-"+o.uniqueId(),m="data-mce-selected";let v;const C=st=>Ae(st)&&o.hasClass(st,"mce-offscreen-selection"),E=st=>st!==r&&(lT(st)||cl(st))&&o.isChildOf(st,r)&&o.isEditable(st.parentNode),D=st=>{st&&n.setRng(st)},M=(st,$e,Ce,Ee=!0)=>e.dispatch("ShowCaret",{target:$e,direction:st,before:Ce}).isDefaultPrevented()?null:(Ee&&n.scrollIntoView($e,st===-1),c.show(Ce,$e)),B=st=>{st.hasAttribute("data-mce-caret")&&(vn(st),n.scrollIntoView(st))},W=()=>{e.on("click",$e=>{o.isEditable($e.target)||($e.preventDefault(),e.focus())}),e.on("blur NewBlock",ue),e.on("ResizeWindow FullscreenStateChanged",c.reposition),e.on("tap",$e=>{const Ce=$e.target,Ee=HF(e,Ce);lT(Ee)?($e.preventDefault(),x0(e,Ee).each(se)):E(Ce)&&x0(e,Ce).each(se)},!0),e.on("mousedown",$e=>{const Ce=$e.target;if(Ce!==r&&Ce.nodeName!=="HTML"&&!o.isChildOf(Ce,r)||!eV(e,$e.clientX,$e.clientY))return;ue(),Ue();const Ee=HF(e,Ce);lT(Ee)?($e.preventDefault(),x0(e,Ee).each(se)):nD(r,$e.clientX,$e.clientY).each(ot=>{$e.preventDefault();const wt=M(1,ot.node,ot.position===H0.Before,!1);D(wt),ki(Ee)?Ee.focus():e.getBody().focus()})}),e.on("keypress",$e=>{He.modifierPressed($e)||lT(n.getNode())&&$e.preventDefault()}),e.on("GetSelectionRange",$e=>{let Ce=$e.range;if(v){if(!v.parentNode){v=null;return}Ce=Ce.cloneRange(),Ce.selectNode(v),$e.range=Ce}}),e.on("SetSelectionRange",$e=>{$e.range=K($e.range);const Ce=se($e.range,$e.forward);Ce&&($e.range=Ce)});const st=$e=>pt($e)&&$e.id==="mcepastebin";e.on("AfterSetSelectionRange",$e=>{const Ce=$e.range,Ee=Ce.startContainer.parentElement;!Z(Ce)&&!st(Ee)&&Ue(),C(Ee)||ue()}),bZ(e),vZ(e),LF(e)},q=st=>Fa(st)||Sf(st)||bl(st),Z=st=>q(st.startContainer)||q(st.endContainer),K=st=>{const $e=e.schema.getVoidElements(),Ce=o.createRng(),Ee=st.startContainer,ot=st.startOffset,wt=st.endContainer,Qt=st.endOffset;return Ft($e,Ee.nodeName.toLowerCase())?ot===0?Ce.setStartBefore(Ee):Ce.setStartAfter(Ee):Ce.setStart(Ee,ot),Ft($e,wt.nodeName.toLowerCase())?Qt===0?Ce.setEndBefore(wt):Ce.setEndAfter(wt):Ce.setEnd(wt,Qt),Ce},ne=(st,$e)=>{const Ce=X.fromDom(e.getBody()),Ee=e.getDoc(),ot=Em(Ce,"#"+u).getOrThunk(()=>{const hn=X.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',Ee);return io(hn,"id",u),gs(Ce,hn),hn}),wt=o.createRng();Fu(ot),Iu(ot,[X.fromText(Us,Ee),X.fromDom($e),X.fromText(Us,Ee)]),wt.setStart(ot.dom.firstChild,1),wt.setEnd(ot.dom.lastChild,0),qr(ot,{top:o.getPos(st,e.getBody()).y+"px"}),Yb(ot);const Qt=n.getSel();return Qt&&(Qt.removeAllRanges(),Qt.addRange(wt)),wt},re=st=>{const $e=st.cloneNode(!0),Ce=e.dispatch("ObjectSelected",{target:st,targetClone:$e});if(Ce.isDefaultPrevented())return null;const Ee=ne(st,Ce.targetClone),ot=X.fromDom(st);return we(sr(X.fromDom(e.getBody()),`*[${m}]`),wt=>{Wn(ot,wt)||Rs(wt,m)}),o.getAttrib(st,m)||st.setAttribute(m,"1"),v=st,Ue(),Ee},se=(st,$e)=>{if(!st)return null;if(st.collapsed){if(!Z(st)){const wt=$e?1:-1,Qt=Mf(wt,r,st),hn=Qt.getNode(!$e);if(Ae(hn)){if(ru(hn))return M(wt,hn,$e?!Qt.isAtEnd():!1,!1);if($i(hn)&&ho(hn.nextSibling)){const Xn=o.createRng();return Xn.setStart(hn,0),Xn.setEnd(hn,0),Xn}}const Un=Qt.getNode($e);if(Ae(Un)){if(ru(Un))return M(wt,Un,$e?!1:!Qt.isAtEnd(),!1);if($i(Un)&&ho(Un.previousSibling)){const Xn=o.createRng();return Xn.setStart(Un,1),Xn.setEnd(Un,1),Xn}}}return null}let Ce=st.startContainer,Ee=st.startOffset;const ot=st.endOffset;if(Me(Ce)&&Ee===0&&lT(Ce.parentNode)&&(Ce=Ce.parentNode,Ee=o.nodeIndex(Ce),Ce=Ce.parentNode),!pt(Ce))return null;if(ot===Ee+1&&Ce===st.endContainer){const wt=Ce.childNodes[Ee];if(E(wt))return re(wt)}return null},ue=()=>{v&&v.removeAttribute(m),Em(X.fromDom(e.getBody()),"#"+u).each(go),v=null},Oe=()=>{c.destroy(),v=null},Ue=()=>{c.hide()};return Td(e)||W(),{showCaret:M,showBlockCaretContainer:B,hideFakeCaret:Ue,destroy:Oe}},yZ=(e,n)=>{let o=n;for(let r=e.previousSibling;Me(r);r=r.previousSibling)o+=r.data.length;return o},uT=(e,n,o,r,c)=>{if(Me(o)&&(r<0||r>o.data.length))return[];const u=c&&Me(o)?[yZ(o,r)]:[r];let m=o;for(;m!==n&&m.parentNode;)u.push(e.nodeIndex(m,c)),m=m.parentNode;return m===n?u.reverse():[]},cD=(e,n,o,r,c,u,m=!1)=>{const v=uT(e,n,o,r,m),C=uT(e,n,c,u,m);return{start:v,end:C}},zF=(e,n)=>{const o=n.slice(),r=o.pop();return Za(r)?Wo(o,(u,m)=>u.bind(v=>L.from(v.childNodes[m])),L.some(e)).bind(u=>Me(u)&&(r<0||r>u.data.length)?L.none():L.some({node:u,offset:r})):L.none()},UF=(e,n)=>zF(e,n.start).bind(({node:o,offset:r})=>zF(e,n.end).map(({node:c,offset:u})=>{const m=document.createRange();return m.setStart(o,r),m.setEnd(c,u),m})),WF=(e,n,o,r=!1)=>cD(e,n,o.startContainer,o.startOffset,o.endContainer,o.endOffset,r),om=(e,n,o)=>{if(n&&e.isEmpty(n)&&!o(n)){const r=n.parentNode;e.remove(n,Me(n.firstChild)&&rl(n.firstChild.data)),om(e,r,o)}},YC=(e,n,o,r=!0)=>{const c=n.startContainer.parentNode,u=n.endContainer.parentNode;n.deleteContents(),r&&!o(n.startContainer)&&(Me(n.startContainer)&&n.startContainer.data.length===0&&e.remove(n.startContainer),Me(n.endContainer)&&n.endContainer.data.length===0&&e.remove(n.endContainer),om(e,c,o),c!==u&&om(e,u,o))},XC=(e,n)=>L.from(e.dom.getParent(n.startContainer,e.dom.isBlock)),iD=(e,n,o)=>{const r=e.dynamicPatternsLookup({text:o,block:n});return{...e,blockPatterns:od(r).concat(e.blockPatterns),inlinePatterns:js(r).concat(e.inlinePatterns)}},lD=(e,n,o,r)=>{const c=e.createRng();return c.setStart(n,0),c.setEnd(o,r),c.toString()},uD=(e,n)=>e.create("span",{"data-mce-type":"bookmark",id:n}),dT=(e,n)=>{const o=e.createRng();return o.setStartAfter(n.start),o.setEndBefore(n.end),o},ZF=(e,n,o)=>{const r=UF(e.getRoot(),o).getOrDie("Unable to resolve path range"),c=r.startContainer,u=r.endContainer,m=r.endOffset===0?u:u.splitText(r.endOffset),v=r.startOffset===0?c:c.splitText(r.startOffset),C=v.parentNode,E=m.parentNode;return{prefix:n,end:E.insertBefore(uD(e,n+"-end"),m),start:C.insertBefore(uD(e,n+"-start"),v)}},jF=(e,n,o)=>{om(e,e.get(n.prefix+"-end"),o),om(e,e.get(n.prefix+"-start"),o)},JC=e=>e.start.length===0,CZ=e=>(n,o)=>{const c=n.data.substring(0,o),u=c.lastIndexOf(e.charAt(e.length-1)),m=c.lastIndexOf(e);return m!==-1?m+e.length:u!==-1?u+1:-1},GF=(e,n,o,r)=>{const c=n.start;return Y3(e,r.container,r.offset,CZ(c),o).bind(m=>{var v,C;const E=(C=(v=o.textContent)===null||v===void 0?void 0:v.indexOf(c))!==null&&C!==void 0?C:-1;if(E!==-1&&m.offset>=E+c.length){const M=e.createRng();return M.setStart(m.container,m.offset-c.length),M.setEnd(m.container,m.offset),L.some(M)}else{const M=m.offset-c.length;return BE(m.container,M,o).map(B=>{const W=e.createRng();return W.setStart(B.container,B.offset),W.setEnd(m.container,m.offset),W}).filter(B=>B.toString()===c).orThunk(()=>GF(e,n,o,Nd(m.container,0)))}})},wZ=(e,n,o,r,c,u=!1)=>{if(n.start.length===0&&!u){const m=e.createRng();return m.setStart(o,r),m.setEnd(o,r),L.some(m)}return BC(o,r,c).bind(m=>GF(e,n,c,m).bind(C=>{var E;if(u){if(C.endContainer===m.container&&C.endOffset===m.offset)return L.none();if(m.offset===0&&((E=C.endContainer.textContent)===null||E===void 0?void 0:E.length)===C.endOffset)return L.none()}return L.some(C)}))},SZ=(e,n,o,r)=>{const c=e.dom,u=c.getRoot(),m=o.pattern,v=o.position.container,C=o.position.offset;return BE(v,C-o.pattern.end.length,n).bind(E=>{const D=cD(c,u,E.container,E.offset,v,C,r);if(JC(m))return L.some({matches:[{pattern:m,startRng:D,endRng:D}],position:E});{const M=fT(e,o.remainingPatterns,E.container,E.offset,n,r),B=M.getOr({matches:[],position:E}),W=B.position;return wZ(c,m,W.container,W.offset,n,M.isNone()).map(Z=>{const K=WF(c,u,Z,r);return{matches:B.matches.concat([{pattern:m,startRng:K,endRng:D}]),position:Nd(Z.startContainer,Z.startOffset)}})}})},fT=(e,n,o,r,c,u)=>{const m=e.dom;return BC(o,r,m.getRoot()).bind(v=>{const C=lD(m,c,o,r);for(let E=0;E<n.length;E++){const D=n[E];if(!zl(C,D.end))continue;const M=n.slice();M.splice(E,1);const B=SZ(e,c,{pattern:D,remainingPatterns:M,position:v},u);if(B.isNone()&&r>0)return fT(e,n,o,r-1,c,u);if(B.isSome())return B}return L.none()})},qF=(e,n,o)=>{e.selection.setRng(o),n.type==="inline-format"?we(n.format,r=>{e.formatter.apply(r)}):e.execCommand(n.cmd,!1,n.value)},KF=(e,n,o,r)=>{const c=dT(e.dom,o);YC(e.dom,c,r),qF(e,n,c)},YF=(e,n,o,r,c)=>{const u=e.dom,m=dT(u,r),v=dT(u,o);YC(u,v,c),YC(u,m,c);const C={prefix:o.prefix,start:o.end,end:r.start},E=dT(u,C);qF(e,n,E)},dD=(e,n)=>{const o=Zm("mce_textpattern"),r=Zd(n,(c,u)=>{const m=ZF(e,o+`_end${c.length}`,u.endRng);return c.concat([{...u,endMarker:m}])},[]);return Zd(r,(c,u)=>{const m=r.length-c.length-1,v=JC(u.pattern)?u.endMarker:ZF(e,o+`_start${m}`,u.startRng);return c.concat([{...u,startMarker:v}])},[])},fD=e=>Io(e,(n,o)=>o.end.length-n.end.length),xZ=(e,n)=>{const o=ur(e,r=>vo(n,c=>r.pattern.start===c.pattern.start&&r.pattern.end===c.pattern.end));return e.length===n.length?o?e:n:e.length>n.length?e:n},mT=(e,n,o,r,c,u)=>{const m=fT(e,c.inlinePatterns,o,r,n,u).fold(()=>[],C=>C.matches),v=fT(e,fD(c.inlinePatterns),o,r,n,u).fold(()=>[],C=>C.matches);return xZ(m,v)},XF=(e,n)=>{if(n.length===0)return;const o=e.dom,r=e.selection.getBookmark(),c=dD(o,n);we(c,u=>{const m=o.getParent(u.startMarker.start,o.isBlock),v=C=>C===m;JC(u.pattern)?KF(e,u.pattern,u.endMarker,v):YF(e,u.pattern,u.startMarker,u.endMarker,v),jF(o,u.endMarker,v),jF(o,u.startMarker,v)}),e.selection.moveToBookmark(r)},JF=(e,n,o)=>O$(n,0,n).map(r=>{const c=r.container;return K3(c,o.start.length,n).each(u=>{const m=e.createRng();m.setStart(c,0),m.setEnd(u.container,u.offset),YC(e,m,v=>v===n)}),c}),mD=e=>(n,o)=>{const r=n.dom,c=o.pattern,u=UF(r.getRoot(),o.range).getOrDie("Unable to resolve path range"),m=(v,C)=>{const E=C.get(v);return Tn(E)&&Dr(E).exists(D=>Ft(D,"block"))};return XC(n,u).each(v=>{c.type==="block-format"?m(c.format,n.formatter)&&n.undoManager.transact(()=>{e(n.dom,v,c),n.formatter.apply(c.format)}):c.type==="block-command"&&n.undoManager.transact(()=>{e(n.dom,v,c),n.execCommand(c.cmd,!1,c.value)})}),!0},_Z=e=>Io(e,(n,o)=>o.start.length-n.start.length),QF=e=>(n,o)=>{const r=_Z(n),c=o.replace(Us," ");return ss(r,u=>e(u,o,c))},e6=(e,n)=>(o,r,c,u,m)=>{var v;m===void 0&&(m=(v=r.textContent)!==null&&v!==void 0?v:"");const C=o.dom,E=Sr(o);return C.is(r,E)?e(c.blockPatterns,m).map(D=>n&&ze.trim(m).length===D.start.length?[]:[{pattern:D,range:cD(C,C.getRoot(),r,0,r,0,u)}]).getOr([]):[]},EZ=e=>/^\s[^\s]/.test(e),TZ=mD((e,n,o)=>{JF(e,n,o).each(r=>{const c=X.fromDom(r),u=Nh(c);EZ(u)&&V1(c,u.slice(1))})}),kZ=QF((e,n,o)=>n.indexOf(e.start)===0||o.indexOf(e.start)===0),t6=e6(kZ,!0),OZ=(e,n)=>{const o=e.selection.getRng();return XC(e,o).map(r=>{var c;const u=Math.max(0,o.startOffset),m=iD(n,r,(c=r.textContent)!==null&&c!==void 0?c:""),v=mT(e,r,o.startContainer,u,m,!0),C=t6(e,r,m,!0);return{inlineMatches:v,blockMatches:C}}).filter(({inlineMatches:r,blockMatches:c})=>c.length>0||r.length>0)},gD=(e,n)=>{if(n.length===0)return;const o=e.selection.getBookmark();we(n,r=>TZ(e,r)),e.selection.moveToBookmark(o)},AZ=mD(JF),RZ=QF((e,n,o)=>n===e.start||o===e.start),DZ=e6(RZ,!1),MZ=(e,n)=>{const o=e.selection.getRng();return XC(e,o).map(r=>{const c=Math.max(0,o.startOffset),u=lD(e.dom,r,o.startContainer,c),m=iD(n,r,u);return DZ(e,r,m,!1,u)}).filter(r=>r.length>0)},PZ=(e,n)=>{we(n,o=>AZ(e,o))},NZ=(e,n)=>OZ(e,n).fold(De,({inlineMatches:o,blockMatches:r})=>(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{cM(e),XF(e,o),gD(e,r);const c=e.selection.getRng(),u=BC(c.startContainer,c.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),u.each(m=>{const v=m.container;v.data.charAt(m.offset-1)===Hu&&(v.deleteData(m.offset-1,1),om(e.dom,v.parentNode,C=>C===e.dom.getRoot()))})}),!0)),gT=(e,n)=>{const o=e.selection.getRng();XC(e,o).map(r=>{const c=Math.max(0,o.startOffset-1),u=lD(e.dom,r,o.startContainer,c),m=iD(n,r,u),v=mT(e,r,o.startContainer,c,m,!1);v.length>0&&e.undoManager.transact(()=>{XF(e,v)})})},BZ=(e,n)=>MZ(e,n).fold(De,o=>(e.undoManager.transact(()=>{PZ(e,o)}),!0)),n6=(e,n,o)=>{for(let r=0;r<e.length;r++)if(o(e[r],n))return!0;return!1},$Z=(e,n)=>n6(e,n,(o,r)=>o===r.keyCode&&!He.modifierPressed(r)),IZ=(e,n)=>n6(e,n,(o,r)=>o.charCodeAt(0)===r.charCode),FZ=e=>{const n=[",",".",";",":","!","?"],o=[32],r=()=>sd(tx(e),o4(e)),c=()=>ld(e);e.on("keydown",m=>{if(m.keyCode===13&&!He.modifierPressed(m)&&e.selection.isCollapsed()){const v=my(r(),"enter");(v.inlinePatterns.length>0||v.blockPatterns.length>0||c())&&NZ(e,v)&&m.preventDefault()}},!0),e.on("keydown",m=>{if(m.keyCode===32&&e.selection.isCollapsed()){const v=my(r(),"space");(v.blockPatterns.length>0||c())&&BZ(e,v)&&m.preventDefault()}},!0);const u=()=>{if(e.selection.isCollapsed()){const m=my(r(),"space");(m.inlinePatterns.length>0||c())&&gT(e,m)}};e.on("keyup",m=>{$Z(o,m)&&u()}),e.on("keypress",m=>{IZ(n,m)&&ai.setEditorTimeout(e,u)})},LZ=e=>{FZ(e)},HZ=e=>{const n=ze.each,o=He.BACKSPACE,r=He.DELETE,c=e.dom,u=e.selection,m=e.parser,v=ct.browser,C=v.isFirefox(),E=v.isChromium()||v.isSafari(),D=ct.deviceType.isiPhone()||ct.deviceType.isiPad(),M=ct.os.isMacOS()||ct.os.isiOS(),B=(nt,kt)=>{try{e.getDoc().execCommand(nt,!1,String(kt))}catch{}},W=nt=>nt.isDefaultPrevented(),q=()=>{const nt=rn=>{const rt=c.create("body"),nn=rn.cloneContents();return rt.appendChild(nn),u.serializer.serialize(rt,{format:"html"})},kt=rn=>{const rt=nt(rn),nn=c.createRng();nn.selectNode(e.getBody());const an=nt(nn);return rt===an};e.on("keydown",rn=>{const rt=rn.keyCode;if(!W(rn)&&(rt===r||rt===o)&&e.selection.isEditable()){const nn=e.selection.isCollapsed(),an=e.getBody();if(nn&&!ps(e.schema,an)||!nn&&!kt(e.selection.getRng()))return;rn.preventDefault(),e.setContent(""),an.firstChild&&c.isBlock(an.firstChild)?e.selection.setCursorLocation(an.firstChild,0):e.selection.setCursorLocation(an,0),e.nodeChanged()}})},Z=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},K=()=>{e.inline||c.bind(e.getDoc(),"mousedown mouseup",nt=>{let kt;if(nt.target===e.getDoc().documentElement)if(kt=u.getRng(),e.getBody().focus(),nt.type==="mousedown"){if(Fa(kt.startContainer))return;u.placeCaretAt(nt.clientX,nt.clientY)}else u.setRng(kt)})},ne=()=>{e.on("keydown",nt=>{if(!W(nt)&&nt.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(u.isCollapsed()&&u.getRng().startOffset===0){const kt=u.getNode(),rn=kt.previousSibling;if(kt.nodeName==="HR"){c.remove(kt),nt.preventDefault();return}rn&&rn.nodeName&&rn.nodeName.toLowerCase()==="hr"&&(c.remove(rn),nt.preventDefault())}}})},re=()=>{Range.prototype.getClientRects||e.on("mousedown",nt=>{if(!W(nt)&&nt.target.nodeName==="HTML"){const kt=e.getBody();kt.blur(),ai.setEditorTimeout(e,()=>{kt.focus()})}})},se=()=>{const nt=Ay(e);e.on("click",kt=>{const rn=kt.target;/^(IMG|HR)$/.test(rn.nodeName)&&c.isEditable(rn)&&(kt.preventDefault(),e.selection.select(rn),e.nodeChanged()),rn.nodeName==="A"&&c.hasClass(rn,nt)&&rn.childNodes.length===0&&c.isEditable(rn.parentNode)&&(kt.preventDefault(),u.select(rn))})},ue=()=>{const nt=()=>{const rn=c.getAttribs(u.getStart().cloneNode(!1));return()=>{const rt=u.getStart();rt!==e.getBody()&&(c.setAttrib(rt,"style",null),n(rn,nn=>{rt.setAttributeNode(nn.cloneNode(!0))}))}},kt=()=>!u.isCollapsed()&&c.getParent(u.getStart(),c.isBlock)!==c.getParent(u.getEnd(),c.isBlock);e.on("keypress",rn=>{let rt;return!W(rn)&&(rn.keyCode===8||rn.keyCode===46)&&kt()?(rt=nt(),e.getDoc().execCommand("delete",!1),rt(),rn.preventDefault(),!1):!0}),c.bind(e.getDoc(),"cut",rn=>{if(!W(rn)&&kt()){const rt=nt();ai.setEditorTimeout(e,()=>{rt()})}})},Oe=()=>{e.on("keydown",nt=>{if(!W(nt)&&nt.keyCode===o&&u.isCollapsed()&&u.getRng().startOffset===0){const kt=u.getNode().previousSibling;if(kt&&kt.nodeName&&kt.nodeName.toLowerCase()==="table")return nt.preventDefault(),!1}return!0})},Ue=()=>{e.on("keydown",nt=>{if(W(nt)||nt.keyCode!==He.BACKSPACE)return;let kt=u.getRng();const rn=kt.startContainer,rt=kt.startOffset,nn=c.getRoot();let an=rn;if(!(!kt.collapsed||rt!==0)){for(;an.parentNode&&an.parentNode.firstChild===an&&an.parentNode!==nn;)an=an.parentNode;an.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,an),kt=c.createRng(),kt.setStart(rn,0),kt.setEnd(rn,0),u.setRng(kt))}})},st=()=>{const nt=()=>{B("StyleWithCSS",!1),B("enableInlineTableEditing",!1),rc(e)||B("enableObjectResizing",!1)};ZS(e)||e.on("BeforeExecCommand mousedown",nt)},$e=()=>{const nt=()=>{n(c.select("a:not([data-mce-block])"),kt=>{var rn;let rt=kt.parentNode;const nn=c.getRoot();if((rt==null?void 0:rt.lastChild)===kt){for(;rt&&!c.isBlock(rt);){if(((rn=rt.parentNode)===null||rn===void 0?void 0:rn.lastChild)!==rt||rt===nn)return;rt=rt.parentNode}c.add(rt,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",kt=>{(kt.type==="setcontent"||kt.command==="mceInsertLink")&&nt()})},Ce=()=>{e.on("init",()=>{B("DefaultParagraphSeparator",Sr(e))})},Ee=nt=>{const kt=nt.getBody(),rn=nt.selection.getRng();return rn.startContainer===rn.endContainer&&rn.startContainer===kt&&rn.startOffset===0&&rn.endOffset===kt.childNodes.length},ot=()=>{e.on("keyup focusin mouseup",nt=>{!He.modifierPressed(nt)&&!Ee(e)&&u.normalize()},!0)},wt=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},Qt=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},hn=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",nt=>{let kt;nt.target.nodeName==="HTML"&&(kt=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(kt),e.selection.normalize(),e.nodeChanged())}))},Un=()=>{M&&e.on("keydown",nt=>{He.metaKeyPressed(nt)&&!nt.shiftKey&&(nt.keyCode===37||nt.keyCode===39)&&(nt.preventDefault(),e.selection.getSel().modify("move",nt.keyCode===37?"backward":"forward","lineboundary"))})},Xn=()=>{e.on("click",nt=>{let kt=nt.target;do if(kt.tagName==="A"){nt.preventDefault();return}while(kt=kt.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},co=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",nt=>{nt.preventDefault()})})},Or=()=>{m.addNodeFilter("br",nt=>{let kt=nt.length;for(;kt--;)nt[kt].attr("class")==="Apple-interchange-newline"&&nt[kt].remove()})},Jn=Bt,Xe=()=>{if(!C||e.removed)return!1;const nt=e.selection.getSel();return!nt||!nt.rangeCount||nt.rangeCount===0},bt=()=>{E&&(K(),se(),co(),Z(),D&&(Qt(),hn(),Xn())),C&&(re(),st(),wt(),Un())},En=()=>{Ue(),q(),ct.windowsPhone||ot(),E&&(K(),se(),Ce(),co(),Oe(),Or(),D?(Qt(),hn(),Xn()):Z()),C&&(ne(),re(),ue(),st(),$e(),wt(),Un(),Oe())};return Td(e)?bt():En(),{refreshContentEditable:Jn,isHidden:Xe}},VZ=e=>e.toLowerCase()==="gpl",zZ=e=>e.length>=64&&e.length<=255,o6=e=>VZ(e)||zZ(e)?"VALID":"INVALID",UZ=e=>{const n=Jh(e);!ee(Ny(e))&&(fs(n)||o6(n)==="INVALID")&&console.warn("TinyMCE is running in evaluation mode. Provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms. Read more at https://www.tiny.cloud/license-key/")},hT=ao.DOM,WZ=(e,n)=>{const o=X.fromDom(e.getBody()),r=v1(jl(o)),c=X.fromTag("style");io(c,"type","text/css"),gs(c,X.fromText(n)),gs(r,c),e.on("remove",()=>{go(c)})},ZZ=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,pT=e=>_o(e,n=>fs(n)===!1),V0=e=>{const n=e.options.get,o=e.editorUpload.blobCache;return pT({allow_conditional_comments:n("allow_conditional_comments"),allow_html_data_urls:n("allow_html_data_urls"),allow_svg_data_urls:n("allow_svg_data_urls"),allow_html_in_named_anchor:n("allow_html_in_named_anchor"),allow_script_urls:n("allow_script_urls"),allow_unsafe_link_target:n("allow_unsafe_link_target"),convert_unsafe_embeds:n("convert_unsafe_embeds"),convert_fonts_to_spans:n("convert_fonts_to_spans"),fix_list_elements:n("fix_list_elements"),font_size_legacy_values:n("font_size_legacy_values"),forced_root_block:n("forced_root_block"),forced_root_block_attrs:n("forced_root_block_attrs"),preserve_cdata:n("preserve_cdata"),inline_styles:n("inline_styles"),root_name:ZZ(e),sandbox_iframes:n("sandbox_iframes"),sandbox_iframes_exclusions:pb(e),sanitize:n("xss_sanitization"),validate:!0,blob_cache:o,document:e.getDoc()})},s6=e=>{const n=e.options.get;return pT({custom_elements:n("custom_elements"),extended_valid_elements:n("extended_valid_elements"),invalid_elements:n("invalid_elements"),invalid_styles:n("invalid_styles"),schema:n("schema"),valid_children:n("valid_children"),valid_classes:n("valid_classes"),valid_elements:n("valid_elements"),valid_styles:n("valid_styles"),verify_html:n("verify_html"),padd_empty_block_inline_children:n("format_empty_lines")})},r6=e=>{const n=e.options.get;return{...V0(e),...s6(e),...pT({remove_trailing_brs:n("remove_trailing_brs"),pad_empty_with_br:n("pad_empty_with_br"),url_converter:n("url_converter"),url_converter_scope:n("url_converter_scope"),element_format:n("element_format"),entities:n("entities"),entity_encoding:n("entity_encoding"),indent:n("indent"),indent_after:n("indent_after"),indent_before:n("indent_before")})}},jZ=e=>{const n=m0(V0(e),e.schema);return n.addAttributeFilter("src,href,style,tabindex",(o,r)=>{const c=e.dom,u="data-mce-"+r;let m=o.length;for(;m--;){const v=o[m];let C=v.attr(r);if(C&&!v.attr(u)){if(C.indexOf("data:")===0||C.indexOf("blob:")===0)continue;r==="style"?(C=c.serializeStyle(c.parseStyle(C),v.name),C.length||(C=null),v.attr(u,C),v.attr(r,C)):r==="tabindex"?(v.attr(u,C),v.attr(r,null)):v.attr(u,e.convertURL(C,r,v.name))}}}),n.addNodeFilter("script",o=>{let r=o.length;for(;r--;){const c=o[r],u=c.attr("type")||"no/type";u.indexOf("mce-")!==0&&c.attr("type","mce-"+u)}}),fb(e)&&n.addNodeFilter("#cdata",o=>{var r;let c=o.length;for(;c--;){const u=o[c];u.type=8,u.name="#comment",u.value="[CDATA["+e.dom.encode((r=u.value)!==null&&r!==void 0?r:"")+"]]"}}),n.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",o=>{let r=o.length;const c=e.schema.getNonEmptyElements();for(;r--;){const u=o[r];u.isEmpty(c)&&u.getAll("br").length===0&&u.append(new za("br",1))}}),n},GZ=e=>{const n=lb(e);n&&ai.setEditorTimeout(e,()=>{let o;n===!0?o=e:o=e.editorManager.get(n),o&&!o.destroyed&&(o.focus(),o.selection.scrollIntoView())},100)},qZ=e=>{const n=e.dom.getRoot();!e.inline&&(!o2(e)||e.selection.getStart(!0)===n)&&Hr(n).each(o=>{const r=o.getNode(),c=al(r)?Hr(r).getOr(o):o;e.selection.setRng(c.toRange())})},KZ=e=>{e.bindPendingEventDelegates(),e.initialized=!0,B4(e),e.focus(!0),qZ(e),e.nodeChanged({initial:!0});const n=e4(e);oe(n)&&n.call(e,e),GZ(e)},bT=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,YZ=(e,n,o)=>{const{pass:r,fail:c}=Rr(n,v=>tinymce.Resource.has(uC(v))),m=[...r.map(v=>{const C=tinymce.Resource.get(uC(v));return ee(C)?Promise.resolve(bT(e).loadRawCss(v,C)):Promise.resolve()}),bT(e).loadAll(c)];return e.inline?m:m.concat([e.ui.styleSheetLoader.loadAll(o)])},hD=e=>{const n=bT(e),o=ha(e),r=e.contentCSS,c=()=>{n.unloadAll(r),e.inline||e.ui.styleSheetLoader.unloadAll(o)},u=()=>{e.removed?c():e.on("remove",c)};if(e.contentStyles.length>0){let C="";ze.each(e.contentStyles,E=>{C+=E+`\r
`}),e.dom.addStyle(C)}const m=Promise.all(YZ(e,r,o)).then(u).catch(u),v=Kk(e);return v&&WZ(e,v),m},XZ=e=>{const n=e.getDoc(),o=e.getBody();Rx(e),qS(e)||(n.body.spellcheck=!1,hT.setAttrib(o,"spellcheck","false")),e.quirks=HZ(e),zb(e);const r=lM(e);r!==void 0&&(o.dir=r);const c=Dy(e);c&&e.on("BeforeSetContent",u=>{ze.each(c,m=>{u.content=u.content.replace(m,v=>"<!--mce:protected "+escape(v)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",u=>{e.composing=u.type==="compositionstart"})},JZ=e=>{Td(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},pD=e=>{e.removed!==!0&&(JZ(e),KZ(e))},QZ=e=>{let n=!1;const o=setTimeout(()=>{n||e.setProgressState(!0)},500);return()=>{clearTimeout(o),n=!0,e.setProgressState(!1)}},a6=e=>{const n=e.getElement();let o=e.getDoc();e.inline&&(hT.addClass(n,"mce-content-body"),e.contentDocument=o=document,e.contentWindow=window,e.bodyElement=n,e.contentAreaContainer=n);const r=e.getBody();r.disabled=!0,e.readonly=ZS(e),e._editableRoot=Jk(e),!e.readonly&&e.hasEditableRoot()&&(e.inline&&hT.getStyle(r,"position",!0)==="static"&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,e.editorUpload=XA(e),e.schema=Bn(s6(e)),e.dom=ao(o,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:LS(e),referrerPolicy:sb(e),onSetAttrib:m=>{e.dispatch("SetAttrib",m)}}),e.parser=jZ(e),e.serializer=Tr(r6(e),e),e.selection=MH(e.dom,e.getWin(),e.serializer,e),e.annotator=xl(e),e.formatter=wu(e),e.undoManager=S0(e),e._nodeChangeDispatcher=new MI(e),e._selectionOverrides=VF(e),Dz(e),WW(e),F3(e),Td(e)||(YW(e),LZ(e));const c=tT(e);qi(e,c),T0(e),EV(e),VW(e);const u=mH(e);XZ(e),UZ(e),u.fold(()=>{const m=QZ(e);hD(e).then(()=>{pD(e),m()})},m=>{e.setProgressState(!0),hD(e).then(()=>{m().then(v=>{e.setProgressState(!1),pD(e),VA(e)},v=>{e.notificationManager.open({type:"error",text:String(v)}),pD(e),VA(e)})})})},ej=dt,tj=(e,n,o)=>Bw(e,n,ej,o),bD=ao.DOM,nj=(e,n,o,r)=>{const c=X.fromTag("iframe");return r.each(u=>io(c,"tabindex",u)),Zl(c,o),Zl(c,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:n}),nf(c,"tox-edit-area__iframe"),c},c6=e=>{let n=Zk(e)+"<html><head>";Gs(e)!==e.documentBaseUrl&&(n+='<base href="'+e.documentBaseURI.getURI()+'" />'),n+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const o=jk(e),r=rd(e),c=e.translate(Ry(e));return yy(e)&&(n+='<meta http-equiv="Content-Security-Policy" content="'+yy(e)+'" />'),n+=`</head><body id="${o}" class="mce-content-body ${r}" data-id="${e.id}" aria-label="${c}"><br></body></html>`,n},vD=(e,n)=>{const o=ct.browser.isFirefox()?Ry(e):"Rich Text Area",r=e.translate(o),c=xi(X.fromDom(e.getElement()),"tabindex").bind(Yd),u=nj(e.id,r,oi(e),c).dom;u.onload=()=>{u.onload=null,e.dispatch("load")},e.contentAreaContainer=n.iframeContainer,e.iframeElement=u,e.iframeHTML=c6(e),bD.add(n.iframeContainer,u)},i6=e=>{const n=e.iframeElement,o=()=>{e.contentDocument=n.contentDocument,a6(e)};if(ta(e)||ct.browser.isFirefox()){const r=e.getDoc();r.open(),r.write(e.iframeHTML),r.close(),o()}else{const r=tj(X.fromDom(n),"load",()=>{r.unbind(),o()});n.srcdoc=e.iframeHTML}},l6=(e,n)=>{vD(e,n),n.editorContainer&&(n.editorContainer.style.display=e.orgDisplay,e.hidden=bD.isHidden(n.editorContainer)),e.getElement().style.display="none",bD.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,i6(e)},u6=ao.DOM,oj=(e,n,o)=>{const r=v0.get(o),c=v0.urls[o]||e.documentBaseUrl.replace(/\/$/,"");if(o=ze.trim(o),r&&ze.inArray(n,o)===-1){if(e.plugins[o])return;try{const u=r(e,c)||{};e.plugins[o]=u,oe(u.init)&&(u.init(e,c),n.push(o))}catch(u){iV(e,o,u)}}},sj=e=>e.replace(/^\-/,""),d6=e=>{const n=[];we(Kh(e),o=>{oj(e,n,sj(o))})},f6=e=>{const n=ze.trim(Os(e)),o=e.ui.registry.getAll().icons,r={...rE.get("default").icons,...rE.get(n).icons};lt(r,(c,u)=>{Ft(o,u)||e.ui.registry.addIcon(u,c)})},rj=e=>{const n=id(e);if(ee(n)){const o=Mg.get(n);e.theme=o(e,Mg.urls[n])||{},oe(e.theme.init)&&e.theme.init(e,Mg.urls[n]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},aj=e=>{const n=ab(e),o=b0.get(n);e.model=o(e,b0.urls[n])},yD=e=>{const n=e.theme.renderUI;return n?n():ew(e)},vT=e=>{const n=e.getElement(),r=id(e)(e,n);return r.editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||e.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||e.id+"_iframecontainer"),r.height=r.iframeHeight?r.iframeHeight:n.offsetHeight,r},QC=(e,n)=>({editorContainer:e,iframeContainer:n,api:{}}),sm=e=>{const n=u6.create("div");return u6.insertAfter(n,e),QC(n,n)},ew=e=>{const n=e.getElement();return e.inline?QC(null):sm(n)},z0=e=>{const n=e.getElement();return e.orgDisplay=n.style.display,ee(id(e))?yD(e):oe(id(e))?vT(e):ew(e)},m6=(e,n)=>{const o={show:L.from(n.show).getOr(Bt),hide:L.from(n.hide).getOr(Bt),isEnabled:L.from(n.isEnabled).getOr(dt),setEnabled:r=>{e.mode.isReadOnly()||L.from(n.setEnabled).each(c=>c(r))}};e.ui={...e.ui,...o}},cj=async e=>{e.dispatch("ScriptsLoaded"),f6(e),rj(e),aj(e),d6(e);const n=await z0(e);m6(e,L.from(n.api).getOr({})),e.editorContainer=n.editorContainer,Vn(e),e.inline?a6(e):l6(e,{editorContainer:n.editorContainer,iframeContainer:n.iframeContainer})},Wp=ao.DOM,CD=e=>e.charAt(0)==="-",ij=(e,n)=>{const o=rb(n),r=Ef(n);if(!Ms.hasCode(o)&&o!=="en"){const c=no(r)?r:`${n.editorManager.baseURL}/langs/${o}.js`;e.add(c).catch(()=>{rV(n,c,o)})}},wD=(e,n)=>{const o=id(e);if(ee(o)&&!CD(o)&&!Ft(Mg.urls,o)){const r=xy(e),c=r?e.documentBaseURI.toAbsolute(r):`themes/${o}/theme${n}.js`;Mg.load(o,c).catch(()=>{aV(e,c,o)})}},yT=(e,n)=>{const o=ab(e);if(o!=="plugin"&&!Ft(b0.urls,o)){const r=HS(e),c=ee(r)?e.documentBaseURI.toAbsolute(r):`models/${o}/model${n}.js`;b0.load(o,c).catch(()=>{cV(e,c,o)})}},Zg=e=>L.from(is(e)).filter(no).map(n=>({url:n,name:L.none()})),jg=(e,n,o)=>L.from(n).filter(r=>no(r)&&!rE.has(r)).map(r=>({url:`${e.editorManager.baseURL}/icons/${r}/icons${o}.js`,name:L.some(r)})),g6=(e,n,o)=>{const r=jg(n,"default",o),c=Zg(n).orThunk(()=>jg(n,Os(n),""));we(nr([r,c]),u=>{e.add(u.url).catch(()=>{qB(n,u.url,u.name.getOrUndefined())})})},lj=(e,n)=>{const o=(r,c)=>{v0.load(r,c).catch(()=>{sV(e,c,r)})};lt(Qk(e),(r,c)=>{o(c,r),e.options.set("plugins",Kh(e).concat(c))}),we(Kh(e),r=>{r=ze.trim(r),r&&!v0.urls[r]&&!CD(r)&&o(r,`plugins/${r}/plugin${n}.js`)})},uj=e=>{const n=id(e);return!ee(n)||Ae(Mg.get(n))},dj=e=>{const n=ab(e);return Ae(b0.get(n))},fj=(e,n)=>{const o=Pi.ScriptLoader,r=()=>{!e.removed&&uj(e)&&dj(e)&&cj(e)};wD(e,n),yT(e,n),ij(o,e),g6(o,e,n),lj(e,n),o.loadQueue().then(r,r)},mj=(e,n)=>Mv.forElement(e,{contentCssCors:jS(n),referrerPolicy:sb(n)}),gj=e=>{const n=e.id;Ms.setCode(rb(e));const o=()=>{Wp.unbind(window,"ready",o),e.render()};if(!Xu.Event.domLoaded){Wp.bind(window,"ready",o);return}if(!e.getElement())return;const r=X.fromDom(e.getElement()),c=ym(r);e.on("remove",()=>{Ou(r.dom.attributes,m=>Rs(r,m.name)),Zl(r,c)}),e.ui.styleSheetLoader=mj(r,e),Of(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const u=e.getElement().form||Wp.getParent(n,"form");u&&(e.formElement=u,Ty(e)&&!Ec(e.getElement())&&(Wp.insertAfter(Wp.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=m=>{e.dispatch(m.type,m)},Wp.bind(u,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),ky(e)&&!u.submit.nodeType&&!u.submit.length&&!u._mceOldSubmit&&(u._mceOldSubmit=u.submit,u.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),u._mceOldSubmit(u)))),e.windowManager=jB(e),e.notificationManager=ZB(e),dd(e)&&e.on("GetContent",m=>{m.save&&(m.content=Wp.encode(m.content))}),US(e)&&e.on("submit",()=>{e.initialized&&e.save()}),WS(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),fj(e,e.suffix)},h6=(e,n)=>{e._editableRoot!==n&&(e._editableRoot=n,e.readonly||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),m2(e,n))},hj=e=>e._editableRoot,pj=(e,n)=>({sections:et(e),options:et(n)}),p6=wi().deviceType,bj=p6.isPhone(),vj=p6.isTablet(),Zp=e=>{if(_n(e))return[];{const n=Tn(e)?e:e.split(/[ ,]/),o=Xt(n,Kd);return Mt(o,no)}},yj=(e,n)=>{const o=Gd(n,(r,c)=>Gt(e,c));return pj(o.t,o.f)},Cj=(e,n,o={})=>{const r=e.sections(),c=mo(r,n).getOr({});return ze.extend({},o,c)},CT=(e,n)=>Ft(e.sections(),n),wj=(e,n)=>CT(e,n)?e.sections()[n]:{},b6=(e,n)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:mo(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...n?{menubar:!1}:{}}),Sj=(e,n)=>{var o;const r=(o=n.external_plugins)!==null&&o!==void 0?o:{};return e&&e.external_plugins?ze.extend({},e.external_plugins,r):r},SD=(e,n)=>[...Zp(e),...Zp(n)],xj=(e,n,o,r)=>e&&CT(n,"mobile")?r:o,_j=(e,n,o,r)=>{const c=Zp(o.forced_plugins),u=Zp(r.plugins),m=wj(n,"mobile"),v=m.plugins?Zp(m.plugins):u,C=xj(e,n,u,v),E=SD(c,C);return ze.extend(r,{forced_plugins:c,plugins:E})},Ej=(e,n)=>e&&CT(n,"mobile"),Tj=(e,n,o,r,c)=>{var u;const m=e?{mobile:b6((u=c.mobile)!==null&&u!==void 0?u:{},n)}:{},v=yj(["mobile"],$C(m,c)),C=ze.extend(o,r,v.options(),Ej(e,v)?Cj(v,"mobile"):{},{external_plugins:Sj(r,v.options())});return _j(e,v,r,C)},v6=(e,n)=>Tj(bj||vj,bj,n,e,n),xD=(e,n)=>xH(e,n),y6=e=>{const n=(r,c)=>{e.formatter.toggle(r,c),e.nodeChanged()},o=r=>()=>{we("left,center,right,justify".split(","),c=>{r!==c&&e.formatter.remove("align"+c)}),r!=="none"&&n("align"+r)};e.editorCommands.addCommands({JustifyLeft:o("left"),JustifyCenter:o("center"),JustifyRight:o("right"),JustifyFull:o("justify"),JustifyNone:o("none")})},_D=e=>{const n=o=>()=>{const r=e.selection,c=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return vo(c,u=>Ae(e.formatter.matchNode(u,o)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")},kj=e=>{y6(e),_D(e)},BK=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=e.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if(n==="paste"&&!o.queryCommandEnabled(n)&&(r=!0),r||!o.queryCommandSupported(n)){let c=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(ct.os.isMacOS()||ct.os.isiOS())&&(c=c.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:c,type:"error"})}}})},$K=(e,n,o,r)=>{const c=X.fromDom(e.getRoot());return R2(c,he.fromRangeStart(n),r)?o=o.replace(/^ /,"&nbsp;"):o=o.replace(/^&nbsp;/," "),Qx(c,he.fromRangeEnd(n),r)?o=o.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):o=o.replace(/&nbsp;(<br( \/)?>)?$/," "),o},Oj=e=>{if(typeof e!="string"){const n=ze.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:n}}return{content:e,details:{}}},C6=(e,n)=>{const o=e.selection,r=e.dom;return/^ | $/.test(n)?$K(r,o.getRng(),n,e.schema):n},wT=(e,n)=>{if(e.selection.isEditable()){const{content:o,details:r}=Oj(n);G_(e,{...r,content:C6(e,o),format:"html",set:!1,selection:!0}).each(c=>{const u=wH(e,c.content,r);yA(e,u,c),e.addVisual()})}},Aj=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{wT(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{wT(e,e.dom.encode(r))},insertHTML:(n,o,r)=>{wT(e,r)},mceInsertContent:(n,o,r)=>{wT(e,r)},mceSetContent:(n,o,r)=>{e.setContent(r)},mceReplaceContent:(n,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(YS(e))}})},Rj={"font-size":"size","font-family":"face"},IK=bm("font"),FK=(e,n,o)=>{const r=u=>Kr(u,e).orThunk(()=>IK(u)?mo(Rj,e).bind(m=>xi(u,m)):L.none()),c=u=>Wn(X.fromDom(n),u);return H2(X.fromDom(o),u=>r(u),c)},w6=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),S6=(e,n)=>L.from(ao.DOM.getStyle(n,e,!0)),x6=e=>(n,o)=>L.from(o).map(X.fromDom).filter(Xa).bind(r=>FK(e,n,r.dom).or(S6(e,r.dom))).getOr(""),Dj=x6("font-size"),Mj=A(w6,x6("font-family")),LK=e=>Hr(e.getBody()).bind(n=>{const o=n.container();return L.from(Me(o)?o.parentNode:o)}),HK=e=>L.from(e.selection.getRng()).bind(n=>{const o=e.getBody();return n.startContainer===o&&n.startOffset===0?L.none():L.from(e.selection.getStart(!0))}),VK=(e,n)=>HK(e).orThunk(Be(LK,e)).map(X.fromDom).filter(Xa).bind(n),ED=(e,n)=>VK(e,ns(L.some,n)),Pj=(e,n)=>{if(/^[0-9.]+$/.test(n)){const o=parseInt(n,10);if(o>=1&&o<=7){const r=ud(e),c=r4(e);return c.length>0?c[o-1]||n:r[o-1]||n}else return n}else return n},Nj=e=>{const n=e.split(/\s*,\s*/);return Xt(n,o=>o.indexOf(" ")!==-1&&!(ms(o,'"')||ms(o,"'"))?`'${o}'`:o).join(",")},jp=(e,n)=>{const o=Pj(e,n);e.formatter.toggle("fontname",{value:Nj(o)}),e.nodeChanged()},TD=e=>ED(e,n=>Mj(e.getBody(),n.dom)).getOr(""),ST=(e,n)=>{e.formatter.toggle("fontsize",{value:Pj(e,n)}),e.nodeChanged()},_6=e=>ED(e,n=>Dj(e.getBody(),n.dom)).getOr(""),E6=e=>ED(e,n=>{const o=X.fromDom(e.getBody()),r=H2(n,u=>Kr(u,"line-height"),Be(Wn,o)),c=()=>{const u=parseFloat(Yc(n,"line-height")),m=parseFloat(Yc(n,"font-size"));return String(u/m)};return r.getOrThunk(c)}).getOr(""),T6=(e,n)=>{e.formatter.toggle("lineheight",{value:String(n)}),e.nodeChanged()},Bj=e=>{const n=(o,r)=>{e.formatter.toggle(o,r),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{n(o)},"ForeColor,HiliteColor":(o,r,c)=>{n(o,{value:c})},BackColor:(o,r,c)=>{n("hilitecolor",{value:c})},FontName:(o,r,c)=>{jp(e,c)},FontSize:(o,r,c)=>{ST(e,c)},LineHeight:(o,r,c)=>{T6(e,c)},Lang:(o,r,c)=>{var u;n(o,{value:c.code,customValue:(u=c.customCode)!==null&&u!==void 0?u:null})},RemoveFormat:o=>{e.formatter.remove(o)},mceBlockQuote:()=>{n("blockquote")},FormatBlock:(o,r,c)=>{n(ee(c)?c:"p")},mceToggleFormat:(o,r,c)=>{n(c)}})},$j=e=>{const n=o=>e.formatter.match(o);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>n(o),mceBlockQuote:()=>n("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>TD(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>_6(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>E6(e))},Ij=e=>{Bj(e),$j(e)},Fj=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},Gg=e=>{e.editorCommands.addCommands({Indent:()=>{X5(e)},Outdent:()=>{EE(e)}}),e.editorCommands.addCommands({Outdent:()=>G5(e)},"state")},Lj=e=>{const n=(o,r,c)=>{const u=ee(c)?{href:c}:c,m=e.dom.getParent(e.selection.getNode(),"a");sn(u)&&ee(u.href)&&(u.href=u.href.replace(/ /g,"%20"),(!m||!u.href)&&e.formatter.remove("link"),u.href&&e.formatter.apply("link",u,m))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");o&&e.dom.remove(o,!0);return}e.formatter.remove("link")}},mceInsertLink:n,createLink:n})},k6=(e,n,o,r)=>{const c=e.dom,u=v=>c.isBlock(v)&&v.parentElement===o,m=u(n)?n:c.getParent(r,u,o);return L.from(m).map(X.fromDom)},O6=(e,n)=>{const o=e.dom,r=e.selection.getRng(),c=n?e.selection.getStart():e.selection.getEnd(),u=n?r.startContainer:r.endContainer,m=N0(o,u);if(!m||!m.isContentEditable)return;const v=n?hr:sl,C=Sr(e);k6(e,c,m,u).each(E=>{const D=CR(e,u,E.dom,m,!1,C);v(E,X.fromDom(D)),e.selection.setCursorLocation(D,0),e.dispatch("NewBlock",{newBlock:D}),Ic(e,"insertParagraph")})},xT=e=>O6(e,!0),Hj=e=>O6(e,!1),Vj=e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{xT(e)},InsertNewBlockAfter:()=>{Hj(e)}})},zj=e=>{e.editorCommands.addCommands({insertParagraph:()=>{QE(zC,e)},mceInsertNewLine:(n,o,r)=>{OR(e,r)},InsertLineBreak:(n,o,r)=>{QE(CI,e)}})},A6=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let c=0;e.dom.getParent(e.selection.getNode(),u=>pt(u)&&c++===r?(e.selection.select(u),!1):!0,e.getBody())},mceSelectNode:(n,o,r)=>{e.selection.select(r)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),as);if(n){const o=e.dom.createRng();o.selectNodeContents(n),e.selection.setRng(o)}}})},Uj=e=>{e.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const c=r??e.selection.getNode();if(c!==e.getBody()){const u=e.selection.getBookmark();e.dom.remove(c,!0),e.selection.moveToBookmark(u)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,o,r)=>{nO(e,r===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},Wj=e=>{kj(e),BK(e),Fj(e),A6(e),Aj(e),Lj(e),Gg(e),Vj(e),zj(e),Ij(e),Uj(e)},Zj=["toggleview"],R6=e=>Gt(Zj,e.toLowerCase());class _T{constructor(n){this.commands={state:{},exec:{},value:{}},this.editor=n}execCommand(n,o=!1,r,c){const u=this.editor,m=n.toLowerCase(),v=c==null?void 0:c.skip_focus;if(u.removed||(m!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(m)&&!v?u.focus():xM(u)),u.dispatch("BeforeExecCommand",{command:n,ui:o,value:r}).isDefaultPrevented()))return!1;const E=this.commands.exec[m];return oe(E)?(E(m,o,r),u.dispatch("ExecCommand",{command:n,ui:o,value:r}),!0):!1}queryCommandState(n){if(!R6(n)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const o=n.toLowerCase(),r=this.commands.state[o];return oe(r)?r(o):!1}queryCommandValue(n){if(!R6(n)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const o=n.toLowerCase(),r=this.commands.value[o];return oe(r)?r(o):""}addCommands(n,o="exec"){const r=this.commands;lt(n,(c,u)=>{we(u.toLowerCase().split(","),m=>{r[o][m]=c})})}addCommand(n,o,r){const c=n.toLowerCase();this.commands.exec[c]=(u,m,v)=>o.call(r??this.editor,m,v)}queryCommandSupported(n){const o=n.toLowerCase();return!!this.commands.exec[o]}addQueryStateHandler(n,o,r){this.commands.state[n.toLowerCase()]=()=>o.call(r??this.editor)}addQueryValueHandler(n,o,r){this.commands.value[n.toLowerCase()]=()=>o.call(r??this.editor)}}const Gp="data-mce-contenteditable",jj=(e,n,o)=>{dh(e,n)&&!o?of(e,n):o&&nf(e,n)},ys=(e,n,o)=>{try{e.getDoc().execCommand(n,!1,String(o))}catch{}},ET=(e,n)=>{e.dom.contentEditable=n?"true":"false"},Gj=e=>{we(sr(e,'*[contenteditable="true"]'),n=>{io(n,Gp,"true"),ET(n,!1)})},kD=e=>{we(sr(e,`*[${Gp}="true"]`),n=>{Rs(n,Gp),ET(n,!0)})},D6=e=>{L.from(e.selection.getNode()).each(n=>{n.removeAttribute("data-mce-selected")})},OD=e=>{e.selection.setRng(e.selection.getRng())},qj=(e,n)=>{const o=X.fromDom(e.getBody());jj(o,"mce-content-readonly",n),n?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),D6(e),e.readonly=!0,ET(o,!1),Gj(o)):(e.readonly=!1,e.hasEditableRoot()&&ET(o,!0),kD(o),ys(e,"StyleWithCSS",!1),ys(e,"enableInlineTableEditing",!1),ys(e,"enableObjectResizing",!1),_2(e)&&e.focus(),OD(e),e.nodeChanged())},qp=e=>e.readonly,M6=e=>{e.parser.addAttributeFilter("contenteditable",n=>{qp(e)&&we(n,o=>{o.attr(Gp,o.attr("contenteditable")),o.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(Gp,n=>{qp(e)&&we(n,o=>{o.attr("contenteditable",o.attr(Gp))})}),e.serializer.addTempAttr(Gp)},Kj=e=>{e.serializer?M6(e):e.on("PreInit",()=>{M6(e)})},Yj=e=>e.type==="click",Xj=["copy"],Jj=e=>Gt(Xj,e.type),Qj=(e,n)=>af(n,"a",r=>Wn(r,X.fromDom(e.getBody()))).bind(r=>xi(r,"href")),U0=(e,n)=>{if(Yj(n)&&!He.metaKeyPressed(n)){const o=X.fromDom(n.target);Qj(e,o).each(r=>{if(n.preventDefault(),/^#/.test(r)){const c=e.dom.select(`${r},[name="${mm(r,"#")}"]`);c.length&&e.selection.scrollIntoView(c[0],!0)}else window.open(r,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else Jj(n)&&e.dispatch(n.type,n)},Eu=e=>{e.on("ShowCaret",n=>{qp(e)&&n.preventDefault()}),e.on("ObjectSelected",n=>{qp(e)&&n.preventDefault()})},eG=ze.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class AD{static isNative(n){return!!eG[n.toLowerCase()]}constructor(n){this.bindings={},this.settings=n||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||De}fire(n,o){return this.dispatch(n,o)}dispatch(n,o){const r=n.toLowerCase(),c=Fv(r,o??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(c);const u=this.bindings[r];if(u)for(let m=0,v=u.length;m<v;m++){const C=u[m];if(!C.removed){if(C.once&&this.off(r,C.func),c.isImmediatePropagationStopped())return c;if(C.func.call(this.scope,c)===!1)return c.preventDefault(),c}}return c}on(n,o,r,c){if(o===!1&&(o=De),o){const u={func:o,removed:!1};c&&ze.extend(u,c);const m=n.toLowerCase().split(" ");let v=m.length;for(;v--;){const C=m[v];let E=this.bindings[C];E||(E=[],this.toggleEvent(C,!0)),r?E=[u,...E]:E=[...E,u],this.bindings[C]=E}}return this}off(n,o){if(n){const r=n.toLowerCase().split(" ");let c=r.length;for(;c--;){const u=r[c];let m=this.bindings[u];if(!u)return lt(this.bindings,(v,C)=>{this.toggleEvent(C,!1),delete this.bindings[C]}),this;if(m){if(!o)m.length=0;else{const v=Rr(m,C=>C.func===o);m=v.fail,this.bindings[u]=m,we(v.pass,C=>{C.removed=!0})}m.length||(this.toggleEvent(n,!1),delete this.bindings[u])}}}else lt(this.bindings,(r,c)=>{this.toggleEvent(c,!1)}),this.bindings={};return this}once(n,o,r){return this.on(n,o,r,{once:!0})}has(n){n=n.toLowerCase();const o=this.bindings[n];return!(!o||o.length===0)}}const tw=e=>(e._eventDispatcher||(e._eventDispatcher=new AD({scope:e,toggleEvent:(n,o)=>{AD.isNative(n)&&e.toggleNativeEvent&&e.toggleNativeEvent(n,o)}})),e._eventDispatcher),RD={fire(e,n,o){return this.dispatch(e,n,o)},dispatch(e,n,o){const r=this;if(r.removed&&e!=="remove"&&e!=="detach")return Fv(e.toLowerCase(),n??{},r);const c=tw(r).dispatch(e,n);if(o!==!1&&r.parent){let u=r.parent();for(;u&&!c.isPropagationStopped();)u.dispatch(e,c,!1),u=u.parent?u.parent():void 0}return c},on(e,n,o){return tw(this).on(e,n,o)},off(e,n){return tw(this).off(e,n)},once(e,n){return tw(this).once(e,n)},hasEventListeners(e){return tw(this).has(e)}},TT=ao.DOM;let Kp;const kT=(e,n)=>{if(n==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(n))return e.getDoc().documentElement;const o=Li(e);return o?(e.eventRoot||(e.eventRoot=TT.select(o)[0]),e.eventRoot):e.getBody()},tG=e=>!e.hidden&&!qp(e),P6=(e,n,o)=>{tG(e)?e.dispatch(n,o):qp(e)&&U0(e,o)},nG=(e,n)=>{if(e.delegates||(e.delegates={}),e.delegates[n]||e.removed)return;const o=kT(e,n);if(Li(e)){if(Kp||(Kp={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||Kp&&(lt(Kp,(c,u)=>{e.dom.unbind(kT(e,u))}),Kp=null)})),Kp[n])return;const r=c=>{const u=c.target,m=e.editorManager.get();let v=m.length;for(;v--;){const C=m[v].getBody();(C===u||TT.isChildOf(u,C))&&P6(m[v],n,c)}};Kp[n]=r,TT.bind(o,n,r)}else{const r=c=>{P6(e,n,c)};TT.bind(o,n,r),e.delegates[n]=r}},N6={...RD,bindPendingEventDelegates(){const e=this;ze.each(e._pendingNativeEvents,n=>{nG(e,n)})},toggleNativeEvent(e,n){const o=this;e==="focus"||e==="blur"||o.removed||(n?o.initialized?nG(o,e):o._pendingNativeEvents?o._pendingNativeEvents.push(e):o._pendingNativeEvents=[e]:o.initialized&&o.delegates&&(o.dom.unbind(kT(o,e),e,o.delegates[e]),delete o.delegates[e]))},unbindAllNativeEvents(){const e=this,n=e.getBody(),o=e.dom;e.delegates&&(lt(e.delegates,(r,c)=>{e.dom.unbind(kT(e,c),c,r)}),delete e.delegates),!e.inline&&n&&o&&(n.onload=null,o.unbind(e.getWin()),o.unbind(e.getDoc())),o&&(o.unbind(n),o.unbind(e.getContainer()))}},oG=e=>ee(e)?{value:e.split(/[ ,]/),valid:!0}:eo(e,ee)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},sG=e=>{const n=(()=>{switch(e){case"array":return Tn;case"boolean":return bn;case"function":return oe;case"number":return Za;case"object":return sn;case"string":return ee;case"string[]":return oG;case"object[]":return o=>eo(o,sn);case"regexp":return o=>Gn(o,RegExp);default:return dt}})();return o=>I6(o,n,`The value must be a ${e}.`)},rG=e=>ee(e.processor),B6=(e,n)=>{const o=Ka(n.message)?"":`. ${n.message}`;return e+o},$6=e=>e.valid,I6=(e,n,o="")=>{const r=n(e);return bn(r)?r?{value:e,valid:!0}:{valid:!1,message:o}:r},aG=(e,n,o)=>{if(!fs(n)){const r=I6(n,o);if($6(r))return r.value;console.error(B6(`Invalid default value passed for the "${e}" option`,r))}},cG=(e,n)=>{const o={},r={},c=(M,B,W)=>{const q=I6(B,W);return $6(q)?(r[M]=q.value,!0):(console.warn(B6(`Invalid value passed for the ${M} option`,q)),!1)},u=(M,B)=>{const W=rG(B)?sG(B.processor):B.processor,q=aG(M,B.default,W);o[M]={...B,default:q,processor:W},mo(r,M).orThunk(()=>mo(n,M)).each(K=>c(M,K,W))},m=M=>Ft(o,M);return{register:u,isRegistered:m,get:M=>mo(r,M).orThunk(()=>mo(o,M).map(B=>B.default)).getOrUndefined(),set:(M,B)=>{if(m(M)){const W=o[M];return W.immutable?(console.error(`"${M}" is an immutable option and cannot be updated`),!1):c(M,B,W.processor)}else return console.warn(`"${M}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:M=>{const B=m(M);return B&&delete r[M],B},isSet:M=>Ft(r,M)}},iG=["design","readonly"],F6=(e,n,o,r)=>{const c=o[n.get()],u=o[r];try{u.activate()}catch(m){console.error(`problem while activating editor mode ${r}:`,m);return}c.deactivate(),c.editorReadOnly!==u.editorReadOnly&&qj(e,u.editorReadOnly),n.set(r),M4(e,r)},lG=(e,n,o,r)=>{if(r!==o.get()){if(!Ft(n,r))throw new Error(`Editor mode '${r}' is invalid`);e.initialized?F6(e,o,n,r):e.on("init",()=>F6(e,o,n,r))}},uG=(e,n,o)=>{if(Gt(iG,n))throw new Error(`Cannot override default mode ${n}`);return{...e,[n]:{...o,deactivate:()=>{try{o.deactivate()}catch(r){console.error(`problem while deactivating editor mode ${n}:`,r)}}}}},dG=e=>{const n=lo("design"),o=lo({design:{activate:Bt,deactivate:Bt,editorReadOnly:!1},readonly:{activate:Bt,deactivate:Bt,editorReadOnly:!0}});return Kj(e),Eu(e),{isReadOnly:()=>qp(e),set:r=>lG(e,o.get(),n,r),get:()=>n.get(),register:(r,c)=>{o.set(uG(o.get(),r,c))}}},DD=ze.each,MD=ze.explode,fG={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},L6=ze.makeMap("alt,ctrl,shift,meta,access"),mG=e=>e in L6,gG=e=>{const n={},o=ct.os.isMacOS()||ct.os.isiOS();DD(MD(e.toLowerCase(),"+"),u=>{mG(u)?n[u]=!0:/^[0-9]{2,}$/.test(u)?n.keyCode=parseInt(u,10):(n.charCode=u.charCodeAt(0),n.keyCode=fG[u]||u.toUpperCase().charCodeAt(0))});const r=[n.keyCode];let c;for(c in L6)n[c]?r.push(c):n[c]=!1;return n.id=r.join(","),n.access&&(n.alt=!0,o?n.ctrl=!0:n.shift=!0),n.meta&&(o?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class H6{constructor(n){this.shortcuts={},this.pendingPatterns=[],this.editor=n;const o=this;n.on("keyup keypress keydown",r=>{(o.hasModifier(r)||o.isFunctionKey(r))&&!r.isDefaultPrevented()&&(DD(o.shortcuts,c=>{o.matchShortcut(r,c)&&(o.pendingPatterns=c.subpatterns.slice(0),r.type==="keydown"&&o.executeShortcutAction(c))}),o.matchShortcut(r,o.pendingPatterns[0])&&(o.pendingPatterns.length===1&&r.type==="keydown"&&o.executeShortcutAction(o.pendingPatterns[0]),o.pendingPatterns.shift()))})}add(n,o,r,c){const u=this,m=u.normalizeCommandFunc(r);return DD(MD(ze.trim(n)),v=>{const C=u.createShortcut(v,o,m,c);u.shortcuts[C.id]=C}),!0}remove(n){const o=this.createShortcut(n);return this.shortcuts[o.id]?(delete this.shortcuts[o.id],!0):!1}normalizeCommandFunc(n){const o=this,r=n;return typeof r=="string"?()=>{o.editor.execCommand(r,!1,null)}:ze.isArray(r)?()=>{o.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(n,o,r,c){const u=ze.map(MD(n,">"),gG);return u[u.length-1]=ze.extend(u[u.length-1],{func:r,scope:c||this.editor}),ze.extend(u[0],{desc:this.editor.translate(o),subpatterns:u.slice(1)})}hasModifier(n){return n.altKey||n.ctrlKey||n.metaKey}isFunctionKey(n){return n.type==="keydown"&&n.keyCode>=112&&n.keyCode<=123}matchShortcut(n,o){return!o||o.ctrl!==n.ctrlKey||o.meta!==n.metaKey||o.alt!==n.altKey||o.shift!==n.shiftKey?!1:n.keyCode===o.keyCode||n.charCode&&n.charCode===o.charCode?(n.preventDefault(),!0):!1}executeShortcutAction(n){return n.func?n.func.call(n.scope):null}}const hG=()=>{const e={},n={},o={},r={},c={},u={},m={},v={},C=(D,M)=>(B,W)=>{D[B.toLowerCase()]={...W,type:M}},E=(D,M)=>r[D.toLowerCase()]=M;return{addButton:C(e,"button"),addGroupToolbarButton:C(e,"grouptoolbarbutton"),addToggleButton:C(e,"togglebutton"),addMenuButton:C(e,"menubutton"),addSplitButton:C(e,"splitbutton"),addMenuItem:C(n,"menuitem"),addNestedMenuItem:C(n,"nestedmenuitem"),addToggleMenuItem:C(n,"togglemenuitem"),addAutocompleter:C(o,"autocompleter"),addContextMenu:C(c,"contextmenu"),addContextToolbar:C(u,"contexttoolbar"),addContextForm:C(u,"contextform"),addSidebar:C(m,"sidebar"),addView:C(v,"views"),addIcon:E,getAll:()=>({buttons:e,menuItems:n,icons:r,popups:o,contextMenus:c,contextToolbars:u,sidebars:m,views:v})}},pG=()=>{const e=hG();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,getAll:e.getAll}},qg=ao.DOM,V6=ze.extend,bG=ze.each;class OT{constructor(n,o,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,V6(this,N6);const c=this;this.id=n,this.hidden=!1;const u=v6(r.defaultOptions,o);this.options=cG(c,u),sg(c);const m=this.options.get;m("deprecation_warnings")&&jH(o,u);const v=m("suffix");v&&(r.suffix=v),this.suffix=r.suffix;const C=m("base_url");C&&r._setBaseUrl(C),this.baseUri=r.baseURI;const E=sb(c);E&&(Pi.ScriptLoader._setReferrerPolicy(E),ao.DOM.styleSheetLoader._setReferrerPolicy(E));const D=jS(c);Ae(D)&&ao.DOM.styleSheetLoader._setContentCssCors(D),Yr.languageLoad=m("language_load"),Yr.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new Ys(Gs(c),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=Of(c),this.hasVisual=ea(c),this.shortcuts=new H6(this),this.editorCommands=new _T(this),Wj(this);const M=m("cache_suffix");M&&(ct.cacheSuffix=M.replace(/^[\?\&]+/,"")),this.ui={registry:pG(),styleSheetLoader:void 0,show:Bt,hide:Bt,setEnabled:Bt,isEnabled:dt},this.mode=dG(c),r.dispatch("SetupEditor",{editor:this});const B=ib(c);oe(B)&&B.call(c,c)}render(){gj(this)}focus(n){this.execCommand("mceFocus",!1,n)}hasFocus(){return _g(this)}translate(n){return Ms.translate(n)}getParam(n,o,r){const c=this.options;return c.isRegistered(n)||(Ae(r)?c.register(n,{processor:r,default:o}):c.register(n,{processor:dt,default:o})),!c.isSet(n)&&!fs(o)?o:c.get(n)}hasPlugin(n,o){return Gt(Kh(this),n)?o?v0.get(n)!==void 0:!0:!1}nodeChanged(n){this._nodeChangeDispatcher.nodeChanged(n)}addCommand(n,o,r){this.editorCommands.addCommand(n,o,r)}addQueryStateHandler(n,o,r){this.editorCommands.addQueryStateHandler(n,o,r)}addQueryValueHandler(n,o,r){this.editorCommands.addQueryValueHandler(n,o,r)}addShortcut(n,o,r,c){this.shortcuts.add(n,o,r,c)}execCommand(n,o,r,c){return this.editorCommands.execCommand(n,o,r,c)}queryCommandState(n){return this.editorCommands.queryCommandState(n)}queryCommandValue(n){return this.editorCommands.queryCommandValue(n)}queryCommandSupported(n){return this.editorCommands.queryCommandSupported(n)}show(){const n=this;n.hidden&&(n.hidden=!1,n.inline?n.getBody().contentEditable="true":(qg.show(n.getContainer()),qg.hide(n.id)),n.load(),n.dispatch("show"))}hide(){const n=this;n.hidden||(n.save(),n.inline?(n.getBody().contentEditable="false",n===n.editorManager.focusedEditor&&(n.editorManager.focusedEditor=null)):(qg.hide(n.getContainer()),qg.setStyle(n.id,"display",n.orgDisplay)),n.hidden=!0,n.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(n,o){this.dispatch("ProgressState",{state:n,time:o})}load(n={}){const o=this,r=o.getElement();if(o.removed)return"";if(r){const c={...n,load:!0},u=Ec(r)?r.value:r.innerHTML,m=o.setContent(u,c);return c.no_events||o.dispatch("LoadContent",{...c,element:r}),m}else return""}save(n={}){const o=this;let r=o.getElement();if(!r||!o.initialized||o.removed)return"";const c={...n,save:!0,element:r};let u=o.getContent(c);const m={...c,content:u};if(m.no_events||o.dispatch("SaveContent",m),m.format==="raw"&&o.dispatch("RawSaveContent",m),u=m.content,Ec(r))r.value=u;else{(n.is_removing||!o.inline)&&(r.innerHTML=u);const v=qg.getParent(o.id,"form");v&&bG(v.elements,C=>C.name===o.id?(C.value=u,!1):!0)}return m.element=c.element=r=null,m.set_dirty!==!1&&o.setDirty(!1),u}setContent(n,o){return p0(this,n,o)}getContent(n){return LB(this,n)}insertContent(n,o){o&&(n=V6({content:n},o)),this.execCommand("mceInsertContent",!1,n)}resetContent(n){n===void 0?p0(this,this.startContent,{format:"raw"}):p0(this,n),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(n){const o=!this.isNotDirty;this.isNotDirty=!n,n&&n!==o&&this.dispatch("dirty")}getContainer(){const n=this;return n.container||(n.container=n.editorContainer||qg.get(n.id+"_parent")),n.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=qg.get(this.id)),this.targetElm}getWin(){const n=this;if(!n.contentWindow){const o=n.iframeElement;o&&(n.contentWindow=o.contentWindow)}return n.contentWindow}getDoc(){const n=this;if(!n.contentDocument){const o=n.getWin();o&&(n.contentDocument=o.document)}return n.contentDocument}getBody(){var n,o;const r=this.getDoc();return(o=(n=this.bodyElement)!==null&&n!==void 0?n:r==null?void 0:r.body)!==null&&o!==void 0?o:null}convertURL(n,o,r){const c=this,u=c.options.get,m=t4(c);if(oe(m))return m.call(c,n,r,!0,o);if(!u("convert_urls")||r==="link"||sn(r)&&r.nodeName==="LINK"||n.indexOf("file:")===0||n.length===0)return n;const v=new Ys(n);return v.protocol!=="http"&&v.protocol!=="https"&&v.protocol!==""?n:u("relative_urls")?c.documentBaseURI.toRelative(n):(n=c.documentBaseURI.toAbsolute(n,u("remove_script_host")),n)}addVisual(n){xD(this,n)}setEditableRoot(n){h6(this,n)}hasEditableRoot(){return hj(this)}remove(){KH(this)}destroy(n){YH(this,n)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const W0=ao.DOM,AT=ze.each;let z6=!1,RT,gc=[];const nw=e=>{const n=e.type;AT(Kg.get(),o=>{switch(n){case"scroll":o.dispatch("ScrollWindow",e);break;case"resize":o.dispatch("ResizeWindow",e);break}})},U6=e=>{if(e!==z6){const n=ao.DOM;e?(n.bind(window,"resize",nw),n.bind(window,"scroll",nw)):(n.unbind(window,"resize",nw),n.unbind(window,"scroll",nw)),z6=e}},W6=e=>{const n=gc;return gc=Mt(gc,o=>e!==o),Kg.activeEditor===e&&(Kg.activeEditor=gc.length>0?gc[0]:null),Kg.focusedEditor===e&&(Kg.focusedEditor=null),n.length!==gc.length},vG=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(W6(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},yG=document.compatMode!=="CSS1Compat",Kg={...RD,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"7",minorVersion:"1.1",releaseDate:"2024-05-22",i18n:Ms,activeEditor:null,focusedEditor:null,setup(){const e=this;let n="",o="",r=Ys.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const c=window.tinymce||window.tinyMCEPreInit;if(c)n=c.base||c.baseURL,o=c.suffix;else{const u=document.getElementsByTagName("script");for(let m=0;m<u.length;m++){const v=u[m].src||"";if(v==="")continue;const C=v.substring(v.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(v)){C.indexOf(".min")!==-1&&(o=".min"),n=v.substring(0,v.lastIndexOf("/"));break}}if(!n&&document.currentScript){const m=document.currentScript.src;m.indexOf(".min")!==-1&&(o=".min"),n=m.substring(0,m.lastIndexOf("/"))}}e.baseURL=new Ys(r).toAbsolute(n),e.documentBaseURL=r,e.baseURI=new Ys(e.baseURL),e.suffix=o,RM(e)},overrideDefaults(e){const n=e.base_url;n&&this._setBaseUrl(n);const o=e.suffix;o&&(this.suffix=o),this.defaultOptions=e;const r=e.plugin_base_urls;r!==void 0&&lt(r,(c,u)=>{Yr.PluginManager.urls[u]=c})},init(e){const n=this;let o;const r=ze.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),c=(D,M)=>D.inline&&M.tagName.toLowerCase()in r,u=D=>{let M=D.id;return M||(M=mo(D,"name").filter(B=>!W0.get(B)).getOrThunk(W0.uniqueId),D.setAttribute("id",M)),M},m=D=>{const M=e[D];if(M)return M.apply(n,[])},v=D=>ct.browser.isIE()||ct.browser.isEdge()?(KA("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/7/support/#supportedwebbrowsers"),[]):yG?(KA("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):ee(D.selector)?W0.select(D.selector):Ae(D.target)?[D.target]:[];let C=D=>{o=D};const E=()=>{let D=0;const M=[];let B;const W=(q,Z,K)=>{const ne=new OT(q,Z,n);M.push(ne),ne.on("init",()=>{++D===B.length&&C(M)}),ne.targetElm=ne.targetElm||K,ne.render()};W0.unbind(window,"ready",E),m("onpageload"),B=th(v(e)),ze.each(B,q=>{vG(n.get(q.id))}),B=ze.grep(B,q=>!n.get(q.id)),B.length===0?C([]):AT(B,q=>{c(e,q)?KA("Could not initialize inline editor on invalid inline target element",q):W(u(q),e,q)})};return W0.bind(window,"ready",E),new Promise(D=>{o?D(o):C=M=>{D(M)}})},get(e){return arguments.length===0?gc.slice(0):ee(e)?ss(gc,n=>n.id===e).getOr(null):Za(e)&&gc[e]?gc[e]:null},add(e){const n=this,o=n.get(e.id);return o===e||(o===null&&gc.push(e),U6(!0),n.activeEditor=e,n.dispatch("AddEditor",{editor:e}),RT||(RT=r=>{const c=n.dispatch("BeforeUnload");if(c.returnValue)return r.preventDefault(),r.returnValue=c.returnValue,c.returnValue},window.addEventListener("beforeunload",RT))),e},createEditor(e,n){return this.add(new OT(e,n,this))},remove(e){const n=this;let o;if(!e){for(let r=gc.length-1;r>=0;r--)n.remove(gc[r]);return}if(ee(e)){AT(W0.select(e),r=>{o=n.get(r.id),o&&n.remove(o)});return}return o=e,ae(n.get(o.id))?null:(W6(o)&&n.dispatch("RemoveEditor",{editor:o}),gc.length===0&&window.removeEventListener("beforeunload",RT),o.remove(),U6(gc.length>0),o)},execCommand(e,n,o){var r;const c=this,u=sn(o)?(r=o.id)!==null&&r!==void 0?r:o.index:o;switch(e){case"mceAddEditor":{if(!c.get(u)){const m=o.options;new OT(u,m,c).render()}return!0}case"mceRemoveEditor":{const m=c.get(u);return m&&m.remove(),!0}case"mceToggleEditor":{const m=c.get(u);return m?(m.isHidden()?m.show():m.hide(),!0):(c.execCommand("mceAddEditor",!1,o),!0)}}return c.activeEditor?c.activeEditor.execCommand(e,n,o):!1},triggerSave:()=>{AT(gc,e=>{e.save()})},addI18n:(e,n)=>{Ms.add(e,n)},translate:e=>Ms.translate(e),setActive(e){const n=this.activeEditor;this.activeEditor!==e&&(n&&n.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:n})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new Ys(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new Ys(this.baseURL)}};Kg.setup();const CG=(()=>{const e=vr(),n=u=>({items:u,types:Wr(u),getType:m=>mo(u,m).getOrUndefined()}),o=u=>{e.set(u)},r=()=>e.get().getOrUndefined(),c=e.clear;return{FakeClipboardItem:n,write:o,read:r,clear:c}})(),Z6=Math.min,Yp=Math.max,PD=Math.round,ND=(e,n,o)=>{let r=n.x,c=n.y;const u=e.w,m=e.h,v=n.w,C=n.h,E=(o||"").split("");return E[0]==="b"&&(c+=C),E[1]==="r"&&(r+=v),E[0]==="c"&&(c+=PD(C/2)),E[1]==="c"&&(r+=PD(v/2)),E[3]==="b"&&(c-=m),E[4]==="r"&&(r-=u),E[3]==="c"&&(c-=PD(m/2)),E[4]==="c"&&(r-=PD(u/2)),Z0(r,c,u,m)},wG=(e,n,o,r)=>{for(let c=0;c<r.length;c++){const u=ND(e,n,r[c]);if(u.x>=o.x&&u.x+u.w<=o.w+o.x&&u.y>=o.y&&u.y+u.h<=o.h+o.y)return r[c]}return null},j6=(e,n,o)=>Z0(e.x-n,e.y-o,e.w+n*2,e.h+o*2),SG=(e,n)=>{const o=Yp(e.x,n.x),r=Yp(e.y,n.y),c=Z6(e.x+e.w,n.x+n.w),u=Z6(e.y+e.h,n.y+n.h);return c-o<0||u-r<0?null:Z0(o,r,c-o,u-r)},xG=(e,n,o)=>{let r=e.x,c=e.y,u=e.x+e.w,m=e.y+e.h;const v=n.x+n.w,C=n.y+n.h,E=Yp(0,n.x-r),D=Yp(0,n.y-c),M=Yp(0,u-v),B=Yp(0,m-C);return r+=E,c+=D,o&&(u+=E,m+=D,r-=M,c-=B),u-=M,m-=B,Z0(r,c,u-r,m-c)},Z0=(e,n,o,r)=>({x:e,y:n,w:o,h:r}),_G={inflate:j6,relativePosition:ND,findBestRelativePosition:wG,intersect:SG,clamp:xG,create:Z0,fromClientRect:e=>Z0(e.left,e.top,e.width,e.height)},EG=(e,n,o=1e3)=>{let r=!1,c=null;const u=E=>(...D)=>{r||(r=!0,c!==null&&(clearTimeout(c),c=null),E.apply(null,D))},m=u(e),v=u(n);return{start:(...E)=>{!r&&c===null&&(c=setTimeout(()=>v.apply(null,E),o))},resolve:m,reject:v}},BD=(()=>{const e={},n={},o={};return{load:(C,E)=>{const D=`Script at URL "${E}" failed to load`,M=`Script at URL "${E}" did not call \`tinymce.Resource.add('${C}', data)\` within 1 second`;if(e[C]!==void 0)return e[C];{const B=new Promise((W,q)=>{const Z=EG(W,q);n[C]=Z.resolve,Pi.ScriptLoader.loadScript(E).then(()=>Z.start(M),()=>Z.reject(D))});return e[C]=B,B}},add:(C,E)=>{n[C]!==void 0&&(n[C](E),delete n[C]),e[C]=Promise.resolve(E),o[C]=E},has:C=>C in o,get:C=>o[C],unload:C=>{delete e[C],delete o[C]}}})(),TG=()=>(()=>{let e={},n=[];const o={getItem:r=>{const c=e[r];return c||null},setItem:(r,c)=>{n.push(r),e[r]=String(c)},key:r=>n[r],removeItem:r=>{n=n.filter(c=>c===r),delete e[r]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})();let j0;try{const e="__storage_test__";j0=window.localStorage,j0.setItem(e,e),j0.removeItem(e)}catch{j0=TG()}var kG=j0;const OG={geom:{Rect:_G},util:{Delay:ai,Tools:ze,VK:He,URI:Ys,EventDispatcher:AD,Observable:RD,I18n:Ms,LocalStorage:kG,ImageUploader:kd},dom:{EventUtils:Xu,TreeWalker:zs,TextSeeker:ed,DOMUtils:ao,ScriptLoader:Pi,RangeUtils:Re,Serializer:Tr,StyleSheetLoader:ff,ControlSelection:dp,BookmarkManager:vd,Selection:MH,Event:Xu.Event},html:{Styles:Iv,Entities:qu,Node:za,Schema:Bn,DomParser:m0,Writer:GM,Serializer:Uf},Env:ct,AddOnManager:Yr,Annotator:xl,Formatter:wu,UndoManager:S0,EditorCommands:_T,WindowManager:jB,NotificationManager:ZB,EditorObservable:N6,Shortcuts:H6,Editor:OT,FocusManager:_M,EditorManager:Kg,DOM:ao.DOM,ScriptLoader:Pi.ScriptLoader,PluginManager:v0,ThemeManager:Mg,ModelManager:b0,IconManager:rE,Resource:BD,FakeClipboard:CG,trim:ze.trim,isArray:ze.isArray,is:ze.is,toArray:ze.toArray,makeMap:ze.makeMap,each:ze.each,map:ze.map,grep:ze.grep,inArray:ze.inArray,extend:ze.extend,walk:ze.walk,resolve:ze.resolve,explode:ze.explode,_addCacheSuffix:ze._addCacheSuffix},q6=ze.extend(Kg,OG),AG=e=>{try{b.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(q6),AG(q6)})()})(BQ);tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3Zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3Zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1ZM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7Zm10 3.5.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0Zm-10-7-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3Zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7Zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8ZM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8Zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7Z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6Z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0Z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3 16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6Zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6Z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',"math-equation":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 4.8c.1-.5.5-.8 1-.8h10a1 1 0 1 1 0 2h-9.2L8.3 19.2a1 1 0 0 1-1.7.4l-3.4-4.2a1 1 0 0 1 1.6-1.2l2 2.5L9 4.8Zm9.7 5.5c.4.4.4 1 0 1.4L17 13.5l1.8 1.8a1 1 0 1 1-1.4 1.4L15.5 15l-1.8 1.8a1 1 0 0 1-1.4-1.4l1.8-1.8-1.8-1.8a1 1 0 0 1 1.4-1.4l1.8 1.8 1.8-1.8a1 1 0 0 1 1.4 0Z"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"revision-history":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"export-pdf":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H7v3H5V5c0-1.1.9-2 2-2Z"/><path d="M2.6 15.2v-1.9h1c.6 0 1-.2 1.4-.5.3-.3.5-.7.5-1.2s-.2-.9-.5-1.2a2 2 0 0 0-1.3-.4H1v5.2h1.6Zm.4-3h-.4v-1.1h.5l.6.1.2.5c0 .1 0 .3-.2.4l-.7.1Zm5.7 3 1-.1c.3 0 .5-.2.7-.4l.5-.8c.2-.3.2-.7.2-1.3v-1l-.5-.8c-.2-.3-.4-.5-.7-.6L8.7 10H6.3v5.2h2.4Zm-.4-1.1H8v-3h.4c.5 0 .8.2 1 .4l.2 1.1-.1 1-.3.3-.8.2Zm5.3 1.2V13h2v-1h-2v-1H16V10h-4v5.2h1.6Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"export-word":'<svg width="24" height="24"><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H5c0-1.1.9-2 2-2ZM15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"import-word":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V15h-2V9h-4V5H5c0-1.1.9-2 2-2Z"/><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M11.4 18.2a1 1 0 0 0 1.2 1.6l1.4-1V22a1 1 0 1 0 2 0v-3.1l1.4 1a1 1 0 0 0 1.2-1.7L15 15.8l-3.6 2.4Z"/></svg>'}});(function(){const b=Object.getPrototypeOf,S=(t,s,a)=>{var i;return a(t,s.prototype)?!0:((i=t.constructor)===null||i===void 0?void 0:i.name)===s.name},k=t=>{const s=typeof t;return t===null?"null":s==="object"&&Array.isArray(t)?"array":s==="object"&&S(t,String,(a,i)=>i.isPrototypeOf(a))?"string":s},P=t=>s=>k(s)===t,F=t=>s=>typeof s===t,H=t=>s=>t===s,j=(t,s)=>ye(t)&&S(t,s,(a,i)=>b(a)===i),J=P("string"),ye=P("object"),Qe=t=>j(t,Object),qe=P("array"),Ge=H(null),en=F("boolean"),xn=H(void 0),Zt=t=>t==null,Rt=t=>!Zt(t),Ne=F("function"),fn=F("number"),Gn=(t,s)=>{if(qe(t)){for(let a=0,i=t.length;a<i;++a)if(!s(t[a]))return!1;return!0}return!1},ee=()=>{},sn=t=>()=>t(),Hc=(t,s)=>(...a)=>t(s.apply(null,a)),Tn=(t,s)=>a=>t(s(a)),ae=t=>()=>t,bn=t=>t,fs=(t,s)=>t===s;function _n(t,...s){return(...a)=>{const i=s.concat(a);return t.apply(null,i)}}const Ae=t=>s=>!t(s),oe=t=>()=>{throw new Error(t)},Za=t=>t(),eo=ae(!1),Bt=ae(!0);class A{constructor(s,a){this.tag=s,this.value=a}static some(s){return new A(!0,s)}static none(){return A.singletonNone}fold(s,a){return this.tag?a(this.value):s()}isSome(){return this.tag}isNone(){return!this.tag}map(s){return this.tag?A.some(s(this.value)):A.none()}bind(s){return this.tag?s(this.value):A.none()}exists(s){return this.tag&&s(this.value)}forall(s){return!this.tag||s(this.value)}filter(s){return!this.tag||s(this.value)?this:A.none()}getOr(s){return this.tag?this.value:s}or(s){return this.tag?this:s}getOrThunk(s){return this.tag?this.value:s()}orThunk(s){return this.tag?this:s()}getOrDie(s){if(this.tag)return this.value;throw new Error(s??"Called getOrDie on None")}static from(s){return Rt(s)?A.some(s):A.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(s){this.tag&&s(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}A.singletonNone=new A(!1);const ns=Array.prototype.slice,et=Array.prototype.indexOf,zo=Array.prototype.push,jt=(t,s)=>et.call(t,s),Be=(t,s)=>{const a=jt(t,s);return a===-1?A.none():A.some(a)},Uo=(t,s)=>jt(t,s)>-1,ja=(t,s)=>{for(let a=0,i=t.length;a<i;a++){const d=t[a];if(s(d,a))return!0}return!1},os=(t,s)=>{const a=[];for(let i=0;i<t;i++)a.push(s(i));return a},ia=(t,s)=>{const a=[];for(let i=0;i<t.length;i+=s){const d=ns.call(t,i,i+s);a.push(d)}return a},De=(t,s)=>{const a=t.length,i=new Array(a);for(let d=0;d<a;d++){const g=t[d];i[d]=s(g,d)}return i},dt=(t,s)=>{for(let a=0,i=t.length;a<i;a++){const d=t[a];s(d,a)}},L=(t,s)=>{for(let a=t.length-1;a>=0;a--){const i=t[a];s(i,a)}},lm=(t,s)=>{const a=[],i=[];for(let d=0,g=t.length;d<g;d++){const h=t[d];(s(h,d)?a:i).push(h)}return{pass:a,fail:i}},fo=(t,s)=>{const a=[];for(let i=0,d=t.length;i<d;i++){const g=t[i];s(g,i)&&a.push(g)}return a},Ss=(t,s,a)=>(L(t,(i,d)=>{a=s(a,i,d)}),a),bo=(t,s,a)=>(dt(t,(i,d)=>{a=s(a,i,d)}),a),WT=(t,s,a)=>{for(let i=0,d=t.length;i<d;i++){const g=t[i];if(s(g,i))return A.some(g);if(a(g,i))break}return A.none()},Gt=(t,s)=>WT(t,s,eo),vo=(t,s)=>{for(let a=0,i=t.length;a<i;a++){const d=t[a];if(s(d,a))return A.some(a)}return A.none()},Xt=t=>{const s=[];for(let a=0,i=t.length;a<i;++a){if(!qe(t[a]))throw new Error("Arr.flatten item "+a+" was not an array, input: "+t);zo.apply(s,t[a])}return s},we=(t,s)=>Xt(De(t,s)),Ou=(t,s)=>{for(let a=0,i=t.length;a<i;++a){const d=t[a];if(s(d,a)!==!0)return!1}return!0},Rr=t=>{const s=ns.call(t,0);return s.reverse(),s},Mt=(t,s)=>fo(t,a=>!Uo(s,a)),Zd=(t,s)=>{const a={};for(let i=0,d=t.length;i<d;i++){const g=t[i];a[String(g)]=s(g,i)}return a},Wo=t=>[t],eh=(t,s)=>{const a=ns.call(t,0);return a.sort(s),a},ss=(t,s)=>s>=0&&s<t.length?A.some(t[s]):A.none(),xa=t=>ss(t,0),n1=t=>ss(t,t.length-1),vc=Ne(Array.from)?Array.from:t=>ns.call(t),ur=(t,s)=>{for(let a=0;a<t.length;a++){const i=s(t[a],a);if(i.isSome())return i}return A.none()},$o=Object.keys,o1=Object.hasOwnProperty,As=(t,s)=>{const a=$o(t);for(let i=0,d=a.length;i<d;i++){const g=a[i],h=t[g];s(h,g)}},Io=(t,s)=>um(t,(a,i)=>({k:i,v:s(a,i)})),um=(t,s)=>{const a={};return As(t,(i,d)=>{const g=s(i,d);a[g.k]=g.v}),a},Dr=t=>(s,a)=>{t[a]=s},Ll=(t,s,a,i)=>{As(t,(d,g)=>{(s(d,g)?a:i)(d,g)})},_a=(t,s)=>{const a={},i={};return Ll(t,s,Dr(a),Dr(i)),{t:a,f:i}},jd=(t,s)=>{const a={};return Ll(t,s,Dr(a),ee),a},th=(t,s)=>{const a=[];return As(t,(i,d)=>{a.push(s(i,d))}),a},Wr=(t,s)=>{const a=$o(t);for(let i=0,d=a.length;i<d;i++){const g=a[i],h=t[g];if(s(h,g,t))return A.some(h)}return A.none()},tv=t=>th(t,bn),lt=(t,s)=>Ln(t,s)?A.from(t[s]):A.none(),Ln=(t,s)=>o1.call(t,s),yc=(t,s)=>Ln(t,s)&&t[s]!==void 0&&t[s]!==null,Ga=(t,s,a=fs)=>t.exists(i=>a(i,s)),s1=(t,s,a=fs)=>Au(t,s,a).getOr(t.isNone()&&s.isNone()),Gd=t=>{const s=[],a=i=>{s.push(i)};for(let i=0;i<t.length;i++)t[i].each(a);return s},_o=t=>{const s=[];for(let a=0;a<t.length;a++){const i=t[a];if(i.isSome())s.push(i.getOrDie());else return A.none()}return A.some(s)},Au=(t,s,a)=>t.isSome()&&s.isSome()?A.some(a(t.getOrDie(),s.getOrDie())):A.none(),dm=(t,s,a,i)=>t.isSome()&&s.isSome()&&a.isSome()?A.some(i(t.getOrDie(),s.getOrDie(),a.getOrDie())):A.none(),mo=(t,s)=>t!=null?A.some(s(t)):A.none(),Ft=(t,s)=>t?A.some(s):A.none(),Ea=(t,s)=>t+s,qd=(t,s)=>t.substring(s),r1=(t,s,a)=>s===""||t.length>=s.length&&t.substr(a,a+s.length)===s,nv=(t,s)=>xs(t,s)?qd(t,s.length):t,la=(t,s)=>nl(t,s)?t:Ea(t,s),Mr=(t,s,a=0,i)=>{const d=t.indexOf(s,a);return d!==-1?xn(i)?!0:d+s.length<=i:!1},xs=(t,s)=>r1(t,s,0),nl=(t,s)=>r1(t,s,t.length-s.length),Hl=(t=>s=>s.replace(t,""))(/^\s+|\s+$/g),qa=t=>t.length>0,Do=t=>!qa(t),Vc=t=>t.style!==void 0&&Ne(t.style.getPropertyValue),ol=(t,s)=>{const i=(s||document).createElement("div");if(i.innerHTML=t,!i.hasChildNodes()||i.childNodes.length>1){const d="HTML does not have a single root node";throw console.error(d,t),new Error(d)}return Vl(i.childNodes[0])},ZT=(t,s)=>{const i=(s||document).createElement(t);return Vl(i)},jT=(t,s)=>{const i=(s||document).createTextNode(t);return Vl(i)},Vl=t=>{if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},le={fromHtml:ol,fromTag:ZT,fromText:jT,fromDom:Vl,fromPoint:(t,s,a)=>A.from(t.dom.elementFromPoint(s,a)).map(Vl)},Ta=typeof window<"u"?window:Function("return this;")(),fm=(t,s)=>{let a=s??Ta;for(let i=0;i<t.length&&a!==void 0&&a!==null;++i)a=a[t[i]];return a},bw=(t,s)=>{const a=t.split(".");return fm(a,s)},ov=(t,s)=>bw(t,s),yo=(t,s)=>{const a=ov(t,s);if(a==null)throw new Error(t+" not available on this browser");return a},sv=Object.getPrototypeOf,GT=t=>yo("HTMLElement",t),nh=t=>{const s=bw("ownerDocument.defaultView",t);return ye(t)&&(GT(s).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(sv(t).constructor.name))},mm=9,dr=11,ms=1,zl=3,zc=t=>t.dom.nodeName.toLowerCase(),Kd=t=>t.dom.nodeType,oh=t=>s=>Kd(s)===t,gm=t=>no(t)&&nh(t.dom),no=oh(ms),Ka=oh(zl),qT=oh(mm),Yd=oh(dr),Ru=t=>s=>no(s)&&zc(s)===t,ua=(t,s)=>{const a=t.dom;if(a.nodeType!==ms)return!1;{const i=a;if(i.matches!==void 0)return i.matches(s);if(i.msMatchesSelector!==void 0)return i.msMatchesSelector(s);if(i.webkitMatchesSelector!==void 0)return i.webkitMatchesSelector(s);if(i.mozMatchesSelector!==void 0)return i.mozMatchesSelector(s);throw new Error("Browser lacks native selectors")}},Jo=t=>t.nodeType!==ms&&t.nodeType!==mm&&t.nodeType!==dr||t.childElementCount===0,KT=(t,s)=>{const a=s===void 0?document:s.dom;return Jo(a)?[]:De(a.querySelectorAll(t),le.fromDom)},rv=(t,s)=>{const a=s===void 0?document:s.dom;return Jo(a)?A.none():A.from(a.querySelector(t)).map(le.fromDom)},qn=(t,s)=>t.dom===s.dom,Cc=(t,s)=>{const a=t.dom,i=s.dom;return a===i?!1:a.contains(i)},Ya=t=>le.fromDom(t.dom.ownerDocument),fr=t=>qT(t)?t:Ya(t),c1=t=>le.fromDom(fr(t).dom.documentElement),Xd=t=>le.fromDom(fr(t).dom.defaultView),Uc=t=>A.from(t.dom.parentNode).map(le.fromDom),Jd=t=>Uc(t),Ci=t=>A.from(t.dom.parentElement).map(le.fromDom),vw=(t,s)=>{const a=Ne(s)?s:eo;let i=t.dom;const d=[];for(;i.parentNode!==null&&i.parentNode!==void 0;){const g=i.parentNode,h=le.fromDom(g);if(d.push(h),a(h)===!0)break;i=g}return d},av=t=>A.from(t.dom.offsetParent).map(le.fromDom),yw=t=>A.from(t.dom.nextSibling).map(le.fromDom),Wc=t=>De(t.dom.childNodes,le.fromDom),Du=(t,s)=>{const a=t.dom.childNodes;return A.from(a[s]).map(le.fromDom)},i1=t=>Du(t,0),l1=(t,s)=>({element:t,offset:s}),cv=(t,s)=>{const a=Wc(t);return a.length>0&&s<a.length?l1(a[s],0):l1(t,s)},iv=t=>Yd(t)&&Rt(t.dom.host),sh=Ne(Element.prototype.attachShadow)&&Ne(Node.prototype.getRootNode),Cw=ae(sh),Eo=sh?t=>le.fromDom(t.dom.getRootNode()):fr,Zc=t=>iv(t)?t:le.fromDom(fr(t).dom.body),YT=t=>lv(t).isSome(),lv=t=>{const s=Eo(t);return iv(s)?A.some(s):A.none()},wi=t=>le.fromDom(t.dom.host),XT=t=>{if(Cw()&&Rt(t.target)){const s=le.fromDom(t.target);if(no(s)&&u1(s)&&t.composed&&t.composedPath){const a=t.composedPath();if(a)return xa(a)}}return A.from(t.target)},u1=t=>Rt(t.dom.shadowRoot),Hs=t=>{const s=Ka(t)?t.dom.parentNode:t.dom;if(s==null||s.ownerDocument===null)return!1;const a=s.ownerDocument;return lv(le.fromDom(s)).fold(()=>a.body.contains(s),Tn(Hs,wi))},Zr=()=>Qd(le.fromDom(document)),Qd=t=>{const s=t.dom.body;if(s==null)throw new Error("Body is not available yet");return le.fromDom(s)},ww=(t,s,a)=>{if(J(a)||en(a)||fn(a))t.setAttribute(s,a+"");else throw console.error("Invalid call to Attribute.set. Key ",s,":: Value ",a,":: Element ",t),new Error("Attribute value was not simple")},ct=(t,s,a)=>{ww(t.dom,s,a)},Sw=(t,s)=>{const a=t.dom;As(s,(i,d)=>{ww(a,d,i)})},Fo=(t,s)=>{const a=t.dom.getAttribute(s);return a===null?void 0:a},tr=(t,s)=>A.from(Fo(t,s)),uv=(t,s)=>{const a=t.dom;return a&&a.hasAttribute?a.hasAttribute(s):!1},Zo=(t,s)=>{t.dom.removeAttribute(s)},JT=t=>bo(t.dom.attributes,(s,a)=>(s[a.name]=a.value,s),{}),rh=(t,s,a)=>{if(!J(a))throw console.error("Invalid call to CSS.set. Property ",s,":: Value ",a,":: Element ",t),new Error("CSS value must be a string: "+a);Vc(t)&&t.style.setProperty(s,a)},ah=(t,s)=>{Vc(t)&&t.style.removeProperty(s)},qt=(t,s,a)=>{const i=t.dom;rh(i,s,a)},ka=(t,s)=>{const a=t.dom;As(s,(i,d)=>{rh(a,d,i)})},ze=(t,s)=>{const a=t.dom;As(s,(i,d)=>{i.fold(()=>{ah(a,d)},g=>{rh(a,d,g)})})},jo=(t,s)=>{const a=t.dom,d=window.getComputedStyle(a).getPropertyValue(s);return d===""&&!Hs(t)?ch(a,s):d},ch=(t,s)=>Vc(t)?t.style.getPropertyValue(s):"",nr=(t,s)=>{const a=t.dom,i=ch(a,s);return A.from(i).filter(d=>d.length>0)},mr=t=>{const s={},a=t.dom;if(Vc(a))for(let i=0;i<a.style.length;i++){const d=a.style.item(i);s[d]=a.style[d]}return s},Mu=(t,s,a)=>{const i=le.fromTag(t);return qt(i,s,a),nr(i,s).isSome()},kn=(t,s)=>{const a=t.dom;ah(a,s),Ga(tr(t,"style").map(Hl),"")&&Zo(t,"style")},Ul=t=>t.dom.offsetWidth,or=(t,s)=>{const a=(w,x)=>{if(!fn(x)&&!x.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+x);const T=w.dom;Vc(T)&&(T.style[t]=x+"px")},i=w=>{const x=s(w);if(x<=0||x===null){const T=jo(w,t);return parseFloat(T)||0}return x},d=i,g=(w,x)=>bo(x,(T,R)=>{const N=jo(w,R),I=N===void 0?0:parseInt(N,10);return isNaN(I)?T:T+I},0);return{set:a,get:i,getOuter:d,aggregate:g,max:(w,x,T)=>{const R=g(w,T);return x>R?x-R:0}}},hm=or("height",t=>{const s=t.dom;return Hs(t)?s.getBoundingClientRect().height:s.offsetHeight}),_s=t=>hm.get(t),Pu=t=>hm.getOuter(t),dv=(t,s)=>{const a=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],i=hm.max(t,s,a);qt(t,"max-height",i+"px")},xw=(t,s)=>({left:t,top:s,translate:(i,d)=>xw(t+i,s+d)}),To=xw,_w=t=>{const s=t.getBoundingClientRect();return To(s.left,s.top)},Pr=(t,s)=>t!==void 0?t:s!==void 0?s:0,da=t=>{const s=t.dom.ownerDocument,a=s.body,i=s.defaultView,d=s.documentElement;if(a===t.dom)return To(a.offsetLeft,a.offsetTop);const g=Pr(i==null?void 0:i.pageYOffset,d.scrollTop),h=Pr(i==null?void 0:i.pageXOffset,d.scrollLeft),w=Pr(d.clientTop,a.clientTop),x=Pr(d.clientLeft,a.clientLeft);return Si(t).translate(h-x,g-w)},Si=t=>{const s=t.dom,i=s.ownerDocument.body;return i===s?To(i.offsetLeft,i.offsetTop):Hs(t)?_w(s):To(0,0)},d1=or("width",t=>t.dom.offsetWidth),On=(t,s)=>d1.set(t,s),fa=t=>d1.get(t),Wl=t=>d1.getOuter(t),pm=(t,s)=>{const a=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],i=d1.max(t,s,a);qt(t,"max-width",i+"px")},jc=t=>{let s=!1,a;return(...i)=>(s||(s=!0,a=t.apply(null,i)),a)},Xa=(t,s,a,i)=>{const d=t.isiOS()&&/ipad/i.test(a)===!0,g=t.isiOS()&&!d,h=t.isiOS()||t.isAndroid(),w=h||i("(pointer:coarse)"),x=d||!g&&h&&i("(min-device-width:768px)"),T=g||h&&!x,R=s.isSafari()&&t.isiOS()&&/safari/i.test(a)===!1,N=!T&&!x&&!R;return{isiPad:ae(d),isiPhone:ae(g),isTablet:ae(x),isPhone:ae(T),isTouch:ae(w),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:ae(R),isDesktop:ae(N)}},Co=(t,s)=>{for(let a=0;a<t.length;a++){const i=t[a];if(i.test(s))return i}},ih=(t,s)=>{const a=Co(t,s);if(!a)return{major:0,minor:0};const i=d=>Number(s.replace(a,"$"+d));return vm(i(1),i(2))},ef=(t,s)=>{const a=String(s).toLowerCase();return t.length===0?bm():ih(t,a)},bm=()=>vm(0,0),vm=(t,s)=>({major:t,minor:s}),io={nu:vm,detect:ef,unknown:bm},Zl=(t,s)=>ur(s.brands,a=>{const i=a.brand.toLowerCase();return Gt(t,d=>{var g;return i===((g=d.brand)===null||g===void 0?void 0:g.toLowerCase())}).map(d=>({current:d.name,version:io.nu(parseInt(a.version,10),0)}))}),Es=(t,s)=>{const a=String(s).toLowerCase();return Gt(t,i=>i.search(a))},xi=(t,s)=>Es(t,s).map(a=>{const i=io.detect(a.versionRegexes,s);return{current:a.name,version:i}}),tf=(t,s)=>Es(t,s).map(a=>{const i=io.detect(a.versionRegexes,s);return{current:a.name,version:i}}),Rs=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Gc=t=>s=>Mr(s,t),ym=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>Mr(t,"edge/")&&Mr(t,"chrome")&&Mr(t,"safari")&&Mr(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Rs],search:t=>Mr(t,"chrome")&&!Mr(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>Mr(t,"msie")||Mr(t,"trident")},{name:"Opera",versionRegexes:[Rs,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Gc("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Gc("firefox")},{name:"Safari",versionRegexes:[Rs,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(Mr(t,"safari")||Mr(t,"mobile/"))&&Mr(t,"applewebkit")}],f1=[{name:"Windows",search:Gc("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>Mr(t,"iphone")||Mr(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Gc("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Gc("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Gc("linux"),versionRegexes:[]},{name:"Solaris",search:Gc("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Gc("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Gc("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],lh={browsers:ae(ym),oses:ae(f1)},m1="Edge",Cm="Chromium",g1="IE",Nu="Opera",uh="Firefox",Oa="Safari",nf=()=>h1({current:void 0,version:io.unknown()}),h1=t=>{const s=t.current,a=t.version,i=d=>()=>s===d;return{current:s,version:a,isEdge:i(m1),isChromium:i(Cm),isIE:i(g1),isOpera:i(Nu),isFirefox:i(uh),isSafari:i(Oa)}},of={unknown:nf,nu:h1,edge:ae(m1),chromium:ae(Cm),ie:ae(g1),opera:ae(Nu),firefox:ae(uh),safari:ae(Oa)},Ew="Windows",dh="iOS",Tw="Android",wm="Linux",kw="macOS",Sm="Solaris",QT="FreeBSD",X="ChromeOS",fv=()=>Ja({current:void 0,version:io.unknown()}),Ja=t=>{const s=t.current,a=t.version,i=d=>()=>s===d;return{current:s,version:a,isWindows:i(Ew),isiOS:i(dh),isAndroid:i(Tw),isMacOS:i(kw),isLinux:i(wm),isSolaris:i(Sm),isFreeBSD:i(QT),isChromeOS:i(X)}},sf={unknown:fv,nu:Ja,windows:ae(Ew),ios:ae(dh),android:ae(Tw),linux:ae(wm),macos:ae(kw),solaris:ae(Sm),freebsd:ae(QT),chromeos:ae(X)},Ow={detect:(t,s,a)=>{const i=lh.browsers(),d=lh.oses(),g=s.bind(x=>Zl(i,x)).orThunk(()=>xi(i,t)).fold(of.unknown,of.nu),h=tf(d,t).fold(sf.unknown,sf.nu),w=Xa(h,g,t,a);return{browser:g,os:h,deviceType:w}}},Wn=t=>window.matchMedia(t).matches;let _i=jc(()=>Ow.detect(navigator.userAgent,A.from(navigator.userAgentData),Wn));const Qa=()=>_i(),jr=(t,s,a,i,d,g,h)=>({target:t,x:s,y:a,stop:i,prevent:d,kill:g,raw:h}),Aw=t=>{const s=le.fromDom(XT(t).getOr(t.target)),a=()=>t.stopPropagation(),i=()=>t.preventDefault(),d=Hc(i,a);return jr(s,t.clientX,t.clientY,a,i,d,t)},fh=(t,s)=>a=>{t(a)&&s(Aw(a))},wc=(t,s,a,i,d)=>{const g=fh(a,i);return t.dom.addEventListener(s,g,d),{unbind:_n(Rw,t,s,g,d)}},mh=(t,s,a,i)=>wc(t,s,a,i,!1),mv=(t,s,a,i)=>wc(t,s,a,i,!0),Rw=(t,s,a,i)=>{t.dom.removeEventListener(s,a,i)},qc=(t,s)=>{Uc(t).each(i=>{i.dom.insertBefore(s.dom,t.dom)})},xm=(t,s)=>{yw(t).fold(()=>{Uc(t).each(d=>{Sc(d,s)})},i=>{qc(i,s)})},gv=(t,s)=>{i1(t).fold(()=>{Sc(t,s)},i=>{t.dom.insertBefore(s.dom,i.dom)})},Sc=(t,s)=>{t.dom.appendChild(s.dom)},gr=(t,s,a)=>{Du(t,a).fold(()=>{Sc(t,s)},i=>{qc(i,s)})},Bu=(t,s)=>{dt(s,a=>{Sc(t,a)})},_m=t=>{t.dom.textContent="",dt(Wc(t),s=>{Kc(s)})},Kc=t=>{const s=t.dom;s.parentNode!==null&&s.parentNode.removeChild(s)},Gr=t=>{const s=t!==void 0?t.dom:document,a=s.body.scrollLeft||s.documentElement.scrollLeft,i=s.body.scrollTop||s.documentElement.scrollTop;return To(a,i)},p1=(t,s,a)=>{const d=(a!==void 0?a.dom:document).defaultView;d&&d.scrollTo(t,s)},Dw=t=>{const s=t===void 0?window:t;return Qa().browser.isFirefox()?A.none():A.from(s.visualViewport)},gh=(t,s,a,i)=>({x:t,y:s,width:a,height:i,right:t+a,bottom:s+i}),hh=t=>{const s=t===void 0?window:t,a=s.document,i=Gr(le.fromDom(a));return Dw(s).fold(()=>{const d=s.document.documentElement,g=d.clientWidth,h=d.clientHeight;return gh(i.left,i.top,g,h)},d=>gh(Math.max(d.pageLeft,i.left),Math.max(d.pageTop,i.top),d.width,d.height))},b1=()=>le.fromDom(document),jl=(t,s)=>t.view(s).fold(ae([]),i=>{const d=t.owner(i),g=jl(t,d);return[i].concat(g)}),v1=(t,s)=>{const a=s.owner(t),i=jl(s,a);return A.some(i)};var tk=Object.freeze({__proto__:null,view:t=>{var s;return(t.dom===document?A.none():A.from((s=t.dom.defaultView)===null||s===void 0?void 0:s.frameElement)).map(le.fromDom)},owner:t=>Ya(t)});const y1=t=>{const s=b1(),a=Gr(s);return v1(t,tk).fold(_n(da,t),d=>{const g=Si(t),h=Ss(d,(w,x)=>{const T=Si(x);return{left:w.left+T.left,top:w.top+T.top}},{left:0,top:0});return To(h.left+g.left+a.left,h.top+g.top+a.top)})},nk=(t,s,a)=>({point:t,width:s,height:a}),rf=(t,s,a,i)=>({x:t,y:s,width:a,height:i}),Ts=(t,s,a,i)=>({x:t,y:s,width:a,height:i,right:t+a,bottom:s+i}),Mo=t=>{const s=da(t),a=Wl(t),i=Pu(t);return Ts(s.left,s.top,a,i)},Nr=t=>{const s=y1(t),a=Wl(t),i=Pu(t);return Ts(s.left,s.top,a,i)},hv=(t,s)=>{const a=Math.max(t.x,s.x),i=Math.max(t.y,s.y),d=Math.min(t.right,s.right),g=Math.min(t.bottom,s.bottom),h=d-a,w=g-i;return Ts(a,i,h,w)},ok=(t,s)=>bo(s,(a,i)=>hv(a,i),t),Br=()=>hh(window),Et=t=>{let s=t;return{get:()=>s,set:d=>{s=d}}},Em=t=>{const s=Et(A.none()),a=()=>s.get().each(t);return{clear:()=>{a(),s.set(A.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:w=>{a(),s.set(A.some(w))}}},af=()=>Em(t=>t.destroy()),ec=()=>Em(t=>t.unbind()),Mn=()=>{const t=Em(ee);return{...t,on:a=>t.get().each(a)}};var pv=tinymce.util.Tools.resolve("tinymce.ThemeManager");const Tm=t=>{const s=g=>g(t),a=ae(t),i=()=>d,d={tag:!0,inner:t,fold:(g,h)=>h(t),isValue:Bt,isError:eo,map:g=>tn.value(g(t)),mapError:i,bind:s,exists:s,forall:s,getOr:a,or:i,getOrThunk:a,orThunk:i,getOrDie:a,each:g=>{g(t)},toOptional:()=>A.some(t)};return d},ph=t=>{const s=()=>a,a={tag:!1,inner:t,fold:(i,d)=>i(t),isValue:eo,isError:Bt,map:s,mapError:i=>tn.error(i(t)),bind:s,exists:eo,forall:Bt,getOr:bn,or:bn,getOrThunk:Za,orThunk:Za,getOrDie:oe(String(t)),each:ee,toOptional:A.none};return a},tn={value:Tm,error:ph,fromOption:(t,s)=>t.fold(()=>ph(s),Tm)};var qr;(function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"})(qr||(qr={}));const Yc=(t,s,a)=>t.stype===qr.Error?s(t.serror):a(t.svalue),xc=t=>{const s=[],a=[];return dt(t,i=>{Yc(i,d=>a.push(d),d=>s.push(d))}),{values:s,errors:a}},Kr=(t,s)=>t.stype===qr.Error?{stype:qr.Error,serror:s(t.serror)}:t,tc=(t,s)=>t.stype===qr.Value?{stype:qr.Value,svalue:s(t.svalue)}:t,Vs=(t,s)=>t.stype===qr.Value?s(t.svalue):t,Mw=(t,s)=>t.stype===qr.Error?s(t.serror):t,hr=t=>({stype:qr.Value,svalue:t}),sl=t=>({stype:qr.Error,serror:t}),Qo={fromResult:t=>t.fold(sl,hr),toResult:t=>Yc(t,tn.error,tn.value),svalue:hr,partition:xc,serror:sl,bind:Vs,bindError:Mw,map:tc,mapError:Kr,fold:Yc},Pw=(t,s,a,i)=>({tag:"field",key:t,newKey:s,presence:a,prop:i}),Iu=(t,s)=>({tag:"custom",newKey:t,instantiator:s}),Fu=(t,s,a)=>{switch(t.tag){case"field":return s(t.key,t.newKey,t.presence,t.prop);case"custom":return a(t.newKey,t.instantiator)}},go=(t,s)=>s,cf=(t,s)=>Qe(t)&&Qe(s)?Po(t,s):s,rk=t=>(...s)=>{if(s.length===0)throw new Error("Can't merge zero objects");const a={};for(let i=0;i<s.length;i++){const d=s[i];for(const g in d)Ln(d,g)&&(a[g]=t(a[g],d[g]))}return a},Po=rk(cf),Nw=rk(go),_c=()=>({tag:"required",process:{}}),gn=t=>({tag:"defaultedThunk",process:t}),km=t=>gn(ae(t)),C1=()=>({tag:"option",process:{}}),w1=t=>({tag:"mergeWithThunk",process:t}),ak=t=>w1(ae(t)),Bw=(t,s)=>t.length>0?Qo.svalue(Po(s,Nw.apply(void 0,t))):Qo.svalue(s),$w=t=>Hc(Qo.serror,Xt)(t),bv={consolidateObj:(t,s)=>{const a=Qo.partition(t);return a.errors.length>0?$w(a.errors):Bw(a.values,s)},consolidateArr:t=>{const s=Qo.partition(t);return s.errors.length>0?$w(s.errors):Qo.svalue(s.values)}},Om=t=>ye(t)&&$o(t).length>100?" removed due to size":JSON.stringify(t,null,2),Fw=t=>{const s=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:ae("... (only showing first ten failures)")}]):t;return De(s,a=>"Failed path: ("+a.path.join(" > ")+`)
`+a.getErrorInfo())},Aa=(t,s)=>Qo.serror([{path:t,getErrorInfo:s}]),vv=(t,s,a)=>Aa(t,()=>'Could not find valid *required* value for "'+s+'" in '+Om(a)),bh=(t,s)=>Aa(t,()=>'Choice schema did not contain choice key: "'+s+'"'),Am=(t,s,a)=>Aa(t,()=>'The chosen schema: "'+a+'" did not exist in branches: '+Om(s)),ck=(t,s)=>Aa(t,()=>"There are unsupported fields: ["+s.join(", ")+"] specified"),yv=(t,s)=>Aa(t,ae(s)),Lu=t=>{const s=(i,d)=>Qo.bindError(t(d),g=>yv(i,g)),a=ae("val");return{extract:s,toString:a}},Cv=Lu(Qo.svalue),wv=(t,s,a,i)=>lt(s,a).fold(()=>vv(t,a,s),i),sr=(t,s,a,i)=>{const d=lt(t,s).getOrThunk(()=>a(t));return i(d)},Sv=(t,s,a)=>a(lt(t,s)),xv=(t,s,a,i)=>{const d=lt(t,s).map(g=>g===!0?a(t):g);return i(d)},Lw=(t,s,a,i,d)=>{const g=w=>d.extract(s.concat([i]),w),h=w=>w.fold(()=>Qo.svalue(A.none()),x=>{const T=d.extract(s.concat([i]),x);return Qo.map(T,A.some)});switch(t.tag){case"required":return wv(s,a,i,g);case"defaultedThunk":return sr(a,i,t.process,g);case"option":return Sv(a,i,h);case"defaultedOptionThunk":return xv(a,i,t.process,h);case"mergeWithThunk":return sr(a,i,ae({}),w=>{const x=Po(t.process(a),w);return g(x)})}},zs=(t,s,a)=>{const i={},d=[];for(const g of a)Fu(g,(h,w,x,T)=>{const R=Lw(x,t,s,h,T);Qo.fold(R,N=>{d.push(...N)},N=>{i[w]=N})},(h,w)=>{i[h]=w(s)});return d.length>0?Qo.serror(d):Qo.svalue(i)},Hu=t=>({extract:(i,d)=>t().extract(i,d),toString:()=>t().toString()}),Us=t=>$o(jd(t,Rt)),pr=t=>{const s=$t(t),a=Ss(t,(d,g)=>Fu(g,h=>Po(d,{[h]:!0}),ae(d)),{});return{extract:(d,g)=>{const h=en(g)?[]:Us(g),w=fo(h,x=>!yc(a,x));return w.length===0?s.extract(d,g):ck(d,w)},toString:s.toString}},$t=t=>({extract:(i,d)=>zs(i,d,t),toString:()=>`obj{
`+De(t,d=>Fu(d,(g,h,w,x)=>g+" -> "+x.toString(),(g,h)=>"state("+g+")")).join(`
`)+"}"}),lf=t=>({extract:(i,d)=>{const g=De(d,(h,w)=>t.extract(i.concat(["["+w+"]"]),h));return bv.consolidateArr(g)},toString:()=>"array("+t.toString()+")"}),rl=(t,s)=>{const a=s!==void 0?s:bn;return{extract:(g,h)=>{const w=[];for(const x of t){const T=x.extract(g,h);if(T.stype===qr.Value)return{stype:qr.Value,svalue:a(T.svalue)};w.push(T)}return bv.consolidateArr(w)},toString:()=>"oneOf("+De(t,g=>g.toString()).join(", ")+")"}},S1=(t,s)=>{const a=(g,h)=>lf(Lu(t)).extract(g,h);return{extract:(g,h)=>{const w=$o(h),x=a(g,w);return Qo.bind(x,T=>{const R=De(T,N=>Pw(N,N,_c(),s));return $t(R).extract(g,h)})},toString:()=>"setOf("+s.toString()+")"}},ik=(t,s)=>{const a=jc(s);return{extract:(g,h)=>a().extract(g,h),toString:()=>a().toString()}},x1=Hc(lf,$t),Ei=ae(Cv),vh=(t,s)=>Lu(a=>{const i=typeof a;return t(a)?Qo.svalue(a):Qo.serror(`Expected type: ${s} but got: ${i}`)}),Ti=vh(fn,"number"),hs=vh(J,"string"),pt=vh(en,"boolean"),ki=vh(Ne,"function"),_v=t=>{if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(s=>_v(t[s]));default:return!1}},Rm=Lu(t=>_v(t)?Qo.svalue(t):Qo.serror("Expected value to be acceptable for sending via postMessage")),Xc=(t,s,a,i)=>lt(a,i).fold(()=>Am(t,a,i),g=>g.extract(t.concat(["branch: "+i]),s)),Oi=(t,s)=>({extract:(d,g)=>lt(g,t).fold(()=>bh(d,t),w=>Xc(d,g,s,w)),toString:()=>"chooseOn("+t+"). Possible values: "+$o(s)}),lk=()=>lf(Cv),Ai=t=>Lu(s=>t(s).fold(Qo.serror,Qo.svalue)),Hw=(t,s)=>S1(a=>Qo.fromResult(t(a)),s),al=(t,s,a)=>{const i=s.extract([t],a);return Qo.mapError(i,d=>({input:a,errors:d}))},No=(t,s,a)=>Qo.toResult(al(t,s,a)),Ec=t=>t.fold(s=>{throw new Error(Ri(s))},bn),Me=(t,s,a)=>Ec(No(t,s,a)),Ri=t=>`Errors: 
`+Fw(t.errors).join(`
`)+`

Input object: `+Om(t.input),Ra=(t,s)=>Oi(t,Io(s,$t)),ql=(t,s)=>ik(t,s),rs=Pw,rr=Iu,Bo=t=>Ai(s=>Uo(t,s)?tn.value(s):tn.error(`Unsupported value: "${s}", choose one of "${t.join(", ")}".`)),ke=t=>rs(t,t,_c(),Ei()),as=(t,s)=>rs(t,t,_c(),s),ho=t=>as(t,Ti),Go=t=>as(t,hs),Kl=(t,s)=>rs(t,t,_c(),Bo(s)),cl=t=>as(t,pt),Jc=t=>as(t,ki),Ev=(t,s)=>rs(t,t,C1(),Lu(a=>Qo.serror("The field: "+t+" is forbidden. "+s))),Vu=(t,s)=>rs(t,t,_c(),$t(s)),Tv=(t,s)=>rs(t,t,_c(),x1(s)),nc=(t,s)=>rs(t,t,_c(),lf(s)),Nn=t=>rs(t,t,C1(),Ei()),il=(t,s)=>rs(t,t,C1(),s),uf=t=>il(t,Ti),ar=t=>il(t,hs),kv=(t,s)=>il(t,Bo(s)),zu=t=>il(t,ki),_1=(t,s)=>il(t,lf(s)),ps=(t,s)=>il(t,$t(s)),br=(t,s)=>il(t,pr(s)),me=(t,s)=>rs(t,t,km(s),Ei()),lo=(t,s,a)=>rs(t,t,km(s),a),Dm=(t,s)=>lo(t,s,Ti),ll=(t,s)=>lo(t,s,hs),vr=(t,s,a)=>lo(t,s,Bo(a)),cr=(t,s)=>lo(t,s,pt),ko=(t,s)=>lo(t,s,ki),Vw=(t,s)=>lo(t,s,Rm),Tc=(t,s,a)=>lo(t,s,lf(a)),Ov=(t,s,a)=>lo(t,s,$t(a)),Da={generate:t=>{if(!qe(t))throw new Error("cases must be an array");if(t.length===0)throw new Error("there must be at least one case");const s=[],a={};return dt(t,(i,d)=>{const g=$o(i);if(g.length!==1)throw new Error("one and only one name per case");const h=g[0],w=i[h];if(a[h]!==void 0)throw new Error("duplicate key detected:"+h);if(h==="cata")throw new Error("cannot have a case named cata (sorry)");if(!qe(w))throw new Error("case arguments must be an array");s.push(h),a[h]=(...x)=>{const T=x.length;if(T!==w.length)throw new Error("Wrong number of arguments to case "+h+". Expected "+w.length+" ("+w+"), got "+T);return{fold:(...N)=>{if(N.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+N.length);return N[d].apply(null,x)},match:N=>{const I=$o(N);if(s.length!==I.length)throw new Error("Wrong number of arguments to match. Expected: "+s.join(",")+`
Actual: `+I.join(","));if(!Ou(s,V=>Uo(I,V)))throw new Error("Not all branches were specified when using match. Specified: "+I.join(", ")+`
Required: `+s.join(", "));return N[h].apply(null,x)},log:N=>{console.log(N,{constructors:s,constructor:h,params:x})}}}}),a}};Da.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const uk=t=>{const s=[],a=[];return dt(t,i=>{i.fold(d=>{s.push(d)},d=>{a.push(d)})}),{errors:s,values:a}},Av=(t,s)=>{const a={};return As(t,(i,d)=>{Uo(s,d)||(a[d]=i)}),a},zw=(t,s)=>({[t]:s}),Uw=t=>{const s={};return dt(t,a=>{s[a.key]=a.value}),s},Ww=(t,s)=>Av(t,s),Mm=(t,s)=>zw(t,s),Uu=t=>Uw(t),Rv=(t,s)=>t.length===0?tn.value(s):tn.value(Po(s,Nw.apply(void 0,t))),E1=t=>tn.error(Xt(t)),dk=(t,s)=>{const a=uk(t);return a.errors.length>0?E1(a.errors):Rv(a.values,s)},Yl=t=>Ne(t)?t:eo,T1=(t,s,a)=>{let i=t.dom;const d=Yl(a);for(;i.parentNode;){i=i.parentNode;const g=le.fromDom(i),h=s(g);if(h.isSome())return h;if(d(g))break}return A.none()},Pm=(t,s,a)=>{const i=s(t),d=Yl(a);return i.orThunk(()=>d(t)?A.none():T1(t,s,d))},k1=(t,s)=>qn(t.element,s.event.target),Wu={can:Bt,abort:eo,run:ee},df=t=>{if(!yc(t,"can")&&!yc(t,"abort")&&!yc(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return{...Wu,...t}},O1=(t,s)=>(...a)=>bo(t,(i,d)=>i&&s(d).apply(void 0,a),!0),fk=(t,s)=>(...a)=>bo(t,(i,d)=>i||s(d).apply(void 0,a),!1),Zw=t=>Ne(t)?{can:Bt,abort:eo,run:t}:t,Dv=t=>{const s=O1(t,d=>d.can),a=fk(t,d=>d.abort);return{can:s,abort:a,run:(...d)=>{dt(t,g=>{g.run.apply(void 0,d)})}}},ks=ae,ul=ks("touchstart"),ff=ks("touchmove"),Nm=ks("touchend"),Mv=ks("touchcancel"),oc=ks("mousedown"),yh=ks("mousemove"),Bm=ks("mouseout"),Ch=ks("mouseup"),dl=ks("mouseover"),Di=ks("focusin"),Zu=ks("focusout"),sc=ks("keydown"),jw=ks("keyup"),fl=ks("input"),Xl=ks("change"),mf=ks("click"),Gw=ks("transitioncancel"),wh=ks("transitionend"),ju=ks("transitionstart"),Pv=ks("selectstart"),qo=t=>ae("alloy."+t),Nv={tap:qo("tap")},Qc=qo("focus"),Jl=qo("blur.post"),Gu=qo("paste.post"),ei=qo("receive"),ma=qo("execute"),Sh=qo("focus.item"),A1=Nv.tap,qu=qo("longpress"),Ds=qo("sandbox.close"),R1=qo("typeahead.cancel"),xh=qo("system.init"),_h=qo("system.touchmove"),qw=qo("system.touchend"),gf=qo("system.scroll"),ml=qo("system.resize"),yr=qo("system.attached"),ti=qo("system.detached"),Ql=qo("system.dismissRequested"),Bv=qo("system.repositionRequested"),Eh=qo("focusmanager.shifted"),Th=qo("slotcontainer.visibility"),Kw=qo("system.external.element.scroll"),Yw=qo("change.tab"),Xw=qo("dismiss.tab"),kh=qo("highlight"),$m=qo("dehighlight"),un=(t,s)=>{D1(t,t.element,s,{})},vt=(t,s,a)=>{D1(t,t.element,s,a)},Ku=t=>{un(t,ma())},Oh=(t,s,a)=>{D1(t,s,a,{})},D1=(t,s,a,i)=>{const d={target:s,...i};t.getSystem().triggerEvent(a,s,d)},Jw=(t,s,a,i)=>{const d={...i,target:s};t.getSystem().triggerEvent(a,s,d)},Ah=(t,s,a,i)=>{t.getSystem().triggerEvent(a,s,i.event)},Bn=t=>Uu(t),Qw=(t,s)=>({key:t,value:df({abort:s})}),mk=(t,s)=>({key:t,value:df({can:s})}),Im=t=>({key:t,value:df({run:(s,a)=>{a.event.prevent()}})}),Te=(t,s)=>({key:t,value:df({run:s})}),Fm=(t,s,a)=>({key:t,value:df({run:(i,d)=>{s.apply(void 0,[i,d].concat(a))}})}),gk=t=>s=>Te(t,s),Yu=t=>s=>({key:t,value:df({run:(a,i)=>{k1(a,i)&&s(a,i)}})}),eS=(t,s)=>Te(t,(a,i)=>{a.getSystem().getByUid(s).each(d=>{Ah(d,d.element,t,i)})}),hf=(t,s,a)=>{const i=s.partUids[a];return eS(t,i)},$v=(t,s)=>Te(t,(a,i)=>{const d=i.event,g=a.getSystem().getByDom(d.target).getOrThunk(()=>Pm(d.target,w=>a.getSystem().getByDom(w).toOptional(),eo).getOr(a));s(a,g,i)}),Mi=t=>Te(t,(s,a)=>{a.cut()}),Iv=t=>Te(t,(s,a)=>{a.stop()}),Lm=(t,s)=>Yu(t)(s),po=Yu(yr()),gl=Yu(ti()),tS=Yu(xh()),ni=gk(ma()),Fv=(t,s,a)=>{const i=a.toString(),d=i.indexOf(")")+1,g=i.indexOf("("),h=i.substring(g+1,d-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:Rh(h.slice(0,1).concat(h.slice(3)))}),t},Rh=t=>De(t,s=>nl(s,"/*")?s.substring(0,s.length-2):s),Hm=(t,s)=>{const a=t.toString(),i=a.indexOf(")")+1,d=a.indexOf("("),g=a.substring(d+1,i-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:Rh(g)}),t},Dh=(t,s)=>{const a=s.toString(),i=a.indexOf(")")+1,d=a.indexOf("("),g=a.substring(d+1,i-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:Rh(g.slice(1))}),t},Ma=t=>({classes:xn(t.classes)?[]:t.classes,attributes:xn(t.attributes)?{}:t.attributes,styles:xn(t.styles)?{}:t.styles}),nS=(t,s)=>({...t,attributes:{...t.attributes,...s.attributes},styles:{...t.styles,...s.styles},classes:t.classes.concat(s.classes)}),Mh=(t,s,a)=>ni(i=>{a(i,t,s)}),Lv=(t,s,a)=>tS((i,d)=>{a(i,t,s)}),Xu=(t,s,a,i,d,g)=>{const h=pr(t),w=ps(s,[br("config",t)]);return sS(h,w,s,a,i,d,g)},Hv=(t,s,a,i,d,g)=>{const h=t,w=ps(s,[il("config",t)]);return sS(h,w,s,a,i,d,g)},oS=(t,s,a)=>Fv((d,...g)=>{const h=[d].concat(g);return d.config({name:ae(t)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+a)},w=>{const x=Array.prototype.slice.call(h,1);return s.apply(void 0,[d,w.config,w.state].concat(x))})},a,s),Vv=t=>({key:t,value:void 0}),sS=(t,s,a,i,d,g,h)=>{const w=N=>yc(N,a)?N[a]():A.none(),x=Io(d,(N,I)=>oS(a,N,I)),R={...Io(g,(N,I)=>Hm(N,I)),...x,revoke:_n(Vv,a),config:N=>{const I=Me(a+"-config",t,N);return{key:a,value:{config:I,me:R,configAsRaw:jc(()=>Me(a+"-config",t,N)),initialConfig:N,state:h}}},schema:ae(s),exhibit:(N,I)=>Au(w(N),lt(i,"exhibit"),(z,V)=>V(I,z.config,z.state)).getOrThunk(()=>Ma({})),name:ae(a),handlers:N=>w(N).map(I=>lt(i,"events").getOr(()=>({}))(I.config,I.state)).getOr({})};return R},$r={init:()=>Pa({readState:ae("No State required")})},Pa=t=>t,Fe=t=>Uu(t),M1=pr([ke("fields"),ke("name"),me("active",{}),me("apis",{}),me("state",$r),me("extra",{})]),Ws=t=>{const s=Me("Creating behaviour: "+t.name,M1,t);return Xu(s.fields,s.name,s.active,s.apis,s.extra,s.state)},P1=pr([ke("branchKey"),ke("branches"),ke("name"),me("active",{}),me("apis",{}),me("state",$r),me("extra",{})]),rS=t=>{const s=Me("Creating behaviour: "+t.name,P1,t);return Hv(Ra(s.branchKey,s.branches),s.name,s.active,s.apis,s.extra,s.state)},ao=ae(void 0),eu=(t,s)=>{const a=Fo(t,s);return a===void 0||a===""?[]:a.split(" ")},N1=(t,s,a)=>{const d=eu(t,s).concat([a]);return ct(t,s,d.join(" ")),!0},hk=(t,s,a)=>{const i=fo(eu(t,s),d=>d!==a);return i.length>0?ct(t,s,i.join(" ")):Zo(t,s),!1},tu=t=>t.dom.classList!==void 0,B1=t=>eu(t,"class"),Pi=(t,s)=>N1(t,"class",s),aS=(t,s)=>hk(t,"class",s),zv=(t,s)=>Uo(B1(t),s)?aS(t,s):Pi(t,s),oo=(t,s)=>{tu(t)?t.dom.classList.add(s):Pi(t,s)},Vm=t=>{(tu(t)?t.dom.classList:B1(t)).length===0&&Zo(t,"class")},Oo=(t,s)=>{tu(t)?t.dom.classList.remove(s):aS(t,s),Vm(t)},cS=(t,s)=>{const a=tu(t)?t.dom.classList.toggle(s):zv(t,s);return Vm(t),a},Na=(t,s)=>tu(t)&&t.dom.classList.contains(s),zm=(t,s)=>{dt(s,a=>{oo(t,a)})},Ba=(t,s)=>{dt(s,a=>{Oo(t,a)})},pk=(t,s)=>{dt(s,a=>{cS(t,a)})},bk=(t,s)=>Ou(s,a=>Na(t,a)),vk=t=>{const s=t.dom.classList,a=new Array(s.length);for(let i=0;i<s.length;i++){const d=s.item(i);d!==null&&(a[i]=d)}return a},yk=t=>tu(t)?vk(t):B1(t),Ms=(t,s,a,i,d)=>{const g=h=>h+"px";return{position:t,left:s.map(g),top:a.map(g),right:i.map(g),bottom:d.map(g)}},Yr=t=>({...t,position:A.some(t.position)}),Ph=(t,s)=>{ze(t,Yr(s))},Ju=t=>(Ga(nr(t,"position"),"fixed")?A.none():av(t)).orThunk(()=>{const i=le.fromTag("span");return Uc(t).bind(d=>{Sc(d,i);const g=av(i);return Kc(i),g})}),Uv=t=>Ju(t).map(da).getOrThunk(()=>To(0,0)),Um=(t,s)=>{const a=t.element;oo(a,s.transitionClass),Oo(a,s.fadeOutClass),oo(a,s.fadeInClass),s.onShow(t)},hl=(t,s)=>{const a=t.element;oo(a,s.transitionClass),Oo(a,s.fadeInClass),oo(a,s.fadeOutClass),s.onHide(t)},Wm=(t,s)=>t.y<s.bottom&&t.bottom>s.y,pf=(t,s)=>t.y>=s.y,Qu=(t,s)=>t.bottom<=s.bottom,pl=(t,s,a)=>({location:"top",leftX:s,topY:a.bounds.y-t.y}),bf=(t,s,a)=>({location:"bottom",leftX:s,bottomY:t.bottom-a.bounds.bottom}),vf=t=>t.box.x-t.win.x,Ck=(t,s,a)=>{const i=s.win,d=s.box,g=vf(s);return ur(t,h=>{switch(h){case"bottom":return Qu(d,a.bounds)?A.none():A.some(bf(i,g,a));case"top":return pf(d,a.bounds)?A.none():A.some(pl(i,g,a));default:return A.none()}}).getOr({location:"no-dock"})},Wv=(t,s,a)=>Ou(t,i=>{switch(i){case"bottom":return Qu(s,a.bounds);case"top":return pf(s,a.bounds)}}),$1=(t,s)=>{const a=s.optScrollEnv.fold(ae(t.bounds.y),i=>i.scrollElmTop+(t.bounds.y-i.currentScrollTop));return To(t.bounds.x,a)},iS=(t,s)=>{const a=s.optScrollEnv.fold(ae(t.y),i=>t.y+i.currentScrollTop-i.scrollElmTop);return To(t.x,a)},Zv=(t,s,a)=>a.getInitialPos().map(i=>{const d=$1(i,s);return{box:Ts(d.left,d.top,fa(t),_s(t)),location:i.location}}),I1=(t,s,a,i,d)=>{const g=iS(s,a),h=Ts(g.left,g.top,s.width,s.height);i.setInitialPos({style:mr(t),position:jo(t,"position")||"static",bounds:h,location:d.location})},jv=(t,s,a,i,d)=>{i.getInitialPos().fold(()=>I1(t,s,a,i,d),()=>ee)},F1=(t,s,a)=>a.getInitialPos().bind(i=>{var d;switch(a.clearInitialPos(),i.position){case"static":return A.some({morph:"static"});case"absolute":const g=Ju(t).getOr(Zr()),h=Mo(g),w=(d=g.dom.scrollTop)!==null&&d!==void 0?d:0;return A.some({morph:"absolute",positionCss:Ms("absolute",lt(i.style,"left").map(x=>s.x-h.x),lt(i.style,"top").map(x=>s.y-h.y+w),lt(i.style,"right").map(x=>h.right-s.right),lt(i.style,"bottom").map(x=>h.bottom-s.bottom))});default:return A.none()}}),Zm=(t,s,a)=>Zv(t,s,a).filter(({box:i})=>Wv(a.getModes(),i,s)).bind(({box:i})=>F1(t,i,a)),L1=t=>{switch(t.location){case"top":return A.some({morph:"fixed",positionCss:Ms("fixed",A.some(t.leftX),A.some(t.topY),A.none(),A.none())});case"bottom":return A.some({morph:"fixed",positionCss:Ms("fixed",A.some(t.leftX),A.none(),A.none(),A.some(t.bottomY))});default:return A.none()}},aM=(t,s,a)=>{const i=Mo(t),d=Br(),g=Ck(a.getModes(),{win:d,box:i},s);return g.location==="top"||g.location==="bottom"?(I1(t,i,s,a,g),L1(g)):A.none()},wk=(t,s,a)=>Zm(t,s,a).orThunk(()=>s.optScrollEnv.bind(i=>Zv(t,s,a)).bind(({box:i,location:d})=>{const g=Br(),h=vf({win:g,box:i}),w=d==="top"?pl(g,h,s):bf(g,h,s);return L1(w)})),Ni=(t,s,a)=>{const i=t.element;return Ga(nr(i,"position"),"fixed")?wk(i,s,a):aM(i,s,a)},jm=(t,s,a)=>{const i=t.element;return Zv(i,s,a).bind(({box:d})=>F1(i,d,a))},lS=(t,s,a,i)=>{const d=Mo(t),g=Br(),h=vf({win:g,box:d}),w=i(g,h,s);return w.location==="bottom"||w.location==="top"?(jv(t,d,s,a,w),L1(w)):A.none()},uS=(t,s,a)=>{a.setDocked(!1),dt(["left","right","top","bottom","position"],i=>kn(t.element,i)),s.onUndocked(t)},H1=(t,s,a,i)=>{const d=i.position==="fixed";a.setDocked(d),Ph(t.element,i),(d?s.onDocked:s.onUndocked)(t)},ed=(t,s,a,i,d=!1)=>{s.contextual.each(g=>{g.lazyContext(t).each(h=>{const w=Wm(h,i.bounds);w!==a.isVisible()&&(a.setVisible(w),d&&!w?(zm(t.element,[g.fadeOutClass]),g.onHide(t)):(w?Um:hl)(t,g))})})},Sk=(t,s,a,i,d)=>{ed(t,s,a,i,!0),H1(t,s,a,d.positionCss)},Gv=(t,s,a,i,d)=>{switch(d.morph){case"static":return uS(t,s,a);case"absolute":return H1(t,s,a,d.positionCss);case"fixed":return Sk(t,s,a,i,d)}},Nh=(t,s,a)=>{const i=s.lazyViewport(t);ed(t,s,a,i),Ni(t,i,a).each(d=>{Gv(t,s,a,i,d)})},xk=(t,s,a)=>{const i=t.element;a.setDocked(!1);const d=s.lazyViewport(t);jm(t,d,a).each(g=>{switch(g.morph){case"static":{uS(t,s,a);break}case"absolute":{H1(t,s,a,g.positionCss);break}}}),a.setVisible(!0),s.contextual.each(g=>{Ba(i,[g.fadeInClass,g.fadeOutClass,g.transitionClass]),g.onShow(t)}),V1(t,s,a)},V1=(t,s,a)=>{t.getSystem().isConnected()&&Nh(t,s,a)},Gm=(t,s,a)=>{a.isDocked()&&xk(t,s,a)},dS=t=>(s,a,i)=>{const d=a.lazyViewport(s);lS(s.element,d,i,t).each(h=>{Sk(s,a,i,d,h)})},z1=dS(pl),qv=dS(bf);var Kv=Object.freeze({__proto__:null,refresh:V1,reset:Gm,isDocked:(t,s,a)=>a.isDocked(),getModes:(t,s,a)=>a.getModes(),setModes:(t,s,a,i)=>a.setModes(i),forceDockToTop:z1,forceDockToBottom:qv}),mS=Object.freeze({__proto__:null,events:(t,s)=>Bn([Lm(wh(),(a,i)=>{t.contextual.each(d=>{Na(a.element,d.transitionClass)&&(Ba(a.element,[d.transitionClass,d.fadeInClass]),(s.isVisible()?d.onShown:d.onHidden)(a)),i.stop()})}),Te(gf(),(a,i)=>{V1(a,t,s)}),Te(Kw(),(a,i)=>{V1(a,t,s)}),Te(ml(),(a,i)=>{Gm(a,t,s)})])});const Bi=(t,s)=>{const i=(s||document).createElement("div");return i.innerHTML=t,Wc(le.fromDom(i))},ga=t=>t.dom.innerHTML,Km=(t,s)=>{const i=Ya(t).dom,d=le.fromDom(i.createDocumentFragment()),g=Bi(s,i);Bu(d,g),_m(t),Sc(t,d)},Ym=t=>{const s=le.fromTag("div"),a=le.fromDom(t.dom.cloneNode(!0));return Sc(s,a),ga(s)},$h=(t,s)=>le.fromDom(t.dom.cloneNode(s)),_k=t=>$h(t,!1),Ek=t=>$h(t,!0),Xm=t=>{if(iv(t))return"#shadow-root";{const s=_k(t);return Ym(s)}},$a=t=>Xm(t),gS="unknown";var Ko;(function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.LOGGING=2]="LOGGING"})(Ko||(Ko={}));const yf=Et({}),Ia=(t,s)=>{const a=[],i=new Date().getTime();return{logEventCut:(d,g,h)=>{a.push({outcome:"cut",target:g,purpose:h})},logEventStopped:(d,g,h)=>{a.push({outcome:"stopped",target:g,purpose:h})},logNoParent:(d,g,h)=>{a.push({outcome:"no-parent",target:g,purpose:h})},logEventNoHandlers:(d,g)=>{a.push({outcome:"no-handlers-left",target:g})},logEventResponse:(d,g,h)=>{a.push({outcome:"response",purpose:h,target:g})},write:()=>{const d=new Date().getTime();Uo(["mousemove","mouseover","mouseout",xh()],t)||console.log(t,{event:t,time:d-i,target:s.dom,sequence:De(a,g=>Uo(["cut","stopped","response"],g.outcome)?"{"+g.purpose+"} "+g.outcome+" at ("+$a(g.target)+")":g.outcome)})}}},cM=(t,s,a)=>{switch(lt(yf.get(),t).orThunk(()=>{const d=$o(yf.get());return ur(d,g=>t.indexOf(g)>-1?A.some(yf.get()[g]):A.none())}).getOr(Ko.NORMAL)){case Ko.NORMAL:return a(Fa());case Ko.LOGGING:{const d=Ia(t,s),g=a(d);return d.write(),g}case Ko.STOP:return!0}},U1=["alloy/data/Fields","alloy/debugging/Debugging"],Jm=()=>{const t=new Error;if(t.stack!==void 0){const s=t.stack.split(`
`);return Gt(s,a=>a.indexOf("alloy")>0&&!ja(U1,i=>a.indexOf(i)>-1)).getOr(gS)}else return gS},Cf={logEventCut:ee,logEventStopped:ee,logNoParent:ee,logEventNoHandlers:ee,logEventResponse:ee,write:ee},$i=(t,s,a)=>cM(t,s,a),Fa=ae(Cf),Yv=ae([ke("menu"),ke("selectedMenu")]),Xv=ae([ke("item"),ke("selectedItem")]);ae($t(Xv().concat(Yv())));const Jv=ae($t(Xv())),wf=Vu("initSize",[ke("numColumns"),ke("numRows")]),Tk=()=>as("markers",Jv()),Sf=()=>Vu("markers",[ke("backgroundMenu")].concat(Yv()).concat(Xv())),bl=t=>Vu("markers",De(t,ke)),Ih=(t,s,a)=>(Jm(),rs(s,s,a,Ai(i=>tn.value((...d)=>i.apply(void 0,d))))),vn=t=>Ih("onHandler",t,km(ee)),Xr=t=>Ih("onKeyboardHandler",t,km(A.none)),kc=t=>Ih("onHandler",t,_c()),nu=t=>Ih("onKeyboardHandler",t,_c()),so=(t,s)=>rr(t,ae(s)),hS=t=>rr(t,bn),W1=ae(wf);var Fh=[ps("contextual",[Go("fadeInClass"),Go("fadeOutClass"),Go("transitionClass"),Jc("lazyContext"),vn("onShow"),vn("onShown"),vn("onHide"),vn("onHidden")]),ko("lazyViewport",()=>({bounds:Br(),optScrollEnv:A.none()})),Tc("modes",["top","bottom"],hs),vn("onDocked"),vn("onUndocked")],kk=Object.freeze({__proto__:null,init:t=>{const s=Et(!1),a=Et(!0),i=Mn(),d=Et(t.modes),g=()=>`docked:  ${s.get()}, visible: ${a.get()}, modes: ${d.get().join(",")}`;return Pa({isDocked:s.get,setDocked:s.set,getInitialPos:i.get,setInitialPos:i.set,clearInitialPos:i.clear,isVisible:a.get,setVisible:a.set,getModes:d.get,setModes:d.set,readState:g})}});const wo=Ws({fields:Fh,name:"docking",active:mS,apis:Kv,state:kk}),Qv=(t,s,a)=>qn(s,t.element)&&!qn(s,a),Ok=Bn([mk(Qc(),(t,s)=>{const a=s.event,i=a.originator,d=a.target;return Qv(t,i,d)?(console.warn(Qc()+` did not get interpreted by the desired target. 
Originator: `+$a(i)+`
Target: `+$a(d)+`
Check the `+Qc()+" event handlers"),!1):!0})]);var Ak=Object.freeze({__proto__:null,events:Ok});let Qm=0;const ut=t=>{const a=new Date().getTime(),i=Math.floor(Math.random()*1e9);return Qm++,t+"_"+i+Qm+String(a)},Rk=ae("alloy-id-"),pS=ae("data-alloy-id"),j1=Rk(),ey=pS(),Dk=(t,s)=>{const a=ut(j1+t);return Lh(s,a),a},Lh=(t,s)=>{Object.defineProperty(t.dom,ey,{value:s,writable:!0})},Hh=t=>{const s=no(t)?t.dom[ey]:null;return A.from(s)},xf=t=>ut(t),iM=bn,vl=t=>{const s=d=>`The component must be in a context to execute: ${d}`+(t?`
`+$a(t().element)+" is not in context.":""),a=d=>()=>{throw new Error(s(d))},i=d=>()=>{console.warn(s(d))};return{debugInfo:ae("fake"),triggerEvent:i("triggerEvent"),triggerFocus:i("triggerFocus"),triggerEscape:i("triggerEscape"),broadcast:i("broadcast"),broadcastOn:i("broadcastOn"),broadcastEvent:i("broadcastEvent"),build:a("build"),buildOrPatch:a("buildOrPatch"),addToWorld:a("addToWorld"),removeFromWorld:a("removeFromWorld"),addToGui:a("addToGui"),removeFromGui:a("removeFromGui"),getByUid:a("getByUid"),getByDom:a("getByDom"),isConnected:eo}},Mk=vl(),ou=ut("alloy-premade"),bS=t=>(Object.defineProperty(t.element.dom,ou,{value:t.uid,writable:!0}),Mm(ou,t)),Ii=t=>Ln(t.dom,ou),vS=t=>lt(t,ou),eg=t=>Dh((s,...a)=>t(s.getApis(),s,...a),t),Pk=(t,s)=>{const a=De(s,d=>ps(d.name(),[ke("config"),me("state",$r)])),i=No("component.behaviours",$t(a),t.behaviours).fold(d=>{throw new Error(Ri(d)+`
Complete spec:
`+JSON.stringify(t,null,2))},bn);return{list:s,data:Io(i,d=>{const g=d.map(h=>({config:h.config,state:h.state.init(h.config)}));return ae(g)})}},Nk=t=>t.list,Bk=t=>t.data,ty=(t,s)=>{const a={};return As(t,(i,d)=>{As(i,(g,h)=>{const w=lt(a,h).getOr([]);a[h]=w.concat([s(d,g)])})}),a},G1=(t,s,a,i)=>{const d={...s};dt(a,R=>{d[R.name()]=R.exhibit(t,i)});const g=ty(d,(R,N)=>({name:R,modification:N})),h=R=>Ss(R,(N,I)=>({...I.modification,...N}),{}),w=Ss(g.classes,(R,N)=>N.modification.concat(R),[]),x=h(g.attributes),T=h(g.styles);return Ma({classes:w,attributes:x,styles:T})},yS=(t,s,a,i)=>{try{const d=eh(a,(g,h)=>{const w=g[s],x=h[s],T=i.indexOf(w),R=i.indexOf(x);if(T===-1)throw new Error("The ordering for "+t+" does not have an entry for "+w+`.
Order specified: `+JSON.stringify(i,null,2));if(R===-1)throw new Error("The ordering for "+t+" does not have an entry for "+x+`.
Order specified: `+JSON.stringify(i,null,2));return T<R?-1:R<T?1:0});return tn.value(d)}catch(d){return tn.error([d])}},ny=(t,s)=>({handler:t,purpose:s}),$k=(t,s)=>({cHandler:t,purpose:s}),Vh=(t,s)=>$k(_n.apply(void 0,[t.handler].concat(s)),t.purpose),td=t=>t.cHandler,tg=(t,s)=>({name:t,handler:s}),q1=(t,s)=>{const a={};return dt(t,i=>{a[i.name()]=i.handlers(s)}),a},oy=(t,s,a)=>{const i={...a,...q1(s,t)};return ty(i,tg)},K1=(t,s,a,i)=>{const d=oy(t,a,i);return CS(d,s)},sy=t=>{const s=Zw(t);return(a,i,...d)=>{const g=[a,i].concat(d);s.abort.apply(void 0,g)?i.stop():s.can.apply(void 0,g)&&s.run.apply(void 0,g)}},ry=(t,s)=>tn.error(["The event ("+t+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(De(s,a=>a.name),null,2)]),ay=(t,s,a)=>{const i=s[a];return i?yS("Event: "+a,"name",t,i).map(d=>{const g=De(d,h=>h.handler);return Dv(g)}):ry(a,t)},CS=(t,s)=>{const a=th(t,(i,d)=>(i.length===1?tn.value(i[0].handler):ay(i,s,d)).map(h=>{const w=sy(h),x=i.length>1?fo(s[d],T=>ja(i,R=>R.name===T)).join(" > "):i[0].name;return Mm(d,ny(w,x))}));return dk(a,{})},Zs="alloy.base.behaviour",Ik=$t([rs("dom","dom",_c(),$t([ke("tag"),me("styles",{}),me("classes",[]),me("attributes",{}),Nn("value"),Nn("innerHtml")])),ke("components"),ke("uid"),me("events",{}),me("apis",{}),rs("eventOrder","eventOrder",ak({[ma()]:["disabling",Zs,"toggling","typeaheadevents"],[Qc()]:[Zs,"focusing","keying"],[xh()]:[Zs,"disabling","toggling","representing"],[fl()]:[Zs,"representing","streaming","invalidating"],[ti()]:[Zs,"representing","item-events","toolbar-button-events","tooltipping"],[oc()]:["focusing",Zs,"item-type-events"],[ul()]:["focusing",Zs,"item-type-events"],[dl()]:["item-type-events","tooltipping"],[ei()]:["receiving","reflecting","tooltipping"]}),Ei()),Nn("domModification")]),wS=t=>No("custom.definition",Ik,t),nd=t=>({...t.dom,uid:t.uid,domChildren:De(t.components,s=>s.element)}),_f=t=>t.domModification.fold(()=>Ma({}),Ma),cy=t=>t.events,he=t=>t.dom.value,yl=(t,s)=>{if(s===void 0)throw new Error("Value.set was undefined");t.dom.value=s},Fk=(t,s,a)=>Du(t,s).map(d=>{if(a.exists(h=>!qn(h,d))){const h=a.map(zc).getOr("span"),w=le.fromTag(h);return qc(d,w),w}else return d}),SS=(t,s,a)=>{a.fold(()=>Sc(t,s),i=>{qn(i,s)||(qc(i,s),Kc(i))})},zh=(t,s,a)=>{const i=De(s,a),d=Wc(t);return dt(d.slice(i.length),Kc),i},Oc=(t,s,a,i)=>{const d=Du(t,s),g=i(a,d),h=Fk(t,s,d);return SS(t,g.element,h),g},Uh=(t,s,a)=>zh(t,s,(i,d)=>Oc(t,d,i,a)),xS=(t,s)=>zh(t,s,(a,i)=>{const d=Du(t,i);return SS(t,a,d),a}),iy=(t,s)=>{const a=$o(t),i=$o(s),d=Mt(i,a),g=_a(t,(h,w)=>!Ln(s,w)||h!==s[w]).t;return{toRemove:d,toSet:g}},Ir=(t,s)=>{const{class:a,style:i,...d}=JT(s),{toSet:g,toRemove:h}=iy(t.attributes,d),w=()=>{dt(h,ce=>Zo(s,ce)),Sw(s,g)},x=mr(s),{toSet:T,toRemove:R}=iy(t.styles,x),N=()=>{dt(R,ce=>kn(s,ce)),ka(s,T)},I=yk(s),z=Mt(I,t.classes),V=Mt(t.classes,I),Y=()=>{zm(s,V),Ba(s,z)},de=ce=>{Km(s,ce)},te=()=>{const ce=t.domChildren;xS(s,ce)},ie=()=>{const ce=s,_e=t.value.getOrUndefined();_e!==he(ce)&&yl(ce,_e??"")};return w(),Y(),N(),t.innerHtml.fold(te,de),ie(),s},Y1=t=>{const s=le.fromTag(t.tag);Sw(s,t.attributes),zm(s,t.classes),ka(s,t.styles),t.innerHtml.each(i=>Km(s,i));const a=t.domChildren;return Bu(s,a),t.value.each(i=>{yl(s,i)}),s},_S=(t,s)=>{try{const a=Ir(t,s);return A.some(a)}catch{return A.none()}},Lk=t=>t.innerHtml.isSome()&&t.domChildren.length>0,ES=(t,s)=>{const a=d=>zc(d)===t.tag&&!Lk(t)&&!Ii(d),i=s.filter(a).bind(d=>_S(t,d)).getOrThunk(()=>Y1(t));return Lh(i,t.uid),i},Hk=t=>{const s=lt(t,"behaviours").getOr({});return we($o(s),a=>{const i=s[a];return Rt(i)?[i.me]:[]})},TS=(t,s)=>Pk(t,s),Vk=t=>{const s=Hk(t);return TS(t,s)},zk=(t,s,a)=>{const i=nd(t),d=_f(t),g={"alloy.base.modification":d},h=s.length>0?G1(a,g,s,i):d;return nS(i,h)},kS=(t,s,a)=>{const i={"alloy.base.behaviour":cy(t)};return K1(a,t.eventOrder,s,i).getOrDie()},ng=(t,s)=>{const a=()=>ce,i=Et(Mk),d=Ec(wS(t)),g=Vk(t),h=Nk(g),w=Bk(g),x=zk(d,h,w),T=ES(x,s),R=kS(d,h,w),N=Et(d.components),I=_e=>{i.set(_e)},z=()=>{i.set(vl(a))},V=()=>{const _e=Wc(T),Se=we(_e,Le=>i.get().getByDom(Le).fold(()=>[],Wo));N.set(Se)},Y=_e=>{const Se=w;return(Ne(Se[_e.name()])?Se[_e.name()]:()=>{throw new Error("Could not find "+_e.name()+" in "+JSON.stringify(t,null,2))})()},de=_e=>Ne(w[_e.name()]),te=()=>d.apis,ie=_e=>w[_e]().map(Se=>Se.state.readState()).getOr("not enabled"),ce={uid:t.uid,getSystem:i.get,config:Y,hasConfigured:de,spec:t,readState:ie,getApis:te,connect:I,disconnect:z,element:T,syncComponents:V,components:N.get,events:R};return ce},Uk=(t,s)=>{const a=lt(t,"components").getOr([]);return s.fold(()=>De(a,wr),i=>De(a,(d,g)=>J1(d,Du(i,g))))},OS=(t,s)=>{const{events:a,...i}=iM(t),d=Uk(i,s),g={...i,events:{...Ak,...a},components:d};return tn.value(ng(g,s))},Lo=t=>{const s=le.fromText(t);return X1({element:s})},X1=t=>{const s=Me("external.component",pr([ke("element"),Nn("uid")]),t),a=Et(vl()),i=w=>{a.set(w)},d=()=>{a.set(vl(()=>h))},g=s.uid.getOrThunk(()=>xf("external"));Lh(s.element,g);const h={uid:g,getSystem:a.get,config:A.none,hasConfigured:eo,connect:i,disconnect:d,getApis:()=>({}),element:s.element,spec:t,readState:ae("No state"),syncComponents:ee,components:ae([]),events:{}};return bS(h)},AS=xf,RS=t=>Ln(t,"uid"),J1=(t,s)=>vS(t).getOrThunk(()=>{const a=RS(t)?t:{uid:AS(""),...t};return OS(a,s).getOrDie()}),wr=t=>J1(t,A.none()),Fr=bS;var DS=(t,s,a,i,d)=>t(a,i)?A.some(a):Ne(d)&&d(a)?A.none():s(a,i,d);const MS=(t,s,a)=>{let i=t.dom;const d=Ne(a)?a:eo;for(;i.parentNode;){i=i.parentNode;const g=le.fromDom(i);if(s(g))return A.some(g);if(d(g))break}return A.none()},ly=(t,s,a)=>DS((d,g)=>g(d),MS,t,s,a),PS=(t,s)=>{const a=t.dom;return a.parentNode?NS(le.fromDom(a.parentNode),i=>!qn(t,i)&&s(i)):A.none()},NS=(t,s)=>{const a=d=>s(le.fromDom(d));return Gt(t.dom.childNodes,a).map(le.fromDom)},uy=(t,s)=>{const a=i=>{for(let d=0;d<i.childNodes.length;d++){const g=le.fromDom(i.childNodes[d]);if(s(g))return A.some(g);const h=a(i.childNodes[d]);if(h.isSome())return h}return A.none()};return a(t.dom)},dy=(t,s,a)=>ly(t,s,a).isSome(),Q1=t=>rv(t),su=(t,s,a)=>MS(t,i=>ua(i,s),a),Jr=(t,s)=>PS(t,a=>ua(a,s)),fy=(t,s)=>NS(t,a=>ua(a,s)),$n=(t,s)=>rv(s,t),Fi=(t,s,a)=>DS((d,g)=>ua(d,g),su,t,s,a),Wh="aria-controls",BS=t=>ly(t,a=>{if(!no(a))return!1;const i=Fo(a,"id");return i!==void 0&&i.indexOf(Wh)>-1}).bind(a=>{const i=Fo(a,"id"),d=Eo(a);return $n(d,`[${Wh}="${i}"]`)}),eb=()=>{const t=ut(Wh);return{id:t,link:i=>{ct(i,Wh,t)},unlink:i=>{Zo(i,Wh)}}},tb=(t,s)=>BS(s).exists(a=>od(t,a)),od=(t,s)=>dy(s,a=>qn(a,t.element),eo)||tb(t,s),js=(t,s,a,i,d,g,h,w=!1)=>({x:t,y:s,bubble:a,direction:i,placement:d,restriction:g,label:`${h}-${d}`,alwaysFit:w}),sd=Da.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),my=(t,s,a,i,d,g,h,w,x)=>t.fold(s,a,i,d,g,h,w,x),$S=(t,s,a,i)=>t.fold(s,s,i,i,s,i,a,a),Wk=(t,s,a,i)=>t.fold(s,i,s,i,a,a,s,i),og=sd.southeast,gy=sd.southwest,hy=sd.northeast,py=sd.northwest,by=sd.south,ft=sd.north,Zh=sd.east,vy=sd.west,sg=(t,s,a,i)=>{const d=t+s;return d>i?a:d<a?i:d},oi=(t,s,a)=>Math.min(Math.max(t,s),a),Zk=(t,s)=>{switch(s){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}},Gs=(t,s)=>Zd(["left","right","top","bottom"],a=>lt(s,a).map(i=>Zk(t,i))),jk=(t,s,a)=>{const i=(x,T)=>s[x].map(R=>{const N=x==="top"||x==="bottom",I=N?a.top:a.left,V=(x==="left"||x==="top"?Math.max:Math.min)(R,T)+I;return N?oi(V,t.y,t.bottom):oi(V,t.x,t.right)}).getOr(T),d=i("left",t.x),g=i("top",t.y),h=i("right",t.right),w=i("bottom",t.bottom);return Ts(d,g,h-d,w-g)},rd="layout",yy=t=>t.x,IS=(t,s)=>t.x+t.width/2-s.width/2,Sr=(t,s)=>t.x+t.width-s.width,ad=(t,s)=>t.y-s.height,nb=t=>t.y+t.height,cd=(t,s)=>t.y+t.height/2-s.height/2,Gk=t=>t.x+t.width,qk=(t,s)=>t.x-s.width,bs=(t,s,a)=>js(yy(t),nb(t),a.southeast(),og(),"southeast",Gs(t,{left:1,top:3}),rd),cs=(t,s,a)=>js(Sr(t,s),nb(t),a.southwest(),gy(),"southwest",Gs(t,{right:0,top:3}),rd),vs=(t,s,a)=>js(yy(t),ad(t,s),a.northeast(),hy(),"northeast",Gs(t,{left:1,bottom:2}),rd),Zn=(t,s,a)=>js(Sr(t,s),ad(t,s),a.northwest(),py(),"northwest",Gs(t,{right:0,bottom:2}),rd),Os=(t,s,a)=>js(IS(t,s),ad(t,s),a.north(),ft(),"north",Gs(t,{bottom:2}),rd),is=(t,s,a)=>js(IS(t,s),nb(t),a.south(),by(),"south",Gs(t,{top:3}),rd),Cy=(t,s,a)=>js(Gk(t),cd(t,s),a.east(),Zh(),"east",Gs(t,{left:0}),rd),ob=(t,s,a)=>js(qk(t,s),cd(t,s),a.west(),vy(),"west",Gs(t,{right:1}),rd),wy=()=>[bs,cs,vs,Zn,is,Os,Cy,ob],FS=()=>[cs,bs,Zn,vs,is,Os,Cy,ob],LS=()=>[vs,Zn,bs,cs,Os,is],sb=()=>[Zn,vs,cs,bs,Os,is],rb=()=>[bs,cs,vs,Zn,is,Os],Ef=()=>[cs,bs,Zn,vs,is,Os],Sy=(t,s)=>s.universal?t:fo(t,a=>Uo(s.channels,a));var Tf=Object.freeze({__proto__:null,events:t=>Bn([Te(ei(),(s,a)=>{const i=t.channels,d=$o(i),g=a,h=Sy(d,g);dt(h,w=>{const x=i[w],T=x.schema,R=Me("channel["+w+`] data
Receiver: `+$a(s.element),T,g.data);x.onReceive(s,R)})})])}),Kk=[as("channels",Hw(tn.value,pr([kc("onReceive"),me("schema",Ei())])))];const ha=Ws({fields:Kk,name:"receiving",active:Tf});var Yk=Object.freeze({__proto__:null,exhibit:(t,s)=>Ma({classes:[],styles:s.useFixed()?{}:{position:"relative"}})});const rc=(t,s=!1)=>t.dom.focus({preventScroll:s}),jh=t=>t.dom.blur(),Gh=t=>{const s=Eo(t).dom;return t.dom===s.activeElement},Li=(t=b1())=>A.from(t.dom.activeElement).map(le.fromDom),Qr=t=>Li(Eo(t)).filter(s=>t.dom.contains(s.dom)),id=(t,s)=>{const a=Eo(s),i=Li(a).bind(g=>{const h=w=>qn(g,w);return h(s)?A.some(s):uy(s,h)}),d=t(s);return i.each(g=>{Li(a).filter(h=>qn(h,g)).fold(()=>{rc(g)},ee)}),d},xy=Da.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),ab=(t,s,a,i,d,g)=>{const h=s.rect,w=h.x-a,x=h.y-i,T=h.width,R=h.height,N=d-(w+T),I=g-(x+R),z=A.some(w),V=A.some(x),Y=A.some(N),de=A.some(I),te=A.none();return my(s.direction,()=>Ms(t,z,V,te,te),()=>Ms(t,te,V,Y,te),()=>Ms(t,z,te,te,de),()=>Ms(t,te,te,Y,de),()=>Ms(t,z,V,te,te),()=>Ms(t,z,te,te,de),()=>Ms(t,z,V,te,te),()=>Ms(t,te,V,Y,te))},HS=(t,s)=>t.fold(()=>{const a=s.rect;return Ms("absolute",A.some(a.x),A.some(a.y),A.none(),A.none())},(a,i,d,g)=>ab("absolute",s,a,i,d,g),(a,i,d,g)=>ab("fixed",s,a,i,d,g)),kf=(t,s)=>{const a=_n(y1,s),i=t.fold(a,a,()=>{const h=Gr();return y1(s).translate(-h.left,-h.top)}),d=Wl(s),g=Pu(s);return Ts(i.left,i.top,d,g)},_y=(t,s)=>s.fold(()=>t.fold(Br,Br,Ts),a=>t.fold(ae(a),ae(a),()=>{const i=Ey(t,a.x,a.y);return Ts(i.left,i.top,a.width,a.height)})),Ey=(t,s,a)=>{const i=To(s,a),d=()=>{const g=Gr();return i.translate(-g.left,-g.top)};return t.fold(ae(i),ae(i),d)},VS=(t,s,a,i)=>t.fold(s,a,i);xy.none;const zS=xy.relative,qh=xy.fixed,Of=(t,s)=>({anchorBox:t,origin:s}),Ty=(t,s)=>Of(t,s),ky="data-alloy-placement",US=(t,s)=>{ct(t,ky,s)},WS=t=>tr(t,ky),Xk=t=>Zo(t,ky),cb=Da.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),ZS=(t,s)=>{const{x:a,y:i,right:d,bottom:g}=s,{x:h,y:w,right:x,bottom:T,width:R,height:N}=t,I=h>=a&&h<=d,z=w>=i&&w<=g,V=I&&z,Y=x<=d&&x>=a,de=T<=g&&T>=i,te=Y&&de,ie=Math.min(R,h>=a?d-h:x-a),ce=Math.min(N,w>=i?g-w:T-i);return{originInBounds:V,sizeInBounds:te,visibleW:ie,visibleH:ce}},Jk=(t,s)=>{const{x:a,y:i,right:d,bottom:g}=s,{x:h,y:w,width:x,height:T}=t,R=Math.max(a,d-x),N=Math.max(i,g-T),I=oi(h,a,R),z=oi(w,i,N),V=Math.min(I+x,d)-I,Y=Math.min(z+T,g)-z;return Ts(I,z,V,Y)},jS=(t,s,a)=>{const i=ae(s.bottom-a.y),d=ae(a.bottom-s.y),g=$S(t,d,d,i),h=ae(s.right-a.x),w=ae(a.right-s.x);return{maxWidth:Wk(t,w,w,h),maxHeight:g}},Kh=(t,s,a,i)=>{const d=t.bubble,g=d.offset,h=jk(i,t.restriction,g),w=t.x+g.left,x=t.y+g.top,T=Ts(w,x,s,a),{originInBounds:R,sizeInBounds:N,visibleW:I,visibleH:z}=ZS(T,h),V=R&&N,Y=V?T:Jk(T,h),de=Y.width>0&&Y.height>0,{maxWidth:te,maxHeight:ie}=jS(t.direction,Y,i),ce={rect:Y,maxHeight:ie,maxWidth:te,direction:t.direction,placement:t.placement,classes:{on:d.classesOn,off:d.classesOff},layout:t.label,testY:x};return V||t.alwaysFit?cb.fit(ce):cb.nofit(ce,I,z,de)},Qk=(t,s,a,i,d,g)=>{const h=i.width,w=i.height,x=(R,N,I,z,V)=>{const Y=R(a,i,d,t,g),de=Kh(Y,h,w,g);return de.fold(ae(de),(te,ie,ce,_e)=>(V===_e?ce>z||ie>I:!V&&_e)?de:cb.nofit(N,I,z,V))};return bo(s,(R,N)=>{const I=_n(x,N);return R.fold(ae(R),I)},cb.nofit({rect:a,maxHeight:i.height,maxWidth:i.width,direction:og(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:a.y},-1,-1,!1)).fold(bn,bn)},GS=Bt,ea=(t,s,a)=>mh(t,s,GS,a),Oy=(t,s,a)=>mv(t,s,GS,a),Ay=Aw,Ry=["top","bottom","right","left"],ib="data-alloy-transition-timer",e4=(t,s)=>bk(t,s.classes),t4=(t,s,a)=>a.exists(i=>{const d=t.mode;return d==="all"?!0:i[d]!==s[d]}),lb=(t,s)=>{const a=i=>parseFloat(i).toFixed(3);return Wr(s,(i,d)=>{const g=t[d].map(a),h=i.map(a);return!s1(g,h)}).isSome()},qS=t=>{const s=g=>{const w=jo(t,g).split(/\s*,\s*/);return fo(w,qa)},a=g=>{if(J(g)&&/^[\d.]+/.test(g)){const h=parseFloat(g);return nl(g,"ms")?h:h*1e3}else return 0},i=s("transition-delay"),d=s("transition-duration");return bo(d,(g,h,w)=>{const x=a(i[w])+a(h);return Math.max(g,x)},0)},Dy=(t,s)=>{const a=ec(),i=ec();let d;const g=T=>{var R;const N=(R=T.raw.pseudoElement)!==null&&R!==void 0?R:"";return qn(T.target,t)&&Do(N)&&Uo(Ry,T.raw.propertyName)},h=T=>{if(Zt(T)||g(T)){a.clear(),i.clear();const R=T==null?void 0:T.raw.type;(Zt(R)||R===wh())&&(clearTimeout(d),Zo(t,ib),Ba(t,s.classes))}},w=ea(t,ju(),T=>{g(T)&&(w.unbind(),a.set(ea(t,wh(),h)),i.set(ea(t,Gw(),h)))}),x=qS(t);requestAnimationFrame(()=>{d=setTimeout(h,x+17),ct(t,ib,d)})},My=(t,s)=>{zm(t,s.classes),tr(t,ib).each(a=>{clearTimeout(parseInt(a,10)),Zo(t,ib)}),Dy(t,s)},Yh=(t,s,a,i,d,g)=>{const h=t4(i,d,g);if(h||e4(t,i)){qt(t,"position",a.position);const w=kf(s,t),x=HS(s,{...d,rect:w}),T=Zd(Ry,R=>x[R]);lb(a,T)&&(ze(t,T),h&&My(t,i),Ul(t))}else Ba(t,i.classes)},Py=t=>({width:Wl(t),height:Pu(t)}),KS=(t,s,a,i)=>{kn(s,"max-height"),kn(s,"max-width");const d=Py(s);return Qk(s,i.preference,t,d,a,i.bounds)},YS=(t,s)=>{const a=s.classes;Ba(t,a.off),zm(t,a.on)},XS=(t,s,a)=>{const i=a.maxHeightFunction;i(t,s.maxHeight)},n4=(t,s,a)=>{const i=a.maxWidthFunction;i(t,s.maxWidth)},JS=(t,s,a)=>{const i=HS(a.origin,s);a.transition.each(d=>{Yh(t,a.origin,i,d,s,a.lastPlacement)}),Ph(t,i)},QS=(t,s)=>{US(t,s.placement)},ex=(t,s)=>{dv(t,Math.floor(s))},ub=ae((t,s)=>{ex(t,s),ka(t,{"overflow-x":"hidden","overflow-y":"auto"})}),rg=ae((t,s)=>{ex(t,s)}),tx=(t,s,a)=>t[s]===void 0?a:t[s],o4=(t,s,a,i,d,g,h,w)=>{const x=tx(h,"maxHeightFunction",ub()),T=tx(h,"maxWidthFunction",ee),R=t.anchorBox,N=t.origin,I={bounds:_y(N,g),origin:N,preference:i,maxHeightFunction:x,maxWidthFunction:T,lastPlacement:d,transition:w};return db(R,s,a,I)},db=(t,s,a,i)=>{const d=KS(t,s,a,i);return JS(s,d,i),QS(s,d),YS(s,d),XS(s,d,i),n4(s,d,i),{layout:d.layout,placement:d.placement}},s4=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],si=(t,s,a,i=1)=>{const d=t*i,g=s*i,h=x=>lt(a,x).getOr([]),w=(x,T,R)=>{const N=Mt(s4,R);return{offset:To(x,T),classesOn:we(R,h),classesOff:we(N,h)}};return{southeast:()=>w(-t,s,["top","alignLeft"]),southwest:()=>w(t,s,["top","alignRight"]),south:()=>w(-t/2,s,["top","alignCentre"]),northeast:()=>w(-t,-s,["bottom","alignLeft"]),northwest:()=>w(t,-s,["bottom","alignRight"]),north:()=>w(-t/2,-s,["bottom","alignCentre"]),east:()=>w(t,-s/2,["valignCentre","left"]),west:()=>w(-t,-s/2,["valignCentre","right"]),insetNortheast:()=>w(d,g,["top","alignLeft","inset"]),insetNorthwest:()=>w(-d,g,["top","alignRight","inset"]),insetNorth:()=>w(-d/2,g,["top","alignCentre","inset"]),insetSoutheast:()=>w(d,-g,["bottom","alignLeft","inset"]),insetSouthwest:()=>w(-d,-g,["bottom","alignRight","inset"]),insetSouth:()=>w(-d/2,-g,["bottom","alignCentre","inset"]),insetEast:()=>w(-d,-g/2,["valignCentre","right","inset"]),insetWest:()=>w(d,-g/2,["valignCentre","left","inset"])}},fb=()=>si(0,0,{}),mb=bn,gb=(t,s)=>a=>ta(a)==="rtl"?s:t,ta=t=>jo(t,"direction")==="rtl"?"rtl":"ltr";var ld;(function(t){t.TopToBottom="toptobottom",t.BottomToTop="bottomtotop"})(ld||(ld={}));const ud="data-alloy-vertical-dir",r4=t=>dy(t,s=>no(s)&&Fo(s,"data-alloy-vertical-dir")===ld.BottomToTop),dd=()=>ps("layouts",[ke("onLtr"),ke("onRtl"),Nn("onBottomLtr"),Nn("onBottomRtl")]),Xh=(t,s,a,i,d,g,h)=>{const w=h.map(r4).getOr(!1),x=s.layouts.map(z=>z.onLtr(t)),T=s.layouts.map(z=>z.onRtl(t)),R=w?s.layouts.bind(z=>z.onBottomLtr.map(V=>V(t))).or(x).getOr(d):x.getOr(a),N=w?s.layouts.bind(z=>z.onBottomRtl.map(V=>V(t))).or(T).getOr(g):T.getOr(i);return gb(R,N)(t)},a4=(t,s,a)=>{const i=s.hotspot,d=kf(a,i.element),g=Xh(t.element,s,rb(),Ef(),LS(),sb(),A.some(s.hotspot.element));return A.some(mb({anchorBox:d,bubble:s.bubble.getOr(fb()),overrides:s.overrides,layouts:g}))};var c4=[ke("hotspot"),Nn("bubble"),me("overrides",{}),dd(),so("placement",a4)];const nx=(t,s,a)=>{const i=Ey(a,s.x,s.y),d=Ts(i.left,i.top,s.width,s.height),g=Xh(t.element,s,wy(),FS(),wy(),FS(),A.none());return A.some(mb({anchorBox:d,bubble:s.bubble,overrides:s.overrides,layouts:g}))};var hb=[ke("x"),ke("y"),me("height",0),me("width",0),me("bubble",fb()),me("overrides",{}),dd(),so("placement",nx)];const pb=Da.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),i4=t=>t.fold(bn,(s,a,i)=>s.translate(-a,-i)),Jh=t=>t.fold(bn,bn),Ny=t=>bo(t,(s,a)=>s.translate(a.left,a.top),To(0,0)),l4=t=>{const s=De(t,i4);return Ny(s)},By=t=>{const s=De(t,Jh);return Ny(s)},$y=pb.screen,bb=pb.absolute,u4=(t,s,a)=>{const i=Xd(a.root).dom,d=g=>{const h=Ya(g),w=Ya(t.element);return qn(h,w)};return A.from(i.frameElement).map(le.fromDom).filter(d).map(da)},Af=(t,s,a)=>{const i=Ya(t.element),d=Gr(i),g=u4(t,s,a).getOr(d);return bb(g,d.left,d.top)},ox=(t,s,a,i)=>{const d=$y(To(t,s));return A.some(nk(d,a,i))},Iy=(t,s,a,i,d)=>t.map(g=>{const h=[s,g.point],w=VS(i,()=>By(h),()=>By(h),()=>l4(h)),x=rf(w.left,w.top,g.width,g.height),T=a.showAbove?LS():rb(),R=a.showAbove?sb():Ef(),N=Xh(d,a,T,R,T,R,A.none());return mb({anchorBox:x,bubble:a.bubble.getOr(fb()),overrides:a.overrides,layouts:N})}),sx=(t,s,a)=>{const i=Af(t,a,s);return s.node.filter(Hs).bind(d=>{const g=d.dom.getBoundingClientRect(),h=ox(g.left,g.top,g.width,g.height),w=s.node.getOr(t.element);return Iy(h,i,s,a,w)})};var vb=[ke("node"),ke("root"),Nn("bubble"),dd(),me("overrides",{}),me("showAbove",!1),so("placement",sx)];const d4="\uFEFF",fd=" ",ag={create:(t,s,a,i)=>({start:t,soffset:s,finish:a,foffset:i})},yb=Da.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),cg=(t,s,a,i)=>t.fold(s,a,i),ig=t=>t.fold(bn,bn,bn),f4=yb.before,rx=yb.on,m4=yb.after,Cb={before:f4,on:rx,after:m4,cata:cg,getStart:ig},ru=Da.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Fy=t=>ru.exact(t.start,t.soffset,t.finish,t.foffset),Ly=t=>t.match({domRange:s=>le.fromDom(s.startContainer),relative:(s,a)=>Cb.getStart(s),exact:(s,a,i,d)=>s}),g4=ru.domRange,Hy=ru.relative,ax=ru.exact,cx=t=>{const s=Ly(t);return Xd(s)},ix=ag.create,lg={domRange:g4,relative:Hy,exact:ax,exactFromRange:Fy,getWin:cx,range:ix},wb=(t,s)=>{s.fold(a=>{t.setStartBefore(a.dom)},(a,i)=>{t.setStart(a.dom,i)},a=>{t.setStartAfter(a.dom)})},Rf=(t,s)=>{s.fold(a=>{t.setEndBefore(a.dom)},(a,i)=>{t.setEnd(a.dom,i)},a=>{t.setEndAfter(a.dom)})},au=(t,s,a)=>{const i=t.document.createRange();return wb(i,s),Rf(i,a),i},Qh=(t,s,a,i,d)=>{const g=t.document.createRange();return g.setStart(s.dom,a),g.setEnd(i.dom,d),g},ug=t=>({left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}),h4=t=>{const s=t.getClientRects(),a=s.length>0?s[0]:t.getBoundingClientRect();return a.width>0||a.height>0?A.some(a).map(ug):A.none()},Hi=t=>{const s=t.getBoundingClientRect();return s.width>0||s.height>0?A.some(s).map(ug):A.none()},ac=Da.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Sb=(t,s,a)=>s(le.fromDom(a.startContainer),a.startOffset,le.fromDom(a.endContainer),a.endOffset),p4=(t,s)=>s.match({domRange:a=>({ltr:ae(a),rtl:A.none}),relative:(a,i)=>({ltr:jc(()=>au(t,a,i)),rtl:jc(()=>A.some(au(t,i,a)))}),exact:(a,i,d,g)=>({ltr:jc(()=>Qh(t,a,i,d,g)),rtl:jc(()=>A.some(Qh(t,d,g,a,i)))})}),dM=(t,s)=>{const a=s.ltr();return a.collapsed?s.rtl().filter(d=>d.collapsed===!1).map(d=>ac.rtl(le.fromDom(d.endContainer),d.endOffset,le.fromDom(d.startContainer),d.startOffset)).getOrThunk(()=>Sb(t,ac.ltr,a)):Sb(t,ac.ltr,a)},Df=(t,s)=>{const a=p4(t,s);return dM(t,a)},dg=(t,s)=>Df(t,s).match({ltr:(i,d,g,h)=>{const w=t.document.createRange();return w.setStart(i.dom,d),w.setEnd(g.dom,h),w},rtl:(i,d,g,h)=>{const w=t.document.createRange();return w.setStart(g.dom,h),w.setEnd(i.dom,d),w}});ac.ltr,ac.rtl;const fg=(t,s,a)=>fo(vw(t,a),s),xr=(t,s)=>KT(s,t),xb=(t,s,a,i)=>{const g=Ya(t).dom.createRange();return g.setStart(t.dom,s),g.setEnd(a.dom,i),g},Mf=(t,s,a,i)=>{const d=xb(t,s,a,i),g=qn(t,a)&&s===i;return d.collapsed&&!g},_b=t=>A.from(t.getSelection()),lx=t=>{if(t.rangeCount>0){const s=t.getRangeAt(0),a=t.getRangeAt(t.rangeCount-1);return A.some(ag.create(le.fromDom(s.startContainer),s.startOffset,le.fromDom(a.endContainer),a.endOffset))}else return A.none()},Vy=t=>{if(t.anchorNode===null||t.focusNode===null)return lx(t);{const s=le.fromDom(t.anchorNode),a=le.fromDom(t.focusNode);return Mf(s,t.anchorOffset,a,t.focusOffset)?A.some(ag.create(s,t.anchorOffset,a,t.focusOffset)):lx(t)}},Eb=t=>_b(t).filter(s=>s.rangeCount>0).bind(Vy),Ps=(t,s)=>{const a=dg(t,s);return h4(a)},Tb=(t,s)=>{const a=dg(t,s);return Hi(a)},zy=((t,s)=>{const a=g=>{if(!t(g))throw new Error("Can only get "+s+" value of a "+s+" node");return i(g).getOr("")},i=g=>t(g)?A.from(g.dom.nodeValue):A.none();return{get:a,getOption:i,set:(g,h)=>{if(!t(g))throw new Error("Can only set raw "+s+" value of a "+s+" node");g.dom.nodeValue=h}}})(Ka,"text"),Uy=t=>zy.get(t),cu=(t,s)=>({element:t,offset:s}),ux=(t,s)=>{const a=Wc(t);if(a.length===0)return cu(t,s);if(s<a.length)return cu(a[s],0);{const i=a[a.length-1],d=Ka(i)?Uy(i).length:Wc(i).length;return cu(i,d)}},md=(t,s)=>Ka(t)?cu(t,s):ux(t,s),kb=t=>t.foffset!==void 0,Ob=(t,s)=>s.getSelection.getOrThunk(()=>()=>Eb(t))().map(i=>{if(kb(i)){const d=md(i.start,i.soffset),g=md(i.finish,i.foffset);return lg.range(d.element,d.offset,g.element,g.offset)}else return i}),Wy=(t,s,a)=>{const i=Xd(s.root).dom,d=Af(t,a,s),g=Ob(i,s).bind(x=>{if(kb(x))return Tb(i,lg.exactFromRange(x)).orThunk(()=>{const R=le.fromText(d4);qc(x.start,R);const N=Ps(i,lg.exact(R,0,R,1));return Kc(R),N}).bind(R=>ox(R.left,R.top,R.width,R.height));{const T=Io(x,N=>N.dom.getBoundingClientRect()),R={left:Math.min(T.firstCell.left,T.lastCell.left),right:Math.max(T.firstCell.right,T.lastCell.right),top:Math.min(T.firstCell.top,T.lastCell.top),bottom:Math.max(T.firstCell.bottom,T.lastCell.bottom)};return ox(R.left,R.top,R.right-R.left,R.bottom-R.top)}}),w=Ob(i,s).bind(x=>kb(x)?no(x.start)?A.some(x.start):Ci(x.start):A.some(x.firstCell)).getOr(t.element);return Iy(g,d,s,a,w)};var Pf=[Nn("getSelection"),ke("root"),Nn("bubble"),dd(),me("overrides",{}),me("showAbove",!1),so("placement",Wy)];const mg="link-layout",ir=t=>t.x+t.width,dx=(t,s)=>t.x-s.width,Zy=(t,s)=>t.y-s.height+t.height,jy=t=>t.y,fx=(t,s,a)=>js(ir(t),jy(t),a.southeast(),og(),"southeast",Gs(t,{left:0,top:2}),mg),Gy=(t,s,a)=>js(dx(t,s),jy(t),a.southwest(),gy(),"southwest",Gs(t,{right:1,top:2}),mg),mx=(t,s,a)=>js(ir(t),Zy(t,s),a.northeast(),hy(),"northeast",Gs(t,{left:0,bottom:3}),mg),gx=(t,s,a)=>js(dx(t,s),Zy(t,s),a.northwest(),py(),"northwest",Gs(t,{right:1,bottom:3}),mg),cc=()=>[fx,Gy,mx,gx],iu=()=>[Gy,fx,gx,mx],hx=(t,s,a)=>{const i=kf(a,s.item.element),d=Xh(t.element,s,cc(),iu(),cc(),iu(),A.none());return A.some(mb({anchorBox:i,bubble:fb(),overrides:s.overrides,layouts:d}))};var Nf=[ke("item"),dd(),me("overrides",{}),so("placement",hx)],Lr=Ra("type",{selection:Pf,node:vb,hotspot:c4,submenu:Nf,makeshift:hb});const La=[nc("classes",hs),vr("mode","all",["all","layout","placement"])],Hr=[me("useFixed",eo),Nn("getBounds")],ic=[as("anchor",Lr),ps("transition",La)],Ab=()=>{const t=document.documentElement;return qh(0,0,t.clientWidth,t.clientHeight)},lc=t=>{const s=da(t.element),a=t.element.dom.getBoundingClientRect();return zS(s.left,s.top,a.width,a.height)},Bf=(t,s,a,i,d,g)=>{const h=Ty(s.anchorBox,t);return o4(h,i.element,s.bubble,s.layouts,d,a,s.overrides,g)},b4=(t,s,a,i,d)=>{const g=A.none();px(t,s,a,i,d,g)},px=(t,s,a,i,d,g)=>{const h=Me("placement.info",$t(ic),d),w=h.anchor,x=i.element,T=a.get(i.uid);id(()=>{qt(x,"position","fixed");const R=nr(x,"visibility");qt(x,"visibility","hidden");const N=s.useFixed()?Ab():lc(t);w.placement(t,w,N).each(I=>{const z=g.orThunk(()=>s.getBounds.map(Za)),V=Bf(N,I,z,i,T,h.transition);a.set(i.uid,V)}),R.fold(()=>{kn(x,"visibility")},I=>{qt(x,"visibility",I)}),nr(x,"left").isNone()&&nr(x,"top").isNone()&&nr(x,"right").isNone()&&nr(x,"bottom").isNone()&&Ga(nr(x,"position"),"fixed")&&kn(x,"position")},x)};var vx=Object.freeze({__proto__:null,position:b4,positionWithinBounds:px,getMode:(t,s,a)=>s.useFixed()?"fixed":"absolute",reset:(t,s,a,i)=>{const d=i.element;dt(["position","left","right","top","bottom"],g=>kn(d,g)),Xk(d),a.clear(i.uid)}}),Ky=Object.freeze({__proto__:null,init:()=>{let t={};return Pa({readState:()=>t,clear:d=>{Rt(d)?delete t[d]:t={}},set:(d,g)=>{t[d]=g},get:d=>lt(t,d)})}});const qs=Ws({fields:Hr,name:"positioning",active:Yk,apis:vx,state:Ky}),Yy=t=>t.getSystem().isConnected(),gd=t=>{un(t,ti());const s=t.components();dt(s,gd)},gg=t=>{const s=t.components();dt(s,gg),un(t,yr())},Xy=(t,s)=>{t.getSystem().addToWorld(s),Hs(t.element)&&gg(s)},Rb=t=>{gd(t),t.getSystem().removeFromWorld(t)},ep=(t,s)=>{Sc(t.element,s.element)},Jy=t=>{dt(t.components(),s=>Kc(s.element)),_m(t.element),t.syncComponents()},hg=(t,s,a)=>{const i=t.components();Jy(t);const d=a(s),g=Mt(i,d);dt(g,h=>{gd(h),t.getSystem().removeFromWorld(h)}),dt(d,h=>{Yy(h)?ep(t,h):(t.getSystem().addToWorld(h),ep(t,h),Hs(t.element)&&gg(h))}),t.syncComponents()},Qy=(t,s,a)=>{const i=t.components(),d=we(s,w=>vS(w).toArray());dt(i,w=>{Uo(d,w)||Rb(w)});const g=a(s),h=Mt(i,g);dt(h,w=>{Yy(w)&&Rb(w)}),dt(g,w=>{Yy(w)||Xy(t,w)}),t.syncComponents()},Cl=(t,s)=>{$f(t,s,Sc)},$f=(t,s,a)=>{t.getSystem().addToWorld(s),a(t.element,s.element),Hs(t.element)&&gg(s),t.syncComponents()},yx=t=>{gd(t),Kc(t.element),t.getSystem().removeFromWorld(t)},lu=t=>{const s=Uc(t.element).bind(a=>t.getSystem().getByDom(a).toOptional());yx(t),s.each(a=>{a.syncComponents()})},uc=t=>{const s=t.components();dt(s,yx),_m(t.element),t.syncComponents()},Cx=(t,s)=>{If(t,s,Sc)},wl=(t,s)=>{If(t,s,xm)},If=(t,s,a)=>{a(t,s.element);const i=Wc(s.element);dt(i,d=>{s.getByDom(d).each(gg)})},e2=t=>{const s=Wc(t.element);dt(s,a=>{t.getByDom(a).each(gd)}),Kc(t.element)},Db=(t,s,a,i)=>{a.get().each(h=>{uc(t)});const d=s.getAttachPoint(t);Cl(d,t);const g=t.getSystem().build(i);return Cl(t,g),a.set(g),g},wx=(t,s,a,i)=>{const d=Db(t,s,a,i);return s.onOpen(t,d),d},y4=(t,s,a,i)=>a.get().map(()=>Db(t,s,a,i)),C4=(t,s,a,i,d)=>{bg(t,s),wx(t,s,a,i),d(),Mb(t,s)},Sx=(t,s,a)=>{a.get().each(i=>{uc(t),lu(t),s.onClose(t,i),a.clear()})},hd=(t,s,a)=>a.isOpen(),pg=(t,s,a,i)=>hd(t,s,a)&&a.get().exists(d=>s.isPartOf(t,d,i)),tp=(t,s,a)=>a.get(),w4=(t,s,a,i)=>{nr(t.element,s).fold(()=>{Zo(t.element,a)},d=>{ct(t.element,a,d)}),qt(t.element,s,i)},S4=(t,s,a)=>{tr(t.element,a).fold(()=>kn(t.element,s),i=>qt(t.element,s,i))},bg=(t,s,a)=>{const i=s.getAttachPoint(t);qt(t.element,"position",qs.getMode(i)),w4(t,"visibility",s.cloakVisibilityAttr,"hidden")},t2=t=>ja(["top","left","right","bottom"],s=>nr(t,s).isSome()),Mb=(t,s,a)=>{t2(t.element)||kn(t.element,"position"),S4(t,"visibility",s.cloakVisibilityAttr)};var n2=Object.freeze({__proto__:null,cloak:bg,decloak:Mb,open:wx,openWhileCloaked:C4,close:Sx,isOpen:hd,isPartOf:pg,getState:tp,setContent:y4}),vg=Object.freeze({__proto__:null,events:(t,s)=>Bn([Te(Ds(),(a,i)=>{Sx(a,t,s)})])}),s2=[vn("onOpen"),vn("onClose"),ke("isPartOf"),ke("getAttachPoint"),me("cloakVisibilityAttr","data-precloak-visibility")],r2=Object.freeze({__proto__:null,init:()=>{const t=Mn(),s=ae("not-implemented");return Pa({readState:s,isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})}});const wn=Ws({fields:s2,name:"sandboxing",active:vg,apis:n2,state:r2}),Sl=ae("dismiss.popups"),Ff=ae("reposition.popups"),np=ae("mouse.released"),a2=pr([me("isExtraPart",eo),ps("fireEventInstead",[me("event",Ql())])]),uu=t=>{const s=Me("Dismissal",a2,t);return{[Sl()]:{schema:pr([ke("target")]),onReceive:(a,i)=>{wn.isOpen(a)&&(wn.isPartOf(a,i.target)||s.isExtraPart(a,i.target)||s.fireEventInstead.fold(()=>wn.close(a),g=>un(a,g.event)))}}}},c2=pr([ps("fireEventInstead",[me("event",Bv())]),Jc("doReposition")]),Pb=t=>{const s=Me("Reposition",c2,t);return{[Ff()]:{onReceive:a=>{wn.isOpen(a)&&s.fireEventInstead.fold(()=>s.doReposition(a),i=>un(a,i.event))}}}},i2=(t,s,a)=>{s.store.manager.onLoad(t,s,a)},l2=(t,s,a)=>{s.store.manager.onUnload(t,s,a)};var Bb=Object.freeze({__proto__:null,onLoad:i2,onUnload:l2,setValue:(t,s,a,i)=>{s.store.manager.setValue(t,s,a,i)},getValue:(t,s,a)=>s.store.manager.getValue(t,s,a),getState:(t,s,a)=>a}),Cg=Object.freeze({__proto__:null,events:(t,s)=>{const a=t.resetOnDom?[po((i,d)=>{i2(i,t,s)}),gl((i,d)=>{l2(i,t,s)})]:[Lv(t,s,i2)];return Bn(a)}});const $b=()=>{const t=Et(null),s=()=>({mode:"memory",value:t.get()}),a=()=>t.get()===null,i=()=>{t.set(null)};return Pa({set:t.set,get:t.get,isNotSet:a,clear:i,readState:s})},x4=()=>Pa({readState:ee}),Ib=()=>{const t=Et({}),s=Et({});return Pa({readState:()=>({mode:"dataset",dataByValue:t.get(),dataByText:s.get()}),lookup:h=>lt(t.get(),h).orThunk(()=>lt(s.get(),h)),update:h=>{const w=t.get(),x=s.get(),T={},R={};dt(h,N=>{T[N.value]=N,lt(N,"meta").each(I=>{lt(I,"text").each(z=>{R[z]=N})})}),t.set({...w,...T}),s.set({...x,...R})},clear:()=>{t.set({}),s.set({})}})};var _4=Object.freeze({__proto__:null,memory:$b,dataset:Ib,manual:x4,init:t=>t.store.manager.state(t)});const op=(t,s,a,i)=>{const d=s.store;a.update([i]),d.setValue(t,i),s.onSetValue(t,i)},Ac=(t,s,a)=>{const i=s.store,d=i.getDataKey(t);return a.lookup(d).getOrThunk(()=>i.getFallbackEntry(d))},Ns=(t,s,a)=>{s.store.initialValue.each(d=>{op(t,s,a,d)})},E4=(t,s,a)=>{a.clear()};var Vi=[Nn("initialValue"),ke("getFallbackEntry"),ke("getDataKey"),ke("setValue"),so("manager",{setValue:op,getValue:Ac,onLoad:Ns,onUnload:E4,state:Ib})];const T4=(t,s,a)=>s.store.getValue(t),_x=(t,s,a,i)=>{s.store.setValue(t,i),s.onSetValue(t,i)},sp=(t,s,a)=>{s.store.initialValue.each(i=>{s.store.setValue(t,i)})};var wg=[ke("getValue"),me("setValue",ee),Nn("initialValue"),so("manager",{setValue:_x,getValue:T4,onLoad:sp,onUnload:ee,state:$r.init})];const Ex=(t,s,a,i)=>{a.set(i),s.onSetValue(t,i)},Tx=(t,s,a)=>a.get(),fM=(t,s,a)=>{s.store.initialValue.each(i=>{a.isNotSet()&&a.set(i)})},mM=(t,s,a)=>{a.clear()};var kx=[Nn("initialValue"),so("manager",{setValue:Ex,getValue:Tx,onLoad:fM,onUnload:mM,state:$b})],Ox=[lo("store",{mode:"memory"},Ra("mode",{memory:kx,manual:wg,dataset:Vi})),vn("onSetValue"),me("resetOnDom",!1)];const it=Ws({fields:Ox,name:"representing",active:Cg,apis:Bb,extra:{setValueFrom:(t,s)=>{const a=it.getValue(s);it.setValue(t,a)}},state:_4}),Bs=(t,s)=>Ov(t,{},De(s,a=>Ev(a.name(),"Cannot configure "+a.name()+" for "+t)).concat([rr("dump",bn)])),rp=t=>t.dump,$s=(t,s)=>({...Fe(s),...t.dump}),Rc={field:Bs,augment:$s,get:rp},u2="placeholder",Vf=Da.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),Fb=t=>Ln(t,"uiType"),pd=(t,s,a,i)=>t.exists(d=>d!==a.owner)?Vf.single(!0,ae(a)):lt(i,a.name).fold(()=>{throw new Error("Unknown placeholder component: "+a.name+`
Known: [`+$o(i)+`]
Namespace: `+t.getOr("none")+`
Spec: `+JSON.stringify(a,null,2))},d=>d.replace()),ap=(t,s,a,i)=>Fb(a)&&a.uiType===u2?pd(t,s,a,i):Vf.single(!1,ae(a)),Ax=(t,s,a,i)=>ap(t,s,a,i).fold((g,h)=>{const w=Fb(a)?h(s,a.config,a.validated):h(s),x=lt(w,"components").getOr([]),T=we(x,R=>Ax(t,s,R,i));return[{...w,components:T}]},(g,h)=>{if(Fb(a)){const w=h(s,a.config,a.validated);return a.validated.preprocess.getOr(bn)(w)}else return h(s)}),k4=(t,s,a,i)=>we(a,d=>Ax(t,s,d,i)),O4=(t,s)=>{let a=!1;const i=()=>a,d=()=>{if(a)throw new Error("Trying to use the same placeholder more than once: "+t);return a=!0,s},g=()=>s.fold((h,w)=>h,(h,w)=>h);return{name:ae(t),required:g,used:i,replace:d}},A4=(t,s,a,i)=>{const d=Io(i,(h,w)=>O4(w,h)),g=k4(t,s,a,d);return As(d,h=>{if(h.used()===!1&&h.required())throw new Error("Placeholder: "+h.name()+` was not found in components list
Namespace: `+t.getOr("none")+`
Components: `+JSON.stringify(s.components,null,2))}),g},bd=Vf.single,cp=Vf.multiple,ip=ae(u2),Lb=Da.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),Ha=me("factory",{sketch:bn}),xl=me("schema",[]),vd=ke("name"),yd=rs("pname","pname",gn(t=>"<alloy."+ut(t.name)+">"),Ei()),R4=rr("schema",()=>[Nn("preprocess")]),Hb=me("defaults",ae({})),Vb=me("overrides",ae({})),D4=$t([Ha,xl,vd,yd,Hb,Vb]),M4=$t([Ha,xl,vd,Hb,Vb]),P4=$t([Ha,xl,vd,yd,Hb,Vb]),N4=$t([Ha,R4,vd,ke("unit"),yd,Hb,Vb]),Rx=t=>t.fold(A.some,A.none,A.some,A.some),zb=t=>{const s=a=>a.name;return t.fold(s,s,s,s)},B4=t=>t.fold(bn,bn,bn,bn),Ub=(t,s)=>a=>{const i=Me("Converting part type",s,a);return t(i)},lr=Ub(Lb.required,D4),Dc=Ub(Lb.external,M4),dc=Ub(Lb.optional,P4),Wb=Ub(Lb.group,N4),Zb=ae("entirety");var Dx=Object.freeze({__proto__:null,required:lr,external:Dc,optional:dc,group:Wb,asNamedPart:Rx,name:zb,asCommon:B4,original:Zb});const d2=(t,s,a,i)=>Po(s.defaults(t,a,i),a,{uid:t.partUids[s.name]},s.overrides(t,a,i)),Mx=(t,s,a)=>{const i={},d={};return dt(a,g=>{g.fold(h=>{i[h.pname]=bd(!0,(w,x,T)=>h.factory.sketch(d2(w,h,x,T)))},h=>{const w=s.parts[h.name];d[h.name]=ae(h.factory.sketch(d2(s,h,w[Zb()]),w))},h=>{i[h.pname]=bd(!1,(w,x,T)=>h.factory.sketch(d2(w,h,x,T)))},h=>{i[h.pname]=cp(!0,(w,x,T)=>{const R=w[h.name];return De(R,N=>h.factory.sketch(Po(h.defaults(w,N,T),N,h.overrides(w,N))))})})}),{internals:ae(i),externals:ae(d)}},f2=(t,s)=>{const a={};return dt(s,i=>{Rx(i).each(d=>{const g=Px(t,d.pname);a[d.name]=h=>{const w=Me("Part: "+d.name+" in "+t,$t(d.schema),h);return{...g,config:h,validated:w}}})}),a},Px=(t,s)=>({uiType:ip(),owner:t,name:s}),Nx=(t,s,a)=>({uiType:ip(),owner:t,name:s,config:a,validated:{}}),$4=t=>we(t,s=>s.fold(A.none,A.some,A.none,A.none).map(a=>Vu(a.name,a.schema.concat([hS(Zb())]))).toArray()),I4=t=>De(t,zb),jb=(t,s,a)=>Mx(t,s,a),m2=(t,s,a)=>A4(A.some(t),s,s.components,a),He=(t,s,a)=>{const i=s.partUids[a];return t.getSystem().getByUid(i).toOptional()},na=(t,s,a)=>He(t,s,a).getOrDie("Could not find part: "+a),Bx=(t,s,a)=>{const i={},d=s.partUids,g=t.getSystem();return dt(a,h=>{i[h]=ae(g.getByUid(d[h]))}),i},g2=(t,s)=>{const a=t.getSystem();return Io(s.partUids,(i,d)=>ae(a.getByUid(i)))},lp=t=>$o(t.partUids),up=(t,s,a)=>{const i={},d=s.partUids,g=t.getSystem();return dt(a,h=>{i[h]=ae(g.getByUid(d[h]).getOrDie())}),i},Gb=(t,s)=>{const a=I4(s);return Uu(De(a,i=>({key:i,value:t+"-"+i})))},dp=t=>rs("partUids","partUids",w1(s=>Gb(s.uid,t)),Ei());var $x=Object.freeze({__proto__:null,generate:f2,generateOne:Nx,schemas:$4,names:I4,substitutes:jb,components:m2,defaultUids:Gb,defaultUidsSchema:dp,getAllParts:g2,getAllPartNames:lp,getPart:He,getPartOrDie:na,getParts:Bx,getPartsOrDie:up});const Ix=(t,s)=>(t.length>0?[Vu("parts",t)]:[]).concat([ke("uid"),me("dom",{}),me("components",[]),hS("originalSpec"),me("debug.sketcher",{})]).concat(s),h2=(t,s,a,i,d)=>{const g=Ix(i,d);return Me(t+" [SpecSchema]",pr(g.concat(s)),a)},p2=(t,s,a,i)=>{const d=Fx(i),g=h2(t,s,d,[],[]);return a(g,d)},fu=(t,s,a,i,d)=>{const g=Fx(d),h=$4(a),w=dp(a),x=h2(t,s,g,h,[w]),T=jb(t,x,a),R=m2(t,x,T.internals());return i(x,R,g,T.externals())},b2=t=>Ln(t,"uid"),Fx=t=>b2(t)?t:{...t,uid:xf("uid")},F4=t=>t.uid!==void 0,L4=pr([ke("name"),ke("factory"),ke("configFields"),me("apis",{}),me("extraApis",{})]),Lx=pr([ke("name"),ke("factory"),ke("configFields"),ke("partFields"),me("apis",{}),me("extraApis",{})]),pa=t=>{const s=Me("Sketcher for "+t.name,L4,t),a=g=>p2(s.name,s.configFields,s.factory,g),i=Io(s.apis,eg),d=Io(s.extraApis,(g,h)=>Hm(g,h));return{name:s.name,configFields:s.configFields,sketch:a,...i,...d}},Vr=t=>{const s=Me("Sketcher for "+t.name,Lx,t),a=h=>fu(s.name,s.configFields,s.partFields,s.factory,h),i=f2(s.name,s.partFields),d=Io(s.apis,eg),g=Io(s.extraApis,(h,w)=>Hm(h,w));return{name:s.name,partFields:s.partFields,configFields:s.configFields,sketch:a,parts:i,...d,...g}},Sg=t=>Ru("input")(t)&&Fo(t,"type")!=="radio"||Ru("textarea")(t);var H4=Object.freeze({__proto__:null,getCurrent:(t,s,a)=>s.find(t)});const v2=[ke("find")],yn=Ws({fields:v2,name:"composing",apis:H4}),hM=["input","button","textarea","select"],Hx=(t,s,a)=>{(s.disabled()?qb:mp)(t,s)},Vx=(t,s)=>s.useNative===!0&&Uo(hM,zc(t.element)),pM=t=>uv(t.element,"disabled"),Cd=t=>{ct(t.element,"disabled","disabled")},fp=t=>{Zo(t.element,"disabled")},V4=t=>Fo(t.element,"aria-disabled")==="true",z4=t=>{ct(t.element,"aria-disabled","true")},U4=t=>{ct(t.element,"aria-disabled","false")},qb=(t,s,a)=>{s.disableClass.each(d=>{oo(t.element,d)}),(Vx(t,s)?Cd:z4)(t),s.onDisabled(t)},mp=(t,s,a)=>{s.disableClass.each(d=>{Oo(t.element,d)}),(Vx(t,s)?fp:U4)(t),s.onEnabled(t)},zx=(t,s)=>Vx(t,s)?pM(t):V4(t);var xg=Object.freeze({__proto__:null,enable:mp,disable:qb,isDisabled:zx,onLoad:Hx,set:(t,s,a,i)=>{(i?qb:mp)(t,s)}}),Ux=Object.freeze({__proto__:null,exhibit:(t,s)=>Ma({classes:s.disabled()?s.disableClass.toArray():[]}),events:(t,s)=>Bn([Qw(ma(),(a,i)=>zx(a,t)),Lv(t,s,Hx)])}),W4=[ko("disabled",eo),me("useNative",!0),Nn("disableClass"),vn("onDisabled"),vn("onEnabled")];const Pt=Ws({fields:W4,name:"disabling",active:Ux,apis:xg}),l=(t,s,a,i)=>{const d=xr(t.element,"."+s.highlightClass);dt(d,g=>{ja(i,w=>qn(w.element,g))||(Oo(g,s.highlightClass),t.getSystem().getByDom(g).each(w=>{s.onDehighlight(t,w),un(w,$m())}))})},f=(t,s,a)=>l(t,s,a,[]),p=(t,s,a,i)=>{G(t,s,a,i)&&(Oo(i.element,s.highlightClass),s.onDehighlight(t,i),un(i,$m()))},y=(t,s,a,i)=>{l(t,s,a,[i]),G(t,s,a,i)||(oo(i.element,s.highlightClass),s.onHighlight(t,i),un(i,kh()))},_=(t,s,a)=>{Pe(t,s).each(i=>{y(t,s,a,i)})},O=(t,s,a)=>{tt(t,s).each(i=>{y(t,s,a,i)})},$=(t,s,a,i)=>{fe(t,s,a,i).fold(d=>{throw d},d=>{y(t,s,a,d)})},U=(t,s,a,i)=>{const d=Re(t,s);Gt(d,i).each(h=>{y(t,s,a,h)})},G=(t,s,a,i)=>Na(i.element,s.highlightClass),Q=(t,s,a)=>$n(t.element,"."+s.highlightClass).bind(i=>t.getSystem().getByDom(i).toOptional()),fe=(t,s,a,i)=>{const d=xr(t.element,"."+s.itemClass);return A.from(d[i]).fold(()=>tn.error(new Error("No element found with index "+i)),t.getSystem().getByDom)},Pe=(t,s,a)=>$n(t.element,"."+s.itemClass).bind(i=>t.getSystem().getByDom(i).toOptional()),tt=(t,s,a)=>{const i=xr(t.element,"."+s.itemClass);return(i.length>0?A.some(i[i.length-1]):A.none()).bind(g=>t.getSystem().getByDom(g).toOptional())},Ye=(t,s,a,i)=>{const d=xr(t.element,"."+s.itemClass);return vo(d,h=>Na(h,s.highlightClass)).bind(h=>{const w=sg(h,i,0,d.length-1);return t.getSystem().getByDom(d[w]).toOptional()})},We=(t,s,a)=>Ye(t,s,a,-1),gt=(t,s,a)=>Ye(t,s,a,1),Re=(t,s,a)=>{const i=xr(t.element,"."+s.itemClass);return Gd(De(i,d=>t.getSystem().getByDom(d).toOptional()))};var je=Object.freeze({__proto__:null,dehighlightAll:f,dehighlight:p,highlight:y,highlightFirst:_,highlightLast:O,highlightAt:$,highlightBy:U,isHighlighted:G,getHighlighted:Q,getFirst:Pe,getLast:tt,getPrevious:We,getNext:gt,getCandidates:Re}),At=[ke("highlightClass"),ke("itemClass"),vn("onHighlight"),vn("onDehighlight")];const Je=Ws({fields:At,name:"highlighting",apis:je}),An=[8],jn=[9],Hn=[13],Ks=[27],ls=[32],_l=[37],wd=[38],Sd=[39],In=[40],oa=(t,s,a)=>{const i=Rr(t.slice(0,s)),d=Rr(t.slice(s+1));return Gt(i.concat(d),a)},sa=(t,s,a)=>{const i=Rr(t.slice(0,s));return Gt(i,a)},Mc=(t,s,a)=>{const i=t.slice(0,s),d=t.slice(s+1);return Gt(d.concat(i),a)},Pc=(t,s,a)=>{const i=t.slice(s+1);return Gt(i,a)},ln=t=>s=>{const a=s.raw;return Uo(t,a.which)},Ho=t=>s=>Ou(t,a=>a(s)),El=t=>t.raw.shiftKey===!0,gp=t=>t.raw.ctrlKey===!0,Va=Ae(El),Kt=(t,s)=>({matches:t,classification:s}),C2=(t,s)=>Gt(t,i=>i.matches(s)).map(i=>i.classification),w2=(t,s,a)=>{s.exists(d=>a.exists(g=>qn(g,d)))||vt(t,Eh(),{prevFocus:s,newFocus:a})},Kb=()=>{const t=a=>Qr(a.element);return{get:t,set:(a,i)=>{const d=t(a);a.getSystem().triggerFocus(i,a.element);const g=t(a);w2(a,d,g)}}},Wx=()=>{const t=a=>Je.getHighlighted(a).map(i=>i.element);return{get:t,set:(a,i)=>{const d=t(a);a.getSystem().getByDom(i).fold(ee,h=>{Je.highlight(a,h)});const g=t(a);w2(a,d,g)}}};var zf;(function(t){t.OnFocusMode="onFocus",t.OnEnterOrSpaceMode="onEnterOrSpace",t.OnApiMode="onApi"})(zf||(zf={}));const mu=(t,s,a,i,d)=>{const g=()=>t.concat([me("focusManager",Kb()),lo("focusInside","onFocus",Ai(T=>Uo(["onFocus","onEnterOrSpace","onApi"],T)?tn.value(T):tn.error("Invalid value for focusInside"))),so("handler",x),so("state",s),so("sendFocusIn",d)]),h=(T,R,N,I,z)=>{const V=N(T,R,I,z);return C2(V,R.event).bind(Y=>Y(T,R,I,z))},x={schema:g,processKey:h,toEvents:(T,R)=>{const N=T.focusInside!==zf.OnFocusMode?A.none():d(T).map(V=>Te(Qc(),(Y,de)=>{V(Y,T,R),de.stop()})),I=(V,Y)=>{const de=ln(ls.concat(Hn))(Y.event);T.focusInside===zf.OnEnterOrSpaceMode&&de&&k1(V,Y)&&d(T).each(te=>{te(V,T,R),Y.stop()})},z=[Te(sc(),(V,Y)=>{h(V,Y,a,T,R).fold(()=>{I(V,Y)},de=>{Y.stop()})}),Te(jw(),(V,Y)=>{h(V,Y,i,T,R).each(de=>{Y.stop()})})];return Bn(N.toArray().concat(z))}};return x},Zx=t=>{const s=[Nn("onEscape"),Nn("onEnter"),me("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),me("firstTabstop",0),me("useTabstopAt",Bt),Nn("visibilitySelector")].concat([t]),a=(te,ie)=>{const ce=te.visibilitySelector.bind(_e=>Fi(ie,_e)).getOr(ie);return _s(ce)>0},i=(te,ie)=>{const ce=xr(te.element,ie.selector),_e=fo(ce,Se=>a(ie,Se));return A.from(_e[ie.firstTabstop])},d=(te,ie)=>ie.focusManager.get(te).bind(ce=>Fi(ce,ie.selector)),g=(te,ie)=>a(te,ie)&&te.useTabstopAt(ie),h=(te,ie,ce)=>{i(te,ie).each(_e=>{ie.focusManager.set(te,_e)})},w=(te,ie,ce,_e,Se)=>Se(ie,ce,Le=>g(_e,Le)).fold(()=>_e.cyclic?A.some(!0):A.none(),Le=>(_e.focusManager.set(te,Le),A.some(!0))),x=(te,ie,ce,_e)=>{const Se=xr(te.element,ce.selector);return d(te,ce).bind(Le=>vo(Se,_n(qn,Le)).bind(xe=>w(te,Se,xe,ce,_e)))},T=(te,ie,ce)=>{const _e=ce.cyclic?oa:sa;return x(te,ie,ce,_e)},R=(te,ie,ce)=>{const _e=ce.cyclic?Mc:Pc;return x(te,ie,ce,_e)},N=te=>Jd(te).bind(i1).exists(ie=>qn(ie,te)),I=(te,ie,ce)=>d(te,ce).filter(_e=>!ce.useTabstopAt(_e)).bind(_e=>(N(_e)?T:R)(te,ie,ce)),z=(te,ie,ce)=>ce.onEnter.bind(_e=>_e(te,ie)),V=(te,ie,ce)=>ce.onEscape.bind(_e=>_e(te,ie)),Y=ae([Kt(Ho([El,ln(jn)]),T),Kt(ln(jn),R),Kt(Ho([Va,ln(Hn)]),z)]),de=ae([Kt(ln(Ks),V),Kt(ln(jn),I)]);return mu(s,$r.init,Y,de,()=>A.some(h))};var hp=Zx(rr("cyclic",eo)),RL=Zx(rr("cyclic",Bt));const S2=(t,s,a)=>(Oh(t,a,ma()),A.some(!0)),Yb=(t,s,a)=>Sg(a)&&ln(ls)(s.event)?A.none():S2(t,s,a),pp=(t,s)=>A.some(!0),Z4=[me("execute",Yb),me("useSpace",!1),me("useEnter",!0),me("useControlEnter",!1),me("useDown",!1)],yM=(t,s,a)=>a.execute(t,s,t.element),CM=(t,s,a,i)=>{const d=a.useSpace&&!Sg(t.element)?ls:[],g=a.useEnter?Hn:[],h=a.useDown?In:[],w=d.concat(g).concat(h);return[Kt(ln(w),yM)].concat(a.useControlEnter?[Kt(Ho([gp,ln(Hn)]),yM)]:[])},DL=(t,s,a,i)=>a.useSpace&&!Sg(t.element)?[Kt(ln(ls),pp)]:[];var wM=mu(Z4,$r.init,CM,DL,()=>A.none());const j4=()=>{const t=Mn();return Pa({readState:()=>t.get().map(d=>({numRows:String(d.numRows),numColumns:String(d.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(d,g)=>{t.set({numRows:d,numColumns:g})},getNumRows:()=>t.get().map(d=>d.numRows),getNumColumns:()=>t.get().map(d=>d.numColumns)})};var ML=Object.freeze({__proto__:null,flatgrid:j4,init:t=>t.state(t)});const SM=t=>(s,a,i,d)=>{const g=t(s.element);return x2(g,s,a,i,d)},G4=(t,s)=>{const a=gb(t,s);return SM(a)},q4=(t,s)=>{const a=gb(s,t);return SM(a)},K4=t=>(s,a,i,d)=>x2(t,s,a,i,d),x2=(t,s,a,i,d)=>i.focusManager.get(s).bind(h=>t(s.element,h,i,d)).map(h=>(i.focusManager.set(s,h),!0)),jx=K4,xM=K4,Y4=K4,_M=t=>t.offsetWidth<=0&&t.offsetHeight<=0,EM=t=>!_M(t.dom),PL=(t,s)=>vo(t,s).map(a=>({index:a,candidates:t})),ai=(t,s,a)=>{const i=h=>qn(h,s),d=xr(t,a),g=fo(d,EM);return PL(g,i)},TM=(t,s)=>vo(t,a=>qn(s,a)),kM=(t,s,a,i)=>{const d=Math.floor(s/a),g=s%a;return i(d,g).bind(h=>{const w=h.row*a+h.column;return w>=0&&w<t.length?A.some(t[w]):A.none()})},OM=(t,s,a,i,d)=>kM(t,s,i,(g,h)=>{const x=g===a-1?t.length-g*i:i,T=sg(h,d,0,x-1);return A.some({row:g,column:T})}),AM=(t,s,a,i,d)=>kM(t,s,i,(g,h)=>{const w=sg(g,d,0,a-1),T=w===a-1?t.length-w*i:i,R=oi(h,0,T-1);return A.some({row:w,column:R})}),NL=(t,s,a,i)=>OM(t,s,a,i,1),Xb=(t,s,a,i)=>OM(t,s,a,i,-1),X4=(t,s,a,i)=>AM(t,s,a,i,-1),BL=(t,s,a,i)=>AM(t,s,a,i,1),J4=[ke("selector"),me("execute",Yb),Xr("onEscape"),me("captureTab",!1),W1()],Gx=(t,s,a)=>{$n(t.element,s.selector).each(i=>{s.focusManager.set(t,i)})},Q4=(t,s)=>s.focusManager.get(t).bind(a=>Fi(a,s.selector)),$L=(t,s,a,i)=>Q4(t,a).bind(d=>a.execute(t,s,d)),qx=t=>(s,a,i,d)=>ai(s,a,i.selector).bind(g=>t(g.candidates,g.index,d.getNumRows().getOr(i.initSize.numRows),d.getNumColumns().getOr(i.initSize.numColumns))),RM=(t,s,a)=>a.captureTab?A.some(!0):A.none(),IL=(t,s,a)=>a.onEscape(t,s),DM=qx(Xb),MM=qx(NL),PM=qx(X4),eO=qx(BL),FL=ae([Kt(ln(_l),G4(DM,MM)),Kt(ln(Sd),q4(DM,MM)),Kt(ln(wd),jx(PM)),Kt(ln(In),xM(eO)),Kt(Ho([El,ln(jn)]),RM),Kt(Ho([Va,ln(jn)]),RM),Kt(ln(ls.concat(Hn)),$L)]),LL=ae([Kt(ln(Ks),IL),Kt(ln(ls),pp)]);var HL=mu(J4,j4,FL,LL,()=>A.some(Gx));const NM=(t,s,a,i,d)=>{const g=w=>zc(w)==="button"&&Fo(w,"disabled")==="disabled",h=(w,x,T)=>d(w,x,i,0,T.length-1,T[x],R=>g(T[R])?h(w,R,T):A.from(T[R]));return ai(t,a,s).bind(w=>{const x=w.index,T=w.candidates;return h(x,x,T)})},_g=(t,s,a,i)=>NM(t,s,a,i,(d,g,h,w,x,T,R)=>{const N=oi(g+h,w,x);return N===d?A.from(T):R(N)}),_2=(t,s,a,i)=>NM(t,s,a,i,(d,g,h,w,x,T,R)=>{const N=sg(g,h,w,x);return N===d?A.none():R(N)}),VL=[ke("selector"),me("getInitial",A.none),me("execute",Yb),Xr("onEscape"),me("executeOnMove",!1),me("allowVertical",!0),me("allowHorizontal",!0),me("cycles",!0)],tO=(t,s)=>s.focusManager.get(t).bind(a=>Fi(a,s.selector)),nO=(t,s,a)=>tO(t,a).bind(i=>a.execute(t,s,i)),BM=(t,s,a)=>{s.getInitial(t).orThunk(()=>$n(t.element,s.selector)).each(i=>{s.focusManager.set(t,i)})},oO=(t,s,a)=>(a.cycles?_2:_g)(t,a.selector,s,-1),sO=(t,s,a)=>(a.cycles?_2:_g)(t,a.selector,s,1),rO=t=>(s,a,i,d)=>t(s,a,i,d).bind(()=>i.executeOnMove?nO(s,a,i):A.some(!0)),$M=(t,s,a)=>a.onEscape(t,s),zL=(t,s,a,i)=>{const d=[...a.allowHorizontal?_l:[]].concat(a.allowVertical?wd:[]),g=[...a.allowHorizontal?Sd:[]].concat(a.allowVertical?In:[]);return[Kt(ln(d),rO(G4(oO,sO))),Kt(ln(g),rO(q4(oO,sO))),Kt(ln(Hn),nO),Kt(ln(ls),nO)]},UL=ae([Kt(ln(ls),pp),Kt(ln(Ks),$M)]);var WL=mu(VL,$r.init,zL,UL,()=>A.some(BM));const Jb=(t,s,a)=>A.from(t[s]).bind(i=>A.from(i[a]).map(d=>({rowIndex:s,columnIndex:a,cell:d}))),IM=(t,s,a,i)=>{const g=t[s].length,h=sg(a,i,0,g-1);return Jb(t,s,h)},E2=(t,s,a,i)=>{const d=sg(a,i,0,t.length-1),g=t[d].length,h=oi(s,0,g-1);return Jb(t,d,h)},FM=(t,s,a,i)=>{const g=t[s].length,h=oi(a+i,0,g-1);return Jb(t,s,h)},aO=(t,s,a,i)=>{const d=oi(a+i,0,t.length-1),g=t[d].length,h=oi(s,0,g-1);return Jb(t,d,h)},za=(t,s,a)=>IM(t,s,a,1),ZL=(t,s,a)=>IM(t,s,a,-1),LM=(t,s,a)=>E2(t,a,s,-1),HM=(t,s,a)=>E2(t,a,s,1),jL=(t,s,a)=>FM(t,s,a,-1),VM=(t,s,a)=>FM(t,s,a,1),zM=(t,s,a)=>aO(t,a,s,-1),GL=(t,s,a)=>aO(t,a,s,1),qL=[Vu("selectors",[ke("row"),ke("cell")]),me("cycles",!0),me("previousSelector",A.none),me("execute",Yb)],KL=(t,s,a)=>{s.previousSelector(t).orThunk(()=>{const d=s.selectors;return $n(t.element,d.cell)}).each(d=>{s.focusManager.set(t,d)})},YL=(t,s,a)=>Qr(t.element).bind(i=>a.execute(t,s,i)),UM=(t,s)=>De(t,a=>xr(a,s.selectors.cell)),Kx=(t,s)=>(a,i,d)=>{const g=d.cycles?t:s;return Fi(i,d.selectors.row).bind(h=>{const w=xr(h,d.selectors.cell);return TM(w,i).bind(x=>{const T=xr(a,d.selectors.row);return TM(T,h).bind(R=>{const N=UM(T,d);return g(N,R,x).map(I=>I.cell)})})})},WM=Kx(ZL,jL),cO=Kx(za,VM),ZM=Kx(LM,zM),jM=Kx(HM,GL),XL=ae([Kt(ln(_l),G4(WM,cO)),Kt(ln(Sd),q4(WM,cO)),Kt(ln(wd),jx(ZM)),Kt(ln(In),xM(jM)),Kt(ln(ls.concat(Hn)),YL)]),JL=ae([Kt(ln(ls),pp)]);var QL=mu(qL,$r.init,XL,JL,()=>A.some(KL));const e7=[ke("selector"),me("execute",Yb),me("moveOnTab",!1)],iO=(t,s,a)=>a.focusManager.get(t).bind(i=>a.execute(t,s,i)),GM=(t,s,a)=>{$n(t.element,s.selector).each(i=>{s.focusManager.set(t,i)})},Uf=(t,s,a)=>_2(t,a.selector,s,-1),lO=(t,s,a)=>_2(t,a.selector,s,1),qM=(t,s,a,i)=>a.moveOnTab?Y4(Uf)(t,s,a,i):A.none(),uO=(t,s,a,i)=>a.moveOnTab?Y4(lO)(t,s,a,i):A.none(),t7=ae([Kt(ln(wd),Y4(Uf)),Kt(ln(In),Y4(lO)),Kt(Ho([El,ln(jn)]),qM),Kt(Ho([Va,ln(jn)]),uO),Kt(ln(Hn),iO),Kt(ln(ls),iO)]),n7=ae([Kt(ln(ls),pp)]);var o7=mu(e7,$r.init,t7,n7,()=>A.some(GM));const s7=[Xr("onSpace"),Xr("onEnter"),Xr("onShiftEnter"),Xr("onLeft"),Xr("onRight"),Xr("onTab"),Xr("onShiftTab"),Xr("onUp"),Xr("onDown"),Xr("onEscape"),me("stopSpaceKeyup",!1),Nn("focusIn")],KM=(t,s,a)=>[Kt(ln(ls),a.onSpace),Kt(Ho([Va,ln(Hn)]),a.onEnter),Kt(Ho([El,ln(Hn)]),a.onShiftEnter),Kt(Ho([El,ln(jn)]),a.onShiftTab),Kt(Ho([Va,ln(jn)]),a.onTab),Kt(ln(wd),a.onUp),Kt(ln(In),a.onDown),Kt(ln(_l),a.onLeft),Kt(ln(Sd),a.onRight),Kt(ln(ls),a.onSpace)],dO=(t,s,a)=>[...a.stopSpaceKeyup?[Kt(ln(ls),pp)]:[],Kt(ln(Ks),a.onEscape)];var fO=mu(s7,$r.init,KM,dO,t=>t.focusIn);const r7=hp.schema(),Eg=RL.schema(),YM=WL.schema(),XM=HL.schema(),a7=QL.schema(),c7=wM.schema(),T2=o7.schema(),k2=fO.schema();var JM=Object.freeze({__proto__:null,acyclic:r7,cyclic:Eg,flow:YM,flatgrid:XM,matrix:a7,execution:c7,menu:T2,special:k2});const QM=t=>yc(t,"setGridSize"),yt=rS({branchKey:"mode",branches:JM,name:"keying",active:{events:(t,s)=>t.handler.toEvents(t,s)},apis:{focusIn:(t,s,a)=>{s.sendFocusIn(s).fold(()=>{t.getSystem().triggerFocus(t.element,t.element)},i=>{i(t,s,a)})},setGridSize:(t,s,a,i,d)=>{QM(a)?a.setGridSize(i,d):console.error("Layout does not support setGridSize")}},state:ML}),Wf=(t,s)=>{id(()=>{hg(t,s,()=>De(s,t.getSystem().build))},t.element)},eP=(t,s)=>{id(()=>{Qy(t,s,()=>Uh(t.element,s,t.getSystem().buildOrPatch))},t.element)},i7=(t,s,a,i)=>{Rb(s);const d=Oc(t.element,a,i,t.getSystem().buildOrPatch);Xy(t,d),t.syncComponents()},Yx=(t,s,a)=>{const i=t.getSystem().build(a);$f(t,i,s)},Zf=(t,s,a,i)=>{lu(s),Yx(t,(d,g)=>gr(d,g,a),i)},mO=(t,s,a,i)=>(s.reuseDom?eP:Wf)(t,i),l7=(t,s,a,i)=>{Yx(t,Sc,i)},tP=(t,s,a,i)=>{Yx(t,gv,i)},nP=(t,s,a,i)=>{const d=O2(t);Gt(d,h=>qn(i.element,h.element)).each(lu)},O2=(t,s)=>t.components(),Xx=(t,s,a,i,d)=>{const g=O2(t);return A.from(g[i]).map(h=>(d.fold(()=>lu(h),w=>{(s.reuseDom?i7:Zf)(t,h,i,w)}),h))};var d7=Object.freeze({__proto__:null,append:l7,prepend:tP,remove:nP,replaceAt:Xx,replaceBy:(t,s,a,i,d)=>{const g=O2(t);return vo(g,i).bind(h=>Xx(t,s,a,h,d))},set:mO,contents:O2});const Vt=Ws({fields:[cr("reuseDom",!0)],name:"replacing",apis:d7}),f7=(t,s)=>{const a=Bn(s);return Ws({fields:[ke("enabled")],name:t,active:{events:ae(a)}})},Jt=(t,s)=>{const a=f7(t,s);return{key:t,value:{config:{},me:a,configAsRaw:ae({}),initialConfig:{},state:$r}}},Jx=(t,s)=>{s.ignore||(rc(t.element),s.onFocus(t))};var m7=Object.freeze({__proto__:null,focus:Jx,blur:(t,s)=>{s.ignore||jh(t.element)},isFocused:t=>Gh(t.element)}),sP=Object.freeze({__proto__:null,exhibit:(t,s)=>{const a=s.ignore?{}:{attributes:{tabindex:"-1"}};return Ma(a)},events:t=>Bn([Te(Qc(),(s,a)=>{Jx(s,t),a.stop()})].concat(t.stopMousedown?[Te(oc(),(s,a)=>{a.event.prevent()})]:[]))}),rP=[vn("onFocus"),me("stopMousedown",!1),me("ignore",!1)];const It=Ws({fields:rP,name:"focusing",active:sP,apis:m7}),gO=t=>({init:()=>{const a=Et(t);return{get:()=>a.get(),set:w=>a.set(w),clear:()=>a.set(t),readState:()=>a.get()}}}),p7=(t,s,a)=>{const i=s.aria;i.update(t,i,a.get())},b7=(t,s,a)=>{s.toggleClass.each(i=>{a.get()?oo(t.element,i):Oo(t.element,i)})},A2=(t,s,a,i)=>{const d=a.get();a.set(i),b7(t,s,a),p7(t,s,a),d!==i&&s.onToggled(t,i)},aP=(t,s,a)=>{A2(t,s,a,!a.get())},cP=(t,s,a)=>{A2(t,s,a,!0)},v7=(t,s,a)=>{A2(t,s,a,!1)},y7=(t,s,a)=>a.get(),hO=(t,s,a)=>{A2(t,s,a,s.selected)};var R2=Object.freeze({__proto__:null,onLoad:hO,toggle:aP,isOn:y7,on:cP,off:v7,set:A2}),pO=Object.freeze({__proto__:null,exhibit:()=>Ma({}),events:(t,s)=>{const a=Mh(t,s,aP),i=Lv(t,s,hO);return Bn(Xt([t.toggleOnExecute?[a]:[],[i]]))}});const iP=(t,s,a)=>{ct(t.element,"aria-pressed",a),s.syncWithExpanded&&uP(t,s,a)},lP=(t,s,a)=>{ct(t.element,"aria-selected",a)},C7=(t,s,a)=>{ct(t.element,"aria-checked",a)},uP=(t,s,a)=>{ct(t.element,"aria-expanded",a)};var dP=[me("selected",!1),Nn("toggleClass"),me("toggleOnExecute",!0),vn("onToggled"),lo("aria",{mode:"none"},Ra("mode",{pressed:[me("syncWithExpanded",!1),so("update",iP)],checked:[so("update",C7)],expanded:[so("update",uP)],selected:[so("update",lP)],none:[so("update",ee)]}))];const on=Ws({fields:dP,name:"toggling",active:pO,apis:R2,state:gO(!1)}),bO=()=>{const t=(s,a)=>{a.stop(),Ku(s)};return[Te(mf(),t),Te(A1(),t),Mi(ul()),Mi(oc())]},e_=t=>{const s=a=>ni((i,d)=>{a(i),d.stop()});return Bn(Xt([t.map(s).toArray(),bO()]))},fP="alloy.item-hover",vO="alloy.item-focus",D2="alloy.item-toggled",t_=t=>{(Qr(t.element).isNone()||It.isFocused(t))&&(It.isFocused(t)||It.focus(t),vt(t,fP,{item:t}))},n_=t=>{vt(t,vO,{item:t})},w7=(t,s)=>{vt(t,D2,{item:t,state:s})},mP=ae(fP),S7=ae(vO),x7=ae(D2),gP=t=>t.toggling.map(s=>s.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),hP=t=>({aria:{mode:"checked"},...jd(t,(s,a)=>a!=="exclusive"),onToggled:(s,a)=>{Ne(t.onToggled)&&t.onToggled(s,a),w7(s,a)}}),_7=t=>({dom:t.dom,domModification:{...t.domModification,attributes:{role:gP(t),...t.domModification.attributes,"aria-haspopup":t.hasSubmenu,...t.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:Rc.augment(t.itemBehaviours,[t.toggling.fold(on.revoke,s=>on.config(hP(s))),It.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:s=>{n_(s)}}),yt.config({mode:"execution"}),it.config({store:{mode:"memory",initialValue:t.data}}),Jt("item-type-events",[...bO(),Te(dl(),t_),Te(Sh(),It.focus)])]),components:t.components,eventOrder:t.eventOrder}),E7=[ke("data"),ke("components"),ke("dom"),me("hasSubmenu",!1),Nn("toggling"),Rc.field("itemBehaviours",[on,It,yt,it]),me("ignoreFocus",!1),me("domModification",{}),so("builder",_7),me("eventOrder",{})],T7=t=>({dom:t.dom,components:t.components,events:Bn([Iv(Sh())])}),k7=[ke("dom"),ke("components"),so("builder",T7)],yO=ae("item-widget"),CO=ae([lr({name:"widget",overrides:t=>({behaviours:Fe([it.config({store:{mode:"manual",getValue:s=>t.data,setValue:ee}})])})})]),pP=t=>{const s=jb(yO(),t,CO()),a=m2(yO(),t,s.internals()),i=g=>He(g,t,"widget").map(h=>(yt.focusIn(h),h)),d=(g,h)=>Sg(h.event.target)?A.none():(t.autofocus&&h.setSource(g.element),A.none());return{dom:t.dom,components:a,domModification:t.domModification,events:Bn([ni((g,h)=>{i(g).each(w=>{h.stop()})}),Te(dl(),t_),Te(Sh(),(g,h)=>{t.autofocus?i(g):It.focus(g)})]),behaviours:Rc.augment(t.widgetBehaviours,[it.config({store:{mode:"memory",initialValue:t.data}}),It.config({ignore:t.ignoreFocus,onFocus:g=>{n_(g)}}),yt.config({mode:"special",focusIn:t.autofocus?g=>{i(g)}:ao(),onLeft:d,onRight:d,onEscape:(g,h)=>!It.isFocused(g)&&!t.autofocus?(It.focus(g),A.some(!0)):(t.autofocus&&h.setSource(g.element),A.none())})])}},O7=[ke("uid"),ke("data"),ke("components"),ke("dom"),me("autofocus",!1),me("ignoreFocus",!1),Rc.field("widgetBehaviours",[it,It,yt]),me("domModification",{}),dp(CO()),so("builder",pP)],A7=Ra("type",{widget:O7,item:E7,separator:k7}),R7=(t,s)=>({mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:s.initSize.numColumns,numRows:s.initSize.numRows},focusManager:t.focusManager}),D7=(t,s)=>({mode:"matrix",selectors:{row:s.rowSelector,cell:"."+t.markers.item},previousSelector:s.previousSelector,focusManager:t.focusManager}),M7=(t,s)=>({mode:"menu",selector:"."+t.markers.item,moveOnTab:s.moveOnTab,focusManager:t.focusManager}),bp=ae([Wb({factory:{sketch:t=>{const s=Me("menu.spec item",A7,t);return s.builder(s)}},name:"items",unit:"item",defaults:(t,s)=>Ln(s,"uid")?s:{...s,uid:xf("item")},overrides:(t,s)=>({type:s.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}})})]),P7=ae([ke("value"),ke("items"),ke("dom"),ke("components"),me("eventOrder",{}),Bs("menuBehaviours",[Je,it,yn,yt]),lo("movement",{mode:"menu",moveOnTab:!0},Ra("mode",{grid:[W1(),so("config",R7)],matrix:[so("config",D7),ke("rowSelector"),me("previousSelector",A.none)],menu:[me("moveOnTab",!0),so("config",M7)]})),Tk(),me("fakeFocus",!1),me("focusManager",Kb()),vn("onHighlight"),vn("onDehighlight"),me("menuRole",!0)]),bP=ae("alloy.menu-focus"),vp=(t,s)=>{const a=xr(t.element,'[role="menuitemradio"][aria-checked="true"]');dt(a,i=>{qn(i,s.element)||t.getSystem().getByDom(i).each(d=>{on.off(d)})})},vP=(t,s,a,i)=>({uid:t.uid,dom:t.dom,markers:t.markers,behaviours:$s(t.menuBehaviours,[Je.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight,onDehighlight:t.onDehighlight}),it.config({store:{mode:"memory",initialValue:t.value}}),yn.config({find:A.some}),yt.config(t.movement.config(t,t.movement))]),events:Bn([Te(S7(),(d,g)=>{const h=g.event;d.getSystem().getByDom(h.target).each(w=>{Je.highlight(d,w),g.stop(),vt(d,bP(),{menu:d,item:w})})}),Te(mP(),(d,g)=>{const h=g.event.item;Je.highlight(d,h)}),Te(x7(),(d,g)=>{const{item:h,state:w}=g.event;w&&Fo(h.element,"role")==="menuitemradio"&&vp(d,h)})]),components:s,eventOrder:t.eventOrder,...t.menuRole?{domModification:{attributes:{role:"menu"}}}:{}}),yp=Vr({name:"Menu",configFields:P7(),partFields:bp(),factory:vP}),Tg=t=>um(t,(s,a)=>({k:s,v:a})),yP=(t,s,a,i)=>lt(a,i).bind(d=>lt(t,d).bind(g=>{const h=yP(t,s,a,g);return A.some([g].concat(h))})).getOr([]),N7=(t,s)=>{const a={};As(t,(h,w)=>{dt(h,x=>{a[x]=w})});const i=s,d=Tg(s),g=Io(d,(h,w)=>[w].concat(yP(a,i,d,w)));return Io(a,h=>lt(g,h).getOr([h]))},zi=()=>{const t=Et({}),s=Et({}),a=Et({}),i=Mn(),d=Et({}),g=()=>{t.set({}),s.set({}),a.set({}),i.clear()},h=()=>i.get().isNone(),w=(Se,Le)=>{s.set({...s.get(),[Se]:{type:"prepared",menu:Le}})},x=(Se,Le,Ie,xe)=>{i.set(Se),t.set(Ie),s.set(Le),d.set(xe);const Ht=N7(xe,Ie);a.set(Ht)},T=Se=>Wr(t.get(),(Le,Ie)=>Le===Se),R=(Se,Le,Ie)=>Y(Se).bind(xe=>T(Se).bind(Ht=>Le(Ht).map(mt=>({triggeredMenu:xe,triggeringItem:mt,triggeringPath:Ie})))),N=(Se,Le)=>{const Ie=fo(te(Se).toArray(),xe=>Y(xe).isSome());return lt(a.get(),Se).bind(xe=>{const Ht=Rr(Ie.concat(xe)),mt=we(Ht,(Ot,_t)=>R(Ot,Le,Ht.slice(0,_t+1)).fold(()=>Ga(i.get(),Ot)?[]:[A.none()],Rn=>[A.some(Rn)]));return _o(mt)})},I=Se=>lt(t.get(),Se).map(Le=>{const Ie=lt(a.get(),Se).getOr([]);return[Le].concat(Ie)}),z=Se=>lt(a.get(),Se).bind(Le=>Le.length>1?A.some(Le.slice(1)):A.none()),V=Se=>lt(a.get(),Se),Y=Se=>de(Se).bind(wO),de=Se=>lt(s.get(),Se),te=Se=>lt(t.get(),Se);return{setMenuBuilt:w,setContents:x,expand:I,refresh:V,collapse:z,lookupMenu:de,lookupItem:te,otherMenus:Se=>{const Le=d.get();return Mt($o(Le),Se)},getPrimary:()=>i.get().bind(Y),getMenus:()=>s.get(),clear:g,isClear:h,getTriggeringPath:N}},wO=t=>t.type==="prepared"?A.some(t.menu):A.none(),SO={init:zi,extractPreparedMenu:wO},xO=ut("tiered-menu-item-highlight"),CP=ut("tiered-menu-item-dehighlight");var ra;(function(t){t[t.HighlightMenuAndItem=0]="HighlightMenuAndItem",t[t.HighlightJustMenu=1]="HighlightJustMenu",t[t.HighlightNone=2]="HighlightNone"})(ra||(ra={}));const B7=(t,s)=>{const a=Mn(),i=(Ze,ht,Yt)=>Io(Yt,(Dt,Tt)=>{const Wt=()=>yp.sketch({...Dt,value:Tt,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:(Qn,Dn)=>{vt(Qn,xO,{menuComp:Qn,itemComp:Dn})},onDehighlight:(Qn,Dn)=>{vt(Qn,CP,{menuComp:Qn,itemComp:Dn})},focusManager:t.fakeFocus?Wx():Kb()});return Tt===ht?{type:"prepared",menu:Ze.getSystem().build(Wt())}:{type:"notbuilt",nbMenu:Wt}}),d=SO.init(),g=Ze=>{const ht=i(Ze,t.data.primary,t.data.menus),Yt=x();return d.setContents(t.data.primary,ht,t.data.expansions,Yt),d.getPrimary()},h=Ze=>it.getValue(Ze).value,w=(Ze,ht,Yt)=>ur(ht,Dt=>{if(!Dt.getSystem().isConnected())return A.none();const Tt=Je.getCandidates(Dt);return Gt(Tt,Wt=>h(Wt)===Yt)}),x=Ze=>Io(t.data.menus,(ht,Yt)=>we(ht.items,Dt=>Dt.type==="separator"?[]:[Dt.data.value])),T=Je.highlight,R=(Ze,ht)=>{T(Ze,ht),Je.getHighlighted(ht).orThunk(()=>Je.getFirst(ht)).each(Yt=>{t.fakeFocus?Je.highlight(ht,Yt):Oh(Ze,Yt.element,Sh())})},N=(Ze,ht)=>Gd(De(ht,Yt=>Ze.lookupMenu(Yt).bind(Dt=>Dt.type==="prepared"?A.some(Dt.menu):A.none()))),I=(Ze,ht,Yt)=>{const Dt=N(ht,ht.otherMenus(Yt));dt(Dt,Tt=>{Ba(Tt.element,[t.markers.backgroundMenu]),t.stayInDom||Vt.remove(Ze,Tt)})},z=Ze=>a.get().getOrThunk(()=>{const ht={},Yt=xr(Ze.element,`.${t.markers.item}`),Dt=fo(Yt,Tt=>Fo(Tt,"aria-haspopup")==="true");return dt(Dt,Tt=>{Ze.getSystem().getByDom(Tt).each(Wt=>{const Qn=h(Wt);ht[Qn]=Wt})}),a.set(ht),ht}),V=(Ze,ht)=>{const Yt=z(Ze);As(Yt,(Dt,Tt)=>{const Wt=Uo(ht,Tt);ct(Dt.element,"aria-expanded",Wt)})},Y=(Ze,ht,Yt)=>A.from(Yt[0]).bind(Dt=>ht.lookupMenu(Dt).bind(Tt=>{if(Tt.type==="notbuilt")return A.none();{const Wt=Tt.menu,Qn=N(ht,Yt.slice(1));return dt(Qn,Dn=>{oo(Dn.element,t.markers.backgroundMenu)}),Hs(Wt.element)||Vt.append(Ze,Fr(Wt)),Ba(Wt.element,[t.markers.backgroundMenu]),R(Ze,Wt),I(Ze,ht,Yt),A.some(Wt)}}));let de;(function(Ze){Ze[Ze.HighlightSubmenu=0]="HighlightSubmenu",Ze[Ze.HighlightParent=1]="HighlightParent"})(de||(de={}));const te=(Ze,ht,Yt)=>{if(Yt.type==="notbuilt"){const Dt=Ze.getSystem().build(Yt.nbMenu());return d.setMenuBuilt(ht,Dt),Dt}else return Yt.menu},ie=(Ze,ht,Yt=de.HighlightSubmenu)=>{if(ht.hasConfigured(Pt)&&Pt.isDisabled(ht))return A.some(ht);{const Dt=h(ht);return d.expand(Dt).bind(Tt=>(V(Ze,Tt),A.from(Tt[0]).bind(Wt=>d.lookupMenu(Wt).bind(Qn=>{const Dn=te(Ze,Wt,Qn);return Hs(Dn.element)||Vt.append(Ze,Fr(Dn)),t.onOpenSubmenu(Ze,ht,Dn,Rr(Tt)),Yt===de.HighlightSubmenu?(Je.highlightFirst(Dn),Y(Ze,d,Tt)):(Je.dehighlightAll(Dn),A.some(ht))}))))}},ce=(Ze,ht)=>{const Yt=h(ht);return d.collapse(Yt).bind(Dt=>(V(Ze,Dt),Y(Ze,d,Dt).map(Tt=>(t.onCollapseMenu(Ze,ht,Tt),Tt))))},_e=(Ze,ht)=>{const Yt=h(ht);return d.refresh(Yt).bind(Dt=>(V(Ze,Dt),Y(Ze,d,Dt)))},Se=(Ze,ht)=>Sg(ht.element)?A.none():ie(Ze,ht,de.HighlightSubmenu),Le=(Ze,ht)=>Sg(ht.element)?A.none():ce(Ze,ht),Ie=(Ze,ht)=>ce(Ze,ht).orThunk(()=>t.onEscape(Ze,ht).map(()=>Ze)),xe=Ze=>(ht,Yt)=>Fi(Yt.getSource(),`.${t.markers.item}`).bind(Dt=>ht.getSystem().getByDom(Dt).toOptional().bind(Tt=>Ze(ht,Tt).map(Bt))),Ht=Bn([Te(bP(),(Ze,ht)=>{const Yt=ht.event.item;d.lookupItem(h(Yt)).each(()=>{const Dt=ht.event.menu;Je.highlight(Ze,Dt);const Tt=h(ht.event.item);d.refresh(Tt).each(Wt=>I(Ze,d,Wt))})}),ni((Ze,ht)=>{const Yt=ht.event.target;Ze.getSystem().getByDom(Yt).each(Dt=>{h(Dt).indexOf("collapse-item")===0&&ce(Ze,Dt),ie(Ze,Dt,de.HighlightSubmenu).fold(()=>{t.onExecute(Ze,Dt)},ee)})}),po((Ze,ht)=>{g(Ze).each(Yt=>{Vt.append(Ze,Fr(Yt)),t.onOpenMenu(Ze,Yt),t.highlightOnOpen===ra.HighlightMenuAndItem?R(Ze,Yt):t.highlightOnOpen===ra.HighlightJustMenu&&T(Ze,Yt)})}),Te(xO,(Ze,ht)=>{t.onHighlightItem(Ze,ht.event.menuComp,ht.event.itemComp)}),Te(CP,(Ze,ht)=>{t.onDehighlightItem(Ze,ht.event.menuComp,ht.event.itemComp)}),...t.navigateOnHover?[Te(mP(),(Ze,ht)=>{const Yt=ht.event.item;_e(Ze,Yt),ie(Ze,Yt,de.HighlightParent),t.onHover(Ze,Yt)})]:[]]),mt=Ze=>Je.getHighlighted(Ze).bind(Je.getHighlighted),Ot=Ze=>{mt(Ze).each(ht=>{ce(Ze,ht)})},_t=Ze=>{d.getPrimary().each(ht=>{R(Ze,ht)})},Rn=Ze=>A.from(Ze.components()[0]).filter(ht=>Fo(ht.element,"role")==="menu"),cn={collapseMenu:Ot,highlightPrimary:_t,repositionMenus:Ze=>{d.getPrimary().bind(Yt=>mt(Ze).bind(Dt=>{const Tt=h(Dt),Wt=tv(d.getMenus()),Qn=Gd(De(Wt,SO.extractPreparedMenu));return d.getTriggeringPath(Tt,Dn=>w(Ze,Qn,Dn))}).map(Dt=>({primary:Yt,triggeringPath:Dt}))).fold(()=>{Rn(Ze).each(Yt=>{t.onRepositionMenu(Ze,Yt,[])})},({primary:Yt,triggeringPath:Dt})=>{t.onRepositionMenu(Ze,Yt,Dt)})}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:$s(t.tmenuBehaviours,[yt.config({mode:"special",onRight:xe(Se),onLeft:xe(Le),onEscape:xe(Ie),focusIn:(Ze,ht)=>{d.getPrimary().each(Yt=>{Oh(Ze,Yt.element,Sh())})}}),Je.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),yn.config({find:Ze=>Je.getHighlighted(Ze)}),Vt.config({})]),eventOrder:t.eventOrder,apis:cn,events:Ht}},$7=ae("collapse-item"),I7=(t,s,a)=>({primary:t,menus:s,expansions:a}),o_=(t,s)=>({primary:t,menus:Mm(t,s),expansions:{}}),_O=t=>({value:ut($7()),meta:{text:t}}),kg=pa({name:"TieredMenu",configFields:[nu("onExecute"),nu("onEscape"),kc("onOpenMenu"),kc("onOpenSubmenu"),vn("onRepositionMenu"),vn("onCollapseMenu"),me("highlightOnOpen",ra.HighlightMenuAndItem),Vu("data",[ke("primary"),ke("menus"),ke("expansions")]),me("fakeFocus",!1),vn("onHighlightItem"),vn("onDehighlightItem"),vn("onHover"),Sf(),ke("dom"),me("navigateOnHover",!0),me("stayInDom",!1),Bs("tmenuBehaviours",[yt,Je,yn,Vt]),me("eventOrder",{})],apis:{collapseMenu:(t,s)=>{t.collapseMenu(s)},highlightPrimary:(t,s)=>{t.highlightPrimary(s)},repositionMenus:(t,s)=>{t.repositionMenus(s)}},factory:B7,extraApis:{tieredData:I7,singleData:o_,collapseItem:_O}}),wP=(t,s,a,i,d)=>{const g=()=>t.lazySink(s),h=i.type==="horizontal"?{layouts:{onLtr:()=>rb(),onRtl:()=>Ef()}}:{},w=T=>T.length===2,x=T=>w(T)?h:{};return kg.sketch({dom:{tag:"div"},data:i.data,markers:i.menu.markers,highlightOnOpen:i.menu.highlightOnOpen,fakeFocus:i.menu.fakeFocus,onEscape:()=>(wn.close(s),t.onEscape.map(T=>T(s)),A.some(!0)),onExecute:()=>A.some(!0),onOpenMenu:(T,R)=>{qs.positionWithinBounds(g().getOrDie(),R,a,d())},onOpenSubmenu:(T,R,N,I)=>{const z=g().getOrDie();qs.position(z,N,{anchor:{type:"submenu",item:R,...x(I)}})},onRepositionMenu:(T,R,N)=>{const I=g().getOrDie();qs.positionWithinBounds(I,R,a,d()),dt(N,z=>{const V=x(z.triggeringPath);qs.position(I,z.triggeredMenu,{anchor:{type:"submenu",item:z.triggeringItem,...V}})})}})},SP=(t,s)=>{const a=(I,z)=>t.getRelated(I).exists(Y=>od(Y,z)),i=(I,z)=>{wn.setContent(I,z)},d=(I,z,V)=>{const Y=A.none;g(I,z,V,Y)},g=(I,z,V,Y)=>{const de=t.lazySink(I).getOrDie();wn.openWhileCloaked(I,z,()=>qs.positionWithinBounds(de,I,V,Y())),it.setValue(I,A.some({mode:"position",config:V,getBounds:Y}))},h=(I,z,V)=>{w(I,z,V,A.none)},w=(I,z,V,Y)=>{const de=wP(t,I,z,V,Y);wn.open(I,de),it.setValue(I,A.some({mode:"menu",menu:de}))},x=I=>{wn.isOpen(I)&&(it.setValue(I,A.none()),wn.close(I))},T=I=>wn.getState(I),R=I=>{wn.isOpen(I)&&it.getValue(I).each(z=>{switch(z.mode){case"menu":wn.getState(I).each(kg.repositionMenus);break;case"position":const V=t.lazySink(I).getOrDie();qs.positionWithinBounds(V,I,z.config,z.getBounds());break}})},N={setContent:i,showAt:d,showWithinBounds:g,showMenuAt:h,showMenuWithinBounds:w,hide:x,getContent:T,reposition:R,isOpen:wn.isOpen};return{uid:t.uid,dom:t.dom,behaviours:$s(t.inlineBehaviours,[wn.config({isPartOf:(I,z,V)=>od(z,V)||a(I,V),getAttachPoint:I=>t.lazySink(I).getOrDie(),onOpen:I=>{t.onShow(I)},onClose:I=>{t.onHide(I)}}),it.config({store:{mode:"memory",initialValue:A.none()}}),ha.config({channels:{...uu({isExtraPart:s.isExtraPart,...t.fireDismissalEventInstead.map(I=>({fireEventInstead:{event:I.event}})).getOr({})}),...Pb({...t.fireRepositionEventInstead.map(I=>({fireEventInstead:{event:I.event}})).getOr({}),doReposition:R})}})]),eventOrder:t.eventOrder,apis:N}},Ao=pa({name:"InlineView",configFields:[ke("lazySink"),vn("onShow"),vn("onHide"),zu("onEscape"),Bs("inlineBehaviours",[wn,it,ha]),ps("fireDismissalEventInstead",[me("event",Ql())]),ps("fireRepositionEventInstead",[me("event",Bv())]),me("getRelated",A.none),me("isExtraPart",eo),me("eventOrder",A.none)],factory:SP,apis:{showAt:(t,s,a,i)=>{t.showAt(s,a,i)},showWithinBounds:(t,s,a,i,d)=>{t.showWithinBounds(s,a,i,d)},showMenuAt:(t,s,a,i)=>{t.showMenuAt(s,a,i)},showMenuWithinBounds:(t,s,a,i,d)=>{t.showMenuWithinBounds(s,a,i,d)},hide:(t,s)=>{t.hide(s)},isOpen:(t,s)=>t.isOpen(s),getContent:(t,s)=>t.getContent(s),setContent:(t,s,a)=>{t.setContent(s,a)},reposition:(t,s)=>{t.reposition(s)}}});var Qb=tinymce.util.Tools.resolve("tinymce.util.Delay"),Cp=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),F7=tinymce.util.Tools.resolve("tinymce.EditorManager"),e0=tinymce.util.Tools.resolve("tinymce.Env"),Ui;(function(t){t.default="wrap",t.floating="floating",t.sliding="sliding",t.scrolling="scrolling"})(Ui||(Ui={}));var wp;(function(t){t.auto="auto",t.top="top",t.bottom="bottom"})(wp||(wp={}));const to=t=>s=>s.options.get(t),jf=t=>s=>A.from(t(s)),M2=t=>{const s=e0.deviceType.isPhone(),a=e0.deviceType.isTablet()||s,i=t.options.register,d=h=>J(h)||h===!1,g=h=>J(h)||fn(h);i("skin",{processor:h=>J(h)||h===!1,default:"oxide"}),i("skin_url",{processor:"string"}),i("height",{processor:g,default:Math.max(t.getElement().offsetHeight,400)}),i("width",{processor:g,default:Cp.DOM.getStyle(t.getElement(),"width")}),i("min_height",{processor:"number",default:100}),i("min_width",{processor:"number"}),i("max_height",{processor:"number"}),i("max_width",{processor:"number"}),i("style_formats",{processor:"object[]"}),i("style_formats_merge",{processor:"boolean",default:!1}),i("style_formats_autohide",{processor:"boolean",default:!1}),i("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),i("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),i("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),i("font_size_input_default_unit",{processor:"string",default:"pt"}),i("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),i("content_langs",{processor:"object[]"}),i("removed_menuitems",{processor:"string",default:""}),i("menubar",{processor:h=>J(h)||en(h),default:!s}),i("menu",{processor:"object",default:{}}),i("toolbar",{processor:h=>en(h)||J(h)||qe(h)?{value:h,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),os(9,h=>{i("toolbar"+(h+1),{processor:"string"})}),i("toolbar_mode",{processor:"string",default:a?"scrolling":"floating"}),i("toolbar_groups",{processor:"object",default:{}}),i("toolbar_location",{processor:"string",default:wp.auto}),i("toolbar_persist",{processor:"boolean",default:!1}),i("toolbar_sticky",{processor:"boolean",default:t.inline}),i("toolbar_sticky_offset",{processor:"number",default:0}),i("fixed_toolbar_container",{processor:"string",default:""}),i("fixed_toolbar_container_target",{processor:"object"}),i("ui_mode",{processor:"string",default:"combined"}),i("file_picker_callback",{processor:"function"}),i("file_picker_validator_handler",{processor:"function"}),i("file_picker_types",{processor:"string"}),i("typeahead_urls",{processor:"boolean",default:!0}),i("anchor_top",{processor:d,default:"#top"}),i("anchor_bottom",{processor:d,default:"#bottom"}),i("draggable_modal",{processor:"boolean",default:!1}),i("statusbar",{processor:"boolean",default:!0}),i("elementpath",{processor:"boolean",default:!0}),i("branding",{processor:"boolean",default:!0}),i("promotion",{processor:"boolean",default:!0}),i("resize",{processor:h=>h==="both"||en(h),default:!e0.deviceType.isTouch()}),i("sidebar_show",{processor:"string"}),i("help_accessibility",{processor:"boolean",default:t.hasPlugin("help")}),i("default_font_stack",{processor:"string[]",default:[]})},EO=to("readonly"),s_=to("height"),TO=to("width"),kO=jf(to("min_width")),OO=jf(to("min_height")),r_=jf(to("max_width")),P2=jf(to("max_height")),AO=jf(to("style_formats")),RO=to("style_formats_merge"),a_=to("style_formats_autohide"),xP=to("content_langs"),DO=to("removed_menuitems"),t0=to("toolbar_mode"),_P=to("toolbar_groups"),MO=to("toolbar_location"),EP=to("fixed_toolbar_container"),L7=to("fixed_toolbar_container_target"),TP=to("toolbar_persist"),c_=to("toolbar_sticky_offset"),PO=to("menubar"),N2=to("toolbar"),kP=to("file_picker_callback"),i_=to("file_picker_validator_handler"),OP=to("font_size_input_default_unit"),AP=to("file_picker_types"),RP=to("typeahead_urls"),DP=to("anchor_top"),MP=to("anchor_bottom"),NO=to("draggable_modal"),l_=to("statusbar"),PP=to("elementpath"),n0=to("branding"),NP=to("resize"),BP=to("paste_as_text"),$P=to("sidebar_show"),IP=to("promotion"),FP=to("help_accessibility"),LP=to("default_font_stack"),u_=t=>t.options.get("skin")===!1,d_=t=>t.options.get("menubar")!==!1,BO=t=>{const s=t.options.get("skin_url");if(u_(t))return s;if(s)return t.documentBaseURI.toAbsolute(s);{const a=t.options.get("skin");return F7.baseURL+"/skins/ui/"+a}},o0=t=>A.from(t.options.get("skin_url")),Og=t=>t.options.get("line_height_formats").split(" "),f_=t=>{const s=N2(t),a=J(s),i=qe(s)&&s.length>0;return!Sp(t)&&(i||a||s===!0)},$O=t=>{const s=os(9,i=>t.options.get("toolbar"+(i+1))),a=fo(s,J);return Ft(a.length>0,a)},Sp=t=>$O(t).fold(()=>{const s=N2(t);return Gn(s,J)&&s.length>0},Bt),m_=t=>MO(t)===wp.bottom,HP=t=>{var s;if(!t.inline)return A.none();const a=(s=EP(t))!==null&&s!==void 0?s:"";if(a.length>0)return $n(Zr(),a);const i=L7(t);return Rt(i)?A.some(le.fromDom(i)):A.none()},s0=t=>t.inline&&HP(t).isSome(),g_=t=>HP(t).getOrThunk(()=>Zc(Eo(le.fromDom(t.getElement())))),IO=t=>t.inline&&!d_(t)&&!f_(t)&&!Sp(t),xp=t=>(t.options.get("toolbar_sticky")||t.inline)&&!s0(t)&&!IO(t),Gf=t=>!s0(t)&&t.options.get("ui_mode")==="split",h_=t=>{const s=t.options.get("menu");return Io(s,a=>({...a,items:a.items}))};var H7=Object.freeze({__proto__:null,get ToolbarMode(){return Ui},get ToolbarLocation(){return wp},register:M2,getSkinUrl:BO,getSkinUrlOption:o0,isReadOnly:EO,isSkinDisabled:u_,getHeightOption:s_,getWidthOption:TO,getMinWidthOption:kO,getMinHeightOption:OO,getMaxWidthOption:r_,getMaxHeightOption:P2,getUserStyleFormats:AO,shouldMergeStyleFormats:RO,shouldAutoHideStyleFormats:a_,getLineHeightFormats:Og,getContentLanguages:xP,getRemovedMenuItems:DO,isMenubarEnabled:d_,isMultipleToolbars:Sp,isToolbarEnabled:f_,isToolbarPersist:TP,getMultipleToolbarsOption:$O,getUiContainer:g_,useFixedContainer:s0,isSplitUiMode:Gf,getToolbarMode:t0,isDraggableModal:NO,isDistractionFree:IO,isStickyToolbar:xp,getStickyToolbarOffset:c_,getToolbarLocation:MO,isToolbarLocationBottom:m_,getToolbarGroups:_P,getMenus:h_,getMenubar:PO,getToolbar:N2,getFilePickerCallback:kP,getFilePickerTypes:AP,useTypeaheadUrls:RP,getAnchorTop:DP,getAnchorBottom:MP,getFilePickerValidatorHandler:i_,getFontSizeInputDefaultUnit:OP,useStatusBar:l_,useElementPath:PP,promotionEnabled:IP,useBranding:n0,getResize:NP,getPasteAsText:BP,getSidebarShow:$P,useHelpAccessibility:FP,getDefaultFontStack:LP});const VP=["visible","hidden","clip"],zP=t=>Hl(t).length>0&&!Uo(VP,t),r0=t=>{if(gm(t)){const s=jo(t,"overflow-x"),a=jo(t,"overflow-y");return zP(s)||zP(a)}else return!1},V7=t=>{const s=fg(t,r0),a=s.length===0?lv(t).map(wi).map(i=>fg(i,r0)).getOr([]):s;return xa(a).map(i=>({element:i,others:a.slice(1)}))},Ag=(t,s)=>Gf(t)?V7(s):A.none(),qf=t=>{const s=[...De(t.others,Mo),Br()];return ok(Mo(t.element),s)},_r=pa({name:"Button",factory:t=>{const s=e_(t.action),a=t.dom.tag,i=g=>lt(t.dom,"attributes").bind(h=>lt(h,g)),d=()=>{if(a==="button"){const g=i("type").getOr("button"),h=i("role").map(w=>({role:w})).getOr({});return{type:g,...h}}else return{role:t.role.getOr(i("role").getOr("button"))}};return{uid:t.uid,dom:t.dom,components:t.components,events:s,behaviours:Rc.augment(t.buttonBehaviours,[It.config({}),yt.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:d()},eventOrder:t.eventOrder}},configFields:[me("uid",void 0),ke("dom"),me("components",[]),Rc.field("buttonBehaviours",[It,yt]),Nn("action"),Nn("role"),me("eventOrder",{})]}),FO=t=>{const s=t.dom.attributes!==void 0?t.dom.attributes:[];return bo(s,(a,i)=>i.name==="class"?a:{...a,[i.name]:i.value},{})},z7=t=>Array.prototype.slice.call(t.dom.classList,0),Kf=t=>{const s=le.fromHtml(t),a=Wc(s),i=FO(s),d=z7(s),g=a.length===0?{}:{innerHtml:ga(s)};return{tag:zc(s),classes:d,attributes:i,...g}},Pn=t=>{const s=F4(t)&&yc(t,"uid")?t.uid:xf("memento");return{get:g=>g.getSystem().getByUid(s).getOrDie(),getOpt:g=>g.getSystem().getByUid(s).toOptional(),asSpec:()=>({...t,uid:s})}};var U7=Object.freeze({__proto__:null,exhibit:(t,s)=>Ma({attributes:Uu([{key:s.tabAttr,value:"true"}])})}),W7=[me("tabAttr","data-alloy-tabstop")];const uo=Ws({fields:W7,name:"tabstopping",active:U7}),WP=ut("tooltip.exclusive"),B2=ut("tooltip.show"),$2=ut("tooltip.hide"),p_=ut("tooltip.immediateHide"),b_=ut("tooltip.immediateShow"),ZP=(t,s,a)=>{t.getSystem().broadcastOn([WP],{})};var Z7=Object.freeze({__proto__:null,hideAllExclusive:ZP,setComponents:(t,s,a,i)=>{a.getTooltip().each(d=>{d.getSystem().isConnected()&&Vt.set(d,i)})}}),j7=Object.freeze({__proto__:null,events:(t,s)=>{const a=h=>{s.getTooltip().each(w=>{w.getSystem().isConnected()&&(lu(w),t.onHide(h,w),s.clearTooltip())}),s.clearTimer()},i=h=>{if(!s.isShowing()){ZP(h);const w=t.lazySink(h).getOrDie(),x=h.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:Bn(t.mode==="normal"?[Te(dl(),T=>{un(h,B2)}),Te(Bm(),T=>{un(h,$2)})]:[]),behaviours:Fe([Vt.config({})])});s.setTooltip(x),Cl(w,x),t.onShow(h,x),qs.position(w,x,{anchor:t.anchor(h)})}},d=h=>{s.getTooltip().each(w=>{const x=t.lazySink(h).getOrDie();qs.position(x,w,{anchor:t.anchor(h)})})},g=()=>{switch(t.mode){case"normal":return[Te(Di(),h=>{un(h,b_)}),Te(Jl(),h=>{un(h,p_)}),Te(dl(),h=>{un(h,B2)}),Te(Bm(),h=>{un(h,$2)})];case"follow-highlight":return[Te(kh(),(h,w)=>{un(h,B2)}),Te($m(),h=>{un(h,$2)})];case"children-normal":return[Te(Di(),(h,w)=>{Qr(h.element).each(x=>{ua(w.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{un(h,b_)},T=>{s.isShowing()&&(t.onShow(h,T),d(h))})})}),Te(Jl(),h=>{Qr(h.element).fold(()=>{un(h,p_)},ee)}),Te(dl(),h=>{$n(h.element,"[data-mce-tooltip]:hover").each(w=>{s.getTooltip().fold(()=>{un(h,B2)},x=>{s.isShowing()&&(t.onShow(h,x),d(h))})})}),Te(Bm(),h=>{$n(h.element,"[data-mce-tooltip]:hover").fold(()=>{un(h,$2)},ee)})];default:return[Te(Di(),(h,w)=>{Qr(h.element).each(x=>{ua(w.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{un(h,b_)},T=>{s.isShowing()&&(t.onShow(h,T),d(h))})})}),Te(Jl(),h=>{Qr(h.element).fold(()=>{un(h,p_)},ee)})]}};return Bn(Xt([[Te(B2,h=>{s.resetTimer(()=>{i(h)},t.delayForShow())}),Te($2,h=>{s.resetTimer(()=>{a(h)},t.delayForHide())}),Te(b_,h=>{s.resetTimer(()=>{i(h)},0)}),Te(p_,h=>{s.resetTimer(()=>{a(h)},0)}),Te(ei(),(h,w)=>{const x=w;x.universal||Uo(x.channels,WP)&&a(h)}),gl(h=>{a(h)})],g()]))}}),G7=[ke("lazySink"),ke("tooltipDom"),me("exclusive",!0),me("tooltipComponents",[]),ko("delayForShow",ae(300)),ko("delayForHide",ae(300)),vr("mode","normal",["normal","follow-highlight","children-keyboard-focus","children-normal"]),me("anchor",t=>({type:"hotspot",hotspot:t,layouts:{onLtr:ae([is,Os,bs,vs,cs,Zn]),onRtl:ae([is,Os,bs,vs,cs,Zn])},bubble:si(0,-2,{})})),vn("onHide"),vn("onShow")],GP=Object.freeze({__proto__:null,init:()=>{const t=Mn(),s=Mn(),a=()=>{t.on(clearTimeout)},i=(g,h)=>{a(),t.set(setTimeout(g,h))},d=ae("not-implemented");return Pa({getTooltip:s.get,isShowing:s.isSet,setTooltip:s.set,clearTooltip:s.clear,clearTimer:a,resetTimer:i,readState:d})}});const Er=Ws({fields:G7,name:"tooltipping",active:j7,state:GP,apis:Z7}),{entries:qP,setPrototypeOf:KP,isFrozen:q7,getPrototypeOf:K7,getOwnPropertyDescriptor:Y7}=Object;let{freeze:Ua,seal:gu,create:X7}=Object,{apply:LO,construct:HO}=typeof Reflect<"u"&&Reflect;LO||(LO=function(s,a,i){return s.apply(a,i)}),Ua||(Ua=function(s){return s}),gu||(gu=function(s){return s}),HO||(HO=function(s,a){return new s(...a)});const J7=ci(Array.prototype.forEach),Q7=ci(Array.prototype.pop),I2=ci(Array.prototype.push),v_=ci(String.prototype.toLowerCase),VO=ci(String.prototype.toString),e8=ci(String.prototype.match),hu=ci(String.prototype.replace),t8=ci(String.prototype.indexOf),n8=ci(String.prototype.trim),fc=ci(RegExp.prototype.test),F2=o8(TypeError);function ci(t){return function(s){for(var a=arguments.length,i=new Array(a>1?a-1:0),d=1;d<a;d++)i[d-1]=arguments[d];return LO(t,s,i)}}function o8(t){return function(){for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return HO(t,a)}}function Kn(t,s,a){var i;a=(i=a)!==null&&i!==void 0?i:v_,KP&&KP(t,null);let d=s.length;for(;d--;){let g=s[d];if(typeof g=="string"){const h=a(g);h!==g&&(q7(s)||(s[d]=h),g=h)}t[g]=!0}return t}function a0(t){const s=X7(null);for(const[a,i]of qP(t))s[a]=i;return s}function L2(t,s){for(;t!==null;){const i=Y7(t,s);if(i){if(i.get)return ci(i.get);if(typeof i.value=="function")return ci(i.value)}t=K7(t)}function a(i){return console.warn("fallback value for",i),null}return a}const YP=Ua(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),H2=Ua(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),V2=Ua(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),XP=Ua(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),z2=Ua(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),y_=Ua(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),zO=Ua(["#text"]),pu=Ua(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),U2=Ua(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),JP=Ua(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),C_=Ua(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),s8=gu(/\{\{[\w\W]*|[\w\W]*\}\}/gm),r8=gu(/<%[\w\W]*|[\w\W]*%>/gm),W2=gu(/\${[\w\W]*}/gm),a8=gu(/^data-[\-\w.\u00B7-\uFFFF]/),QP=gu(/^aria-[\-\w]+$/),w_=gu(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),c8=gu(/^(?:\w+script|data):/i),UO=gu(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),S_=gu(/^html$/i);var eN=Object.freeze({__proto__:null,MUSTACHE_EXPR:s8,ERB_EXPR:r8,TMPLIT_EXPR:W2,DATA_ATTR:a8,ARIA_ATTR:QP,IS_ALLOWED_URI:w_,IS_SCRIPT_OR_DATA:c8,ATTR_WHITESPACE:UO,DOCTYPE_NAME:S_});const tN=()=>typeof window>"u"?null:window,nN=function(s,a){if(typeof s!="object"||typeof s.createPolicy!="function")return null;let i=null;const d="data-tt-policy-suffix";a&&a.hasAttribute(d)&&(i=a.getAttribute(d));const g="dompurify"+(i?"#"+i:"");try{return s.createPolicy(g,{createHTML(h){return h},createScriptURL(h){return h}})}catch{return console.warn("TrustedTypes policy "+g+" could not be created."),null}};function oN(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:tN();const s=pn=>oN(pn);if(s.version="3.0.5",s.removed=[],!t||!t.document||t.document.nodeType!==9)return s.isSupported=!1,s;const a=t.document,i=a.currentScript;let{document:d}=t;const{DocumentFragment:g,HTMLTemplateElement:h,Node:w,Element:x,NodeFilter:T,NamedNodeMap:R=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:N,DOMParser:I,trustedTypes:z}=t,V=x.prototype,Y=L2(V,"cloneNode"),de=L2(V,"nextSibling"),te=L2(V,"childNodes"),ie=L2(V,"parentNode");if(typeof h=="function"){const pn=d.createElement("template");pn.content&&pn.content.ownerDocument&&(d=pn.content.ownerDocument)}let ce,_e="";const{implementation:Se,createNodeIterator:Le,createDocumentFragment:Ie,getElementsByTagName:xe}=d,{importNode:Ht}=a;let mt={};s.isSupported=typeof qP=="function"&&typeof ie=="function"&&Se&&Se.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Ot,ERB_EXPR:_t,TMPLIT_EXPR:Rn,DATA_ATTR:Sn,ARIA_ATTR:cn,IS_SCRIPT_OR_DATA:Ze,ATTR_WHITESPACE:ht}=eN;let{IS_ALLOWED_URI:Yt}=eN,Dt=null;const Tt=Kn({},[...YP,...H2,...V2,...z2,...zO]);let Wt=null;const Qn=Kn({},[...pu,...U2,...JP,...C_]);let Dn=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ca=null,vi=null,ku=!0,Ur=!0,yi=!1,el=!0,hc=!1,Ld=!1,Jp=!1,LD=!1,q0=!1,MT=!1,J6=!1,ZK=!0,jK=!1;const dJ="user-content-";let MG=!0,HD=!1,PT={},NT=null;const GK=Kn({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let qK=null;const KK=Kn({},["audio","video","img","source","image","track"]);let PG=null;const YK=Kn({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Q6="http://www.w3.org/1998/Math/MathML",eL="http://www.w3.org/2000/svg",Qp="http://www.w3.org/1999/xhtml";let BT=Qp,NG=!1,BG=null;const fJ=Kn({},[Q6,eL,Qp],VO);let cw;const mJ=["application/xhtml+xml","text/html"],gJ="text/html";let pc,$T=null;const hJ=d.createElement("form"),XK=function(ve){return ve instanceof RegExp||ve instanceof Function},$G=function(ve){if(!($T&&$T===ve)){if((!ve||typeof ve!="object")&&(ve={}),ve=a0(ve),cw=mJ.indexOf(ve.PARSER_MEDIA_TYPE)===-1?cw=gJ:cw=ve.PARSER_MEDIA_TYPE,pc=cw==="application/xhtml+xml"?VO:v_,Dt="ALLOWED_TAGS"in ve?Kn({},ve.ALLOWED_TAGS,pc):Tt,Wt="ALLOWED_ATTR"in ve?Kn({},ve.ALLOWED_ATTR,pc):Qn,BG="ALLOWED_NAMESPACES"in ve?Kn({},ve.ALLOWED_NAMESPACES,VO):fJ,PG="ADD_URI_SAFE_ATTR"in ve?Kn(a0(YK),ve.ADD_URI_SAFE_ATTR,pc):YK,qK="ADD_DATA_URI_TAGS"in ve?Kn(a0(KK),ve.ADD_DATA_URI_TAGS,pc):KK,NT="FORBID_CONTENTS"in ve?Kn({},ve.FORBID_CONTENTS,pc):GK,ca="FORBID_TAGS"in ve?Kn({},ve.FORBID_TAGS,pc):{},vi="FORBID_ATTR"in ve?Kn({},ve.FORBID_ATTR,pc):{},PT="USE_PROFILES"in ve?ve.USE_PROFILES:!1,ku=ve.ALLOW_ARIA_ATTR!==!1,Ur=ve.ALLOW_DATA_ATTR!==!1,yi=ve.ALLOW_UNKNOWN_PROTOCOLS||!1,el=ve.ALLOW_SELF_CLOSE_IN_ATTR!==!1,hc=ve.SAFE_FOR_TEMPLATES||!1,Ld=ve.WHOLE_DOCUMENT||!1,q0=ve.RETURN_DOM||!1,MT=ve.RETURN_DOM_FRAGMENT||!1,J6=ve.RETURN_TRUSTED_TYPE||!1,LD=ve.FORCE_BODY||!1,ZK=ve.SANITIZE_DOM!==!1,jK=ve.SANITIZE_NAMED_PROPS||!1,MG=ve.KEEP_CONTENT!==!1,HD=ve.IN_PLACE||!1,Yt=ve.ALLOWED_URI_REGEXP||w_,BT=ve.NAMESPACE||Qp,Dn=ve.CUSTOM_ELEMENT_HANDLING||{},ve.CUSTOM_ELEMENT_HANDLING&&XK(ve.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Dn.tagNameCheck=ve.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ve.CUSTOM_ELEMENT_HANDLING&&XK(ve.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Dn.attributeNameCheck=ve.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ve.CUSTOM_ELEMENT_HANDLING&&typeof ve.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Dn.allowCustomizedBuiltInElements=ve.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),hc&&(Ur=!1),MT&&(q0=!0),PT&&(Dt=Kn({},[...zO]),Wt=[],PT.html===!0&&(Kn(Dt,YP),Kn(Wt,pu)),PT.svg===!0&&(Kn(Dt,H2),Kn(Wt,U2),Kn(Wt,C_)),PT.svgFilters===!0&&(Kn(Dt,V2),Kn(Wt,U2),Kn(Wt,C_)),PT.mathMl===!0&&(Kn(Dt,z2),Kn(Wt,JP),Kn(Wt,C_))),ve.ADD_TAGS&&(Dt===Tt&&(Dt=a0(Dt)),Kn(Dt,ve.ADD_TAGS,pc)),ve.ADD_ATTR&&(Wt===Qn&&(Wt=a0(Wt)),Kn(Wt,ve.ADD_ATTR,pc)),ve.ADD_URI_SAFE_ATTR&&Kn(PG,ve.ADD_URI_SAFE_ATTR,pc),ve.FORBID_CONTENTS&&(NT===GK&&(NT=a0(NT)),Kn(NT,ve.FORBID_CONTENTS,pc)),MG&&(Dt["#text"]=!0),Ld&&Kn(Dt,["html","head","body"]),Dt.table&&(Kn(Dt,["tbody"]),delete ca.tbody),ve.TRUSTED_TYPES_POLICY){if(typeof ve.TRUSTED_TYPES_POLICY.createHTML!="function")throw F2('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof ve.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw F2('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');ce=ve.TRUSTED_TYPES_POLICY,_e=ce.createHTML("")}else ce===void 0&&(ce=nN(z,i)),ce!==null&&typeof _e=="string"&&(_e=ce.createHTML(""));Ua&&Ua(ve),$T=ve}},JK=Kn({},["mi","mo","mn","ms","mtext"]),QK=Kn({},["foreignobject","desc","title","annotation-xml"]),pJ=Kn({},["title","style","font","a","script"]),tL=Kn({},H2);Kn(tL,V2),Kn(tL,XP);const IG=Kn({},z2);Kn(IG,y_);const bJ=function(ve){let St=ie(ve);(!St||!St.tagName)&&(St={namespaceURI:BT,tagName:"template"});const Ut=v_(ve.tagName),ws=v_(St.tagName);return BG[ve.namespaceURI]?ve.namespaceURI===eL?St.namespaceURI===Qp?Ut==="svg":St.namespaceURI===Q6?Ut==="svg"&&(ws==="annotation-xml"||JK[ws]):!!tL[Ut]:ve.namespaceURI===Q6?St.namespaceURI===Qp?Ut==="math":St.namespaceURI===eL?Ut==="math"&&QK[ws]:!!IG[Ut]:ve.namespaceURI===Qp?St.namespaceURI===eL&&!QK[ws]||St.namespaceURI===Q6&&!JK[ws]?!1:!IG[Ut]&&(pJ[Ut]||!tL[Ut]):!!(cw==="application/xhtml+xml"&&BG[ve.namespaceURI]):!1},iw=function(ve){I2(s.removed,{element:ve});try{ve.parentNode.removeChild(ve)}catch{ve.remove()}},VD=function(ve,St){try{I2(s.removed,{attribute:St.getAttributeNode(ve),from:St})}catch{I2(s.removed,{attribute:null,from:St})}if(St.removeAttribute(ve),ve==="is"&&!Wt[ve])if(q0||MT)try{iw(St)}catch{}else try{St.setAttribute(ve,"")}catch{}},eY=function(ve){let St,Ut;if(LD)ve="<remove></remove>"+ve;else{const Hd=e8(ve,/^[\r\n\t ]+/);Ut=Hd&&Hd[0]}cw==="application/xhtml+xml"&&BT===Qp&&(ve='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ve+"</body></html>");const ws=ce?ce.createHTML(ve):ve;if(BT===Qp)try{St=new I().parseFromString(ws,cw)}catch{}if(!St||!St.documentElement){St=Se.createDocument(BT,"template",null);try{St.documentElement.innerHTML=NG?_e:ws}catch{}}const bc=St.body||St.documentElement;return ve&&Ut&&bc.insertBefore(d.createTextNode(Ut),bc.childNodes[0]||null),BT===Qp?xe.call(St,Ld?"html":"body")[0]:Ld?St.documentElement:bc},tY=function(ve){return Le.call(ve.ownerDocument||ve,ve,T.SHOW_ELEMENT|T.SHOW_COMMENT|T.SHOW_TEXT,null,!1)},vJ=function(ve){return ve instanceof N&&(typeof ve.nodeName!="string"||typeof ve.textContent!="string"||typeof ve.removeChild!="function"||!(ve.attributes instanceof R)||typeof ve.removeAttribute!="function"||typeof ve.setAttribute!="function"||typeof ve.namespaceURI!="string"||typeof ve.insertBefore!="function"||typeof ve.hasChildNodes!="function")},nL=function(ve){return typeof w=="object"?ve instanceof w:ve&&typeof ve=="object"&&typeof ve.nodeType=="number"&&typeof ve.nodeName=="string"},e1=function(ve,St,Ut){mt[ve]&&J7(mt[ve],ws=>{ws.call(s,St,Ut,$T)})},nY=function(ve){let St;if(e1("beforeSanitizeElements",ve,null),vJ(ve))return iw(ve),!0;const Ut=pc(ve.nodeName);if(e1("uponSanitizeElement",ve,{tagName:Ut,allowedTags:Dt}),ve.hasChildNodes()&&!nL(ve.firstElementChild)&&(!nL(ve.content)||!nL(ve.content.firstElementChild))&&fc(/<[/\w]/g,ve.innerHTML)&&fc(/<[/\w]/g,ve.textContent))return iw(ve),!0;if(!Dt[Ut]||ca[Ut]){if(!ca[Ut]&&sY(Ut)&&(Dn.tagNameCheck instanceof RegExp&&fc(Dn.tagNameCheck,Ut)||Dn.tagNameCheck instanceof Function&&Dn.tagNameCheck(Ut)))return!1;if(MG&&!NT[Ut]){const ws=ie(ve)||ve.parentNode,bc=te(ve)||ve.childNodes;if(bc&&ws){const Hd=bc.length;for(let Ar=Hd-1;Ar>=0;--Ar)ws.insertBefore(Y(bc[Ar],!0),de(ve))}}return iw(ve),!0}return ve instanceof x&&!bJ(ve)||(Ut==="noscript"||Ut==="noembed"||Ut==="noframes")&&fc(/<\/no(script|embed|frames)/i,ve.innerHTML)?(iw(ve),!0):(hc&&ve.nodeType===3&&(St=ve.textContent,St=hu(St,Ot," "),St=hu(St,_t," "),St=hu(St,Rn," "),ve.textContent!==St&&(I2(s.removed,{element:ve.cloneNode()}),ve.textContent=St)),e1("afterSanitizeElements",ve,null),!1)},oY=function(ve,St,Ut){if(ZK&&(St==="id"||St==="name")&&(Ut in d||Ut in hJ))return!1;if(!(Ur&&!vi[St]&&fc(Sn,St))){if(!(ku&&fc(cn,St))){if(!Wt[St]||vi[St]){if(!(sY(ve)&&(Dn.tagNameCheck instanceof RegExp&&fc(Dn.tagNameCheck,ve)||Dn.tagNameCheck instanceof Function&&Dn.tagNameCheck(ve))&&(Dn.attributeNameCheck instanceof RegExp&&fc(Dn.attributeNameCheck,St)||Dn.attributeNameCheck instanceof Function&&Dn.attributeNameCheck(St))||St==="is"&&Dn.allowCustomizedBuiltInElements&&(Dn.tagNameCheck instanceof RegExp&&fc(Dn.tagNameCheck,Ut)||Dn.tagNameCheck instanceof Function&&Dn.tagNameCheck(Ut))))return!1}else if(!PG[St]){if(!fc(Yt,hu(Ut,ht,""))){if(!((St==="src"||St==="xlink:href"||St==="href")&&ve!=="script"&&t8(Ut,"data:")===0&&qK[ve])){if(!(yi&&!fc(Ze,hu(Ut,ht,"")))){if(Ut)return!1}}}}}}return!0},sY=function(ve){return ve.indexOf("-")>0},rY=function(ve){let St,Ut,ws,bc;e1("beforeSanitizeAttributes",ve,null);const{attributes:Hd}=ve;if(!Hd)return;const Ar={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Wt};for(bc=Hd.length;bc--;){St=Hd[bc];const{name:Vd,namespaceURI:FG}=St;Ut=Vd==="value"?St.value:n8(St.value);const CJ=Ut;if(ws=pc(Vd),Ar.attrName=ws,Ar.attrValue=Ut,Ar.keepAttr=!0,Ar.forceKeepAttr=void 0,e1("uponSanitizeAttribute",ve,Ar),Ut=Ar.attrValue,Ar.forceKeepAttr)continue;if(!Ar.keepAttr){VD(Vd,ve);continue}if(!el&&fc(/\/>/i,Ut)){VD(Vd,ve);continue}hc&&(Ut=hu(Ut,Ot," "),Ut=hu(Ut,_t," "),Ut=hu(Ut,Rn," "));const aY=pc(ve.nodeName);if(!oY(aY,ws,Ut)){VD(Vd,ve);continue}if(jK&&(ws==="id"||ws==="name")&&(VD(Vd,ve),Ut=dJ+Ut),ce&&typeof z=="object"&&typeof z.getAttributeType=="function"&&!FG)switch(z.getAttributeType(aY,ws)){case"TrustedHTML":{Ut=ce.createHTML(Ut);break}case"TrustedScriptURL":{Ut=ce.createScriptURL(Ut);break}}if(Ut!==CJ)try{FG?ve.setAttributeNS(FG,Vd,Ut):ve.setAttribute(Vd,Ut)}catch{VD(Vd,ve)}}e1("afterSanitizeAttributes",ve,null)},yJ=function pn(ve){let St;const Ut=tY(ve);for(e1("beforeSanitizeShadowDOM",ve,null);St=Ut.nextNode();)e1("uponSanitizeShadowNode",St,null),!nY(St)&&(St.content instanceof g&&pn(St.content),rY(St));e1("afterSanitizeShadowDOM",ve,null)};return s.sanitize=function(pn){let ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},St,Ut,ws,bc;if(NG=!pn,NG&&(pn="<!-->"),typeof pn!="string"&&!nL(pn))if(typeof pn.toString=="function"){if(pn=pn.toString(),typeof pn!="string")throw F2("dirty is not a string, aborting")}else throw F2("toString is not a function");if(!s.isSupported)return pn;if(Jp||$G(ve),s.removed=[],typeof pn=="string"&&(HD=!1),HD){if(pn.nodeName){const Vd=pc(pn.nodeName);if(!Dt[Vd]||ca[Vd])throw F2("root node is forbidden and cannot be sanitized in-place")}}else if(pn instanceof w)St=eY("<!---->"),Ut=St.ownerDocument.importNode(pn,!0),Ut.nodeType===1&&Ut.nodeName==="BODY"||Ut.nodeName==="HTML"?St=Ut:St.appendChild(Ut);else{if(!q0&&!hc&&!Ld&&pn.indexOf("<")===-1)return ce&&J6?ce.createHTML(pn):pn;if(St=eY(pn),!St)return q0?null:J6?_e:""}St&&LD&&iw(St.firstChild);const Hd=tY(HD?pn:St);for(;ws=Hd.nextNode();)nY(ws)||(ws.content instanceof g&&yJ(ws.content),rY(ws));if(HD)return pn;if(q0){if(MT)for(bc=Ie.call(St.ownerDocument);St.firstChild;)bc.appendChild(St.firstChild);else bc=St;return(Wt.shadowroot||Wt.shadowrootmode)&&(bc=Ht.call(a,bc,!0)),bc}let Ar=Ld?St.outerHTML:St.innerHTML;return Ld&&Dt["!doctype"]&&St.ownerDocument&&St.ownerDocument.doctype&&St.ownerDocument.doctype.name&&fc(S_,St.ownerDocument.doctype.name)&&(Ar="<!DOCTYPE "+St.ownerDocument.doctype.name+`>
`+Ar),hc&&(Ar=hu(Ar,Ot," "),Ar=hu(Ar,_t," "),Ar=hu(Ar,Rn," ")),ce&&J6?ce.createHTML(Ar):Ar},s.setConfig=function(pn){$G(pn),Jp=!0},s.clearConfig=function(){$T=null,Jp=!1},s.isValidAttribute=function(pn,ve,St){$T||$G({});const Ut=pc(pn),ws=pc(ve);return oY(Ut,ws,St)},s.addHook=function(pn,ve){typeof ve=="function"&&(mt[pn]=mt[pn]||[],I2(mt[pn],ve))},s.removeHook=function(pn){if(mt[pn])return Q7(mt[pn])},s.removeHooks=function(pn){mt[pn]&&(mt[pn]=[])},s.removeAllHooks=function(){mt={}},s}var i8=oN();const sN=t=>i8().sanitize(t);var ii=tinymce.util.Tools.resolve("tinymce.util.I18n");const l8={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},rN="temporary-placeholder",x_=t=>()=>lt(t,rN).getOr("!not found!"),__=(t,s)=>{const a=t.toLowerCase();if(ii.isRtl()){const i=la(a,"-rtl");return Ln(s,i)?i:a}else return a},aN=(t,s)=>lt(s,__(t,s)),WO=(t,s)=>{const a=s();return aN(t,a).getOrThunk(x_(a))},Z2=(t,s,a)=>{const i=s();return aN(t,i).or(a).getOrThunk(x_(i))},cN=t=>ii.isRtl()?Ln(l8,t):!1,ZO=()=>Jt("add-focusable",[po(t=>{fy(t.element,"svg").each(s=>ct(s,"focusable","false"))})]),iN=(t,s,a,i)=>{var d,g;const h=cN(s)?["tox-icon--flip"]:[],w=lt(a,__(s,a)).or(i).getOrThunk(x_(a));return{dom:{tag:t.tag,attributes:(d=t.attributes)!==null&&d!==void 0?d:{},classes:t.classes.concat(h),innerHtml:w},behaviours:Fe([...(g=t.behaviours)!==null&&g!==void 0?g:[],ZO()])}},Wi=(t,s,a,i=A.none())=>iN(s,t,a(),i),u8=(t,s,a)=>{const i=a(),d=Gt(t,g=>Ln(i,__(g,i)));return iN(s,d.getOr(rN),i,A.none())},d8={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},E_=pa({name:"Notification",factory:t=>{const s=ut("notification-text"),a=Pn({dom:Kf(`<p id=${s}>${sN(t.backstageProvider.translate(t.text))}</p>`),behaviours:Fe([Vt.config({})])}),i=V=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${V}%`}}}),d=V=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${V}%`}}),g=Pn({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[i(0)]},d(0)],behaviours:Fe([Vt.config({})])}),x={updateProgress:(V,Y)=>{V.getSystem().isConnected()&&g.getOpt(V).each(de=>{Vt.set(de,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[i(Y)]},d(Y)])})},updateText:(V,Y)=>{if(V.getSystem().isConnected()){const de=a.get(V);Vt.set(de,[Lo(Y)])}}},T=Xt([t.icon.toArray(),t.level.toArray(),t.level.bind(V=>A.from(d8[V])).toArray()]),R=Pn(_r.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":t.backstageProvider.translate("Close")}},components:[Wi("close",{tag:"span",classes:["tox-icon"]},t.iconProvider)],buttonBehaviours:Fe([uo.config({}),Er.config({...t.backstageProvider.tooltips.getConfig({tooltipText:t.backstageProvider.translate("Close")})})]),action:V=>{t.onAction(V)}})),N=u8(T,{tag:"div",classes:["tox-notification__icon"]},t.iconProvider),I={dom:{tag:"div",classes:["tox-notification__body"]},components:[a.asSpec()],behaviours:Fe([Vt.config({})])},z=[N,I];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert","aria-labelledby":s},classes:t.level.map(V=>["tox-notification","tox-notification--in",`tox-notification--${V}`]).getOr(["tox-notification","tox-notification--in"])},behaviours:Fe([uo.config({}),It.config({}),yt.config({mode:"special",onEscape:V=>(t.onAction(V),A.some(!0))})]),components:z.concat(t.progress?[g.asSpec()]:[]).concat([R.asSpec()]),apis:x}},configFields:[Nn("level"),ke("progress"),Nn("icon"),ke("onAction"),ke("text"),ke("iconProvider"),ke("backstageProvider")],apis:{updateProgress:(t,s,a)=>{t.updateProgress(s,a)},updateText:(t,s,a)=>{t.updateText(s,a)}}});var lN=(t,s,a,i)=>{const d=s.backstage.shared,g=()=>{const R=Mo(le.fromDom(t.getContentAreaContainer()));return A.some(R)},h=R=>{g().each(N=>{dt(R,I=>{fa(I.element)>N.width&&qt(I.element,"width",N.width+"px")})})};return{open:(R,N,I)=>{const z=()=>{const te=Se=>{Vt.remove(Se,V),Y()},ie=(Se,Le)=>{Wc(Se.element).length===0?ce(Se,Le):_e(Se,Le)},ce=(Se,Le)=>{Ao.hide(Se),i.clear(),Le&&t.focus()},_e=(Se,Le)=>{Le&&yt.focusIn(Se)};i.on(Se=>{N();const Le=I();te(Se),ie(Se,Le)})},V=wr(E_.sketch({text:R.text,level:Uo(["success","error","warning","warn","info"],R.type)?R.type:void 0,progress:R.progressBar===!0,icon:R.icon,onAction:z,iconProvider:d.providers.icons,backstageProvider:d.providers}));if(i.isSet()){const te=Fr(V);i.on(ie=>{Vt.append(ie,te),Ao.reposition(ie),wo.refresh(ie),h(ie.components())})}else{const te=wr(Ao.sketch({dom:{tag:"div",classes:["tox-notifications-container"],attributes:{"aria-label":"Notifications",role:"region"}},lazySink:d.getSink,fireDismissalEventInstead:{},...d.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Fe([yt.config({mode:"cyclic",selector:".tox-notification, .tox-notification a, .tox-notification button"}),Vt.config({}),...xp(t)&&!d.header.isPositionedAtTop()?[]:[wo.config({contextual:{lazyContext:()=>A.some(Mo(le.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-notification-container-dock-fadein",fadeOutClass:"tox-notification-container-dock-fadeout",transitionClass:"tox-notification-container-dock-transition"},modes:["top"],lazyViewport:Se=>Ag(t,Se.element).map(Ie=>({bounds:qf(Ie),optScrollEnv:A.some({currentScrollTop:Ie.element.dom.scrollTop,scrollElmTop:da(Ie.element).top})})).getOrThunk(()=>({bounds:Br(),optScrollEnv:A.none()}))})]])})),ie=Fr(V),ce={maxHeightFunction:rg()},_e={...d.anchors.banner(),overrides:ce};i.set(te),a.add(te),Ao.showWithinBounds(te,ie,{anchor:_e},g)}fn(R.timeout)&&R.timeout>0&&Qb.setEditorTimeout(t,()=>{z()},R.timeout);const Y=()=>{i.on(te=>{Ao.reposition(te),wo.refresh(te),h(te.components())})};return{close:z,reposition:Y,text:te=>{E_.updateText(V,te)},settings:R,getEl:()=>V.element.dom,progressBar:{value:te=>{E_.updateProgress(V,te)}}}},close:R=>{R.close()},getArgs:R=>R.settings}};const g8={setup:(t,s)=>{const a=(d,g)=>{vt(d,sc(),{raw:g})},i=()=>t.getMenu().bind(Je.getHighlighted);s.on("keydown",d=>{const g=d.which;t.isActive()&&(t.isMenuOpen()?g===13?(i().each(Ku),d.preventDefault()):g===40?(i().fold(()=>{t.getMenu().each(Je.highlightFirst)},h=>{a(h,d)}),d.preventDefault(),d.stopImmediatePropagation()):(g===37||g===38||g===39)&&i().each(h=>{a(h,d),d.preventDefault(),d.stopImmediatePropagation()}):(g===13||g===38||g===40)&&t.cancelIfNecessary())}),s.on("NodeChange",()=>{t.isActive()&&!t.isProcessingAction()&&!s.queryCommandState("mceAutoCompleterInRange")&&t.cancelIfNecessary()})}};var jO;(function(t){t[t.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",t[t.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(jO||(jO={}));var Tl=jO;const j2="tox-menu-nav__js",c0="tox-collection__item",T_="tox-swatch",uN={normal:j2,color:T_},GO="tox-collection__item--enabled",h8="tox-collection__group-heading",k_="tox-collection__item-icon",qO="tox-collection__item-label",dN="tox-collection__item-accessory",KO="tox-collection__item-caret",_p="tox-collection__item-checkmark",Ep="tox-collection__item--active",O_="tox-collection__item-container",A_="tox-collection__item-container--column",fN="tox-collection__item-container--row",mN="tox-collection__item-container--align-right",gN="tox-collection__item-container--align-left",hN="tox-collection__item-container--valign-top",YO="tox-collection__item-container--valign-middle",pN="tox-collection__item-container--valign-bottom",bN=t=>lt(uN,t).getOr(j2),vN=t=>t==="color"?"tox-swatches":"tox-menu",R_=t=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:vN(t),tieredMenu:"tox-tiered-menu"}),Rg=t=>{const s=R_(t);return{backgroundMenu:s.backgroundMenu,selectedMenu:s.selectedMenu,menu:s.menu,selectedItem:s.selectedItem,item:bN(t)}},yN=(t,s,a)=>{const i=R_(a);return{tag:"div",classes:Xt([[i.menu,`tox-menu-${s}-column`],t?[i.hasIcons]:[]])}},p8=[yp.parts.items({})],G2=(t,s,a)=>{const i=R_(a);return{dom:{tag:"div",classes:Xt([[i.tieredMenu]])},markers:Rg(a)}},CN=ae([Nn("data"),me("inputAttributes",{}),me("inputStyles",{}),me("tag","input"),me("inputClasses",[]),vn("onSetValue"),me("styles",{}),me("eventOrder",{}),Bs("inputBehaviours",[it,It]),me("selectOnFocus",!0)]),wN=t=>Fe([It.config({onFocus:t.selectOnFocus?s=>{const a=s.element,i=he(a);a.dom.setSelectionRange(0,i.length)}:ee})]),b8=t=>({...wN(t),...$s(t.inputBehaviours,[it.config({store:{mode:"manual",...t.data.map(s=>({initialValue:s})).getOr({}),getValue:s=>he(s.element),setValue:(s,a)=>{he(s.element)!==a&&yl(s.element,a)}},onSetValue:t.onSetValue})])}),SN=t=>({tag:t.tag,attributes:{type:"text",...t.inputAttributes},styles:t.inputStyles,classes:t.inputClasses}),xN=(t,s)=>({uid:t.uid,dom:SN(t),components:[],behaviours:b8(t),eventOrder:t.eventOrder}),bu=pa({name:"Input",configFields:CN(),factory:xN}),XO=ut("refetch-trigger-event"),_N=ut("redirect-menu-item-interaction"),EN="tox-menu__searcher",D_=t=>$n(t.element,`.${EN}`).bind(s=>t.getSystem().getByDom(s).toOptional()),TN=D_,v8=(t,s)=>{it.setValue(t,s.fetchPattern),t.element.dom.selectionStart=s.selectionStart,t.element.dom.selectionEnd=s.selectionEnd},q2=t=>{const s=it.getValue(t),a=t.element.dom.selectionStart,i=t.element.dom.selectionEnd;return{fetchPattern:s,selectionStart:a,selectionEnd:i}},y8=(t,s)=>{tr(s.element,"id").each(a=>ct(t.element,"aria-activedescendant",a))},kN=t=>{const s=(d,g)=>(g.cut(),A.none()),a=(d,g)=>{const h={interactionEvent:g.event,eventType:g.event.raw.type};return vt(d,_N,h),A.some(!0)},i="searcher-events";return{dom:{tag:"div",classes:[c0]},components:[bu.sketch({inputClasses:[EN,"tox-textfield"],inputAttributes:{...t.placeholder.map(d=>({placeholder:t.i18n(d)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:Fe([Jt(i,[Te(fl(),d=>{un(d,XO)}),Te(sc(),(d,g)=>{g.event.raw.key==="Escape"&&g.stop()})]),yt.config({mode:"special",onLeft:s,onRight:s,onSpace:s,onEnter:a,onEscape:a,onUp:a,onDown:a})]),eventOrder:{keydown:[i,yt.name()]}})]}},M_="tox-collection--results__js",JO=t=>{var s;return t.dom?{...t,dom:{...t.dom,attributes:{...(s=t.dom.attributes)!==null&&s!==void 0?s:{},id:ut("aria-item-search-result-id"),"aria-selected":"false"}}}:t},P_=(t,s)=>a=>{const i=ia(a,s);return De(i,d=>({dom:t,components:d}))},C8=t=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[yp.parts.items({preprocess:t!=="auto"?P_({tag:"div",classes:["tox-swatches__row"]},t):bn})]}]}),ON=t=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[yp.parts.items({preprocess:P_({tag:"div",classes:["tox-collection__group"]},t)})]}),QO=(t,s)=>{const a=[];let i=[];return dt(t,(d,g)=>{s(d,g)?(i.length>0&&a.push(i),i=[],(Ln(d.dom,"innerHtml")||d.components&&d.components.length>0)&&i.push(d)):i.push(d)}),i.length>0&&a.push(i),De(a,d=>({dom:{tag:"div",classes:["tox-collection__group"]},components:d}))},N_=(t,s,a)=>yp.parts.items({preprocess:i=>{const d=De(i,a);return t!=="auto"&&t>1?P_({tag:"div",classes:["tox-collection__group"]},t)(d):QO(d,(g,h)=>s[h].type==="separator")}}),eA=(t,s,a=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[N_(t,s,bn)]}),w8=(t,s,a=!0)=>{const i=ut("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",M_].concat(t===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:i}},components:[N_(t,s,JO)]}},S8=(t,s,a)=>{const i=ut("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[kN({i18n:ii.translate,placeholder:a.placeholder}),{dom:{tag:"div",classes:[...t===1?["tox-collection--list"]:["tox-collection--grid"],M_],attributes:{id:i}},components:[N_(t,s,JO)]}]}},x8=(t,s=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[yp.parts.items({preprocess:a=>QO(a,(i,d)=>t[d].type==="separator")})]}),B_=t=>ja(t,s=>"icon"in s&&s.icon!==void 0),xd=t=>(console.error(Ri(t)),console.log(t),A.none()),AN=(t,s,a,i,d)=>{const g=x8(a);return{value:t,dom:g.dom,components:g.components,items:a}},tA=(t,s,a,i,d)=>{const g=()=>d.menuType!=="searchable"?eA(i,a):d.searchMode.searchMode==="search-with-field"?S8(i,a,d.searchMode):w8(i,a);if(d.menuType==="color"){const h=C8(i);return{value:t,dom:h.dom,components:h.components,items:a}}else if(d.menuType==="normal"&&i==="auto"){const h=eA(i,a);return{value:t,dom:h.dom,components:h.components,items:a}}else if(d.menuType==="normal"||d.menuType==="searchable"){const h=g();return{value:t,dom:h.dom,components:h.components,items:a}}else if(d.menuType==="listpreview"&&i!=="auto"){const h=ON(i);return{value:t,dom:h.dom,components:h.components,items:a}}else return{value:t,dom:yN(s,i,d.menuType),components:p8,items:a}},us=Go("type"),nA=Go("name"),oA=Go("label"),Yf=Go("text"),RN=Go("title"),DN=Go("icon"),Tp=Go("value"),MN=Jc("fetch"),_8=Jc("getSubmenuItems"),i0=Jc("onAction"),PN=Jc("onItemAction"),kp=ko("onSetup",()=>ee),E8=ar("name"),Xf=ar("text"),li=ar("icon"),l0=ar("tooltip"),sA=ar("label"),rA=ar("shortcut"),T8=zu("select"),K2=cr("active",!1),aA=cr("borderless",!1),kl=cr("enabled",!0),$_=cr("primary",!1),NN=t=>me("columns",t),cA=me("meta",{}),iA=ko("onAction",ee),Op=t=>ll("type",t),I_=t=>rs("name","name",gn(()=>ut(`${t}-name`)),hs),BN=t=>rs("value","value",gn(()=>ut(`${t}-value`)),Ei()),$N=$t([us,Xf]),k8=t=>No("separatormenuitem",$N,t),O8=$t([Op("autocompleteitem"),K2,kl,cA,Tp,Xf,li]),Nc=t=>No("Autocompleter.Separator",$N,t),vu=t=>No("Autocompleter.Item",O8,t),Y2=[kl,l0,li,Xf,kp],lA=$t([us,i0,rA].concat(Y2)),F_=t=>No("toolbarbutton",lA,t),uA=[K2].concat(Y2),A8=$t(uA.concat([us,i0,rA])),u0=t=>No("ToggleButton",A8,t),X2=[ko("predicate",eo),vr("scope","node",["node","editor"]),vr("position","selection",["node","selection","line"])],dA=Y2.concat([Op("contextformbutton"),$_,i0,rr("original",bn)]),R8=uA.concat([Op("contextformbutton"),$_,i0,rr("original",bn)]),yu=Y2.concat([Op("contextformbutton")]),D8=uA.concat([Op("contextformtogglebutton")]),M8=Ra("type",{contextformbutton:dA,contextformtogglebutton:R8}),Zi=$t([Op("contextform"),ko("initValue",ae("")),sA,nc("commands",M8),il("launch",Ra("type",{contextformbutton:yu,contextformtogglebutton:D8}))].concat(X2)),J2=t=>No("ContextForm",Zi,t),Ol=$t([Op("contexttoolbar"),Go("items")].concat(X2)),P8=t=>No("ContextToolbar",Ol,t),Yn=[us,Go("src"),ar("alt"),Tc("classes",[],hs)],d0=$t(Yn),L_=[us,Yf,E8,Tc("classes",["tox-collection__item-label"],hs)],IN=$t(L_),H_=Hu(()=>Oi("type",{cardimage:d0,cardtext:IN,cardcontainer:fA})),fA=$t([us,ll("direction","horizontal"),ll("align","left"),ll("valign","middle"),nc("items",H_)]),f0=[kl,Xf,rA,BN("menuitem"),cA],mA=$t([us,sA,nc("items",H_),kp,iA].concat(f0)),N8=t=>No("cardmenuitem",mA,t),FN=$t([us,K2,li].concat(f0)),LN=t=>No("choicemenuitem",FN,t),V_=[us,Go("fancytype"),iA],HN=[me("initData",{})].concat(V_),z_=[zu("select"),Ov("initData",{},[cr("allowCustomColors",!0),ll("storageKey","default"),_1("colors",Ei())])].concat(V_),B8=Ra("fancytype",{inserttable:HN,colorswatch:z_}),$8=t=>No("fancymenuitem",B8,t),I8=$t([us,kp,iA,li].concat(f0)),F8=t=>No("menuitem",I8,t),L8=$t([us,_8,kp,li].concat(f0)),VN=t=>No("nestedmenuitem",L8,t),H8=$t([us,li,K2,kp,i0].concat(f0)),V8=t=>No("togglemenuitem",H8,t),U_=(t,s,a)=>{const i=xr(t.element,"."+a);if(i.length>0){const d=vo(i,g=>{const h=g.dom.getBoundingClientRect().top,w=i[0].dom.getBoundingClientRect().top;return Math.abs(h-w)>s}).getOr(i.length);return A.some({numColumns:d,numRows:Math.ceil(i.length/d)})}else return A.none()},gA=(t,s)=>Fe([Jt(t,s)]),Q2={namedEvents:gA,unnamedEvents:t=>gA(ut("unnamed-events"),t)},zN=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),W_="silver.readonly",UN=$t([cl("readonly")]),Z_=(t,s)=>{const i=t.mainUi.outerContainer.element,d=[t.mainUi.mothership,...t.uiMotherships];s&&dt(d,g=>{g.broadcastOn([Sl()],{target:i})}),dt(d,g=>{g.broadcastOn([W_],{readonly:s})})},WN=(t,s)=>{t.on("init",()=>{t.mode.isReadOnly()&&Z_(s,!0)}),t.on("SwitchMode",()=>Z_(s,t.mode.isReadOnly())),EO(t)&&t.mode.set("readonly")},Is=()=>ha.config({channels:{[W_]:{schema:UN,onReceive:(t,s)=>{Pt.set(t,s.readonly)}}}}),Ys={item:t=>Pt.config({disabled:t,disableClass:"tox-collection__item--state-disabled"}),button:t=>Pt.config({disabled:t}),splitButton:t=>Pt.config({disabled:t,disableClass:"tox-tbtn--disabled"}),toolbarButton:t=>Pt.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},j_=(t,s)=>{const a=t.getApi(s);return i=>{i(a)}},_d=(t,s)=>po(a=>{j_(t,a)(d=>{const g=t.onSetup(d);Ne(g)&&s.set(g)})}),Jf=(t,s)=>gl(a=>j_(t,a)(s.get())),ZN=(t,s)=>ni((a,i)=>{j_(t,a)(t.onAction),!t.triggersSubmenu&&s===Tl.CLOSE_ON_EXECUTE&&(a.getSystem().isConnected()&&un(a,Ds()),i.stop())}),U8={[ma()]:["disabling","alloy.base.behaviour","toggling","item-events"]},Ap=Gd,Rp=(t,s,a,i)=>{const d=Et(ee);return{type:"item",dom:s.dom,components:Ap(s.optComponents),data:t.data,eventOrder:U8,hasSubmenu:t.triggersSubmenu,itemBehaviours:Fe([Jt("item-events",[ZN(t,a),_d(t,d),Jf(t,d)]),Ys.item(()=>!t.enabled||i.isDisabled()),Is(),Vt.config({})].concat(t.itemBehaviours))}},Dp=t=>({value:t.value,meta:{text:t.text.getOr(""),...t.meta}}),hA=t=>{const s=e0.os.isMacOS()||e0.os.isiOS(),d=s?{alt:"⌥",ctrl:"⌃",shift:"⇧",meta:"⌘",access:"⌃⌥"}:{meta:"Ctrl",access:"Shift+Alt"},g=t.split("+"),h=De(g,w=>{const x=w.toLowerCase().trim();return Ln(d,x)?d[x]:w});return s?h.join(""):h.join("+")},pA=(t,s,a=[k_])=>Wi(t,{tag:"div",classes:a},s),jN=t=>({dom:{tag:"div",classes:[qO]},components:[Lo(ii.translate(t))]}),GN=(t,s)=>({dom:{tag:"div",classes:s,innerHtml:t}}),W8=(t,s)=>({dom:{tag:"div",classes:[qO]},components:[{dom:{tag:t.tag,styles:t.styles},components:[Lo(ii.translate(s))]}]}),qN=t=>({dom:{tag:"div",classes:[dN]},components:[Lo(hA(t))]}),bA=t=>pA("checkmark",t,[_p]),KN=t=>pA("chevron-right",t,[KO]),Z8=t=>pA("chevron-down",t,[KO]),j8=(t,s)=>{const a=t.direction==="vertical"?A_:fN,i=t.align==="left"?gN:mN;return{dom:{tag:"div",classes:[O_,a,i,(()=>{switch(t.valign){case"top":return hN;case"middle":return YO;case"bottom":return pN}})()]},components:s}},G8=(t,s,a)=>({dom:{tag:"img",classes:s,attributes:{src:t,alt:a.getOr("")}}}),m0=(t,s,a)=>{const i="custom",d="remove",g=t.value,h=t.iconContent.map(T=>Z2(T,s.icons,a)),w=t.ariaLabel.map(T=>({"aria-label":s.translate(T),"data-mce-name":T})).getOr({});return{dom:(()=>{const T=T_,R=h.getOr(""),N={tag:"div",attributes:w,classes:[T]};return g===i?{...N,tag:"button",classes:[...N.classes,"tox-swatches__picker-btn"],innerHtml:R}:g===d?{...N,classes:[...N.classes,"tox-swatch--remove"],innerHtml:R}:Rt(g)?{...N,attributes:{...N.attributes,"data-mce-color":g},styles:{"background-color":g},innerHtml:R}:N})(),optComponents:[]}},YN=t=>{const s=t.map(a=>({attributes:{id:ut("menu-item"),"aria-label":ii.translate(a)}})).getOr({});return{tag:"div",classes:[j2,c0],...s}},XN=(t,s,a,i)=>{const d={tag:"div",classes:[k_]},g=I=>Wi(I,d,s.icons,i),h=()=>A.some({dom:d}),w=a?t.iconContent.map(g).orThunk(h):A.none(),x=t.checkMark,T=A.from(t.meta).fold(()=>jN,I=>Ln(I,"style")?_n(W8,I.style):jN),R=t.htmlContent.fold(()=>t.textContent.map(T),I=>A.some(GN(I,[qO])));return{dom:YN(t.ariaLabel),optComponents:[w,R,t.shortcutContent.map(qN),x,t.caret]}},g0=(t,s,a,i=A.none())=>t.presets==="color"?m0(t,s,i):XN(t,s,a,i),vA=(t,s,a)=>lt(t,"tooltipWorker").map(i=>[Er.config({lazySink:s.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:d=>({type:"submenu",item:d,overrides:{maxHeightFunction:rg}}),mode:"follow-highlight",onShow:(d,g)=>{i(h=>{Er.setComponents(d,[X1({element:le.fromDom(h)})])})}})]).getOrThunk(()=>a.map(i=>[Er.config({...s.providers.tooltips.getConfig({tooltipText:i}),mode:"follow-highlight"})]).getOr([])),JN=t=>Cp.DOM.encode(t),G_=(t,s)=>{const a=ii.translate(t),i=JN(a);if(s.length>0){const d=new RegExp(zN(s),"gi");return i.replace(d,g=>`<span class="tox-autocompleter-highlight">${g}</span>`)}else return i},yA=(t,s,a,i,d,g,h,w=!0)=>{const x=g0({presets:i,textContent:A.none(),htmlContent:a?t.text.map(R=>G_(R,s)):A.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:A.none(),checkMark:A.none(),caret:A.none(),value:t.value},h.providers,w,t.icon),T=t.text.filter(R=>!a&&R!=="");return Rp({data:Dp(t),enabled:t.enabled,getApi:ae({}),onAction:R=>d(t.value,t.meta),onSetup:ae(ee),triggersSubmenu:!1,itemBehaviours:vA(t,h,T)},x,g,h.providers)},q_=(t,s)=>De(t,a=>{switch(a.type){case"cardcontainer":return j8(a,q_(a.items,s));case"cardimage":return G8(a.src,a.classes,a.alt);case"cardtext":const d=a.name.exists(g=>Uo(s.cardText.highlightOn,g))?A.from(s.cardText.matchText).getOr(""):"";return GN(G_(a.text,d),a.classes)}}),QN=(t,s,a,i)=>{const d=h=>({isEnabled:()=>!Pt.isDisabled(h),setEnabled:w=>{Pt.set(h,!w),dt(xr(h.element,"*"),x=>{h.getSystem().getByDom(x).each(T=>{T.hasConfigured(Pt)&&Pt.set(T,!w)})})}}),g={dom:YN(t.label),optComponents:[A.some({dom:{tag:"div",classes:[O_,fN]},components:q_(t.items,i)})]};return Rp({data:Dp({text:A.none(),...t}),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:A.from(i.itemBehaviours).getOr([])},g,s,a.providers)},q8=(t,s,a,i,d,g,h,w=!0)=>{const x=N=>({setActive:I=>{on.set(N,I)},isActive:()=>on.isOn(N),isEnabled:()=>!Pt.isDisabled(N),setEnabled:I=>Pt.set(N,!I)}),T=g0({presets:a,textContent:s?t.text:A.none(),htmlContent:A.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:s?t.shortcut:A.none(),checkMark:s?A.some(bA(h.icons)):A.none(),caret:A.none(),value:t.value},h,w),R=t.text.filter(ae(!s)).map(N=>Er.config(h.tooltips.getConfig({tooltipText:h.translate(N)})));return Po(Rp({data:Dp(t),enabled:t.enabled,getApi:x,onAction:N=>i(t.value),onSetup:N=>(N.setActive(d),ee),triggersSubmenu:!1,itemBehaviours:[...R.toArray()]},T,g,h),{toggling:{toggleClass:GO,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},CA=f2(yO(),CO()),eB=t=>({value:SA(t)}),tB=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,nB=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,wA=t=>tB.test(t)||nB.test(t),SA=t=>nv(t,"#").toUpperCase(),oB=t=>wA(t)?A.some({value:SA(t)}):A.none(),K8=t=>({value:t.value.replace(tB,(a,i,d,g)=>i+i+d+d+g+g)}),Y8=t=>{const s=K8(t),a=nB.exec(s.value);return a===null?["FFFFFF","FF","FF","FF"]:a},xA=t=>{const s=t.toString(16);return(s.length===1?"0"+s:s).toUpperCase()},eC=t=>{const s=xA(t.red)+xA(t.green)+xA(t.blue);return eB(s)},sB=Math.min,rB=Math.max,K_=Math.round,X8=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,J8=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Dg=(t,s,a,i)=>({red:t,green:s,blue:a,alpha:i}),_A=t=>{const s=parseInt(t,10);return s.toString()===t&&s>=0&&s<=255},EA=t=>{let s,a,i;const d=(t.hue||0)%360;let g=t.saturation/100,h=t.value/100;if(g=rB(0,sB(g,1)),h=rB(0,sB(h,1)),g===0)return s=a=i=K_(255*h),Dg(s,a,i,1);const w=d/60,x=h*g,T=x*(1-Math.abs(w%2-1)),R=h-x;switch(Math.floor(w)){case 0:s=x,a=T,i=0;break;case 1:s=T,a=x,i=0;break;case 2:s=0,a=x,i=T;break;case 3:s=0,a=T,i=x;break;case 4:s=T,a=0,i=x;break;case 5:s=x,a=0,i=T;break;default:s=a=i=0}return s=K_(255*(s+R)),a=K_(255*(a+R)),i=K_(255*(i+R)),Dg(s,a,i,1)},tC=t=>{const s=Y8(t),a=parseInt(s[1],16),i=parseInt(s[2],16),d=parseInt(s[3],16);return Dg(a,i,d,1)},aB=(t,s,a,i)=>{const d=parseInt(t,10),g=parseInt(s,10),h=parseInt(a,10),w=parseFloat(i);return Dg(d,g,h,w)},TA=t=>{if(t==="transparent")return A.some(Dg(0,0,0,0));const s=X8.exec(t);if(s!==null)return A.some(aB(s[1],s[2],s[3],"1"));const a=J8.exec(t);return a!==null?A.some(aB(a[1],a[2],a[3],a[4])):A.none()},cB=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,iB=Dg(255,0,0,1),Y_=t=>{t.dispatch("SkinLoaded")},lB=(t,s)=>{t.dispatch("SkinLoadError",s)},Q8=t=>{t.dispatch("ResizeEditor")},kA=(t,s)=>{t.dispatch("ResizeContent",s)},eH=(t,s)=>{t.dispatch("ScrollContent",s)},uB=(t,s)=>{t.dispatch("TextColorChange",s)},tH=(t,s)=>{t.dispatch("AfterProgressState",{state:s})},nH=(t,s)=>t.dispatch("ResolveName",{name:s.nodeName.toLowerCase(),target:s}),OA=(t,s)=>{t.dispatch("ToggleToolbarDrawer",{state:s})},dB=(t,s)=>{t.dispatch("StylesTextUpdate",s)},fB=(t,s)=>{t.dispatch("AlignTextUpdate",s)},oH=(t,s)=>{t.dispatch("FontSizeTextUpdate",s)},mB=(t,s)=>{t.dispatch("FontSizeInputTextUpdate",s)},sH=(t,s)=>{t.dispatch("BlocksTextUpdate",s)},rH=(t,s)=>{t.dispatch("FontFamilyTextUpdate",s)},X_=(t,s)=>()=>{t(),s()},ba=t=>Mp(t,"NodeChange",s=>{s.setEnabled(t.selection.isEditable())}),aH=(t,s)=>a=>{const i=ec(),d=()=>{a.setActive(t.formatter.match(s));const g=t.formatter.formatChanged(s,a.setActive);i.set(g)};return t.initialized?d():t.once("init",d),()=>{t.off("init",d),i.clear()}},J_=(t,s)=>a=>{const i=ba(t)(a),d=aH(t,s)(a);return()=>{i(),d()}},Mp=(t,s,a)=>i=>{const d=()=>a(i),g=()=>{a(i),t.on(s,d)};return t.initialized?g():t.once("init",g),()=>{t.off("init",g),t.off(s,d)}},gB=t=>s=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("mceToggleFormat",!1,s.format)})},Bc=(t,s)=>()=>t.execCommand(s);var Pp=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const nC={},AA=(t,s=10)=>{const a=Pp.getItem(t),i=J(a)?JSON.parse(a):[],g=(T=>s-T.length<0?T.slice(0,s):T)(i),h=T=>{Be(g,T).each(w),g.unshift(T),g.length>s&&g.pop(),Pp.setItem(t,JSON.stringify(g))},w=T=>{g.splice(T,1)};return{add:h,state:()=>g.slice(0)}},Q_=t=>lt(nC,t).getOrThunk(()=>{const s=`tinymce-custom-colors-${t}`,a=Pp.getItem(s);if(Zt(a)){const d=Pp.getItem("tinymce-custom-colors");Pp.setItem(s,Rt(d)?d:"[]")}const i=AA(s,10);return nC[t]=i,i}),hB=t=>De(Q_(t).state(),s=>({type:"choiceitem",text:s,icon:"checkmark",value:s})),pB=(t,s)=>{Q_(t).add(s)},oC=(t,s,a)=>({hue:t,saturation:s,value:a}),sC=t=>{let s=0,a=0,i=0;const d=t.red/255,g=t.green/255,h=t.blue/255,w=Math.min(d,Math.min(g,h)),x=Math.max(d,Math.max(g,h));if(w===x)return i=w,oC(0,0,i*100);const T=d===w?g-h:h===w?d-g:h-d;return s=d===w?3:h===w?1:5,s=60*(s-T/(x-w)),a=(x-w)/x,i=x,oC(Math.round(s),Math.round(a*100),Math.round(i*100))},RA=t=>sC(tC(t)),rC=t=>eC(EA(t)),bB=t=>oB(t).orThunk(()=>TA(t).map(eC)).getOrThunk(()=>{const s=document.createElement("canvas");s.height=1,s.width=1;const a=s.getContext("2d");a.clearRect(0,0,s.width,s.height),a.fillStyle="#FFFFFF",a.fillStyle=t,a.fillRect(0,0,1,1);const i=a.getImageData(0,0,1,1).data,d=i[0],g=i[1],h=i[2],w=i[3];return eC(Dg(d,g,h,w))}),DA="forecolor",MA="hilitecolor",cH=5,iH=t=>{const s=[];for(let a=0;a<t.length;a+=2)s.push({text:t[a+1],value:"#"+bB(t[a]).value,icon:"checkmark",type:"choiceitem"});return s},Ed=t=>s=>s.options.get(t),PA="#000000",lH=t=>{const s=t.options.register,a=d=>Gn(d,J)?{value:iH(d),valid:!0}:{valid:!1,message:"Must be an array of strings."},i=d=>fn(d)&&d>0?{value:d,valid:!0}:{valid:!1,message:"Must be a positive number."};s("color_map",{processor:a,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),s("color_map_background",{processor:a}),s("color_map_foreground",{processor:a}),s("color_cols",{processor:i,default:NA(t)}),s("color_cols_foreground",{processor:i,default:vB(t,DA)}),s("color_cols_background",{processor:i,default:vB(t,MA)}),s("custom_colors",{processor:"boolean",default:!0}),s("color_default_foreground",{processor:"string",default:PA}),s("color_default_background",{processor:"string",default:PA})},eE=(t,s)=>s===DA&&t.options.isSet("color_map_foreground")?Ed("color_map_foreground")(t):s===MA&&t.options.isSet("color_map_background")?Ed("color_map_background")(t):Ed("color_map")(t),NA=(t,s="default")=>Math.max(cH,Math.ceil(Math.sqrt(eE(t,s).length))),vB=(t,s)=>{const a=Ed("color_cols")(t),i=NA(t,s);return a===NA(t)?i:a},yB=(t,s="default")=>Math.round(s===DA?Ed("color_cols_foreground")(t):s===MA?Ed("color_cols_background")(t):Ed("color_cols")(t)),CB=Ed("custom_colors"),uH=Ed("color_default_foreground"),wB=Ed("color_default_background"),dH="rgba(0, 0, 0, 0)",fH=t=>TA(t).exists(s=>s.alpha!==0),Td=t=>Pm(t,s=>{if(no(s)){const a=jo(s,"background-color");return Ft(fH(a),a)}else return A.none()}).getOr(dH),SB=(t,s)=>{const a=le.fromDom(t.selection.getStart()),i=s==="hilitecolor"?Td(a):jo(a,"color");return TA(i).map(d=>"#"+eC(d).value)},mH=(t,s,a)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.apply(s,{value:a}),t.nodeChanged()})},BA=(t,s)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.remove(s,{value:null},void 0,!0),t.nodeChanged()})},Xs=t=>{t.addCommand("mceApplyTextcolor",(s,a)=>{mH(t,s,a)}),t.addCommand("mceRemoveTextcolor",s=>{BA(t,s)})},xB=t=>{const s="choiceitem",a={type:s,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return t?[a,{type:s,text:"Custom color",icon:"color-picker",value:"custom"}]:[a]},$A=(t,s,a,i)=>{a==="custom"?AB(t)(g=>{g.each(h=>{pB(s,h),t.execCommand("mceApplyTextcolor",s,h),i(h)})},SB(t,s).getOr(PA)):a==="remove"?(i(""),t.execCommand("mceRemoveTextcolor",s)):(i(a),t.execCommand("mceApplyTextcolor",s,a))},IA=(t,s,a)=>t.concat(hB(s).concat(xB(a))),_B=(t,s,a)=>i=>{i(IA(t,s,a))},FA=(t,s,a)=>{const i=s==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(i,a)},EB=(t,s)=>{t.setTooltip(s)},TB=(t,s)=>a=>{const i=SB(t,s);return Ga(i,a.toUpperCase())},LA=(t,s,a)=>{if(Do(a))return s==="forecolor"?"Text color":"Background color";const i=s==="forecolor"?"Text color {0}":"Background color {0}",d=IA(eE(t,s),s,!1),g=Gt(d,h=>h.value===a).getOr({text:""}).text;return t.translate([i,t.translate(g)])},kB=(t,s,a,i)=>{t.ui.registry.addSplitButton(s,{tooltip:LA(t,a,i.get()),presets:"color",icon:s==="forecolor"?"text-color":"highlight-bg-color",select:TB(t,a),columns:yB(t,a),fetch:_B(eE(t,a),a,CB(t)),onAction:d=>{$A(t,a,i.get(),ee)},onItemAction:(d,g)=>{$A(t,a,g,h=>{i.set(h),uB(t,{name:s,color:h})})},onSetup:d=>{FA(d,s,i.get());const g=h=>{h.name===s&&(FA(d,h.name,h.color),EB(d,LA(t,a,h.color)))};return t.on("TextColorChange",g),X_(ba(t)(d),()=>{t.off("TextColorChange",g)})}})},OB=(t,s,a,i,d)=>{t.ui.registry.addNestedMenuItem(s,{text:i,icon:s==="forecolor"?"text-color":"highlight-bg-color",onSetup:g=>(EB(g,LA(t,a,d.get())),FA(g,s,d.get()),ba(t)(g)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:TB(t,a),initData:{storageKey:a},onAction:g=>{$A(t,a,g.value,h=>{d.set(h),uB(t,{name:s,color:h})})}}]})},AB=t=>(s,a)=>{let i=!1;const d=w=>{const T=w.getData().colorpicker;i?(s(A.from(T)),w.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",T]))},g=(w,x)=>{x.name==="hex-valid"&&(i=x.value)},h={colorpicker:a};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:h,onAction:g,onSubmit:d,onClose:ee,onCancel:()=>{s(A.none())}})},gH=t=>{Xs(t);const s=uH(t),a=wB(t),i=Et(s),d=Et(a);kB(t,"forecolor","forecolor",i),kB(t,"backcolor","hilitecolor",d),OB(t,"forecolor","forecolor","Text color",i),OB(t,"backcolor","hilitecolor","Background color",d)},HA=(t,s,a,i,d,g,h,w)=>{const x=B_(s),R=hH(s,a,i,d!=="color"?"normal":"color",g,h,w);return tA(t,x,R,i,{menuType:d})},hH=(t,s,a,i,d,g,h)=>Gd(De(t,w=>w.type==="choiceitem"?LN(w).fold(xd,x=>A.some(q8(x,a===1,i,s,g(x.value),d,h,B_(t)))):A.none())),tE=(t,s)=>{const a=Rg(s);return t===1?{mode:"menu",moveOnTab:!0}:t==="auto"?{mode:"grid",selector:"."+a.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+(s==="color"?"tox-swatches__row":"tox-collection__group"),previousSelector:d=>s==="color"?$n(d.element,"[aria-checked=true]"):A.none()}},pH=(t,s)=>t===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:t==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:s==="color"?".tox-swatches__row":".tox-collection__group",cell:s==="color"?`.${T_}`:`.${c0}`}},bH=(t,s)=>{const a=vH(t,s),i=s.colorinput.getColorCols(t.initData.storageKey),d="color",h={...HA(ut("menu-value"),a,w=>{t.onAction({value:w})},i,d,Tl.CLOSE_ON_EXECUTE,t.select.getOr(eo),s.shared.providers),markers:Rg(d),movement:tE(i,d),menuRole:!1};return{type:"widget",data:{value:ut("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[CA.widget(yp.sketch(h))]}},vH=(t,s)=>{const a=t.initData.allowCustomColors&&s.colorinput.hasCustomColors();return t.initData.colors.fold(()=>IA(s.colorinput.getColors(t.initData.storageKey),t.initData.storageKey,a),i=>i.concat(xB(a)))},RB=ut("cell-over"),DB=ut("cell-execute"),yH=t=>(s,a)=>t.shared.providers.translate(["{0} columns, {1} rows",a,s]),CH=(t,s,a)=>{const i=h=>vt(h,RB,{row:t,col:s}),d=h=>vt(h,DB,{row:t,col:s}),g=(h,w)=>{w.stop(),d(h)};return wr({dom:{tag:"div",attributes:{role:"button","aria-label":a}},behaviours:Fe([Jt("insert-table-picker-cell",[Te(dl(),It.focus),Te(ma(),d),Te(mf(),g),Te(A1(),g)]),on.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),It.config({onFocus:i})])})},wH=(t,s,a)=>{const i=[];for(let d=0;d<s;d++){const g=[];for(let h=0;h<a;h++){const w=t(d+1,h+1);g.push(CH(d,h,w))}i.push(g)}return i},SH=(t,s,a,i,d)=>{for(let g=0;g<i;g++)for(let h=0;h<d;h++)on.set(t[g][h],g<=s&&h<=a)},xH=t=>we(t,s=>De(s,Fr)),VA=(t,s)=>Lo(`${s}x${t}`),MB={inserttable:(t,s)=>{const d=yH(s),g=wH(d,10,10),h=VA(0,0),w=Pn({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[h],behaviours:Fe([Vt.config({})])});return{type:"widget",data:{value:ut("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[CA.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:xH(g).concat(w.asSpec()),behaviours:Fe([Jt("insert-table-picker",[po(x=>{Vt.set(w.get(x),[h])}),$v(RB,(x,T,R)=>{const{row:N,col:I}=R.event;SH(g,N,I,10,10),Vt.set(w.get(x),[VA(N+1,I+1)])}),$v(DB,(x,T,R)=>{const{row:N,col:I}=R.event;t.onAction({numRows:N+1,numColumns:I+1}),un(x,Ds())})]),yt.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:bH},_H=(t,s)=>lt(MB,t.fancytype).map(a=>a(t,s)),EH=(t,s,a,i=!0,d=!1)=>{const g=d?Z8(a.icons):KN(a.icons),h=x=>({isEnabled:()=>!Pt.isDisabled(x),setEnabled:T=>Pt.set(x,!T),setIconFill:(T,R)=>{$n(x.element,`svg path[class="${T}"], rect[class="${T}"]`).each(N=>{ct(N,"fill",R)})},setTooltip:T=>{const R=a.translate(T);ct(x.element,"aria-label",R)}}),w=g0({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:A.none(),ariaLabel:t.text,caret:A.some(g),checkMark:A.none(),shortcutContent:t.shortcut},a,i);return Rp({data:Dp(t),getApi:h,enabled:t.enabled,onAction:ee,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},w,s,a)},TH=(t,s,a,i=!0)=>{const d=h=>({isEnabled:()=>!Pt.isDisabled(h),setEnabled:w=>Pt.set(h,!w)}),g=g0({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:A.none(),ariaLabel:t.text,caret:A.none(),checkMark:A.none(),shortcutContent:t.shortcut},a,i);return Rp({data:Dp(t),getApi:d,enabled:t.enabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,a)},PB=t=>({type:"separator",dom:{tag:"div",classes:[c0,h8]},components:t.text.map(Lo).toArray()}),kH=(t,s,a,i=!0)=>{const d=h=>({setActive:w=>{on.set(h,w)},isActive:()=>on.isOn(h),isEnabled:()=>!Pt.isDisabled(h),setEnabled:w=>Pt.set(h,!w)}),g=g0({iconContent:t.icon,textContent:t.text,htmlContent:A.none(),ariaLabel:t.text,checkMark:A.some(bA(a.icons)),caret:A.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},a,i);return Po(Rp({data:Dp(t),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,a),{toggling:{toggleClass:GO,toggleOnExecute:!1,selected:t.active}})},OH=yA,NB=PB,AH=TH,BB=EH,RH=kH,$B=_H,DH=QN;var PH=Object.freeze({__proto__:null,getCoupled:(t,s,a,i)=>a.getOrCreate(t,s,i),getExistingCoupled:(t,s,a,i)=>a.getExisting(t,s,i)}),NH=[as("others",Hw(tn.value,Ei()))],BH=Object.freeze({__proto__:null,init:()=>{const t={},s=(g,h)=>{if($o(g.others).length===0)throw new Error("Cannot find any known coupled components");return lt(t,h)},a=(g,h,w)=>s(h,w).getOrThunk(()=>{const T=lt(h.others,w).getOrDie("No information found for coupled component: "+w)(g),R=g.getSystem().build(T);return t[w]=R,R}),i=(g,h,w)=>s(h,w).orThunk(()=>(lt(h.others,w).getOrDie("No information found for coupled component: "+w),A.none())),d=ae({});return Pa({readState:d,getExisting:i,getOrCreate:a})}});const Yo=Ws({fields:NH,name:"coupling",apis:PH,state:BH}),zA=t=>{let s=A.none(),a=[];const i=T=>zA(R=>{d(N=>{R(T(N))})}),d=T=>{h()?x(T):a.push(T)},g=T=>{h()||(s=A.some(T),w(a),a=[])},h=()=>s.isSome(),w=T=>{dt(T,x)},x=T=>{s.each(R=>{setTimeout(()=>{T(R)},0)})};return t(g),{get:d,map:i,isReady:h}},$H={nu:zA,pure:t=>zA(s=>{s(t)})},IH=t=>{setTimeout(()=>{throw t},0)},h0=t=>{const s=x=>{t().then(x,IH)};return{map:x=>h0(()=>t().then(x)),bind:x=>h0(()=>t().then(T=>x(T).toPromise())),anonBind:x=>h0(()=>t().then(()=>x.toPromise())),toLazy:()=>$H.nu(s),toCached:()=>{let x=null;return h0(()=>(x===null&&(x=t()),x))},toPromise:t,get:s}},Tr={nu:t=>h0(()=>new Promise(t)),pure:t=>h0(()=>Promise.resolve(t))},IB=ae("sink"),FB=ae(dc({name:IB(),overrides:ae({dom:{tag:"div"},behaviours:Fe([qs.config({useFixed:Bt})]),events:Bn([Mi(sc()),Mi(oc()),Mi(mf())])})})),LB=(t,s)=>{const a=t.getHotspot(s).getOr(s),i="hotspot",d=t.getAnchorOverrides();return t.layouts.fold(()=>({type:i,hotspot:a,overrides:d}),g=>({type:i,hotspot:a,overrides:d,layouts:g}))},FH=(t,s,a)=>{const i=t.fetch;return i(a).map(s)},LH=(t,s,a,i,d,g,h)=>{const w=FH(t,s,i),x=WA(i,t);return w.map(T=>T.bind(R=>A.from(kg.sketch({...g.menu(),uid:xf(""),data:R,highlightOnOpen:h,onOpenMenu:(N,I)=>{const z=x().getOrDie();qs.position(z,I,{anchor:a}),wn.decloak(d)},onOpenSubmenu:(N,I,z)=>{const V=x().getOrDie();qs.position(V,z,{anchor:{type:"submenu",item:I}}),wn.decloak(d)},onRepositionMenu:(N,I,z)=>{const V=x().getOrDie();qs.position(V,I,{anchor:a}),dt(z,Y=>{qs.position(V,Y.triggeredMenu,{anchor:{type:"submenu",item:Y.triggeringItem}})})},onEscape:()=>(It.focus(i),wn.close(d),A.some(!0))}))))},p0=(t,s,a,i,d,g,h)=>{const w=LB(t,a);return LH(t,s,w,a,i,d,h).map(T=>(T.fold(()=>{wn.isOpen(i)&&wn.close(i)},R=>{wn.cloak(i),wn.open(i,R),g(i)}),i))},HH=(t,s,a,i,d,g,h)=>(wn.close(i),Tr.pure(i)),UA=(t,s,a,i,d,g)=>{const h=Yo.getCoupled(a,"sandbox");return(wn.isOpen(h)?HH:p0)(t,s,a,h,i,d,g)},VH=(t,s,a)=>{const i=yn.getCurrent(s).getOr(s),d=fa(t.element);a?qt(i.element,"min-width",d+"px"):On(i.element,d)},WA=(t,s)=>t.getSystem().getByUid(s.uid+"-"+IB()).map(a=>()=>tn.value(a)).getOrThunk(()=>s.lazySink.fold(()=>()=>tn.error(new Error("No internal sink is specified, nor could an external sink be found")),a=>()=>a(t))),ZA=t=>{wn.getState(t).each(s=>{kg.repositionMenus(s)})},jA=(t,s,a)=>{const i=eb(),d=(w,x)=>{const T=LB(t,s);i.link(s.element),t.matchWidth&&VH(T.hotspot,x,t.useMinWidth),t.onOpen(T,w,x),a!==void 0&&a.onOpen!==void 0&&a.onOpen(w,x)},g=(w,x)=>{i.unlink(s.element),h().getOr(x).element.dom.dispatchEvent(new window.FocusEvent("focusout")),a!==void 0&&a.onClose!==void 0&&a.onClose(w,x)},h=WA(s,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:i.id,role:"listbox"}},behaviours:Rc.augment(t.sandboxBehaviours,[it.config({store:{mode:"memory",initialValue:s}}),wn.config({onOpen:d,onClose:g,isPartOf:(w,x,T)=>od(x,T)||od(s,T),getAttachPoint:()=>h().getOrDie()}),yn.config({find:w=>wn.getState(w).bind(x=>yn.getCurrent(x))}),ha.config({channels:{...uu({isExtraPart:eo}),...Pb({doReposition:ZA})}})])}},HB=t=>{const s=Yo.getCoupled(t,"sandbox");ZA(s)},nE=()=>[me("sandboxClasses",[]),Rc.field("sandboxBehaviours",[yn,ha,wn,it])],zH=ae([ke("dom"),ke("fetch"),vn("onOpen"),Xr("onExecute"),me("getHotspot",A.some),me("getAnchorOverrides",ae({})),dd(),Bs("dropdownBehaviours",[on,Yo,yt,It]),ke("toggleClass"),me("eventOrder",{}),Nn("lazySink"),me("matchWidth",!1),me("useMinWidth",!1),Nn("role")].concat(nE())),UH=ae([Dc({schema:[Sf(),me("fakeFocus",!1)],name:"menu",defaults:t=>({onExecute:t.onExecute})}),FB()]),WH=(t,s,a,i)=>{const d=R=>lt(t.dom,"attributes").bind(N=>lt(N,R)),g=R=>{wn.getState(R).each(N=>{kg.highlightPrimary(N)})},h=(R,N,I)=>UA(t,bn,R,i,N,I),w=R=>{h(R,g,ra.HighlightMenuAndItem).get(ee)},x={expand:R=>{on.isOn(R)||h(R,ee,ra.HighlightNone).get(ee)},open:R=>{on.isOn(R)||h(R,ee,ra.HighlightMenuAndItem).get(ee)},refetch:R=>Yo.getExistingCoupled(R,"sandbox").fold(()=>h(R,ee,ra.HighlightMenuAndItem).map(ee),I=>p0(t,bn,R,I,i,ee,ra.HighlightMenuAndItem).map(ee)),isOpen:on.isOn,close:R=>{on.isOn(R)&&h(R,ee,ra.HighlightMenuAndItem).get(ee)},repositionMenus:R=>{on.isOn(R)&&HB(R)}},T=(R,N)=>(Ku(R),A.some(!0));return{uid:t.uid,dom:t.dom,components:s,behaviours:$s(t.dropdownBehaviours,[on.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),Yo.config({others:{sandbox:R=>jA(t,R,{onOpen:()=>on.on(R),onClose:()=>on.off(R)})}}),yt.config({mode:"special",onSpace:T,onEnter:T,onDown:(R,N)=>{if(ji.isOpen(R)){const I=Yo.getCoupled(R,"sandbox");g(I)}else ji.open(R);return A.some(!0)},onEscape:(R,N)=>ji.isOpen(R)?(ji.close(R),A.some(!0)):A.none()}),It.config({})]),events:e_(A.some(w)),eventOrder:{...t.eventOrder,[ma()]:["disabling","toggling","alloy.base.behaviour"]},apis:x,domModification:{attributes:{"aria-haspopup":"true",...t.role.fold(()=>({}),R=>({role:R})),...t.dom.tag==="button"?{type:d("type").getOr("button")}:{}}}}},ji=Vr({name:"Dropdown",configFields:zH(),partFields:UH(),factory:WH,apis:{open:(t,s)=>t.open(s),refetch:(t,s)=>t.refetch(s),expand:(t,s)=>t.expand(s),close:(t,s)=>t.close(s),isOpen:(t,s)=>t.isOpen(s),repositionMenus:(t,s)=>t.repositionMenus(s)}}),ZH=t=>{switch(t.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:t}}},jH=t=>{const s=it.getValue(t),a=D_(t).map(q2);ji.refetch(s).get(()=>{const i=Yo.getCoupled(s,"sandbox");a.each(d=>D_(i).each(g=>v8(g,d)))})},oE=(t,s)=>{GH(t).each(a=>{Jw(t,a.element,s.event.eventType,s.event.interactionEvent)})},GH=t=>wn.getState(t).bind(Je.getHighlighted).bind(Je.getHighlighted),sE=t=>Na(t.element,M_)?A.some(t.element):$n(t.element,"."+M_),VB=(t,s,a)=>{TN(t).each(i=>{y8(i,a),sE(s).each(g=>{tr(g,"id").each(h=>ct(i.element,"aria-controls",h))})}),ct(a.element,"aria-selected","true")},qH=(t,s,a)=>{ct(a.element,"aria-selected","false")},KH=t=>{TN(t).each(s=>It.focus(s))},YH=t=>Yo.getExistingCoupled(t,"sandbox").bind(D_).map(q2).map(a=>a.fetchPattern).getOr("");var GA;(function(t){t[t.ContentFocus=0]="ContentFocus",t[t.UiFocus=1]="UiFocus"})(GA||(GA={}));const rE=(t,s,a,i,d)=>{const g=a.shared.providers,h=w=>d?{...w,shortcut:A.none(),icon:w.text.isSome()?A.none():w.icon}:w;switch(t.type){case"menuitem":return F8(t).fold(xd,w=>A.some(AH(h(w),s,g,i)));case"nestedmenuitem":return VN(t).fold(xd,w=>A.some(BB(h(w),s,g,i,d)));case"togglemenuitem":return V8(t).fold(xd,w=>A.some(RH(h(w),s,g,i)));case"separator":return k8(t).fold(xd,w=>A.some(NB(w)));case"fancymenuitem":return $8(t).fold(xd,w=>$B(w,a));default:return console.error("Unknown item in general menu",t),A.none()}},b0=(t,s,a,i,d,g,h)=>{const w=i===1,x=!w||B_(t);return Gd(De(t,T=>{switch(T.type){case"separator":return Nc(T).fold(xd,R=>A.some(NB(R)));case"cardmenuitem":return N8(T).fold(xd,R=>A.some(DH({...R,onAction:N=>{R.onAction(N),a(R.value,R.meta)}},d,g,{itemBehaviours:vA(R.meta,g,A.none()),cardText:{matchText:s,highlightOn:h}})));case"autocompleteitem":default:return vu(T).fold(xd,R=>A.some(OH(R,s,w,"normal",a,d,g,x)))}}))},qA=(t,s,a,i,d,g)=>{const h=B_(s),w=Gd(De(s,R=>{const N=z=>d?!Ln(z,"text"):h,I=z=>rE(z,a,i,N(z),d);return R.type==="nestedmenuitem"&&R.getSubmenuItems().length<=0?I({...R,enabled:!1}):I(R)})),x=ZH(g);return(d?AN:tA)(t,h,w,1,x)},aE=t=>kg.singleData(t.value,t),XH=(t,s,a,i)=>{const d=tE(s,i),g=Rg(i);return{data:aE({...t,movement:d,menuBehaviours:Q2.unnamedEvents(s!=="auto"?[]:[po((h,w)=>{U_(h,4,g.item).each(({numColumns:x,numRows:T})=>{yt.setGridSize(h,T,x)})})])}),menu:{markers:Rg(i),fakeFocus:a===GA.ContentFocus}}},JH=t=>ag.create(le.fromDom(t.startContainer),t.startOffset,le.fromDom(t.endContainer),t.endOffset),QH={register:(t,s)=>{const a=ut("autocompleter"),i=Et(!1),d=Et(!1),g=Mn(),h=wr(Ao.sketch({dom:{tag:"div",classes:["tox-autocompleter"],attributes:{id:a}},components:[],fireDismissalEventInstead:{},inlineBehaviours:Fe([Jt("dismissAutocompleter",[Te(Ql(),()=>N()),Te(kh(),(te,ie)=>{tr(ie.event.target,"id").each(ce=>ct(le.fromDom(t.getBody()),"aria-activedescendant",ce))})])]),lazySink:s.getSink})),w=()=>Ao.isOpen(h),x=d.get,T=()=>{if(w()){Ao.hide(h),t.dom.remove(a,!1);const te=le.fromDom(t.getBody());tr(te,"aria-owns").filter(ie=>ie===a).each(()=>{Zo(te,"aria-owns"),Zo(te,"aria-activedescendant")})}},R=()=>Ao.getContent(h).bind(te=>ss(te.components(),0)),N=()=>t.execCommand("mceAutocompleterClose"),I=te=>{const ie=ur(te,ce=>A.from(ce.columns)).getOr(1);return we(te,ce=>{const _e=ce.items;return b0(_e,ce.matchText,(Se,Le)=>{const Ie={hide:()=>N(),reload:xe=>{T(),t.execCommand("mceAutocompleterReload",!1,{fetchOptions:xe})}};t.execCommand("mceAutocompleterRefreshActiveRange"),g.get().each(xe=>{i.set(!0),ce.onAction(Ie,xe,Se,Le),i.set(!1)})},ie,Tl.BUBBLE_TO_SANDBOX,s,ce.highlightOn)})},z=(te,ie)=>{const ce=ur(te,_e=>A.from(_e.columns)).getOr(1);Ao.showMenuAt(h,{anchor:{type:"selection",getSelection:()=>g.get().map(JH),root:le.fromDom(t.getBody())}},XH(tA("autocompleter-value",!0,ie,ce,{menuType:"normal"}),ce,GA.ContentFocus,"normal")),R().each(Je.highlightFirst)},V=te=>{const ie=I(te);ie.length>0?(z(te,ie),ct(le.fromDom(t.getBody()),"aria-owns",a),t.inline||Y()):T()},Y=()=>{t.dom.get(a)&&t.dom.remove(a,!1);const te=t.getDoc().documentElement,ie=t.selection.getNode(),ce=Ek(h.element);ka(ce,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",top:`${ie.offsetTop}px`,left:`${ie.offsetLeft}px`}),t.dom.add(te,ce.dom),$n(ce,'[role="menu"]').each(_e=>{kn(_e,"position"),kn(_e,"max-height")})};t.on("AutocompleterStart",({lookupData:te})=>{d.set(!0),i.set(!1),V(te)}),t.on("AutocompleterUpdate",({lookupData:te})=>V(te)),t.on("AutocompleterUpdateActiveRange",({range:te})=>g.set(te)),t.on("AutocompleterEnd",()=>{T(),d.set(!1),i.set(!1),g.clear()});const de={cancelIfNecessary:N,isMenuOpen:w,isActive:x,isProcessingAction:i.get,getMenu:R};g8.setup(de,t)}},aC=(t,s,a)=>Fi(t,s,a).isSome(),zB=(t,s)=>{let a=null;return{cancel:()=>{a!==null&&(clearTimeout(a),a=null)},schedule:(...g)=>{a=setTimeout(()=>{t.apply(null,g),a=null},s)}}},UB=5,eV=400,WB=t=>{const s=t.raw;return s.touches===void 0||s.touches.length!==1?A.none():A.some(s.touches[0])},tV=(t,s)=>{const a=Math.abs(t.clientX-s.x),i=Math.abs(t.clientY-s.y);return a>UB||i>UB},nV=t=>{const s=Mn(),a=Et(!1),i=zB(T=>{t.triggerEvent(qu(),T),a.set(!0)},eV),d=T=>(WB(T).each(R=>{i.cancel();const N={x:R.clientX,y:R.clientY,target:T.target};i.schedule(T),a.set(!1),s.set(N)}),A.none()),g=T=>(i.cancel(),WB(T).each(R=>{s.on(N=>{tV(R,N)&&s.clear()})}),A.none()),h=T=>{i.cancel();const R=N=>qn(N.target,T.target);return s.get().filter(R).map(N=>a.get()?(T.prevent(),!1):t.triggerEvent(A1(),T))},w=Uu([{key:ul(),value:d},{key:ff(),value:g},{key:Nm(),value:h}]);return{fireIfReady:(T,R)=>lt(w,R).bind(N=>N(T))}},ZB=t=>t.raw.which===An[0]&&!Uo(["input","textarea"],zc(t.target))&&!aC(t.target,'[contenteditable="true"]'),v0=(t,s)=>{const a={stopBackspace:!0,...s},i=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],d=nV(a),g=De(i.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),z=>ea(t,z,V=>{d.fireIfReady(V,z).each(de=>{de&&V.kill()}),a.triggerEvent(z,V)&&V.kill()})),h=Mn(),w=ea(t,"paste",z=>{d.fireIfReady(z,"paste").each(Y=>{Y&&z.kill()}),a.triggerEvent("paste",z)&&z.kill(),h.set(setTimeout(()=>{a.triggerEvent(Gu(),z)},0))}),x=ea(t,"keydown",z=>{a.triggerEvent("keydown",z)?z.kill():a.stopBackspace&&ZB(z)&&z.prevent()}),T=ea(t,"focusin",z=>{a.triggerEvent("focusin",z)&&z.kill()}),R=Mn(),N=ea(t,"focusout",z=>{a.triggerEvent("focusout",z)&&z.kill(),R.set(setTimeout(()=>{a.triggerEvent(Jl(),z)},0))});return{unbind:()=>{dt(g,z=>{z.unbind()}),x.unbind(),T.unbind(),N.unbind(),w.unbind(),h.on(clearTimeout),R.on(clearTimeout)}}},Mg=(t,s)=>{const a=lt(t,"target").getOr(s);return Et(a)},oV=(t,s)=>{const a=Et(!1),i=Et(!1);return{stop:()=>{a.set(!0)},cut:()=>{i.set(!0)},isStopped:a.get,isCut:i.get,event:t,setSource:s.set,getSource:s.get}},jB=t=>{const s=Et(!1);return{stop:()=>{s.set(!0)},cut:ee,isStopped:s.get,isCut:eo,event:t,setSource:oe("Cannot set source of a broadcasted event"),getSource:oe("Cannot get source of a broadcasted event")}},y0=Da.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),cC=(t,s,a,i,d,g)=>{const h=t(s,i),w=oV(a,d);return h.fold(()=>(g.logEventNoHandlers(s,i),y0.complete()),x=>{const T=x.descHandler;return td(T)(w),w.isStopped()?(g.logEventStopped(s,x.element,T.purpose),y0.stopped()):w.isCut()?(g.logEventCut(s,x.element,T.purpose),y0.complete()):Uc(x.element).fold(()=>(g.logNoParent(s,x.element,T.purpose),y0.complete()),N=>(g.logEventResponse(s,x.element,T.purpose),y0.resume(N)))})},GB=(t,s,a,i,d,g)=>cC(t,s,a,i,d,g).fold(Bt,h=>GB(t,s,a,h,d,g),eo),iC=(t,s,a,i,d)=>{const g=Mg(a,i);return cC(t,s,a,i,g,d)},lC=(t,s,a)=>{const i=jB(s);return dt(t,d=>{const g=d.descHandler;td(g)(i)}),i.isStopped()},sV=(t,s,a,i)=>qB(t,s,a,a.target,i),qB=(t,s,a,i,d)=>{const g=Mg(a,i);return GB(t,s,a,i,g,d)},rV=(t,s)=>({element:t,descHandler:s}),aV=(t,s)=>({id:t,descHandler:s}),cV=()=>{const t={},s=(h,w,x)=>{As(x,(T,R)=>{const N=t[R]!==void 0?t[R]:{};N[w]=Vh(T,h),t[R]=N})},a=(h,w)=>Hh(w).bind(x=>lt(h,x)).map(x=>rV(w,x));return{registerId:s,unregisterId:h=>{As(t,(w,x)=>{Ln(w,h)&&delete w[h]})},filterByType:h=>lt(t,h).map(w=>th(w,(x,T)=>aV(T,x))).getOr([]),find:(h,w,x)=>lt(t,w).bind(T=>Pm(x,R=>a(T,R),h))}},iV=()=>{const t=cV(),s={},a=T=>{const R=T.element;return Hh(R).getOrThunk(()=>Dk("uid-",T.element))},i=(T,R)=>{const N=s[R];if(N===T)g(T);else throw new Error('The tagId "'+R+'" is already used by: '+$a(N.element)+`
Cannot use it for: `+$a(T.element)+`
The conflicting element is`+(Hs(N.element)?" ":" not ")+"already in the DOM")},d=T=>{const R=a(T);yc(s,R)&&i(T,R);const N=[T];t.registerId(N,R,T.events),s[R]=T},g=T=>{Hh(T.element).each(R=>{delete s[R],t.unregisterId(R)})};return{find:(T,R,N)=>t.find(T,R,N),filter:T=>t.filterByType(T),register:d,unregister:g,getById:T=>lt(s,T)}},Cu=pa({name:"Container",factory:t=>{const{attributes:s,...a}=t.dom;return{uid:t.uid,dom:{tag:"div",attributes:{role:"presentation",...s},...a},components:t.components,behaviours:rp(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[me("components",[]),Bs("containerBehaviours",[]),me("events",{}),me("domModification",{}),me("eventOrder",{})]}),uC=t=>{const s=te=>Uc(t.element).fold(Bt,ie=>qn(te,ie)),a=iV(),i=(te,ie)=>a.find(s,te,ie),d=v0(t.element,{triggerEvent:(te,ie)=>$i(te,ie.target,ce=>sV(i,te,ie,ce))}),g={debugInfo:ae("real"),triggerEvent:(te,ie,ce)=>{$i(te,ie,_e=>qB(i,te,ce,ie,_e))},triggerFocus:(te,ie)=>{Hh(te).fold(()=>{rc(te)},ce=>{$i(Qc(),te,_e=>(iC(i,Qc(),{originator:ie,kill:ee,prevent:ee,target:te},te,_e),!1))})},triggerEscape:(te,ie)=>{g.triggerEvent("keydown",te.element,ie.event)},getByUid:te=>Y(te),getByDom:te=>de(te),build:wr,buildOrPatch:J1,addToGui:te=>{x(te)},removeFromGui:te=>{T(te)},addToWorld:te=>{h(te)},removeFromWorld:te=>{w(te)},broadcast:te=>{I(te)},broadcastOn:(te,ie)=>{z(te,ie)},broadcastEvent:(te,ie)=>{V(te,ie)},isConnected:Bt},h=te=>{te.connect(g),Ka(te.element)||(a.register(te),dt(te.components(),h),g.triggerEvent(xh(),te.element,{target:te.element}))},w=te=>{Ka(te.element)||(dt(te.components(),w),a.unregister(te)),te.disconnect()},x=te=>{Cl(t,te)},T=te=>{lu(te)},R=()=>{d.unbind(),Kc(t.element)},N=te=>{const ie=a.filter(ei());dt(ie,ce=>{const _e=ce.descHandler;td(_e)(te)})},I=te=>{N({universal:!0,data:te})},z=(te,ie)=>{N({universal:!1,channels:te,data:ie})},V=(te,ie)=>{const ce=a.filter(te);return lC(ce,ie)},Y=te=>a.getById(te).fold(()=>tn.error(new Error('Could not find component with uid: "'+te+'" in system.')),tn.value),de=te=>{const ie=Hh(te).getOr("not found");return Y(ie)};return h(t),{root:t,element:t.element,destroy:R,add:x,remove:T,getByUid:Y,getByDom:de,addToWorld:h,removeFromWorld:w,broadcast:I,broadcastOn:z,broadcastEvent:V}},lV=(t,s)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:De(t.items,s.interpreter)}),uV=ae([me("prefix","form-field"),Bs("fieldBehaviours",[yn,it])]),dV=ae([dc({schema:[ke("dom")],name:"label"}),dc({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[ke("text")],name:"aria-descriptor"}),lr({factory:{sketch:t=>{const s=Ww(t,["factory"]);return t.factory.sketch(s)}},schema:[ke("factory")],name:"field"})]),KB=(t,s,a,i)=>{const d=$s(t.fieldBehaviours,[yn.config({find:w=>He(w,t,"field")}),it.config({store:{mode:"manual",getValue:w=>yn.getCurrent(w).bind(it.getValue),setValue:(w,x)=>{yn.getCurrent(w).each(T=>{it.setValue(T,x)})}}})]),g=Bn([po((w,x)=>{const T=Bx(w,t,["label","field","aria-descriptor"]);T.field().each(R=>{const N=ut(t.prefix);T.label().each(I=>{ct(I.element,"for",N),ct(R.element,"id",N)}),T["aria-descriptor"]().each(I=>{const z=ut(t.prefix);ct(I.element,"id",z),ct(R.element,"aria-describedby",z)})})})]),h={getField:w=>He(w,t,"field"),getLabel:w=>He(w,t,"label")};return{uid:t.uid,dom:t.dom,components:s,behaviours:d,events:g,apis:h}},Vn=Vr({name:"FormField",configFields:uV(),partFields:dV(),factory:KB,apis:{getField:(t,s)=>t.getField(s),getLabel:(t,s)=>t.getLabel(s)}});var fV=tinymce.util.Tools.resolve("tinymce.html.Entities");const dC=(t,s,a,i)=>{const d=mV(t,s,a,i);return Vn.sketch(d)},YB=(t,s)=>dC(t,s,[],[]),mV=(t,s,a,i)=>({dom:XB(a),components:t.toArray().concat([s]),fieldBehaviours:Fe(i)}),gV=()=>XB([]),XB=t=>({tag:"div",classes:["tox-form__group"].concat(t)}),Pg=(t,s)=>Vn.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Lo(s.translate(t))]}),$c=ut("form-component-change"),C0=ut("form-close"),Qf=ut("form-cancel"),kd=ut("form-action"),fC=ut("form-submit"),YA=ut("form-block"),XA=ut("form-unblock"),JB=ut("form-tabchange"),JA=ut("form-resize"),w0=(t,s,a)=>{const i=t.label.map(z=>Pg(z,s)),d=s.icons(),g=z=>{var V;return(V=d[z])!==null&&V!==void 0?V:z},h=z=>(V,Y)=>{Fi(Y.event.target,"[data-collection-item-value]").each(de=>{z(V,Y,de,Fo(de,"data-collection-item-value"))})},w=(z,V)=>{const Y=De(V,ie=>{const ce=ii.translate(ie.text),_e=t.columns===1?`<div class="tox-collection__item-label">${ce}</div>`:"",Se=`<div class="tox-collection__item-icon">${g(ie.icon)}</div>`,Le={_:" "," - ":" ","-":" "},Ie=ce.replace(/\_| \- |\-/g,Ht=>Le[Ht]),xe=s.isDisabled()?" tox-collection__item--state-disabled":"";return`<div data-mce-tooltip="${Ie}" class="tox-collection__item${xe}" tabindex="-1" data-collection-item-value="${fV.encodeAllRaw(ie.value)}" aria-label="${Ie}">${Se}${_e}</div>`}),de=t.columns!=="auto"&&t.columns>1?ia(Y,t.columns):[Y],te=De(de,ie=>`<div class="tox-collection__group">${ie.join("")}</div>`);Km(z.element,te.join(""))},x=h((z,V,Y,de)=>{V.stop(),s.isDisabled()||vt(z,kd,{name:t.name,value:de})}),T=[Te(dl(),h((z,V,Y)=>{rc(Y)})),Te(mf(),x),Te(A1(),x),Te(Di(),h((z,V,Y)=>{$n(z.element,"."+Ep).each(de=>{Oo(de,Ep)}),oo(Y,Ep)})),Te(Zu(),h(z=>{$n(z.element,"."+Ep).each(V=>{Oo(V,Ep),jh(V)})})),ni(h((z,V,Y,de)=>{vt(z,kd,{name:t.name,value:de})}))],R=(z,V)=>De(xr(z.element,".tox-collection__item"),V),N=Vn.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(t.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:bn},behaviours:Fe([Pt.config({disabled:s.isDisabled,onDisabled:z=>{R(z,V=>{oo(V,"tox-collection__item--state-disabled"),ct(V,"aria-disabled",!0)})},onEnabled:z=>{R(z,V=>{Oo(V,"tox-collection__item--state-disabled"),Zo(V,"aria-disabled")})}}),Is(),Vt.config({}),Er.config({...s.tooltips.getConfig({tooltipText:"",onShow:z=>{$n(z.element,"."+Ep+"[data-mce-tooltip]").each(V=>{tr(V,"data-mce-tooltip").each(Y=>{Er.setComponents(z,s.tooltips.getComponents({tooltipText:Y}))})})}}),mode:"children-keyboard-focus",anchor:z=>({type:"node",node:$n(z.element,"."+Ep).orThunk(()=>Q1(".tox-collection__item")),root:z.element,layouts:{onLtr:ae([is,Os,bs,vs,cs,Zn]),onRtl:ae([is,Os,bs,vs,cs,Zn])},bubble:si(0,-2,{})})}),it.config({store:{mode:"memory",initialValue:a.getOr([])},onSetValue:(z,V)=>{w(z,V),t.columns==="auto"&&U_(z,5,"tox-collection__item").each(({numRows:Y,numColumns:de})=>{yt.setGridSize(z,Y,de)}),un(z,JA)}}),uo.config({}),yt.config(pH(t.columns,"normal")),Jt("collection-events",T)]),eventOrder:{[ma()]:["disabling","alloy.base.behaviour","collection-events"],[Di()]:["collection-events","tooltipping"]}});return dC(i,N,["tox-form__group--collection"],[])},hV=["input","textarea"],QB=t=>{const s=zc(t);return Uo(hV,s)},e5=(t,s)=>{const a=s.getRoot(t).getOr(t.element);Oo(a,s.invalidClass),s.notify.each(i=>{QB(t.element)&&ct(t.element,"aria-invalid",!1),i.getContainer(t).each(d=>{Km(d,i.validHtml)}),i.onValid(t)})},mC=(t,s,a,i)=>{const d=s.getRoot(t).getOr(t.element);oo(d,s.invalidClass),s.notify.each(g=>{QB(t.element)&&ct(t.element,"aria-invalid",!0),g.getContainer(t).each(h=>{Km(h,i)}),g.onInvalid(t,i)})},ui=(t,s,a)=>s.validator.fold(()=>Tr.pure(tn.value(!0)),i=>i.validate(t)),gC=(t,s,a)=>(s.notify.each(i=>{i.onValidate(t)}),ui(t,s).map(i=>t.getSystem().isConnected()?i.fold(d=>(mC(t,s,a,d),tn.error(d)),d=>(e5(t,s),tn.value(d))):tn.error("No longer in system")));var bV=Object.freeze({__proto__:null,markValid:e5,markInvalid:mC,query:ui,run:gC,isInvalid:(t,s)=>{const a=s.getRoot(t).getOr(t.element);return Na(a,s.invalidClass)}}),vV=Object.freeze({__proto__:null,events:(t,s)=>t.validator.map(a=>Bn([Te(a.onEvent,i=>{gC(i,t,s).get(bn)})].concat(a.validateOnLoad?[po(i=>{gC(i,t,s).get(ee)})]:[]))).getOr({})}),yV=[ke("invalidClass"),me("getRoot",A.none),ps("notify",[me("aria","alert"),me("getContainer",A.none),me("validHtml",""),vn("onValid"),vn("onInvalid"),vn("onValidate")]),ps("validator",[ke("validate"),me("onEvent","input"),me("validateOnLoad",!0)])];const wu=Ws({fields:yV,name:"invalidating",active:vV,apis:bV,extra:{validation:t=>s=>{const a=it.getValue(s);return Tr.pure(t(a))}}});var wV=Object.freeze({__proto__:null,events:()=>Bn([Qw(Pv(),Bt)]),exhibit:()=>Ma({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const S0=Ws({fields:[],name:"unselecting",active:wV}),SV=(t,s)=>ji.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:Fe([Ys.button(s.providers.isDisabled),Is(),S0.config({}),uo.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:s.getSink,fetch:a=>Tr.nu(i=>t.fetch(i)).map(i=>A.from(aE(Po(HA(ut("menu-value"),i,d=>{t.onItemAction(a,d)},t.columns,t.presets,Tl.CLOSE_ON_EXECUTE,eo,s.providers),{movement:tE(t.columns,t.presets)})))),parts:{menu:G2(!1,1,t.presets)}}),QA=ut("color-input-change"),e3=ut("color-swatch-change"),t3=ut("color-picker-cancel"),xV=(t,s,a,i)=>{const d=Vn.parts.field({factory:bu,inputClasses:["tox-textfield"],data:i,onSetValue:T=>wu.run(T).get(ee),inputBehaviours:Fe([Pt.config({disabled:s.providers.isDisabled}),Is(),uo.config({}),wu.config({invalidClass:"tox-textbox-field-invalid",getRoot:T=>Ci(T.element),notify:{onValid:T=>{const R=it.getValue(T);vt(T,QA,{color:R})}},validator:{validateOnLoad:!1,validate:T=>{const R=it.getValue(T);if(R.length===0)return Tr.pure(tn.value(!0));{const N=le.fromTag("span");qt(N,"background-color",R);const I=nr(N,"background-color").fold(()=>tn.error("blah"),z=>tn.value(R));return Tr.pure(I)}}}})]),selectOnFocus:!1}),g=t.label.map(T=>Pg(T,s.providers)),h=(T,R)=>{vt(T,e3,{value:R})},w=(T,R)=>{x.getOpt(T).each(N=>{R==="custom"?a.colorPicker(I=>{I.fold(()=>un(N,t3),z=>{h(N,z),pB(t.storageKey,z)})},"#ffffff"):R==="remove"?h(N,""):h(N,R)})},x=Pn(SV({dom:{tag:"span",attributes:{"aria-label":s.providers.translate("Color swatch")}},layouts:{onRtl:()=>[cs,bs,is],onLtr:()=>[bs,cs,is]},components:[],fetch:_B(a.getColors(t.storageKey),t.storageKey,a.hasCustomColors()),columns:a.getColorCols(t.storageKey),presets:"color",onItemAction:w},s));return Vn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:g.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[d,x.asSpec()]}]),fieldBehaviours:Fe([Jt("form-field-events",[Te(QA,(T,R)=>{x.getOpt(T).each(N=>{qt(N.element,"background-color",R.event.color)}),vt(T,$c,{name:t.name})}),Te(e3,(T,R)=>{Vn.getField(T).each(N=>{it.setValue(N,R.event.value),yn.getCurrent(T).each(It.focus)})}),Te(t3,(T,R)=>{Vn.getField(T).each(N=>{yn.getCurrent(T).each(It.focus)})})])])})},_V=dc({schema:[ke("dom")],name:"label"}),Ng=t=>dc({name:""+t+"-edge",overrides:s=>s.model.manager.edgeActions[t].fold(()=>({}),i=>({events:Bn([Fm(ul(),(d,g,h)=>i(d,h),[s]),Fm(oc(),(d,g,h)=>i(d,h),[s]),Fm(yh(),(d,g,h)=>{h.mouseIsDown.get()&&i(d,h)},[s])])}))}),EV=Ng("top-left"),TV=Ng("top"),kV=Ng("top-right"),n3=Ng("right"),OV=Ng("bottom-right"),AV=Ng("bottom"),t5=Ng("bottom-left"),RV=Ng("left"),DV=lr({name:"thumb",defaults:ae({dom:{styles:{position:"absolute"}}}),overrides:t=>({events:Bn([hf(ul(),t,"spectrum"),hf(ff(),t,"spectrum"),hf(Nm(),t,"spectrum"),hf(oc(),t,"spectrum"),hf(yh(),t,"spectrum"),hf(Ch(),t,"spectrum")])})}),cE=t=>El(t.event),MV=lr({schema:[rr("mouseIsDown",()=>Et(!1))],name:"spectrum",overrides:t=>{const a=t.model.manager,i=(d,g)=>a.getValueFromEvent(g).map(h=>a.setValueFrom(d,t,h));return{behaviours:Fe([yt.config({mode:"special",onLeft:(d,g)=>a.onLeft(d,t,cE(g)),onRight:(d,g)=>a.onRight(d,t,cE(g)),onUp:(d,g)=>a.onUp(d,t,cE(g)),onDown:(d,g)=>a.onDown(d,t,cE(g))}),uo.config({}),It.config({})]),events:Bn([Te(ul(),i),Te(ff(),i),Te(oc(),i),Te(yh(),(d,g)=>{t.mouseIsDown.get()&&i(d,g)})])}}});var PV=[_V,RV,n3,TV,AV,EV,kV,t5,OV,DV,MV];const hC=ae("slider.change.value"),n5=t=>t.type.indexOf("touch")!==-1,iE=t=>{const s=t.event.raw;if(n5(s)){const a=s;return a.touches!==void 0&&a.touches.length===1?A.some(a.touches[0]).map(i=>To(i.clientX,i.clientY)):A.none()}else{const a=s;return a.clientX!==void 0?A.some(a).map(i=>To(i.clientX,i.clientY)):A.none()}},NV="top",BV="right",$V="bottom",IV="left",Np=t=>t.model.minX,Bp=t=>t.model.minY,pC=t=>t.model.minX-1,bC=t=>t.model.minY-1,Bg=t=>t.model.maxX,em=t=>t.model.maxY,lE=t=>t.model.maxX+1,vC=t=>t.model.maxY+1,o5=(t,s,a)=>s(t)-a(t),o3=t=>o5(t,Bg,Np),s3=t=>o5(t,em,Bp),s5=t=>o3(t)/2,uE=t=>s3(t)/2,di=(t,s)=>s?t.stepSize*t.speedMultiplier:t.stepSize,r5=t=>t.snapToGrid,x0=t=>t.snapStart,a5=t=>t.rounded,_0=(t,s)=>t[s+"-edge"]!==void 0,c5=t=>_0(t,IV),i5=t=>_0(t,BV),l5=t=>_0(t,NV),r3=t=>_0(t,$V),tm=t=>t.model.value.get(),Od=(t,s)=>({x:t,y:s}),fi=(t,s)=>{vt(t,hC(),{value:s})},a3=(t,s)=>{fi(t,Od(pC(s),bC(s)))},FV=(t,s)=>{fi(t,bC(s))},mi=(t,s)=>{fi(t,Od(s5(s),bC(s)))},LV=(t,s)=>{fi(t,Od(lE(s),bC(s)))},HV=(t,s)=>{fi(t,lE(s))},u5=(t,s)=>{fi(t,Od(lE(s),uE(s)))},d5=(t,s)=>{fi(t,Od(lE(s),vC(s)))},VV=(t,s)=>{fi(t,vC(s))},zV=(t,s)=>{fi(t,Od(s5(s),vC(s)))},UV=(t,s)=>{fi(t,Od(pC(s),vC(s)))},WV=(t,s)=>{fi(t,pC(s))},ZV=(t,s)=>{fi(t,Od(pC(s),uE(s)))},c3=(t,s,a,i)=>t<s?t:t>a?a:t===s?s-1:Math.max(s,t-i),i3=(t,s,a,i)=>t>a?t:t<s?s:t===a?a+1:Math.min(a,t+i),l3=(t,s,a)=>Math.max(s,Math.min(a,t)),jV=(t,s,a,i,d)=>d.fold(()=>{const g=t-s,h=Math.round(g/i)*i;return l3(s+h,s-1,a+1)},g=>{const h=(t-g)%i,w=Math.round(h/i),x=Math.floor((t-g)/i),T=Math.floor((a-g)/i),R=Math.min(T,x+w),N=g+R*i;return Math.max(g,N)}),GV=(t,s,a)=>Math.min(a,Math.max(t,s))-s,f5=t=>{const{min:s,max:a,range:i,value:d,step:g,snap:h,snapStart:w,rounded:x,hasMinEdge:T,hasMaxEdge:R,minBound:N,maxBound:I,screenRange:z}=t,V=T?s-1:s,Y=R?a+1:a;if(d<N)return V;if(d>I)return Y;{const de=GV(d,N,I),te=l3(de/z*i+s,V,Y);return h&&te>=s&&te<=a?jV(te,s,a,g,w):x?Math.round(te):te}},u3=t=>{const{min:s,max:a,range:i,value:d,hasMinEdge:g,hasMaxEdge:h,maxBound:w,maxOffset:x,centerMinEdge:T,centerMaxEdge:R}=t;return d<s?g?0:T:d>a?h?w:R:(d-s)/i*x},yC="top",m5="right",dE="bottom",$g="left",g5="width",h5="height",Su=t=>t.element.dom.getBoundingClientRect(),Al=(t,s)=>t[s],fE=t=>{const s=Su(t);return Al(s,$g)},CC=t=>{const s=Su(t);return Al(s,m5)},mE=t=>{const s=Su(t);return Al(s,yC)},p5=t=>{const s=Su(t);return Al(s,dE)},d3=t=>{const s=Su(t);return Al(s,g5)},f3=t=>{const s=Su(t);return Al(s,h5)},gE=(t,s,a)=>(t+s)/2-a,m3=(t,s)=>{const a=Su(t),i=Su(s),d=Al(a,$g),g=Al(a,m5),h=Al(i,$g);return gE(d,g,h)},va=(t,s)=>{const a=Su(t),i=Su(s),d=Al(a,yC),g=Al(a,dE),h=Al(i,yC);return gE(d,g,h)},wC=(t,s)=>{vt(t,hC(),{value:s})},g3=(t,s,a)=>{const i={min:Np(s),max:Bg(s),range:o3(s),value:a,step:di(s),snap:r5(s),snapStart:x0(s),rounded:a5(s),hasMinEdge:c5(s),hasMaxEdge:i5(s),minBound:fE(t),maxBound:CC(t),screenRange:d3(t)};return f5(i)},qV=(t,s,a)=>{const i=g3(t,s,a);return wC(t,i),i},b5=(t,s)=>{const a=Np(s);wC(t,a)},KV=(t,s)=>{const a=Bg(s);wC(t,a)},YV=(t,s,a,i)=>{const g=(t>0?i3:c3)(tm(a),Np(a),Bg(a),di(a,i));return wC(s,g),A.some(g)},v5=t=>(s,a,i)=>YV(t,s,a,i).map(Bt),y5=t=>iE(t).map(a=>a.left),Ad=(t,s,a,i,d)=>{const h=d3(t),w=i.bind(R=>A.some(m3(R,t))).getOr(0),x=d.bind(R=>A.some(m3(R,t))).getOr(h),T={min:Np(s),max:Bg(s),range:o3(s),value:a,hasMinEdge:c5(s),hasMaxEdge:i5(s),minBound:fE(t),minOffset:0,maxBound:CC(t),maxOffset:h,centerMinEdge:w,centerMaxEdge:x};return u3(T)},SC=(t,s,a,i,d,g)=>{const h=Ad(s,g,a,i,d);return fE(s)-fE(t)+h},C5=(t,s,a,i)=>{const d=tm(a),g=SC(t,i.getSpectrum(t),d,i.getLeftEdge(t),i.getRightEdge(t),a),h=fa(s.element)/2;qt(s.element,"left",g-h+"px")},hE=v5(-1),h3=v5(1),XV=A.none,JV=A.none,QV={"top-left":A.none(),top:A.none(),"top-right":A.none(),right:A.some(HV),"bottom-right":A.none(),bottom:A.none(),"bottom-left":A.none(),left:A.some(WV)};var ez=Object.freeze({__proto__:null,setValueFrom:qV,setToMin:b5,setToMax:KV,findValueOfOffset:g3,getValueFromEvent:y5,findPositionOfValue:SC,setPositionFromValue:C5,onLeft:hE,onRight:h3,onUp:XV,onDown:JV,edgeActions:QV});const pE=(t,s)=>{vt(t,hC(),{value:s})},p3=(t,s,a)=>{const i={min:Bp(s),max:em(s),range:s3(s),value:a,step:di(s),snap:r5(s),snapStart:x0(s),rounded:a5(s),hasMinEdge:l5(s),hasMaxEdge:r3(s),minBound:mE(t),maxBound:p5(t),screenRange:f3(t)};return f5(i)},tz=(t,s,a)=>{const i=p3(t,s,a);return pE(t,i),i},w5=(t,s)=>{const a=Bp(s);pE(t,a)},nz=(t,s)=>{const a=em(s);pE(t,a)},Rd=(t,s,a,i)=>{const g=(t>0?i3:c3)(tm(a),Bp(a),em(a),di(a,i));return pE(s,g),A.some(g)},xC=t=>(s,a,i)=>Rd(t,s,a,i).map(Bt),oz=t=>iE(t).map(a=>a.top),sz=(t,s,a,i,d)=>{const h=f3(t),w=i.bind(R=>A.some(va(R,t))).getOr(0),x=d.bind(R=>A.some(va(R,t))).getOr(h),T={min:Bp(s),max:em(s),range:s3(s),value:a,hasMinEdge:l5(s),hasMaxEdge:r3(s),minBound:mE(t),minOffset:0,maxBound:p5(t),maxOffset:h,centerMinEdge:w,centerMaxEdge:x};return u3(T)},bE=(t,s,a,i,d,g)=>{const h=sz(s,g,a,i,d);return mE(s)-mE(t)+h},S5=(t,s,a,i)=>{const d=tm(a),g=bE(t,i.getSpectrum(t),d,i.getTopEdge(t),i.getBottomEdge(t),a),h=_s(s.element)/2;qt(s.element,"top",g-h+"px")},b3=A.none,vE=A.none,_C=xC(-1),EC=xC(1),x5={"top-left":A.none(),top:A.some(FV),"top-right":A.none(),right:A.none(),"bottom-right":A.none(),bottom:A.some(VV),"bottom-left":A.none(),left:A.none()};var _5=Object.freeze({__proto__:null,setValueFrom:tz,setToMin:w5,setToMax:nz,findValueOfOffset:p3,getValueFromEvent:oz,findPositionOfValue:bE,setPositionFromValue:S5,onLeft:b3,onRight:vE,onUp:_C,onDown:EC,edgeActions:x5});const TC=(t,s)=>{vt(t,hC(),{value:s})},kC=(t,s)=>({x:t,y:s}),rz=(t,s,a)=>{const i=g3(t,s,a.left),d=p3(t,s,a.top),g=kC(i,d);return TC(t,g),g},az=(t,s,a,i,d)=>{const g=t>0?i3:c3,h=s?tm(i).x:g(tm(i).x,Np(i),Bg(i),di(i,d)),w=s?g(tm(i).y,Bp(i),em(i),di(i,d)):tm(i).y;return TC(a,kC(h,w)),A.some(h)},yE=(t,s)=>(a,i,d)=>az(t,s,a,i,d).map(Bt),cz=(t,s)=>{const a=Np(s),i=Bp(s);TC(t,kC(a,i))},iz=(t,s)=>{const a=Bg(s),i=em(s);TC(t,kC(a,i))},E5=t=>iE(t),T5=(t,s,a,i)=>{const d=tm(a),g=SC(t,i.getSpectrum(t),d.x,i.getLeftEdge(t),i.getRightEdge(t),a),h=bE(t,i.getSpectrum(t),d.y,i.getTopEdge(t),i.getBottomEdge(t),a),w=fa(s.element)/2,x=_s(s.element)/2;qt(s.element,"left",g-w+"px"),qt(s.element,"top",h-x+"px")},lz=yE(-1,!1),k5=yE(1,!1),uz=yE(-1,!0),O5=yE(1,!0),OC={"top-left":A.some(a3),top:A.some(mi),"top-right":A.some(LV),right:A.some(u5),"bottom-right":A.some(d5),bottom:A.some(zV),"bottom-left":A.some(UV),left:A.some(ZV)};var dz=Object.freeze({__proto__:null,setValueFrom:rz,setToMin:cz,setToMax:iz,getValueFromEvent:E5,setPositionFromValue:T5,onLeft:lz,onRight:k5,onUp:uz,onDown:O5,edgeActions:OC});const A5=[me("stepSize",1),me("speedMultiplier",10),me("onChange",ee),me("onChoose",ee),me("onInit",ee),me("onDragStart",ee),me("onDragEnd",ee),me("snapToGrid",!1),me("rounded",!0),Nn("snapStart"),as("model",Ra("mode",{x:[me("minX",0),me("maxX",100),rr("value",t=>Et(t.mode.minX)),ke("getInitialValue"),so("manager",ez)],y:[me("minY",0),me("maxY",100),rr("value",t=>Et(t.mode.minY)),ke("getInitialValue"),so("manager",_5)],xy:[me("minX",0),me("maxX",100),me("minY",0),me("maxY",100),rr("value",t=>Et({x:t.mode.minX,y:t.mode.minY})),ke("getInitialValue"),so("manager",dz)]})),Bs("sliderBehaviours",[yt,it]),rr("mouseIsDown",()=>Et(!1))],Rl=Vr({name:"Slider",configFields:A5,partFields:PV,factory:(t,s,a,i)=>{const d=Se=>na(Se,t,"thumb"),g=Se=>na(Se,t,"spectrum"),h=Se=>He(Se,t,"left-edge"),w=Se=>He(Se,t,"right-edge"),x=Se=>He(Se,t,"top-edge"),T=Se=>He(Se,t,"bottom-edge"),R=t.model,N=R.manager,I=(Se,Le)=>{N.setPositionFromValue(Se,Le,t,{getLeftEdge:h,getRightEdge:w,getTopEdge:x,getBottomEdge:T,getSpectrum:g})},z=(Se,Le)=>{R.value.set(Le);const Ie=d(Se);I(Se,Ie)},V=(Se,Le)=>{z(Se,Le);const Ie=d(Se);return t.onChange(Se,Ie,Le),A.some(!0)},Y=Se=>{N.setToMin(Se,t)},de=Se=>{N.setToMax(Se,t)},te=Se=>{const Le=()=>{He(Se,t,"thumb").each(xe=>{const Ht=R.value.get();t.onChoose(Se,xe,Ht)})},Ie=t.mouseIsDown.get();t.mouseIsDown.set(!1),Ie&&Le()},ie=(Se,Le)=>{Le.stop(),t.mouseIsDown.set(!0),t.onDragStart(Se,d(Se))},ce=(Se,Le)=>{Le.stop(),t.onDragEnd(Se,d(Se)),te(Se)},_e=Se=>{He(Se,t,"spectrum").map(yt.focusIn)};return{uid:t.uid,dom:t.dom,components:s,behaviours:$s(t.sliderBehaviours,[yt.config({mode:"special",focusIn:_e}),it.config({store:{mode:"manual",getValue:Se=>R.value.get(),setValue:z}}),ha.config({channels:{[np()]:{onReceive:te}}})]),events:Bn([Te(hC(),(Se,Le)=>{V(Se,Le.event.value)}),po((Se,Le)=>{const Ie=R.getInitialValue();R.value.set(Ie);const xe=d(Se);I(Se,xe);const Ht=g(Se);t.onInit(Se,xe,Ht,R.value.get())}),Te(ul(),ie),Te(Nm(),ce),Te(oc(),(Se,Le)=>{_e(Se),ie(Se,Le)}),Te(Ch(),ce)]),apis:{resetToMin:Y,resetToMax:de,setValue:z,refresh:I},domModification:{styles:{position:"relative"}}}},apis:{setValue:(t,s,a)=>{t.setValue(s,a)},resetToMin:(t,s)=>{t.resetToMin(s)},resetToMax:(t,s)=>{t.resetToMax(s)},refresh:(t,s)=>{t.refresh(s)}}}),v3=ut("rgb-hex-update"),R5=ut("slider-update"),y3=ut("palette-update"),fz=(t,s)=>{const a=Rl.parts.spectrum({dom:{tag:"div",classes:[s("hue-slider-spectrum")],attributes:{role:"presentation"}}}),i=Rl.parts.thumb({dom:{tag:"div",classes:[s("hue-slider-thumb")],attributes:{role:"presentation"}}});return Rl.sketch({dom:{tag:"div",classes:[s("hue-slider")],attributes:{role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":120}},rounded:!1,model:{mode:"y",getInitialValue:ae(0)},components:[a,i],sliderBehaviours:Fe([It.config({})]),onChange:(d,g,h)=>{ct(d.element,"aria-valuenow",Math.floor(360-h*3.6)),vt(d,R5,{value:h})}})},C3="form",w3=[Bs("formBehaviours",[it])],Dd=t=>"<alloy.field."+t+">",S3=t=>{const s=(()=>{const g=[];return{field:(w,x)=>(g.push(w),Nx(C3,Dd(w),x)),record:ae(g)}})(),a=t(s),i=s.record(),d=De(i,g=>lr({name:g,pname:Dd(g)}));return fu(C3,w3,d,M5,a)},D5=(t,s)=>t.fold(()=>tn.error(s),tn.value),M5=(t,s)=>({uid:t.uid,dom:t.dom,components:s,behaviours:$s(t.formBehaviours,[it.config({store:{mode:"manual",getValue:a=>{const i=g2(a,t);return Io(i,(d,g)=>d().bind(h=>{const w=yn.getCurrent(h);return D5(w,new Error(`Cannot find a current component to extract the value from for form part '${g}': `+$a(h.element)))}).map(it.getValue))},setValue:(a,i)=>{As(i,(d,g)=>{He(a,t,g).each(h=>{yn.getCurrent(h).each(w=>{it.setValue(w,d)})})})}}})]),apis:{getField:(a,i)=>He(a,t,i).bind(yn.getCurrent)}}),Ig={getField:eg((t,s,a)=>t.getField(s,a)),sketch:S3},x3=ut("valid-input"),AC=ut("invalid-input"),_3=ut("validating-input"),CE="colorcustom.rgb.",mz=(t,s,a,i)=>{const d=(I,z)=>wu.config({invalidClass:s("invalid"),notify:{onValidate:V=>{vt(V,_3,{type:I})},onValid:V=>{vt(V,x3,{type:I,value:it.getValue(V)})},onInvalid:V=>{vt(V,AC,{type:I,value:it.getValue(V)})}},validator:{validate:V=>{const Y=it.getValue(V),de=z(Y)?tn.value(!0):tn.error(t("aria.input.invalid"));return Tr.pure(de)},validateOnLoad:!1}}),g=(I,z,V,Y,de)=>{const te=t(CE+"range"),ie=Vn.parts.label({dom:{tag:"label",attributes:{"aria-label":Y}},components:[Lo(V)]}),ce=Vn.parts.field({data:de,factory:bu,inputAttributes:{type:"text",...z==="hex"?{"aria-live":"polite"}:{}},inputClasses:[s("textfield")],inputBehaviours:Fe([d(z,I),uo.config({})]),onSetValue:Ie=>{wu.isInvalid(Ie)&&wu.run(Ie).get(ee)}}),_e=[ie,ce],Se=z!=="hex"?[Vn.parts["aria-descriptor"]({text:te})]:[],Le=_e.concat(Se);return{dom:{tag:"div",attributes:{role:"presentation"}},components:Le}},h=(I,z)=>{const V=eC(z);return Ig.getField(I,"hex").each(Y=>{It.isFocused(Y)||it.setValue(I,{hex:V.value})}),V},w=(I,z)=>{const V=z.red,Y=z.green,de=z.blue;it.setValue(I,{red:V,green:Y,blue:de})},x=Pn({dom:{tag:"div",classes:[s("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),T=(I,z)=>{x.getOpt(I).each(V=>{qt(V.element,"background-color","#"+z.value)})};return pa({factory:()=>{const I={red:Et(A.some(255)),green:Et(A.some(255)),blue:Et(A.some(255)),hex:Et(A.some("ffffff"))},z=(_t,Rn)=>{const Sn=tC(Rn);w(_t,Sn),te(Sn)},V=_t=>I[_t].get(),Y=(_t,Rn)=>{I[_t].set(Rn)},de=()=>V("red").bind(_t=>V("green").bind(Rn=>V("blue").map(Sn=>Dg(_t,Rn,Sn,1)))),te=_t=>{const Rn=_t.red,Sn=_t.green,cn=_t.blue;Y("red",A.some(Rn)),Y("green",A.some(Sn)),Y("blue",A.some(cn))},ie=(_t,Rn)=>{const Sn=Rn.event;Sn.type!=="hex"?Y(Sn.type,A.none()):i(_t)},ce=(_t,Rn)=>{a(_t);const Sn=eB(Rn);Y("hex",A.some(Sn.value));const cn=tC(Sn);w(_t,cn),te(cn),vt(_t,v3,{hex:Sn}),T(_t,Sn)},_e=(_t,Rn,Sn)=>{const cn=parseInt(Sn,10);Y(Rn,A.some(cn)),de().each(Ze=>{const ht=h(_t,Ze);vt(_t,v3,{hex:ht}),T(_t,ht)})},Se=_t=>_t.type==="hex",Le=(_t,Rn)=>{const Sn=Rn.event;Se(Sn)?ce(_t,Sn.value):_e(_t,Sn.type,Sn.value)},Ie=_t=>({label:t(CE+_t+".label"),description:t(CE+_t+".description")}),xe=Ie("red"),Ht=Ie("green"),mt=Ie("blue"),Ot=Ie("hex");return Po(Ig.sketch(_t=>({dom:{tag:"form",classes:[s("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[_t.field("red",Vn.sketch(g(_A,"red",xe.label,xe.description,255))),_t.field("green",Vn.sketch(g(_A,"green",Ht.label,Ht.description,255))),_t.field("blue",Vn.sketch(g(_A,"blue",mt.label,mt.description,255))),_t.field("hex",Vn.sketch(g(wA,"hex",Ot.label,Ot.description,"ffffff"))),x.asSpec()],formBehaviours:Fe([wu.config({invalidClass:s("form-invalid")}),Jt("rgb-form-events",[Te(x3,Le),Te(AC,ie),Te(_3,ie)])])})),{apis:{updateHex:(_t,Rn)=>{it.setValue(_t,{hex:Rn.value}),z(_t,Rn),T(_t,Rn)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(I,z,V)=>{I.updateHex(z,V)}},extraApis:{}})},gz=(t,s)=>{const a=Rl.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[s("sv-palette-spectrum")]}}),i=Rl.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette-thumb")],innerHtml:`<div class=${s("sv-palette-inner-thumb")} role="presentation"></div>`}}),d=(T,R)=>{const{width:N,height:I}=T,z=T.getContext("2d");if(z===null)return;z.fillStyle=R,z.fillRect(0,0,N,I);const V=z.createLinearGradient(0,0,N,0);V.addColorStop(0,"rgba(255,255,255,1)"),V.addColorStop(1,"rgba(255,255,255,0)"),z.fillStyle=V,z.fillRect(0,0,N,I);const Y=z.createLinearGradient(0,0,0,I);Y.addColorStop(0,"rgba(0,0,0,0)"),Y.addColorStop(1,"rgba(0,0,0,1)"),z.fillStyle=Y,z.fillRect(0,0,N,I)},g=(T,R)=>{const N=T.components()[0].element.dom,I=oC(R,100,100),z=EA(I);d(N,cB(z))},h=(T,R)=>{const N=sC(tC(R));Rl.setValue(T,{x:N.saturation,y:100-N.value}),ct(T.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",N.saturation,N.value]))};return pa({factory:T=>{const R=ae({x:0,y:0}),N=(V,Y,de)=>{fn(de)||ct(V.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",Math.floor(de.x),Math.floor(100-de.y)])),vt(V,y3,{value:de})},I=(V,Y,de,te)=>{d(de.element.dom,cB(iB))},z=Fe([yn.config({find:A.some}),It.config({})]);return Rl.sketch({dom:{tag:"div",attributes:{role:"slider","aria-valuetext":t(["Saturation {0}%, Brightness {1}%",0,0])},classes:[s("sv-palette")]},model:{mode:"xy",getInitialValue:R},rounded:!1,components:[a,i],onChange:N,onInit:I,sliderBehaviours:z})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(T,R,N)=>{g(R,N)},setThumb:(T,R,N)=>{h(R,N)}},extraApis:{}})},hz=(t,s)=>{const a=d=>{const g=mz(t,s,d.onValidHex,d.onInvalidHex),h=gz(t,s),w=Le=>(100-Le)/100*360,x=Le=>100-Le/360*100,T={paletteRgba:Et(iB),paletteHue:Et(0)},R=Pn(fz(t,s)),N=Pn(h.sketch({})),I=Pn(g.sketch({})),z=(Le,Ie,xe)=>{N.getOpt(Le).each(Ht=>{h.setHue(Ht,xe)})},V=(Le,Ie)=>{I.getOpt(Le).each(xe=>{g.updateHex(xe,Ie)})},Y=(Le,Ie,xe)=>{R.getOpt(Le).each(Ht=>{Rl.setValue(Ht,x(xe))})},de=(Le,Ie)=>{N.getOpt(Le).each(xe=>{h.setThumb(xe,Ie)})},te=(Le,Ie)=>{const xe=tC(Le);T.paletteRgba.set(xe),T.paletteHue.set(Ie)},ie=(Le,Ie,xe,Ht)=>{te(Ie,xe),dt(Ht,mt=>{mt(Le,Ie,xe)})},ce=()=>{const Le=[V];return(Ie,xe)=>{const Ht=xe.event.value,mt=T.paletteHue.get(),Ot=oC(mt,Ht.x,100-Ht.y),_t=rC(Ot);ie(Ie,_t,mt,Le)}},_e=()=>{const Le=[z,V];return(Ie,xe)=>{const Ht=w(xe.event.value),mt=T.paletteRgba.get(),Ot=sC(mt),_t=oC(Ht,Ot.saturation,Ot.value),Rn=rC(_t);ie(Ie,Rn,Ht,Le)}},Se=()=>{const Le=[z,Y,de];return(Ie,xe)=>{const Ht=xe.event.hex,mt=RA(Ht);ie(Ie,Ht,mt.hue,Le)}};return{uid:d.uid,dom:d.dom,components:[N.asSpec(),R.asSpec(),I.asSpec()],behaviours:Fe([Jt("colour-picker-events",[Te(v3,Se()),Te(y3,ce()),Te(R5,_e())]),yn.config({find:Le=>I.getOpt(Le)}),yt.config({mode:"acyclic"})])}};return pa({name:"ColourPicker",configFields:[ke("dom"),me("onValidHex",ee),me("onInvalidHex",ee)],factory:a})},Gi={self:()=>yn.config({find:A.some}),memento:t=>yn.config({find:t.getOpt}),childAt:t=>yn.config({find:s=>Du(s.element,t).bind(a=>s.getSystem().getByDom(a).toOptional())})},bz=$t([me("preprocess",bn),me("postprocess",bn)]),vz=(t,s)=>{const a=Me("RepresentingConfigs.memento processors",bz,s);return it.config({store:{mode:"manual",getValue:i=>{const d=t.get(i),g=it.getValue(d);return a.postprocess(g)},setValue:(i,d)=>{const g=a.preprocess(d),h=t.get(i);it.setValue(h,g)}}})},$p=(t,s,a)=>it.config({store:{mode:"manual",...t.map(i=>({initialValue:i})).getOr({}),getValue:s,setValue:a}}),RC=(t,s,a)=>$p(t,i=>s(i.element),(i,d)=>a(i.element,d)),yz=t=>RC(t,ga,Km),wE=t=>it.config({store:{mode:"memory",initialValue:t}}),P5={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},N5=t=>s=>J(s)?t.translate(P5[s]):t.translate(s),Cz=(t,s,a)=>{const i=x=>"tox-"+x,d=hz(N5(s),i),g=x=>{vt(x,kd,{name:"hex-valid",value:!0})},h=x=>{vt(x,kd,{name:"hex-valid",value:!1})},w=Pn(d.sketch({dom:{tag:"div",classes:[i("color-picker-container")],attributes:{role:"presentation"}},onValidHex:g,onInvalidHex:h}));return{dom:{tag:"div"},components:[w.asSpec()],behaviours:Fe([$p(a,x=>{const T=w.get(x);return yn.getCurrent(T).bind(I=>it.getValue(I).hex).map(I=>"#"+nv(I,"#")).getOr("")},(x,T)=>{const R=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,N=A.from(R.exec(T)).bind(V=>ss(V,1)),I=w.get(x);yn.getCurrent(I).fold(()=>{console.log("Can not find form")},V=>{it.setValue(V,{hex:N.getOr("")}),Ig.getField(V,"hex").each(Y=>{un(Y,fl())})})}),Gi.self()])}};var wz=tinymce.util.Tools.resolve("tinymce.Resource");const SE=t=>Ln(t,"init"),Sz=t=>{const s=Mn(),a=Pn({dom:{tag:t.tag}}),i=Mn(),d=!SE(t)&&t.onFocus.isSome()?[It.config({onFocus:g=>{t.onFocus.each(h=>{h(g.element.dom)})}}),uo.config({})]:[];return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:Fe([Jt("custom-editor-events",[po(g=>{a.getOpt(g).each(h=>{(SE(t)?t.init(h.element.dom):wz.load(t.scriptId,t.scriptUrl).then(w=>w(h.element.dom,t.settings))).then(w=>{i.on(x=>{w.setValue(x)}),i.clear(),s.set(w)})})})]),$p(A.none(),()=>s.get().fold(()=>i.get().getOr(""),g=>g.getValue()),(g,h)=>{s.get().fold(()=>i.set(h),w=>w.setValue(h))}),Gi.self()].concat(d)),components:[a.asSpec()]}};var Md=tinymce.util.Tools.resolve("tinymce.util.Tools");const xz=(t,s)=>{const a=Md.explode(s.getOption("images_file_types")),i=d=>ja(a,g=>nl(d.name.toLowerCase(),`.${g.toLowerCase()}`));return fo(vc(t),i)},_z=(t,s,a)=>{const i=(I,z)=>{z.stop()},d=I=>(z,V)=>{dt(I,Y=>{Y(z,V)})},g=(I,z)=>{var V;if(!Pt.isDisabled(I)){const Y=z.event.raw;w(I,(V=Y.dataTransfer)===null||V===void 0?void 0:V.files)}},h=(I,z)=>{const V=z.event.raw.target;w(I,V.files)},w=(I,z)=>{z&&(it.setValue(I,xz(z,s)),vt(I,$c,{name:t.name}))},x=Pn({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:Fe([Jt("input-file-events",[Mi(mf()),Mi(A1())])])}),T=I=>({uid:I.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:Fe([wE(a.getOr([])),Gi.self(),Pt.config({}),on.config({toggleClass:"dragenter",toggleOnExecute:!1}),Jt("dropzone-events",[Te("dragenter",d([i,on.toggle])),Te("dragleave",d([i,on.toggle])),Te("dragover",i),Te("drop",d([i,g])),Te(Xl(),h)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[Lo(s.translate("Drop an image here"))]},_r.sketch({dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[Lo(s.translate("Browse for an image")),x.asSpec()],action:z=>{x.get(z).element.dom.click()},buttonBehaviours:Fe([uo.config({}),Ys.button(s.isDisabled),Is()])})]}]}),R=t.label.map(I=>Pg(I,s)),N=Vn.parts.field({factory:{sketch:T}});return dC(R,N,["tox-form__group--stretched"],[])},Ez=(t,s)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${t.columns}col`]},components:De(t.items,s.interpreter)}),B5=(t,s)=>{let a=null,i=null;return{cancel:()=>{Ge(a)||(clearTimeout(a),a=null,i=null)},throttle:(...h)=>{i=h,Ge(a)&&(a=setTimeout(()=>{const w=i;a=null,i=null,t.apply(null,w)},s))}}},$5=(t,s)=>{let a=null;return{cancel:()=>{Ge(a)||(clearTimeout(a),a=null)},throttle:(...g)=>{Ge(a)&&(a=setTimeout(()=>{a=null,t.apply(null,g)},s))}}},E3=(t,s)=>{let a=null;const i=()=>{Ge(a)||(clearTimeout(a),a=null)};return{cancel:i,throttle:(...g)=>{i(),a=setTimeout(()=>{a=null,t.apply(null,g)},s)}}},T3=ut("alloy-fake-before-tabstop"),k3=ut("alloy-fake-after-tabstop"),I5=t=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:Fe([It.config({ignore:!0}),uo.config({})])}),O3=(t,s)=>({dom:{tag:"div",classes:["tox-navobj",...t.getOr([])]},components:[I5([T3]),s,I5([k3])],behaviours:Fe([Gi.childAt(1)])}),F5=(t,s)=>{vt(t,sc(),{raw:{which:9,shiftKey:s}})},L5=(t,s)=>{const a=s.element;Na(a,T3)?F5(t,!0):Na(a,k3)&&F5(t,!1)},DC=t=>aC(t,["."+T3,"."+k3].join(","),eo),xE=ut("update-dialog"),H5=ut("update-title"),V5=ut("update-body"),z5=ut("update-footer"),U5=ut("body-send-message"),_E=ut("dialog-focus-shifted"),A3=Qa().browser,MC=A3.isSafari(),R3=A3.isFirefox(),W5=MC||R3,Tz=A3.isChromium(),kz=({scrollTop:t,scrollHeight:s,clientHeight:a})=>Math.ceil(t)+a>=s,E0=(t,s)=>t.scrollTo(0,s==="bottom"?99999999:s),D3=(t,s)=>{const a=t.body;return A.from(!/^<!DOCTYPE (html|HTML)/.test(s)&&(!Tz&&!MC||Rt(a)&&(a.scrollTop!==0||Math.abs(a.scrollHeight-a.clientHeight)>1))?a:t.documentElement)},Z5=(t,s,a)=>{const i=t.dom;A.from(i.contentDocument).fold(a,d=>{let g=0;const h=D3(d,s).map(x=>(g=x.scrollTop,x)).forall(kz),w=()=>{const x=i.contentWindow;Rt(x)&&(h?E0(x,"bottom"):!h&&W5&&g!==0&&E0(x,g))};MC&&i.addEventListener("load",w,{once:!0}),d.open(),d.write(s),d.close(),MC||w()})},M3=Ft(W5,MC?500:200).map(t=>B5(Z5,t)),Oz=(t,s)=>{const a=Et(t.getOr(""));return{getValue:i=>a.get(),setValue:(i,d)=>{if(a.get()!==d){const g=i.element,h=()=>ct(g,"srcdoc",d);s?M3.fold(ae(Z5),w=>w.throttle)(g,d,h):h()}a.set(d)}}},P3=(t,s,a)=>{const i="tox-dialog__iframe",d=t.transparent?[]:[`${i}--opaque`],g=t.border?["tox-navobj-bordered"]:[],h={...t.label.map(N=>({title:N})).getOr({}),...a.map(N=>({srcdoc:N})).getOr({}),...t.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},w=Oz(a,t.streamContent),x=t.label.map(N=>Pg(N,s)),T=N=>O3(A.from(g),{uid:N.uid,dom:{tag:"iframe",attributes:h,classes:[i,...d]},behaviours:Fe([uo.config({}),It.config({}),$p(a,w.getValue,w.setValue),ha.config({channels:{[_E]:{onReceive:(I,z)=>{z.newFocus.each(V=>{Ci(I.element).each(Y=>{(qn(I.element,V)?oo:Oo)(Y,"tox-navobj-bordered-focus")})})}}}})])}),R=Vn.parts.field({factory:{sketch:T}});return dC(x,R,["tox-form__group--stretched"],[])},j5=t=>new Promise((s,a)=>{const i=()=>{g(),s(t)},d=[ea(t,"load",i),ea(t,"error",()=>{g(),a("Unable to load data from image: "+t.dom.src)})],g=()=>dt(d,h=>h.unbind());t.dom.complete&&i()}),Az=(t,s,a,i,d)=>{const g=a*d,h=i*d,w=Math.max(0,t/2-g/2),x=Math.max(0,s/2-h/2);return{left:w.toString()+"px",top:x.toString()+"px",width:g.toString()+"px",height:h.toString()+"px"}},Rz=(t,s,a)=>{const i=fa(t),d=_s(t);return Math.min(i/s,d/a,1)},G5=(t,s)=>{const a=Et(s.getOr({url:""})),i=Pn({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:s.map(x=>({src:x.url})).getOr({})}}),d=Pn({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[i.asSpec()]}),g=(x,T)=>{const R={url:T.url};T.zoom.each(I=>R.zoom=I),T.cachedWidth.each(I=>R.cachedWidth=I),T.cachedHeight.each(I=>R.cachedHeight=I),a.set(R);const N=()=>{const{cachedWidth:I,cachedHeight:z,zoom:V}=R;if(!xn(I)&&!xn(z)){if(xn(V)){const de=Rz(x.element,I,z);R.zoom=de}const Y=Az(fa(x.element),_s(x.element),I,z,R.zoom);d.getOpt(x).each(de=>{ka(de.element,Y)})}};i.getOpt(x).each(I=>{const z=I.element;T.url!==Fo(z,"src")&&(ct(z,"src",T.url),Oo(x.element,"tox-imagepreview__loaded")),N(),j5(z).then(V=>{x.getSystem().isConnected()&&(oo(x.element,"tox-imagepreview__loaded"),R.cachedWidth=V.dom.naturalWidth,R.cachedHeight=V.dom.naturalHeight,N())})})},h={};t.height.each(x=>h.height=x);const w=s.map(x=>({url:x.url,zoom:A.from(x.zoom),cachedWidth:A.from(x.cachedWidth),cachedHeight:A.from(x.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:h,attributes:{role:"presentation"}},components:[d.asSpec()],behaviours:Fe([Gi.self(),$p(w,()=>a.get(),g)])}},q5=(t,s)=>{const a="tox-label",i=t.align==="center"?[`${a}--center`]:[],d=t.align==="end"?[`${a}--end`]:[],g={dom:{tag:"label",classes:[a,...i,...d]},components:[Lo(s.providers.translate(t.label))]},h=De(t.items,s.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[g,...h],behaviours:Fe([Gi.self(),Vt.config({}),yz(A.none()),yt.config({mode:"acyclic"})])}},K5=ut("toolbar.button.execute"),Y5=t=>ni((s,a)=>{j_(t,s)(i=>{vt(s,K5,{buttonApi:i}),t.onAction(i)})}),Fg=ut("common-button-display-events"),X5={[ma()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events","tooltipping"],[yr()]:["toolbar-button-events",Fg],[ti()]:["toolbar-button-events","dropdown-events","tooltipping"],[oc()]:["focusing","alloy.base.behaviour",Fg]},EE=t=>qt(t.element,"width",jo(t.element,"width")),N3=(t,s,a)=>Wi(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:a},s),TE=(t,s)=>N3(t,s,[]),Lg=(t,s)=>N3(t,s,[Vt.config({})]),J5=(t,s,a)=>({dom:{tag:"span",classes:[`${s}__select-label`]},components:[Lo(a.translate(t))],behaviours:Fe([Vt.config({})])}),qi=ut("update-menu-text"),Hg=ut("update-menu-icon"),B3=(t,s,a,i)=>{const d=Et(ee),g=t.text.map(V=>Pn(J5(V,s,a.providers))),h=t.icon.map(V=>Pn(Lg(V,a.providers.icons))),w=(V,Y)=>{const de=it.getValue(V);return It.focus(de),vt(de,"keydown",{raw:Y.event.raw}),ji.close(de),A.some(!0)},x=t.role.fold(()=>({}),V=>({role:V})),T=t.ariaLabel.fold(()=>({}),V=>({"aria-label":a.providers.translate(V)})),R=Wi("chevron-down",{tag:"div",classes:[`${s}__select-chevron`]},a.providers.icons),N=ut("common-button-display-events"),I="dropdown-events";return Pn(ji.sketch({...t.uid?{uid:t.uid}:{},...x,dom:{tag:"button",classes:[s,`${s}--select`].concat(De(t.classes,V=>`${s}--${V}`)),attributes:{...T,...Rt(i)?{"data-mce-name":i}:{}}},components:Ap([h.map(V=>V.asSpec()),g.map(V=>V.asSpec()),A.some(R)]),matchWidth:!0,useMinWidth:!0,onOpen:(V,Y,de)=>{t.searchable&&KH(de)},dropdownBehaviours:Fe([...t.dropdownBehaviours,Ys.button(()=>t.disabled||a.providers.isDisabled()),Is(),S0.config({}),Vt.config({}),...t.tooltip.map(V=>Er.config(a.providers.tooltips.getConfig({tooltipText:a.providers.translate(V)}))).toArray(),Jt(I,[_d(t,d),Jf(t,d)]),Jt(N,[po((V,Y)=>EE(V))]),Jt("menubutton-update-display-text",[Te(qi,(V,Y)=>{g.bind(de=>de.getOpt(V)).each(de=>{Vt.set(de,[Lo(a.providers.translate(Y.event.text))])})}),Te(Hg,(V,Y)=>{h.bind(de=>de.getOpt(V)).each(de=>{Vt.set(de,[Lg(Y.event.icon,a.providers.icons)])})})])]),eventOrder:Po(X5,{[oc()]:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[yr()]:["toolbar-button-events",Er.name(),I,N]}),sandboxBehaviours:Fe([yt.config({mode:"special",onLeft:w,onRight:w}),Jt("dropdown-sandbox-events",[Te(XO,(V,Y)=>{jH(V),Y.stop()}),Te(_N,(V,Y)=>{oE(V,Y),Y.stop()})])]),lazySink:a.getSink,toggleClass:`${s}--active`,parts:{menu:{...G2(!1,t.columns,t.presets),fakeFocus:t.searchable,onHighlightItem:VB,onCollapseMenu:(V,Y,de)=>{Je.getHighlighted(de).each(te=>{VB(V,de,te)})},onDehighlightItem:qH}},getAnchorOverrides:()=>({maxHeightFunction:(V,Y)=>{ub()(V,Y-10)}}),fetch:V=>Tr.nu(_n(t.fetch,V))})).asSpec()},Q5=t=>J(t),e$=t=>t.type==="separator",Dz=t=>Ln(t,"getSubmenuItems"),$3={type:"separator"},Mz=(t,s)=>{const a=bo(t,(i,d)=>Q5(d)?d===""?i:d==="|"?i.length>0&&!e$(i[i.length-1])?i.concat([$3]):i:Ln(s,d.toLowerCase())?i.concat([s[d.toLowerCase()]]):i:i.concat([d]),[]);return a.length>0&&e$(a[a.length-1])&&a.pop(),a},Pz=(t,s)=>{const a=t.getSubmenuItems(),i=I3(a,s),d=Po(i.menus,{[t.value]:i.items}),g=Po(i.expansions,{[t.value]:t.value});return{item:t,menus:d,expansions:g}},Nz=t=>{const s=lt(t,"value").getOrThunk(()=>ut("generated-menu-item"));return Po({value:s},t)},I3=(t,s)=>{const a=Mz(J(t)?t.split(" "):t,s);return Ss(a,(i,d)=>{if(Dz(d)){const g=Nz(d),h=Pz(g,s);return{menus:Po(i.menus,h.menus),items:[h.item,...i.items],expansions:Po(i.expansions,h.expansions)}}else return{...i,items:[d,...i.items]}},{menus:{},expansions:{},items:[]})},Bz=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-field",placeholder:s.placeholder})),t$=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-results"})),T0=(t,s,a,i)=>{const d=ut("primary-menu"),g=I3(t,a.shared.providers.menuItems());if(g.items.length===0)return A.none();const h=Bz(i),w=qA(d,g.items,s,a,i.isHorizontalMenu,h),x=t$(i),T=Io(g.menus,(N,I)=>qA(I,N,s,a,!1,x)),R=Po(T,Mm(d,w));return A.from(kg.tieredData(d,R,g.expansions))},kE=t=>!Ln(t,"items"),n$="data-value",o$=(t,s,a,i)=>De(a,d=>kE(d)?{type:"togglemenuitem",text:d.text,value:d.value,active:d.value===i,onAction:()=>{it.setValue(t,d.value),vt(t,$c,{name:s}),It.focus(t)}}:{type:"nestedmenuitem",text:d.text,getSubmenuItems:()=>o$(t,s,d.items,i)}),F3=(t,s)=>ur(t,a=>kE(a)?Ft(a.value===s,a):F3(a.items,s)),$z=(t,s,a)=>{const i=s.shared.providers,d=a.bind(x=>F3(t.items,x)).orThunk(()=>xa(t.items).filter(kE)),g=t.label.map(x=>Pg(x,i)),h=Vn.parts.field({dom:{},factory:{sketch:x=>B3({uid:x.uid,text:d.map(T=>T.text),icon:A.none(),tooltip:A.none(),role:A.none(),ariaLabel:t.label,fetch:(T,R)=>{const N=o$(T,t.name,t.items,it.getValue(T));R(T0(N,Tl.CLOSE_ON_EXECUTE,s,{isHorizontalMenu:!1,search:A.none()}))},onSetup:ae(ee),getApi:ae({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[uo.config({}),$p(d.map(T=>T.value),T=>Fo(T.element,n$),(T,R)=>{F3(t.items,R).each(N=>{ct(T.element,n$,N.value),vt(T,qi,{text:N.text})})})]},"tox-listbox",s.shared)}}),w={dom:{tag:"div",classes:["tox-listboxfield"]},components:[h]};return Vn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Xt([g.toArray(),[w]]),fieldBehaviours:Fe([Pt.config({disabled:ae(!t.enabled),onDisabled:x=>{Vn.getField(x).each(Pt.disable)},onEnabled:x=>{Vn.getField(x).each(Pt.enable)}})])})},s$=(t,s)=>({dom:{tag:"div",classes:t.classes},components:De(t.items,s.shared.interpreter)}),Iz=(t,s)=>{const a=De(t.options,d=>({dom:{tag:"option",value:d.value,innerHtml:d.text}})),i=t.data.map(d=>Mm("initialValue",d)).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:a,behaviours:$s(t.selectBehaviours,[It.config({}),it.config({store:{mode:"manual",getValue:d=>he(d.element),setValue:(d,g)=>{const h=xa(t.options);Gt(t.options,x=>x.value===g).isSome()?yl(d.element,g):d.element.dom.selectedIndex===-1&&g===""&&h.each(x=>yl(d.element,x.value))},...i}})])}},Fz=pa({name:"HtmlSelect",configFields:[ke("options"),Bs("selectBehaviours",[It,it]),me("selectClasses",[]),me("selectAttributes",{}),Nn("data")],factory:Iz}),r$=(t,s,a)=>{const i=De(t.items,x=>({text:s.translate(x.text),value:x.value})),d=t.label.map(x=>Pg(x,s)),g=Vn.parts.field({dom:{},...a.map(x=>({data:x})).getOr({}),selectAttributes:{size:t.size},options:i,factory:Fz,selectBehaviours:Fe([Pt.config({disabled:()=>!t.enabled||s.isDisabled()}),uo.config({}),Jt("selectbox-change",[Te(Xl(),(x,T)=>{vt(x,$c,{name:t.name})})])])}),h=t.size>1?A.none():A.some(Wi("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},s.icons)),w={dom:{tag:"div",classes:["tox-selectfield"]},components:Xt([[g],h.toArray()])};return Vn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Xt([d.toArray(),[w]]),fieldBehaviours:Fe([Pt.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:x=>{Vn.getField(x).each(Pt.disable)},onEnabled:x=>{Vn.getField(x).each(Pt.enable)}}),Is()])})},Lz=ae([me("field1Name","field1"),me("field2Name","field2"),kc("onLockedChange"),bl(["lockClass"]),me("locked",!1),Rc.field("coupledFieldBehaviours",[yn,it])]),Hz=(t,s,a)=>He(t,s,a).bind(yn.getCurrent),a$=(t,s)=>lr({factory:Vn,name:t,overrides:a=>({fieldBehaviours:Fe([Jt("coupled-input-behaviour",[Te(fl(),i=>{Hz(i,a,s).each(d=>{He(i,a,"lock").each(g=>{on.isOn(g)&&a.onLockedChange(i,d,g)})})})])])})}),c$=ae([a$("field1","field2"),a$("field2","field1"),lr({factory:_r,schema:[ke("dom")],name:"lock",overrides:t=>({buttonBehaviours:Fe([on.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])})})]),Vz=(t,s,a,i)=>({uid:t.uid,dom:t.dom,components:s,behaviours:Rc.augment(t.coupledFieldBehaviours,[yn.config({find:A.some}),it.config({store:{mode:"manual",getValue:d=>{const g=up(d,t,["field1","field2"]);return{[t.field1Name]:it.getValue(g.field1()),[t.field2Name]:it.getValue(g.field2())}},setValue:(d,g)=>{const h=up(d,t,["field1","field2"]);yc(g,t.field1Name)&&it.setValue(h.field1(),g[t.field1Name]),yc(g,t.field2Name)&&it.setValue(h.field2(),g[t.field2Name])}}})]),apis:{getField1:d=>He(d,t,"field1"),getField2:d=>He(d,t,"field2"),getLock:d=>He(d,t,"lock")}}),gi=Vr({name:"FormCoupledInputs",configFields:Lz(),partFields:c$(),factory:Vz,apis:{getField1:(t,s)=>t.getField1(s),getField2:(t,s)=>t.getField2(s),getLock:(t,s)=>t.getLock(s)}}),zz=t=>{const s={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},a=d=>d in s?s[d]:1;let i=t.value.toFixed(a(t.unit));return i.indexOf(".")!==-1&&(i=i.replace(/\.?0*$/,"")),i+t.unit},OE=t=>{const a=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(a!==null){const i=parseFloat(a[1]),d=a[2];return tn.value({value:i,unit:d})}else return tn.error(t)},L3=(t,s)=>{const a={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},i=d=>Ln(a,d);return t.unit===s?A.some(t.value):i(t.unit)&&i(s)?a[t.unit]===a[s]?A.some(t.value):A.some(t.value/a[t.unit]*a[s]):A.none()},AE=t=>A.none(),RE=(t,s)=>a=>L3(a,s).map(i=>({value:i*t,unit:s})),Uz=(t,s)=>{const a=OE(t).toOptional(),i=OE(s).toOptional();return Au(a,i,(d,g)=>L3(d,g.unit).map(h=>g.value/h).map(h=>RE(h,g.unit)).getOr(AE)).getOr(AE)},Wz=(t,s)=>{let a=AE;const i=ut("ratio-event"),d=z=>Wi(z,{tag:"span",classes:["tox-icon","tox-lock-icon__"+z]},s.icons),g=t.label.getOr("Constrain proportions"),h=s.translate(g),w=gi.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":h,"data-mce-name":g}},components:[d("lock"),d("unlock")],buttonBehaviours:Fe([Pt.config({disabled:()=>!t.enabled||s.isDisabled()}),Is(),uo.config({}),Er.config(s.tooltips.getConfig({tooltipText:h}))])}),x=z=>({dom:{tag:"div",classes:["tox-form__group"]},components:z}),T=z=>Vn.parts.field({factory:bu,inputClasses:["tox-textfield"],inputBehaviours:Fe([Pt.config({disabled:()=>!t.enabled||s.isDisabled()}),Is(),uo.config({}),Jt("size-input-events",[Te(Di(),(V,Y)=>{vt(V,i,{isField1:z})}),Te(Xl(),(V,Y)=>{vt(V,$c,{name:t.name})})])]),selectOnFocus:!1}),R=z=>({dom:{tag:"label",classes:["tox-label"]},components:[Lo(s.translate(z))]}),N=gi.parts.field1(x([Vn.parts.label(R("Width")),T(!0)])),I=gi.parts.field2(x([Vn.parts.label(R("Height")),T(!1)]));return gi.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[N,I,x([R(fd),w])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(z,V,Y)=>{OE(it.getValue(z)).each(de=>{a(de).each(te=>{it.setValue(V,zz(te))})})},coupledFieldBehaviours:Fe([Pt.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:z=>{gi.getField1(z).bind(Vn.getField).each(Pt.disable),gi.getField2(z).bind(Vn.getField).each(Pt.disable),gi.getLock(z).each(Pt.disable)},onEnabled:z=>{gi.getField1(z).bind(Vn.getField).each(Pt.enable),gi.getField2(z).bind(Vn.getField).each(Pt.enable),gi.getLock(z).each(Pt.enable)}}),Is(),Jt("size-input-events2",[Te(i,(z,V)=>{const Y=V.event.isField1,de=Y?gi.getField1(z):gi.getField2(z),te=Y?gi.getField2(z):gi.getField1(z),ie=de.map(it.getValue).getOr(""),ce=te.map(it.getValue).getOr("");a=Uz(ie,ce)})])])})},Zz=(t,s,a)=>{const i=Rl.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Lo(s.translate(t.label))]}),d=Rl.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),g=Rl.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return Rl.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:t.min,maxX:t.max,getInitialValue:ae(a.getOrThunk(()=>(Math.abs(t.max)-Math.abs(t.min))/2))},components:[i,d,g],sliderBehaviours:Fe([Gi.self(),It.config({})]),onChoose:(h,w,x)=>{vt(h,$c,{name:t.name,value:x})}})},jz=(t,s)=>{const a=w=>({dom:{tag:"th",innerHtml:s.translate(w)}}),i=w=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:De(w,a)}]}),d=w=>({dom:{tag:"td",innerHtml:s.translate(w)}}),g=w=>({dom:{tag:"tr"},components:De(w,d)}),h=w=>({dom:{tag:"tbody"},components:De(w,g)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[i(t.header),h(t.cells)],behaviours:Fe([uo.config({}),It.config({})])}},H3=(t,s)=>{const a=t.label.map(z=>Pg(z,s)),i=[Pt.config({disabled:()=>t.disabled||s.isDisabled()}),Is(),yt.config({mode:"execution",useEnter:t.multiline!==!0,useControlEnter:t.multiline===!0,execute:z=>(un(z,fC),A.some(!0))}),Jt("textfield-change",[Te(fl(),(z,V)=>{vt(z,$c,{name:t.name})}),Te(Gu(),(z,V)=>{vt(z,$c,{name:t.name})})]),uo.config({})],d=t.validation.map(z=>wu.config({getRoot:V=>Ci(V.element),invalidClass:"tox-invalid",validator:{validate:V=>{const Y=it.getValue(V),de=z.validator(Y);return Tr.pure(de===!0?tn.value(Y):tn.error(de))},validateOnLoad:z.validateOnLoad}})).toArray(),g=t.placeholder.fold(ae({}),z=>({placeholder:s.translate(z)})),h=t.inputMode.fold(ae({}),z=>({inputmode:z})),w={...g,...h},x=Vn.parts.field({tag:t.multiline===!0?"textarea":"input",...t.data.map(z=>({data:z})).getOr({}),inputAttributes:w,inputClasses:[t.classname],inputBehaviours:Fe(Xt([i,d])),selectOnFocus:!1,factory:bu}),T=t.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[x]}:x,N=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),I=[Pt.config({disabled:()=>t.disabled||s.isDisabled(),onDisabled:z=>{Vn.getField(z).each(Pt.disable)},onEnabled:z=>{Vn.getField(z).each(Pt.enable)}}),Is()];return dC(a,T,N,I)},Gz=(t,s,a)=>H3({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:!t.enabled,classname:"tox-textfield",validation:A.none(),maximized:t.maximized,data:a},s),qz=(t,s,a)=>H3({name:t.name,multiline:!0,label:t.label,inputMode:A.none(),placeholder:t.placeholder,flex:!0,disabled:!t.enabled,classname:"tox-textarea",validation:A.none(),maximized:t.maximized,data:a},s),PC=(t,s)=>s.getAnimationRoot.fold(()=>t.element,a=>a(t)),Pd=t=>t.dimension.property,Vg=(t,s)=>t.dimension.getDimension(s),DE=(t,s)=>{const a=PC(t,s);Ba(a,[s.shrinkingClass,s.growingClass])},V3=(t,s)=>{Oo(t.element,s.openClass),oo(t.element,s.closedClass),qt(t.element,Pd(s),"0px"),Ul(t.element)},ME=(t,s)=>{Oo(t.element,s.closedClass),oo(t.element,s.openClass),kn(t.element,Pd(s))},i$=(t,s,a,i)=>{a.setCollapsed(),qt(t.element,Pd(s),Vg(s,t.element)),DE(t,s),V3(t,s),s.onStartShrink(t),s.onShrunk(t)},Kz=(t,s,a,i)=>{const d=i.getOrThunk(()=>Vg(s,t.element));a.setCollapsed(),qt(t.element,Pd(s),d),Ul(t.element);const g=PC(t,s);Oo(g,s.growingClass),oo(g,s.shrinkingClass),V3(t,s),s.onStartShrink(t)},zt=(t,s,a)=>{const i=Vg(s,t.element);(i==="0px"?i$:Kz)(t,s,a,A.some(i))},k0=(t,s,a)=>{const i=PC(t,s),d=Na(i,s.shrinkingClass),g=Vg(s,t.element);ME(t,s);const h=Vg(s,t.element);(d?()=>{qt(t.element,Pd(s),g),Ul(t.element)}:()=>{V3(t,s)})(),Oo(i,s.shrinkingClass),oo(i,s.growingClass),ME(t,s),qt(t.element,Pd(s),h),a.setExpanded(),s.onStartGrow(t)},l$=(t,s,a)=>{if(a.isExpanded()){kn(t.element,Pd(s));const i=Vg(s,t.element);qt(t.element,Pd(s),i)}},u$=(t,s,a)=>{a.isExpanded()||k0(t,s,a)},d$=(t,s,a)=>{a.isExpanded()&&zt(t,s,a)},f$=(t,s,a)=>{a.isExpanded()&&i$(t,s,a)},m$=(t,s,a)=>a.isExpanded(),uK=(t,s,a)=>a.isCollapsed(),O0=(t,s,a)=>{const i=PC(t,s);return Na(i,s.growingClass)===!0},g$=(t,s,a)=>{const i=PC(t,s);return Na(i,s.shrinkingClass)===!0};var Xz=Object.freeze({__proto__:null,refresh:l$,grow:u$,shrink:d$,immediateShrink:f$,hasGrown:m$,hasShrunk:uK,isGrowing:O0,isShrinking:g$,isTransitioning:(t,s,a)=>O0(t,s)||g$(t,s),toggleGrow:(t,s,a)=>{(a.isExpanded()?zt:k0)(t,s,a)},disableTransitions:DE,immediateGrow:(t,s,a)=>{a.isExpanded()||(ME(t,s),qt(t.element,Pd(s),Vg(s,t.element)),DE(t,s),a.setExpanded(),s.onStartGrow(t),s.onGrown(t))}}),p$=Object.freeze({__proto__:null,exhibit:(t,s,a)=>{const i=s.expanded;return Ma(i?{classes:[s.openClass],styles:{}}:{classes:[s.closedClass],styles:Mm(s.dimension.property,"0px")})},events:(t,s)=>Bn([Lm(wh(),(a,i)=>{i.event.raw.propertyName===t.dimension.property&&(DE(a,t),s.isExpanded()&&kn(a.element,t.dimension.property),(s.isExpanded()?t.onGrown:t.onShrunk)(a))})])}),Qz=[ke("closedClass"),ke("openClass"),ke("shrinkingClass"),ke("growingClass"),Nn("getAnimationRoot"),vn("onShrunk"),vn("onStartShrink"),vn("onGrown"),vn("onStartGrow"),me("expanded",!1),as("dimension",Ra("property",{width:[so("property","width"),so("getDimension",t=>fa(t)+"px")],height:[so("property","height"),so("getDimension",t=>_s(t)+"px")]}))],e9=Object.freeze({__proto__:null,init:t=>{const s=Et(t.expanded),a=()=>"expanded: "+s.get();return Pa({isExpanded:()=>s.get()===!0,isCollapsed:()=>s.get()===!1,setCollapsed:_n(s.set,!1),setExpanded:_n(s.set,!0),readState:a})}});const mc=Ws({fields:Qz,name:"sliding",active:p$,apis:Xz,state:e9}),b$=t=>({isEnabled:()=>!Pt.isDisabled(t),setEnabled:s=>Pt.set(t,!s),setActive:s=>{const a=t.element;s?(oo(a,"tox-tbtn--enabled"),ct(a,"aria-pressed",!0)):(Oo(a,"tox-tbtn--enabled"),Zo(a,"aria-pressed"))},isActive:()=>Na(t.element,"tox-tbtn--enabled"),setText:s=>{vt(t,qi,{text:s})},setIcon:s=>vt(t,Hg,{icon:s})}),NC=(t,s,a,i,d=!0,g)=>B3({text:t.text,icon:t.icon,tooltip:t.tooltip,ariaLabel:t.tooltip,searchable:t.search.isSome(),role:i,fetch:(h,w)=>{const x={pattern:t.search.isSome()?YH(h):""};t.fetch(T=>{w(T0(T,Tl.CLOSE_ON_EXECUTE,a,{isHorizontalMenu:!1,search:t.search}))},x,b$(h))},onSetup:t.onSetup,getApi:b$,columns:1,presets:"normal",classes:[],dropdownBehaviours:[...d?[uo.config({})]:[]]},s,a.shared,g),t9=(t,s,a)=>{const i=g=>h=>{const w=!h.isActive();h.setActive(w),g.storage.set(w),a.shared.getSink().each(x=>{s().getOpt(x).each(T=>{rc(T.element),vt(T,kd,{name:g.name,value:g.storage.get()})})})},d=g=>h=>{h.setActive(g.storage.get())};return g=>{g(De(t,h=>{const w=h.text.fold(()=>({}),x=>({text:x}));return{type:h.type,active:!1,...w,onAction:i(h),onSetup:d(h)}}))}},v$=t=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{"aria-label":t}},components:[Lo(t)]}),y$=ut("leaf-label-event-id"),z3=({leaf:t,onLeafAction:s,visible:a,treeId:i,selectedId:d,backstage:g})=>{const h=t.menu.map(x=>NC(x,"tox-mbtn",g,A.none(),a)),w=[v$(t.title)];return h.each(x=>w.push(x)),_r.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(a?["tox-tree--leaf__label--visible"]:[])},components:w,role:"treeitem",action:x=>{s(t.id),x.getSystem().broadcastOn([`update-active-item-${i}`],{value:t.id})},eventOrder:{[sc()]:[y$,"keying"]},buttonBehaviours:Fe([...a?[uo.config({})]:[],on.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),ha.config({channels:{[`update-active-item-${i}`]:{onReceive:(x,T)=>{(T.value===t.id?on.on:on.off)(x)}}}}),Jt(y$,[po((x,T)=>{d.each(R=>{(R===t.id?on.on:on.off)(x)})}),Te(sc(),(x,T)=>{const R=T.event.raw.code==="ArrowLeft",N=T.event.raw.code==="ArrowRight";R?(su(x.element,".tox-tree--directory").each(I=>{x.getSystem().getByDom(I).each(z=>{fy(I,".tox-tree--directory__label").each(V=>{z.getSystem().getByDom(V).each(It.focus)})})}),T.stop()):N&&T.stop()})])])})},C$=(t,s,a)=>Wi(t,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"],behaviours:a},s),n9=(t,s)=>C$(t,s,[]),w$=ut("directory-label-event-id"),o9=({directory:t,visible:s,noChildren:a,backstage:i})=>{const d=t.menu.map(w=>NC(w,"tox-mbtn",i,A.none())),g=[{dom:{tag:"div",classes:["tox-chevron"]},components:[n9("chevron-right",i.shared.providers.icons)]},v$(t.title)];d.each(w=>{g.push(w)});const h=w=>{su(w.element,".tox-tree--directory").each(x=>{w.getSystem().getByDom(x).each(T=>{const R=!on.isOn(T);on.toggle(T),vt(w,"expand-tree-node",{expanded:R,node:t.id})})})};return _r.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(s?["tox-tree--directory__label--visible"]:[])},components:g,action:h,eventOrder:{[sc()]:[w$,"keying"]},buttonBehaviours:Fe([...s?[uo.config({})]:[],Jt(w$,[Te(sc(),(w,x)=>{const T=x.event.raw.code==="ArrowRight",R=x.event.raw.code==="ArrowLeft";T&&a&&x.stop(),(T||R)&&su(w.element,".tox-tree--directory").each(N=>{w.getSystem().getByDom(N).each(I=>{!on.isOn(I)&&T||on.isOn(I)&&R?(h(w),x.stop()):R&&!on.isOn(I)&&(su(I.element,".tox-tree--directory").each(z=>{fy(z,".tox-tree--directory__label").each(V=>{I.getSystem().getByDom(V).each(It.focus)})}),x.stop())})})})])])})},s9=({children:t,onLeafAction:s,visible:a,treeId:i,expandedIds:d,selectedId:g,backstage:h})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:t.map(w=>w.type==="leaf"?z3({leaf:w,selectedId:g,onLeafAction:s,visible:a,treeId:i,backstage:h}):U3({directory:w,expandedIds:d,selectedId:g,onLeafAction:s,labelTabstopping:a,treeId:i,backstage:h})),behaviours:Fe([mc.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:a}),Vt.config({})])}),r9=ut("directory-event-id"),U3=({directory:t,onLeafAction:s,labelTabstopping:a,treeId:i,backstage:d,expandedIds:g,selectedId:h})=>{const{children:w}=t,x=Et(g),T=N=>w.map(I=>I.type==="leaf"?z3({leaf:I,selectedId:h,onLeafAction:s,visible:N,treeId:i,backstage:d}):U3({directory:I,expandedIds:x.get(),selectedId:h,onLeafAction:s,labelTabstopping:N,treeId:i,backstage:d})),R=g.includes(t.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[o9({directory:t,visible:a,noChildren:t.children.length===0,backstage:d}),s9({children:w,expandedIds:g,selectedId:h,onLeafAction:s,visible:R,treeId:i,backstage:d})],behaviours:Fe([Jt(r9,[po((N,I)=>{on.set(N,R)}),Te("expand-tree-node",(N,I)=>{const{expanded:z,node:V}=I.event;x.set(z?[...x.get(),V]:x.get().filter(Y=>Y!==V))})]),on.config({...t.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(N,I)=>{const z=N.components()[1],V=T(I);I?mc.grow(z):mc.shrink(z),Vt.set(z,V)}})])}},a9=ut("tree-event-id"),c9=(t,s)=>{const a=t.onLeafAction.getOr(ee),i=t.onToggleExpand.getOr(ee),d=t.defaultExpandedIds,g=Et(d),h=Et(t.defaultSelectedId),w=ut("tree-id"),x=(T,R)=>t.items.map(N=>N.type==="leaf"?z3({leaf:N,selectedId:T,onLeafAction:a,visible:!0,treeId:w,backstage:s}):U3({directory:N,selectedId:T,onLeafAction:a,expandedIds:R,labelTabstopping:!0,treeId:w,backstage:s}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:x(h.get(),g.get()),behaviours:Fe([yt.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),Jt(a9,[Te("expand-tree-node",(T,R)=>{const{expanded:N,node:I}=R.event;g.set(N?[...g.get(),I]:g.get().filter(z=>z!==I)),i(g.get(),{expanded:N,node:I})})]),ha.config({channels:{[`update-active-item-${w}`]:{onReceive:(T,R)=>{h.set(A.some(R.value)),Vt.set(T,x(A.some(R.value),g.get()))}}}}),Vt.config({})])}};var i9=Object.freeze({__proto__:null,events:(t,s)=>{const i=t.stream.streams.setup(t,s);return Bn([Te(t.event,i),gl(()=>s.cancel())].concat(t.cancelEvent.map(d=>[Te(d,()=>s.cancel())]).getOr([])))}});const S$=t=>{const s=Et(null);return Pa({readState:()=>({timer:s.get()!==null?"set":"unset"}),setTimer:g=>{s.set(g)},cancel:()=>{const g=s.get();g!==null&&g.cancel()}})};var u9=Object.freeze({__proto__:null,throttle:S$,init:t=>t.stream.streams.state(t)});const d9=(t,s)=>{const a=t.stream,i=E3(t.onStream,a.delay);return s.setTimer(i),(d,g)=>{i.throttle(d,g),a.stopEvent&&g.stop()}};var f9=[as("stream",Ra("mode",{throttle:[ke("delay"),me("stopEvent",!0),so("streams",{setup:d9,state:S$})]})),me("event","input"),Nn("cancelEvent"),kc("onStream")];const W3=Ws({fields:f9,name:"streaming",active:i9,state:u9}),PE=(t,s,a)=>{const i=it.getValue(a);it.setValue(s,i),Z3(s)},x$=(t,s)=>{const a=t.element,i=he(a),d=a.dom;Fo(a,"type")!=="number"&&s(d,i)},Z3=t=>{x$(t,(s,a)=>s.setSelectionRange(a.length,a.length))},m9=(t,s)=>{x$(t,(a,i)=>a.setSelectionRange(s,i.length))},_$=(t,s,a)=>{if(t.selectsOver){const i=it.getValue(s),d=t.getDisplayText(i),g=it.getValue(a);return t.getDisplayText(g).indexOf(d)===0?A.some(()=>{PE(t,s,a),m9(s,d.length)}):A.none()}else return A.none()},j3=ae("alloy.typeahead.itemexecute"),E$=(t,s,a,i)=>{const d=(N,I,z)=>{t.previewing.set(!1);const V=Yo.getCoupled(N,"sandbox");if(wn.isOpen(V))yn.getCurrent(V).each(Y=>{Je.getHighlighted(Y).fold(()=>{z(Y)},()=>{Ah(V,Y.element,"keydown",I)})});else{const Y=de=>{yn.getCurrent(de).each(z)};p0(t,h(N),N,V,i,Y,ra.HighlightMenuAndItem).get(ee)}},g=wN(t),h=N=>I=>I.map(z=>{const V=tv(z.menus),Y=we(V,te=>fo(te.items,ie=>ie.type==="item"));return it.getState(N).update(De(Y,te=>te.data)),z}),w=N=>yn.getCurrent(N),x="typeaheadevents",T=[It.config({}),it.config({onSetValue:t.onSetValue,store:{mode:"dataset",getDataKey:N=>he(N.element),getFallbackEntry:N=>({value:N,meta:{}}),setValue:(N,I)=>{yl(N.element,t.model.getDisplayText(I))},...t.initialData.map(N=>Mm("initialValue",N)).getOr({})}}),W3.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:(N,I)=>{const z=Yo.getCoupled(N,"sandbox");if(It.isFocused(N)&&he(N.element).length>=t.minChars){const Y=w(z).bind(te=>Je.getHighlighted(te).map(it.getValue));t.previewing.set(!0);const de=te=>{w(z).each(ie=>{Y.fold(()=>{t.model.selectsOver&&Je.highlightFirst(ie)},ce=>{Je.highlightBy(ie,_e=>it.getValue(_e).value===ce.value),Je.getHighlighted(ie).orThunk(()=>(Je.highlightFirst(ie),A.none()))})})};p0(t,h(N),N,z,i,de,ra.HighlightJustMenu).get(ee)}},cancelEvent:R1()}),yt.config({mode:"special",onDown:(N,I)=>(d(N,I,Je.highlightFirst),A.some(!0)),onEscape:N=>{const I=Yo.getCoupled(N,"sandbox");return wn.isOpen(I)?(wn.close(I),A.some(!0)):A.none()},onUp:(N,I)=>(d(N,I,Je.highlightLast),A.some(!0)),onEnter:N=>{const I=Yo.getCoupled(N,"sandbox"),z=wn.isOpen(I);if(z&&!t.previewing.get())return w(I).bind(V=>Je.getHighlighted(V)).map(V=>(vt(N,j3(),{item:V}),!0));{const V=it.getValue(N);return un(N,R1()),t.onExecute(I,N,V),z&&wn.close(I),A.some(!0)}}}),on.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),Yo.config({others:{sandbox:N=>jA(t,N,{onOpen:()=>on.on(N),onClose:()=>{t.lazyTypeaheadComp.get().each(I=>Zo(I.element,"aria-activedescendant")),on.off(N)}})}}),Jt(x,[po(N=>{t.lazyTypeaheadComp.set(A.some(N))}),gl(N=>{t.lazyTypeaheadComp.set(A.none())}),ni(N=>{const I=ee;UA(t,h(N),N,i,I,ra.HighlightMenuAndItem).get(ee)}),Te(j3(),(N,I)=>{const z=Yo.getCoupled(N,"sandbox");PE(t.model,N,I.event.item),un(N,R1()),t.onItemExecute(N,z,I.event.item,it.getValue(N)),wn.close(z),Z3(N)})].concat(t.dismissOnBlur?[Te(Jl(),N=>{const I=Yo.getCoupled(N,"sandbox");Qr(I.element).isNone()&&wn.close(I)})]:[]))],R={[ti()]:[it.name(),W3.name(),x],...t.eventOrder};return{uid:t.uid,dom:SN(Po(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...g,...$s(t.typeaheadBehaviours,T)},eventOrder:R}},T$=ae([Nn("lazySink"),ke("fetch"),me("minChars",5),me("responseTime",1e3),vn("onOpen"),me("getHotspot",A.some),me("getAnchorOverrides",ae({})),me("layouts",A.none()),me("eventOrder",{}),Ov("model",{},[me("getDisplayText",t=>t.meta!==void 0&&t.meta.text!==void 0?t.meta.text:t.value),me("selectsOver",!0),me("populateFromBrowse",!0)]),vn("onSetValue"),Xr("onExecute"),vn("onItemExecute"),me("inputClasses",[]),me("inputAttributes",{}),me("inputStyles",{}),me("matchWidth",!0),me("useMinWidth",!1),me("dismissOnBlur",!0),bl(["openClass"]),Nn("initialData"),Bs("typeaheadBehaviours",[It,it,W3,yt,on,Yo]),rr("lazyTypeaheadComp",()=>Et(A.none)),rr("previewing",()=>Et(!0))].concat(CN()).concat(nE())),G3=ae([Dc({schema:[Sf()],name:"menu",overrides:t=>({fakeFocus:!0,onHighlightItem:(s,a,i)=>{t.previewing.get()?t.lazyTypeaheadComp.get().each(d=>{_$(t.model,d,i).fold(()=>{t.model.selectsOver?(Je.dehighlight(a,i),t.previewing.set(!0)):t.previewing.set(!1)},g=>{g(),t.previewing.set(!1)})}):t.lazyTypeaheadComp.get().each(d=>{t.model.populateFromBrowse&&PE(t.model,d,i),tr(i.element,"id").each(g=>ct(d.element,"aria-activedescendant",g))})},onExecute:(s,a)=>t.lazyTypeaheadComp.get().map(i=>(vt(i,j3(),{item:a}),!0)),onHover:(s,a)=>{t.previewing.set(!1),t.lazyTypeaheadComp.get().each(i=>{t.model.populateFromBrowse&&PE(t.model,i,a)})}})})]),g9=Vr({name:"Typeahead",configFields:T$(),partFields:G3(),factory:E$}),Ki=t=>({...t,toCached:()=>Ki(t.toCached()),bindFuture:x=>Ki(t.bind(T=>T.fold(R=>Tr.pure(tn.error(R)),R=>x(R)))),bindResult:x=>Ki(t.map(T=>T.bind(x))),mapResult:x=>Ki(t.map(T=>T.map(x))),mapError:x=>Ki(t.map(T=>T.mapError(x))),foldResult:(x,T)=>t.map(R=>R.fold(x,T)),withTimeout:(x,T)=>Ki(Tr.nu(R=>{let N=!1;const I=setTimeout(()=>{N=!0,R(tn.error(T()))},x);t.get(z=>{N||(clearTimeout(I),R(z))})}))}),q3=t=>Ki(Tr.nu(t)),k$=t=>Ki(Tr.pure(tn.value(t))),NE={nu:q3,wrap:Ki,pure:k$,value:k$,error:t=>Ki(Tr.pure(tn.error(t))),fromResult:t=>Ki(Tr.pure(t)),fromFuture:t=>Ki(t.map(tn.value)),fromPromise:t=>q3(s=>{t.then(a=>{s(tn.value(a))},a=>{s(tn.error(a))})})},Ip=(t,s,a=[],i,d,g,h)=>{const w=s.fold(()=>({}),R=>({action:R})),x={buttonBehaviours:Fe([Ys.button(()=>!t.enabled||h.isDisabled()),Is(),uo.config({}),...g.map(R=>Er.config(h.tooltips.getConfig({tooltipText:h.translate(R)}))).toArray(),Jt("button press",[Im("click"),Im("mousedown")])].concat(a)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...w},T=Po(x,{dom:i});return Po(T,{components:d})},p9=(t,s,a,i=[],d)=>{const g=t.tooltip.map(T=>({"aria-label":a.translate(T)})).getOr({}),h={tag:"button",classes:["tox-tbtn"],attributes:{...g,"data-mce-name":d}},w=t.icon.map(T=>TE(T,a.icons)),x=Ap([w]);return Ip(t,s,i,h,x,t.tooltip,a)},BC=t=>{switch(t){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},O$=(t,s,a,i=[],d=[])=>{const g=a.translate(t.text),h=t.icon.map(z=>TE(z,a.icons)),w=[h.getOrThunk(()=>Lo(g))],x=t.buttonType.getOr(!t.primary&&!t.borderless?"secondary":"primary"),N={tag:"button",classes:[...BC(x),...h.isSome()?["tox-button--icon"]:[],...t.borderless?["tox-button--naked"]:[],...d],attributes:{"aria-label":g,"data-mce-name":t.text}},I=t.icon.map(ae(g));return Ip(t,s,i,N,w,I,a)},BE=(t,s,a,i=[],d=[])=>{const g=O$(t,A.some(s),a,i,d);return _r.sketch(g)},K3=(t,s)=>a=>{s==="custom"?vt(a,kd,{name:t,value:{}}):s==="submit"?un(a,fC):s==="cancel"?un(a,Qf):console.error("Unknown button type: ",s)},Y3=(t,s)=>s==="menu",b9=(t,s)=>s==="custom"||s==="cancel"||s==="submit",v9=(t,s)=>s==="togglebutton",A$=(t,s,a)=>{var i,d;const g=t.icon.map(ce=>Lg(ce,s.icons)).map(Pn),h=ce=>{vt(ce,kd,{name:t.name,value:{setIcon:_e=>{g.map(Se=>Se.getOpt(ce).each(Le=>{Vt.set(Le,[Lg(_e,s.icons)])}))}}})},w=t.buttonType.getOr(t.primary?"primary":"secondary"),x={...t,name:(i=t.name)!==null&&i!==void 0?i:"",primary:w==="primary",tooltip:t.tooltip,enabled:(d=t.enabled)!==null&&d!==void 0?d:!1,borderless:!1},T=x.tooltip.or(t.text).map(ce=>({"aria-label":s.translate(ce)})).getOr({}),R=BC(w??"secondary"),N=t.icon.isSome()&&t.text.isSome(),I={tag:"button",classes:[...R.concat(t.icon.isSome()?["tox-button--icon"]:[]),...t.active?["tox-button--enabled"]:[],...N?["tox-button--icon-and-text"]:[]],attributes:{...T,...Rt(a)?{"data-mce-name":a}:{}}},z=[],V=s.translate(t.text.getOr("")),Y=Lo(V),te=[...Ap([g.map(ce=>ce.asSpec())]),...t.text.isSome()?[Y]:[]],ie=Ip(x,A.some(h),z,I,te,t.tooltip,s);return _r.sketch(ie)},$E=(t,s,a)=>{if(Y3(t,s)){const i=()=>h,d=t,g={...t,type:"menubutton",search:A.none(),onSetup:w=>(w.setEnabled(t.enabled),ee),fetch:t9(d.items,i,a)},h=Pn(NC(g,"tox-tbtn",a,A.none(),!0,t.text.or(t.tooltip).getOrUndefined()));return h.asSpec()}else if(b9(t,s)){const i=K3(t.name,s),d={...t,borderless:!1};return BE(d,i,a.shared.providers,[])}else{if(v9(t,s))return A$(t,a.shared.providers,t.text.or(t.tooltip).getOrUndefined());throw console.error("Unknown footer button type: ",s),new Error("Unknown footer button type")}},y9=(t,s)=>{const a=K3(t.name,"custom");return YB(A.none(),Vn.parts.field({factory:_r,...O$(t,A.some(a),s,[wE(""),Gi.self()])}))},X3={type:"separator"},C9=t=>({type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:ee}),J3=(t,s)=>({type:"menuitem",value:s,text:t,meta:{attach:void 0},onAction:ee}),R$=t=>De(t,C9),D$=(t,s)=>fo(s,a=>a.type===t),M$=(t,s)=>R$(D$(t,s)),w9=t=>M$("header",t.targets),S9=t=>M$("anchor",t.targets),x9=t=>A.from(t.anchorTop).map(s=>J3("<top>",s)).toArray(),P$=t=>A.from(t.anchorBottom).map(s=>J3("<bottom>",s)).toArray(),xu=t=>De(t,s=>J3(s,s)),Q3=t=>bo(t,(s,a)=>s.length===0||a.length===0?s.concat(a):s.concat(X3,a),[]),eR=(t,s)=>{const a=t.toLowerCase();return fo(s,i=>{var d;const g=i.meta!==void 0&&i.meta.text!==void 0?i.meta.text:i.text,h=(d=i.value)!==null&&d!==void 0?d:"";return Mr(g.toLowerCase(),a)||Mr(h.toLowerCase(),a)})},_9=(t,s,a)=>{var i,d;const g=it.getValue(s),h=(d=(i=g==null?void 0:g.meta)===null||i===void 0?void 0:i.text)!==null&&d!==void 0?d:g.value;return a.getLinkInformation().fold(()=>[],x=>{const T=eR(h,xu(a.getHistory(t)));return t==="file"?Q3([T,eR(h,w9(x)),eR(h,Xt([x9(x),S9(x),P$(x)]))]):T})},N$=ut("aria-invalid"),E9=(t,s,a,i)=>{const d=s.shared.providers,g=ie=>{const ce=it.getValue(ie);a.addToHistory(ce.value,t.filetype)},h={...i.map(ie=>({initialData:ie})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":N$,type:"url"},minChars:0,responseTime:0,fetch:ie=>{const ce=_9(t.filetype,ie,a),_e=T0(ce,Tl.BUBBLE_TO_SANDBOX,s,{isHorizontalMenu:!1,search:A.none()});return Tr.pure(_e)},getHotspot:ie=>V.getOpt(ie),onSetValue:(ie,ce)=>{ie.hasConfigured(wu)&&wu.run(ie).get(ee)},typeaheadBehaviours:Fe([...a.getValidationHandler().map(ie=>wu.config({getRoot:ce=>Ci(ce.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(ce,_e)=>{R.getOpt(ce).each(Se=>{ct(Se.element,"title",d.translate(_e))})}},validator:{validate:ce=>{const _e=it.getValue(ce);return NE.nu(Se=>{ie({type:t.filetype,url:_e.value},Le=>{if(Le.status==="invalid"){const Ie=tn.error(Le.message);Se(Ie)}else{const Ie=tn.value(Le.message);Se(Ie)}})})},validateOnLoad:!1}})).toArray(),Pt.config({disabled:()=>!t.enabled||d.isDisabled()}),uo.config({}),Jt("urlinput-events",[Te(fl(),ie=>{const ce=he(ie.element),_e=ce.trim();_e!==ce&&yl(ie.element,_e),t.filetype==="file"&&vt(ie,$c,{name:t.name})}),Te(Xl(),ie=>{vt(ie,$c,{name:t.name}),g(ie)}),Te(Gu(),ie=>{vt(ie,$c,{name:t.name}),g(ie)})])]),eventOrder:{[fl()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:ie=>ie.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:s.shared.getSink,parts:{menu:G2(!1,1,"normal")},onExecute:(ie,ce,_e)=>{vt(ce,fC,{})},onItemExecute:(ie,ce,_e,Se)=>{g(ie),vt(ie,$c,{name:t.name})}},w=Vn.parts.field({...h,factory:g9}),x=t.label.map(ie=>Pg(ie,d)),R=Pn(((ie,ce,_e=ie,Se=ie)=>Wi(_e,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+ie],attributes:{title:d.translate(Se),"aria-live":"polite",...ce.fold(()=>({}),Le=>({id:Le}))}},d.icons))("invalid",A.some(N$),"warning")),N=Pn({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[R.asSpec()]}),I=a.getUrlPicker(t.filetype),z=ut("browser.url.event"),V=Pn({dom:{tag:"div",classes:["tox-control-wrap"]},components:[w,N.asSpec()],behaviours:Fe([Pt.config({disabled:()=>!t.enabled||d.isDisabled()})])}),Y=Pn(BE({name:t.name,icon:A.some("browse"),text:t.picker_text.or(t.label).getOr(""),enabled:t.enabled,primary:!1,buttonType:A.none(),borderless:!0},ie=>un(ie,z),d,[],["tox-browse-url"])),de=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:Xt([[V.asSpec()],I.map(()=>Y.asSpec()).toArray()])}),te=ie=>{yn.getCurrent(ie).each(ce=>{const _e=it.getValue(ce),Se={fieldname:t.name,..._e};I.each(Le=>{Le(Se).get(Ie=>{it.setValue(ce,Ie),vt(ie,$c,{name:t.name})})})})};return Vn.sketch({dom:gV(),components:x.toArray().concat([de()]),fieldBehaviours:Fe([Pt.config({disabled:()=>!t.enabled||d.isDisabled(),onDisabled:ie=>{Vn.getField(ie).each(Pt.disable),Y.getOpt(ie).each(Pt.disable)},onEnabled:ie=>{Vn.getField(ie).each(Pt.enable),Y.getOpt(ie).each(Pt.enable)}}),Is(),Jt("url-input-events",[Te(z,te)])])})},T9=(t,s)=>{const a=WO(t.icon,s.icons);return Cu.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:t.url?void 0:a},components:t.url?[_r.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:a,attributes:{title:s.translate(t.iconTooltip)}},action:i=>vt(i,kd,{name:"alert-banner",value:t.url}),buttonBehaviours:Fe([ZO()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:s.translate(t.text)}}]})},B$=(t,s)=>{t.dom.checked=s},$$=t=>t.dom.checked,bK=(t,s,a)=>{const i=x=>(x.element.dom.click(),A.some(!0)),d=Vn.parts.field({factory:{sketch:bn},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:Fe([Gi.self(),Pt.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:x=>{Ci(x.element).each(T=>oo(T,"tox-checkbox--disabled"))},onEnabled:x=>{Ci(x.element).each(T=>Oo(T,"tox-checkbox--disabled"))}}),uo.config({}),It.config({}),RC(a,$$,B$),yt.config({mode:"special",onEnter:i,onSpace:i,stopSpaceKeyup:!0}),Jt("checkbox-events",[Te(Xl(),(x,T)=>{vt(x,$c,{name:t.name})})])])}),g=Vn.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[Lo(s.translate(t.label))],behaviours:Fe([S0.config({})])}),h=x=>Wi(x==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+x]},s.icons),w=Pn({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[h("checked"),h("unchecked")]});return Vn.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[d,w.asSpec(),g],fieldBehaviours:Fe([Pt.config({disabled:()=>!t.enabled||s.isDisabled()}),Is()])})},vK=(t,s)=>t.presets==="presentation"?Cu.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html},containerBehaviours:Fe([Er.config({...s.tooltips.getConfig({tooltipText:"",onShow:a=>{$n(a.element,"[data-mce-tooltip]:hover").orThunk(()=>Qr(a.element)).each(i=>{tr(i,"data-mce-tooltip").each(d=>{Er.setComponents(a,s.tooltips.getComponents({tooltipText:d}))})})}}),mode:"children-normal",anchor:a=>({type:"node",node:$n(a.element,"[data-mce-tooltip]:hover").orThunk(()=>Qr(a.element).filter(i=>tr(i,"data-mce-tooltip").isSome())),root:a.element,layouts:{onLtr:ae([is,Os,bs,vs,cs,Zn]),onRtl:ae([is,Os,bs,vs,cs,Zn])},bubble:si(0,-2,{})})})])}):Cu.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:Fe([uo.config({}),It.config({})])}),zn=t=>(s,a,i,d)=>lt(a,"name").fold(()=>t(a,d,A.none()),g=>s.field(g,t(a,d,lt(i,g)))),tR=t=>(s,a,i,d)=>{const g=Po(a,{source:"dynamic"});return zn(t)(s,g,i,d)},k9={bar:zn((t,s)=>lV(t,s.shared)),collection:zn((t,s,a)=>w0(t,s.shared.providers,a)),alertbanner:zn((t,s)=>T9(t,s.shared.providers)),input:zn((t,s,a)=>Gz(t,s.shared.providers,a)),textarea:zn((t,s,a)=>qz(t,s.shared.providers,a)),label:zn((t,s)=>q5(t,s.shared)),iframe:tR((t,s,a)=>P3(t,s.shared.providers,a)),button:zn((t,s)=>y9(t,s.shared.providers)),checkbox:zn((t,s,a)=>bK(t,s.shared.providers,a)),colorinput:zn((t,s,a)=>xV(t,s.shared,s.colorinput,a)),colorpicker:zn((t,s,a)=>Cz(t,s.shared.providers,a)),dropzone:zn((t,s,a)=>_z(t,s.shared.providers,a)),grid:zn((t,s)=>Ez(t,s.shared)),listbox:zn((t,s,a)=>$z(t,s,a)),selectbox:zn((t,s,a)=>r$(t,s.shared.providers,a)),sizeinput:zn((t,s)=>Wz(t,s.shared.providers)),slider:zn((t,s,a)=>Zz(t,s.shared.providers,a)),urlinput:zn((t,s,a)=>E9(t,s,s.urlinput,a)),customeditor:zn(Sz),htmlpanel:zn((t,s)=>vK(t,s.shared.providers)),imagepreview:zn((t,s,a)=>G5(t,a)),table:zn((t,s)=>jz(t,s.shared.providers)),tree:zn((t,s)=>c9(t,s)),panel:zn((t,s)=>s$(t,s))},IE={field:(t,s)=>s,record:ae([])},I$=(t,s,a,i)=>{const d=Po(i,{shared:{interpreter:g=>nR(t,g,a,d)}});return nR(t,s,a,d)},nR=(t,s,a,i)=>lt(k9,s.type).fold(()=>(console.error(`Unknown factory type "${s.type}", defaulting to container: `,s),s),d=>d(t,s,a,i)),F$=(t,s,a)=>nR(IE,t,s,a),zg="layout-inset",oR=t=>t.x,L$=(t,s)=>t.x+t.width/2-s.width/2,sR=(t,s)=>t.x+t.width-s.width,rR=t=>t.y,FE=(t,s)=>t.y+t.height-s.height,$C=(t,s)=>t.y+t.height/2-s.height/2,LE=(t,s,a)=>js(sR(t,s),FE(t,s),a.insetSouthwest(),py(),"southwest",Gs(t,{right:0,bottom:3}),zg),IC=(t,s,a)=>js(oR(t),FE(t,s),a.insetSoutheast(),hy(),"southeast",Gs(t,{left:1,bottom:3}),zg),FC=(t,s,a)=>js(sR(t,s),rR(t),a.insetNorthwest(),gy(),"northwest",Gs(t,{right:0,top:2}),zg),A0=(t,s,a)=>js(oR(t),rR(t),a.insetNortheast(),og(),"northeast",Gs(t,{left:1,top:2}),zg),Dl=(t,s,a)=>js(L$(t,s),rR(t),a.insetNorth(),by(),"north",Gs(t,{top:2}),zg),LC=(t,s,a)=>js(L$(t,s),FE(t,s),a.insetSouth(),ft(),"south",Gs(t,{bottom:3}),zg),aR=(t,s,a)=>js(sR(t,s),$C(t,s),a.insetEast(),vy(),"east",Gs(t,{right:0}),zg),O9=(t,s,a)=>js(oR(t),$C(t,s),a.insetWest(),Zh(),"west",Gs(t,{left:1}),zg),yK=t=>{switch(t){case"north":return Dl;case"northeast":return A0;case"northwest":return FC;case"south":return LC;case"southeast":return IC;case"southwest":return LE;case"east":return aR;case"west":return O9}},H$=(t,s,a,i,d)=>WS(i).map(yK).getOr(Dl)(t,s,a,i,d),A9=t=>{switch(t){case"north":return LC;case"northeast":return IC;case"northwest":return LE;case"south":return Dl;case"southeast":return A0;case"southwest":return FC;case"east":return O9;case"west":return aR}},R9=(t,s,a,i,d)=>WS(i).map(A9).getOr(Dl)(t,s,a,i,d),R0={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},cR=(t,s,a)=>{const d={maxHeightFunction:rg()},g=()=>({type:"node",root:Zc(Eo(t())),node:A.from(t()),bubble:si(12,12,R0),layouts:{onRtl:()=>[A0],onLtr:()=>[FC]},overrides:d}),h=()=>({type:"hotspot",hotspot:s(),bubble:si(-12,12,R0),layouts:{onRtl:()=>[bs,cs,is],onLtr:()=>[cs,bs,is]},overrides:d});return()=>a()?g():h()},D9=(t,s,a,i)=>{const g={maxHeightFunction:rg()},h=()=>({type:"node",root:Zc(Eo(s())),node:A.from(s()),bubble:si(12,12,R0),layouts:{onRtl:()=>[Dl],onLtr:()=>[Dl]},overrides:g}),w=()=>t?{type:"node",root:Zc(Eo(s())),node:A.from(s()),bubble:si(0,-Pu(s()),R0),layouts:{onRtl:()=>[Os],onLtr:()=>[Os]},overrides:g}:{type:"hotspot",hotspot:a(),bubble:si(0,0,R0),layouts:{onRtl:()=>[Os],onLtr:()=>[Os]},overrides:g};return()=>i()?h():w()},M9=(t,s,a)=>{const i=()=>({type:"node",root:Zc(Eo(t())),node:A.from(t()),layouts:{onRtl:()=>[Dl],onLtr:()=>[Dl]}}),d=()=>({type:"hotspot",hotspot:s(),layouts:{onRtl:()=>[is],onLtr:()=>[is]}});return()=>a()?i():d()},V$=(t,s)=>()=>({type:"selection",root:s(),getSelection:()=>{const a=t.selection.getRng(),i=t.model.table.getSelectedCells();if(i.length>1){const d=i[0],g=i[i.length-1],h={firstCell:le.fromDom(d),lastCell:le.fromDom(g)};return A.some(h)}return A.some(lg.range(le.fromDom(a.startContainer),a.startOffset,le.fromDom(a.endContainer),a.endOffset))}}),P9=t=>s=>({type:"node",root:t(),node:s}),N9=(t,s,a,i)=>{const d=s0(t),g=()=>le.fromDom(t.getBody()),h=()=>le.fromDom(t.getContentAreaContainer()),w=()=>d||!i();return{inlineDialog:cR(h,s,w),inlineBottomDialog:D9(t.inline,h,a,w),banner:M9(h,s,w),cursor:V$(t,g),node:P9(g)}},B9=t=>(s,a)=>{AB(t)(s,a)},$9=t=>()=>CB(t),iR=t=>s=>eE(t,s),z$=t=>s=>yB(t,s),I9=t=>({colorPicker:B9(t),hasCustomColors:$9(t),getColors:iR(t),getColorCols:z$(t)}),F9=t=>()=>NO(t),L9=t=>({isDraggableModal:F9(t)}),H9=t=>{const s=Et(m_(t)?"bottom":"top");return{isPositionedAtTop:()=>s.get()==="top",getDockingMode:s.get,setDockingMode:s.set}},lR=t=>yc(t,"items"),U$=t=>yc(t,"format"),HC=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],V9=t=>Ln(t,"items"),HE=t=>Ln(t,"block"),z9=t=>Ln(t,"inline"),uR=t=>Ln(t,"selector"),D0=t=>bo(t,(s,a)=>{if(V9(a)){const i=D0(a.items);return{customFormats:s.customFormats.concat(i.customFormats),formats:s.formats.concat([{title:a.title,items:i.formats}])}}else if(z9(a)||HE(a)||uR(a)){const d=`custom-${J(a.name)?a.name:a.title.toLowerCase()}`;return{customFormats:s.customFormats.concat([{name:d,format:a}]),formats:s.formats.concat([{title:a.title,format:d,icon:a.icon}])}}else return{...s,formats:s.formats.concat(a)}},{customFormats:[],formats:[]}),W$=(t,s)=>{const a=D0(s),i=d=>{dt(d,g=>{t.formatter.has(g.name)||t.formatter.register(g.name,g.format)})};return t.formatter?i(a.customFormats):t.on("init",()=>{i(a.customFormats)}),a.formats},Z$=t=>AO(t).map(s=>{const a=W$(t,s);return RO(t)?HC.concat(a):a}).getOr(HC),j$=t=>{const s=$o(t);return s.length===1&&Uo(s,"title")},dR=(t,s,a)=>({...t,type:"formatter",isSelected:s(t.format),getStylePreview:a(t.format)}),fR=(t,s,a,i)=>{const d=x=>dR(x,a,i),g=x=>{const T=w(x.items);return{...x,type:"submenu",getStyleItems:ae(T)}},h=x=>{const T=J(x.name)?x.name:ut(x.title),R=`custom-${T}`,N={...x,type:"formatter",format:R,isSelected:a(R),getStylePreview:i(R)};return t.formatter.register(T,N),N},w=x=>De(x,T=>lR(T)?g(T):U$(T)?d(T):j$(T)?{...T,type:"separator"}:h(T));return w(s)},U9=t=>{const s=w=>()=>t.formatter.match(w),a=w=>()=>{const x=t.formatter.get(w);return x!==void 0?A.some({tag:x.length>0&&(x[0].inline||x[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(w))}):A.none()},i=Et([]),d=Et([]),g=Et(!1);return t.on("PreInit",w=>{const x=Z$(t),T=fR(t,x,s,a);i.set(T)}),t.on("addStyleModifications",w=>{const x=fR(t,w.items,s,a);d.set(x),g.set(w.replace)}),{getData:()=>{const w=g.get()?[]:i.get(),x=d.get();return w.concat(x)}}},mR=t=>{let i=0;const d=()=>i>0,g=w=>[{dom:{tag:"div",classes:["tox-tooltip__body"]},components:[Lo(w.tooltipText)]}];return{getConfig:w=>({delayForShow:()=>d()?60:300,delayForHide:ae(300),exclusive:!0,lazySink:t,tooltipDom:{tag:"div",classes:["tox-tooltip","tox-tooltip--up"]},tooltipComponents:g(w),onShow:(x,T)=>{i++,w.onShow&&w.onShow(x,T)},onHide:()=>{i--}}),getComponents:g}},VE=t=>Rt(t)&&t.nodeType===1,W9=Md.trim,G$=t=>s=>!!(VE(s)&&(s.contentEditable===t||s.getAttribute("data-mce-contenteditable")===t)),M0=G$("true"),q$=G$("false"),K$=(t,s,a,i,d)=>({type:t,title:s,url:a,level:i,attach:d}),Y$=t=>{let s=t;for(;s=s.parentNode;){const a=s.contentEditable;if(a&&a!=="inherit")return M0(s)}return!1},gR=(t,s)=>De(xr(le.fromDom(s),t),a=>a.dom),zE=t=>t.innerText||t.textContent,Z9=t=>t.id?t.id:ut("h"),j9=t=>t&&t.nodeName==="A"&&(t.id||t.name)!==void 0,G9=t=>j9(t)&&X$(t),UE=t=>t&&/^(H[1-6])$/.test(t.nodeName),X$=t=>Y$(t)&&!q$(t),q9=t=>UE(t)&&X$(t),K9=t=>UE(t)?parseInt(t.nodeName.substr(1),10):0,Y9=t=>{var s;const a=Z9(t),i=()=>{t.id=a};return K$("header",(s=zE(t))!==null&&s!==void 0?s:"","#"+a,K9(t),i)},X9=t=>{const s=t.id||t.name,a=zE(t);return K$("anchor",a||"#"+s,"#"+s,0,ee)},J9=t=>De(fo(t,q9),Y9),Q9=t=>De(fo(t,G9),X9),J$=t=>gR("h1,h2,h3,h4,h5,h6,a:not([href])",t),eU=t=>W9(t.title).length>0,tU={find:t=>{const s=J$(t);return fo(J9(s).concat(Q9(s)),eU)}},ZE="tinymce-url-history",jE=5,hR=t=>J(t)&&/^https?/.test(t),nU=t=>qe(t)&&t.length<=jE&&Ou(t,hR),Q$=t=>ye(t)&&Wr(t,s=>!nU(s)).isNone(),eI=()=>{const t=Pp.getItem(ZE);if(t===null)return{};let s;try{s=JSON.parse(t)}catch(a){if(a instanceof SyntaxError)return console.log("Local storage "+ZE+" was not valid JSON",a),{};throw a}return Q$(s)?s:(console.log("Local storage "+ZE+" was not valid format",s),{})},oU=t=>{if(!Q$(t))throw new Error(`Bad format for history:
`+JSON.stringify(t));Pp.setItem(ZE,JSON.stringify(t))},sU=t=>{const s=eI();return lt(s,t).getOr([])},rU=(t,s)=>{if(!hR(t))return;const a=eI(),i=lt(a,s).getOr([]),d=fo(i,g=>g!==t);a[s]=[t].concat(d).slice(0,jE),oU(a)},tI=t=>!!t,aU=t=>Io(Md.makeMap(t,/[, ]/),tI),pR=t=>A.from(kP(t)),CK=t=>{const s=A.from(AP(t)).filter(tI).map(aU);return pR(t).fold(eo,a=>s.fold(Bt,i=>$o(i).length>0?i:!1))},cU=(t,s)=>{const a=CK(t);return en(a)?a?pR(t):A.none():a[s]?pR(t):A.none()},nI=(t,s)=>cU(t,s).map(a=>i=>Tr.nu(d=>{const g=(w,x)=>{if(!J(w))throw new Error("Expected value to be string");if(x!==void 0&&!ye(x))throw new Error("Expected meta to be a object");d({value:w,meta:x})},h={filetype:s,fieldname:i.fieldname,...A.from(i.meta).getOr({})};a.call(t,g,i.value,h)})),bR=t=>A.from(t).filter(J).getOrUndefined(),GE=t=>RP(t)?A.some({targets:tU.find(t.getBody()),anchorTop:bR(DP(t)),anchorBottom:bR(MP(t))}):A.none(),oI=t=>A.from(i_(t)),iU=t=>({getHistory:sU,addToHistory:rU,getLinkInformation:()=>GE(t),getValidationHandler:()=>oI(t),getUrlPicker:s=>nI(t,s)}),lU=(t,s,a,i)=>{const d=Et(!1),g=H9(s),h={icons:()=>s.ui.registry.getAll().icons,menuItems:()=>s.ui.registry.getAll().menuItems,translate:ii.translate,isDisabled:()=>s.mode.isReadOnly()||!s.ui.isEnabled(),getOption:s.options.get,tooltips:mR(t.dialog)},w=iU(s),x=U9(s),T=I9(s),R=L9(s),N=()=>d.get(),I=de=>d.set(de),z={shared:{providers:h,anchors:N9(s,a,i,g.isPositionedAtTop),header:g},urlinput:w,styles:x,colorinput:T,dialog:R,isContextMenuOpen:N,setContextMenuState:I},V={...z,shared:{...z.shared,interpreter:de=>F$(de,{},V),getSink:t.popup}},Y={...z,shared:{...z.shared,interpreter:de=>F$(de,{},Y),getSink:t.dialog}};return{popup:V,dialog:Y}},uU=(t,s,a)=>{const i=(xe,Ht)=>{dt([s,...a],mt=>{mt.broadcastEvent(xe,Ht)})},d=(xe,Ht)=>{dt([s,...a],mt=>{mt.broadcastOn([xe],Ht)})},g=xe=>d(Sl(),{target:xe.target}),h=b1(),w=ea(h,"touchstart",g),x=ea(h,"touchmove",xe=>i(_h(),xe)),T=ea(h,"touchend",xe=>i(qw(),xe)),R=ea(h,"mousedown",g),N=ea(h,"mouseup",xe=>{xe.raw.button===0&&d(np(),{target:xe.target})}),I=xe=>d(Sl(),{target:le.fromDom(xe.target)}),z=xe=>{xe.button===0&&d(np(),{target:le.fromDom(xe.target)})},V=()=>{dt(t.editorManager.get(),xe=>{t!==xe&&xe.dispatch("DismissPopups",{relatedTarget:t})})},Y=xe=>i(gf(),Ay(xe)),de=xe=>{d(Ff(),{}),i(ml(),Ay(xe))},te=Eo(le.fromDom(t.getElement())),ie=Oy(te,"scroll",xe=>{requestAnimationFrame(()=>{const Ht=t.getContainer();if(Ht!=null){const Ot=Ag(t,s.element).map(_t=>[_t.element,..._t.others]).getOr([]);ja(Ot,_t=>qn(_t,xe.target))&&(t.dispatch("ElementScroll",{target:xe.target.dom}),i(Kw(),xe))}})}),ce=()=>d(Ff(),{}),_e=xe=>{xe.state&&d(Sl(),{target:le.fromDom(t.getContainer())})},Se=xe=>{d(Sl(),{target:le.fromDom(xe.relatedTarget.getContainer())})},Le=xe=>t.dispatch("focusin",xe),Ie=xe=>t.dispatch("focusout",xe);t.on("PostRender",()=>{t.on("click",I),t.on("tap",I),t.on("mouseup",z),t.on("mousedown",V),t.on("ScrollWindow",Y),t.on("ResizeWindow",de),t.on("ResizeEditor",ce),t.on("AfterProgressState",_e),t.on("DismissPopups",Se),dt([s,...a],xe=>{xe.element.dom.addEventListener("focusin",Le),xe.element.dom.addEventListener("focusout",Ie)})}),t.on("remove",()=>{t.off("click",I),t.off("tap",I),t.off("mouseup",z),t.off("mousedown",V),t.off("ScrollWindow",Y),t.off("ResizeWindow",de),t.off("ResizeEditor",ce),t.off("AfterProgressState",_e),t.off("DismissPopups",Se),dt([s,...a],xe=>{xe.element.dom.removeEventListener("focusin",Le),xe.element.dom.removeEventListener("focusout",Ie)}),R.unbind(),w.unbind(),x.unbind(),T.unbind(),N.unbind(),ie.unbind()}),t.on("detach",()=>{dt([s,...a],e2),dt([s,...a],xe=>xe.destroy())})},Js=$x,Bd=Dx,dU=ae([me("shell",!1),ke("makeItem"),me("setupItem",ee),Rc.field("listBehaviours",[Vt])]),sI=dc({name:"items",overrides:()=>({behaviours:Fe([Vt.config({})])})}),rI=ae([sI]),fU=ae("CustomList"),aI=(t,s,a,i)=>{const d=(w,x)=>{h(w).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},T=>{const R=Vt.contents(T),N=x.length,I=N-R.length,z=I>0?os(I,()=>t.makeItem()):[],V=R.slice(N);dt(V,de=>Vt.remove(T,de)),dt(z,de=>Vt.append(T,de));const Y=Vt.contents(T);dt(Y,(de,te)=>{t.setupItem(w,de,x[te],te)})})},g=t.shell?{behaviours:[Vt.config({})],components:[]}:{behaviours:[],components:s},h=w=>t.shell?A.some(w):He(w,t,"items");return{uid:t.uid,dom:t.dom,components:g.components,behaviours:$s(t.listBehaviours,g.behaviours),apis:{setItems:d}}},cI=Vr({name:fU(),configFields:dU(),partFields:rI(),factory:aI,apis:{setItems:(t,s,a)=>{t.setItems(s,a)}}}),P0=ae([ke("dom"),me("shell",!0),Bs("toolbarBehaviours",[Vt])]),Fp=ae([dc({name:"groups",overrides:()=>({behaviours:Fe([Vt.config({})])})})]),iI=(t,s,a,i)=>{const d=(w,x)=>{g(w).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},T=>{Vt.set(T,x)})},g=w=>t.shell?A.some(w):He(w,t,"groups"),h=t.shell?{behaviours:[Vt.config({})],components:[]}:{behaviours:[],components:s};return{uid:t.uid,dom:t.dom,components:h.components,behaviours:$s(t.toolbarBehaviours,h.behaviours),apis:{setGroups:d,refresh:ee},domModification:{attributes:{role:"group"}}}},Ic=Vr({name:"Toolbar",configFields:P0(),partFields:Fp(),factory:iI,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)}}}),qE=ee,lI=eo,vR=ae([]);var uI=Object.freeze({__proto__:null,setup:qE,isDocked:lI,getBehaviours:vR});const dI=ae(ut("toolbar-height-change")),$d={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},fI="tox-tinymce--toolbar-sticky-on",mI="tox-tinymce--toolbar-sticky-off",mU=(t,s)=>{const a=Ya(s),d=Xd(s).dom.innerHeight,g=Gr(a),h=le.fromDom(t.elm),w=Nr(h),x=_s(h),T=w.y,R=T+x,N=da(s),I=_s(s),z=N.top,V=z+I,Y=Math.abs(z-g.top)<2,de=Math.abs(V-(g.top+d))<2;if(Y&&T<V)p1(g.left,T-I,a);else if(de&&R>z){const te=T-d+x+I;p1(g.left,te,a)}},KE=(t,s)=>Uo(wo.getModes(t),s),Ug=t=>{const s=i=>Pu(i)+(parseInt(jo(i,"margin-top"),10)||0)+(parseInt(jo(i,"margin-bottom"),10)||0),a=t.element;Ci(a).each(i=>{const d="padding-"+wo.getModes(t)[0];if(wo.isDocked(t)){const g=fa(i);qt(a,"width",g+"px"),qt(i,d,s(a)+"px")}else kn(a,"width"),kn(i,d)})},N0=(t,s)=>{s?(Oo(t,$d.fadeOutClass),zm(t,[$d.transitionClass,$d.fadeInClass])):(Oo(t,$d.fadeInClass),zm(t,[$d.fadeOutClass,$d.transitionClass]))},YE=(t,s)=>{const a=le.fromDom(t.getContainer());s?(oo(a,fI),Oo(a,mI)):(oo(a,mI),Oo(a,fI))},gU=(t,s)=>{const a=Ya(s);Li(a).filter(i=>!qn(s,i)).filter(i=>qn(i,le.fromDom(a.dom.body))||Cc(t,i)).each(()=>rc(s))},hU=(t,s)=>Qr(t).orThunk(()=>s().toOptional().bind(a=>Qr(a.element))),yR=(t,s,a)=>{t.inline||(s.header.isPositionedAtTop()||t.on("ResizeEditor",()=>{a().each(wo.reset)}),t.on("ResizeWindow ResizeEditor",()=>{a().each(Ug)}),t.on("SkinLoaded",()=>{a().each(i=>{wo.isDocked(i)?wo.reset(i):wo.refresh(i)})}),t.on("FullscreenStateChanged",()=>{a().each(wo.reset)})),t.on("AfterScrollIntoView",i=>{a().each(d=>{wo.refresh(d);const g=d.element;EM(g)&&mU(i,g)})}),t.on("PostRender",()=>{YE(t,!1)})},pU=t=>t().map(wo.isDocked).getOr(!1),VC=()=>[ha.config({channels:{[dI()]:{onReceive:Ug}}})],CR=(t,s)=>{const a=Mn(),i=s.getSink,d=w=>{i().each(x=>w(x.element))},g=w=>{t.inline||Ug(w),YE(t,wo.isDocked(w)),w.getSystem().broadcastOn([Ff()],{}),i().each(x=>x.getSystem().broadcastOn([Ff()],{}))},h=t.inline?[]:VC();return[It.config({}),wo.config({contextual:{lazyContext:w=>{const x=Pu(w.element),T=t.inline?t.getContentAreaContainer():t.getContainer();return A.from(T).map(R=>{const N=Mo(le.fromDom(R));return Ag(t,w.element).fold(()=>{const z=N.height-x,V=N.y+(KE(w,"top")?0:x);return Ts(N.x,V,N.width,z)},z=>{const V=hv(N,qf(z)),Y=KE(w,"top")?V.y:V.y+x;return Ts(V.x,Y,V.width,V.height-x)})})},onShow:()=>{d(w=>N0(w,!0))},onShown:w=>{d(x=>Ba(x,[$d.transitionClass,$d.fadeInClass])),a.get().each(x=>{gU(w.element,x),a.clear()})},onHide:w=>{hU(w.element,i).fold(a.clear,a.set),d(x=>N0(x,!1))},onHidden:()=>{d(w=>Ba(w,[$d.transitionClass]))},...$d},lazyViewport:w=>Ag(t,w.element).fold(()=>{const T=Br(),R=c_(t),N=T.y+(KE(w,"top")?R:0),I=T.height-(KE(w,"bottom")?R:0);return{bounds:Ts(T.x,N,T.width,I),optScrollEnv:A.none()}},T=>({bounds:qf(T),optScrollEnv:A.some({currentScrollTop:T.element.dom.scrollTop,scrollElmTop:da(T.element).top})})),modes:[s.header.getDockingMode()],onDocked:g,onUndocked:g}),...h]};var bU=Object.freeze({__proto__:null,setup:yR,isDocked:pU,getBehaviours:CR});const vU=t=>{const s=t.editor,a=t.sticky?CR:vR;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:Fe(a(s,t.sharedBackstage))}},yU=$t([us,as("items",rl([x1([nA,nc("items",hs)]),hs]))].concat(Y2)),CU=t=>No("GroupToolbarButton",yU,t),wU=[ar("text"),ar("tooltip"),ar("icon"),lo("search",!1,rl([pt,$t([ar("placeholder")])],t=>en(t)?t?A.some({placeholder:A.none()}):A.none():A.some(t))),Jc("fetch"),ko("onSetup",()=>ee)],gI=$t([us,...wU]),wR=t=>No("menubutton",gI,t),hI=$t([us,l0,li,Xf,T8,MN,kp,vr("presets","normal",["normal","color","listpreview"]),NN(1),i0,PN]),SR=t=>No("SplitButton",hI,t);var B0=pa({factory:(t,s)=>{const a=(d,g)=>{const h=De(g,w=>{const x={type:"menubutton",text:w.text,fetch:R=>{R(w.getItems())}},T=wR(x).mapError(R=>Ri(R)).getOrDie();return NC(T,"tox-mbtn",s.backstage,A.some("menuitem"))});Vt.set(d,h)},i={focus:yt.focusIn,setMenus:a};return{uid:t.uid,dom:t.dom,components:[],behaviours:Fe([Vt.config({}),Jt("menubar-events",[po(d=>{t.onSetup(d)}),Te(dl(),(d,g)=>{$n(d.element,".tox-mbtn--active").each(h=>{Fi(g.event.target,".tox-mbtn").each(w=>{qn(h,w)||d.getSystem().getByDom(h).each(x=>{d.getSystem().getByDom(w).each(T=>{ji.expand(T),ji.close(x),It.focus(T)})})})})}),Te(Eh(),(d,g)=>{g.event.prevFocus.bind(h=>d.getSystem().getByDom(h).toOptional()).each(h=>{g.event.newFocus.bind(w=>d.getSystem().getByDom(w).toOptional()).each(w=>{ji.isOpen(h)&&(ji.expand(w),ji.close(h))})})})]),yt.config({mode:"flow",selector:".tox-mbtn",onEscape:d=>(t.onEscape(d),A.some(!0))}),uo.config({})]),apis:i,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[ke("dom"),ke("uid"),ke("onEscape"),ke("backstage"),me("onSetup",ee)],apis:{focus:(t,s)=>{t.focus(s)},setMenus:(t,s,a)=>{t.setMenus(s,a)}}});const XE="⚡️Upgrade",pI="https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_campaign=self_hosted_upgrade_promo&utm_source=tiny&utm_medium=referral",SU=t=>({uid:t.uid,dom:t.dom,components:[{dom:{tag:"a",attributes:{href:pI,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:XE}}]}),bI="container",xU=[Bs("slotBehaviours",[])],vI=t=>"<alloy.field."+t+">",xR=t=>{const s=(()=>{const g=[];return{slot:(w,x)=>(g.push(w),Nx(bI,vI(w),x)),record:ae(g)}})(),a=t(s),i=s.record(),d=De(i,g=>lr({name:g,pname:vI(g)}));return fu(bI,xU,d,_R,a)},_R=(t,s)=>{const a=Y=>lp(t),i=(Y,de)=>He(Y,t,de),d=(Y,de)=>(te,ie)=>He(te,t,ie).map(ce=>Y(ce,ie)).getOr(de),g=Y=>(de,te)=>{dt(te,ie=>Y(de,ie))},h=(Y,de)=>Fo(Y.element,"aria-hidden")!=="true",w=(Y,de)=>{if(!h(Y)){const te=Y.element;kn(te,"display"),Zo(te,"aria-hidden"),vt(Y,Th(),{name:de,visible:!0})}},x=(Y,de)=>{if(h(Y)){const te=Y.element;qt(te,"display","none"),ct(te,"aria-hidden","true"),vt(Y,Th(),{name:de,visible:!1})}},T=d(h,!1),R=d(x),N=g(R),I=Y=>N(Y,a()),z=d(w),V={getSlotNames:a,getSlot:i,isShowing:T,hideSlot:R,hideAllSlots:I,showSlot:z};return{uid:t.uid,dom:t.dom,components:s,behaviours:rp(t.slotBehaviours),apis:V}},kr={...Io({getSlotNames:(t,s)=>t.getSlotNames(s),getSlot:(t,s,a)=>t.getSlot(s,a),isShowing:(t,s,a)=>t.isShowing(s,a),hideSlot:(t,s,a)=>t.hideSlot(s,a),hideAllSlots:(t,s)=>t.hideAllSlots(s),showSlot:(t,s,a)=>t.showSlot(s,a)},t=>eg(t)),sketch:xR},_U=$t([li,l0,ko("onShow",ee),ko("onHide",ee),kp]),EU=t=>No("sidebar",_U,t),TU=t=>{const{sidebars:s}=t.ui.registry.getAll();dt($o(s),a=>{const i=s[a],d=()=>Ga(A.from(t.queryCommandValue("ToggleSidebar")),a);t.ui.registry.addToggleButton(a,{icon:i.icon,tooltip:i.tooltip,onAction:g=>{t.execCommand("ToggleSidebar",!1,a),g.setActive(d())},onSetup:g=>{g.setActive(d());const h=()=>g.setActive(d());return t.on("ToggleSidebar",h),()=>{t.off("ToggleSidebar",h)}}})})},kU=t=>({element:()=>t.element.dom}),OU=(t,s)=>{const a=De($o(s),i=>{const d=s[i],g=Ec(EU(d));return{name:i,getApi:kU,onSetup:g.onSetup,onShow:g.onShow,onHide:g.onHide}});return De(a,i=>{const d=Et(ee);return t.slot(i.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:Q2.unnamedEvents([_d(i,d),Jf(i,d),Te(Th(),(g,h)=>{const w=h.event;Gt(a,T=>T.name===w.name).each(T=>{(w.visible?T.onShow:T.onHide)(T.getApi(g))})})])})})},EK=t=>kr.sketch(s=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:OU(s,t),slotBehaviours:Q2.unnamedEvents([po(a=>kr.hideAllSlots(a))])})),TK=(t,s,a)=>{yn.getCurrent(t).each(d=>{Vt.set(d,[EK(s)]);const g=a==null?void 0:a.toLowerCase();J(g)&&Ln(s,g)&&yn.getCurrent(d).each(h=>{kr.showSlot(h,g),mc.immediateGrow(d),kn(d.element,"width"),zC(t.element,"region")})})},zC=(t,s)=>{ct(t,"role",s)},AU=(t,s)=>{yn.getCurrent(t).each(i=>{yn.getCurrent(i).each(g=>{mc.hasGrown(i)?kr.isShowing(g,s)?(mc.shrink(i),zC(t.element,"presentation")):(kr.hideAllSlots(g),kr.showSlot(g,s),zC(t.element,"region")):(kr.hideAllSlots(g),kr.showSlot(g,s),mc.grow(i),zC(t.element,"region"))})})},yI=t=>yn.getCurrent(t).bind(a=>mc.isGrowing(a)||mc.hasGrown(a)?yn.getCurrent(a).bind(g=>Gt(kr.getSlotNames(g),h=>kr.isShowing(g,h))):A.none()),ER=ut("FixSizeEvent"),TR=ut("AutoSizeEvent"),RU=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:Fe([uo.config({}),It.config({}),mc.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:s=>{yn.getCurrent(s).each(kr.hideAllSlots),un(s,TR)},onGrown:s=>{un(s,TR)},onStartGrow:s=>{vt(s,ER,{width:nr(s.element,"width").getOr("")})},onStartShrink:s=>{vt(s,ER,{width:fa(s.element)+"px"})}}),Vt.config({}),yn.config({find:s=>{const a=Vt.contents(s);return xa(a)}})])}],behaviours:Fe([Gi.childAt(0),Jt("sidebar-sliding-events",[Te(ER,(s,a)=>{qt(s.element,"width",a.event.width)}),Te(TR,(s,a)=>{kn(s.element,"width")})])])});var MU=Object.freeze({__proto__:null,block:(t,s,a,i)=>{ct(t.element,"aria-busy",!0);const d=s.getRoot(t).getOr(t),g=Fe([yt.config({mode:"special",onTab:()=>A.some(!0),onShiftTab:()=>A.some(!0)}),It.config({})]),h=i(d,g),w=d.getSystem().build(h);Vt.append(d,Fr(w)),w.hasConfigured(yt)&&s.focus&&yt.focusIn(w),a.isBlocked()||s.onBlock(t),a.blockWith(()=>Vt.remove(d,w))},unblock:(t,s,a)=>{Zo(t.element,"aria-busy"),a.isBlocked()&&s.onUnblock(t),a.clear()},isBlocked:(t,s,a)=>a.isBlocked()}),PU=[ko("getRoot",A.none),cr("focus",!0),vn("onBlock"),vn("onUnblock")],RK=Object.freeze({__proto__:null,init:()=>{const t=af(),s=a=>{t.set({destroy:a})};return Pa({readState:t.isSet,blockWith:s,clear:t.clear,isBlocked:t.isSet})}});const Id=Ws({fields:PU,name:"blocking",apis:MU,state:RK}),CI=t=>(s,a)=>({dom:{tag:"div",attributes:{"aria-label":t.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:Kf('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),kR=t=>yn.getCurrent(t).each(s=>rc(s.element,!0)),NU=(t,s)=>{const a="tabindex",i=`data-mce-${a}`;A.from(t.iframeElement).map(le.fromDom).each(d=>{s?(tr(d,a).each(g=>ct(d,i,g)),ct(d,a,-1)):(Zo(d,a),tr(d,i).each(g=>{ct(d,a,g),Zo(d,i)}))})},BU=(t,s,a,i)=>{const d=s.element;if(NU(t,a),a)Id.block(s,CI(i)),kn(d,"display"),Zo(d,"aria-hidden"),t.hasFocus()&&kR(s);else{const g=yn.getCurrent(s).exists(h=>Gh(h.element));Id.unblock(s),qt(d,"display","none"),ct(d,"aria-hidden","true"),g&&t.focus()}},hi=t=>({uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:Fe([Vt.config({}),Id.config({focus:!1}),yn.config({find:s=>xa(s.components())})]),components:[]}),$U=t=>t.type==="focusin",wI=t=>$U(t)?(t.composed?xa(t.composedPath()):A.from(t.target)).map(le.fromDom).filter(no).exists(a=>Na(a,"mce-pastebin")):!1,SI=(t,s,a)=>{const i=Et(!1),d=Mn(),g=w=>{i.get()&&!wI(w)&&(w.preventDefault(),kR(s()),t.editorManager.setActive(t))};t.inline||t.on("PreInit",()=>{t.dom.bind(t.getWin(),"focusin",g),t.on("BeforeExecCommand",w=>{w.command.toLowerCase()==="mcefocus"&&w.value!==!0&&g(w)})});const h=w=>{w!==i.get()&&(i.set(w),BU(t,s(),w,a.providers),tH(t,w))};t.on("ProgressState",w=>{if(d.on(clearTimeout),fn(w.time)){const x=Qb.setEditorTimeout(t,()=>h(w.state),w.time);d.set(x)}else h(w.state),d.clear()})},IU=(t,s)=>bo(t,(d,g)=>s(g,d.len).fold(ae(d),w=>({len:w.finish,list:d.list.concat([w])})),{len:0,list:[]}).list,Lp=(t,s,a)=>({within:t,extra:s,withinWidth:a}),xI=(t,s,a)=>{const i=IU(t,(w,x)=>{const T=a(w);return A.some({element:w,start:x,finish:x+T,width:T})}),d=fo(i,w=>w.finish<=s),g=Ss(d,(w,x)=>w+x.width,0),h=i.slice(d.length);return{within:d,extra:h,withinWidth:g}},Hp=t=>De(t,s=>s.element),FU=(t,s,a)=>{const i=Hp(t.concat(s));return Lp(i,[],a)},JE=(t,s,a,i)=>{const d=Hp(t).concat([a]);return Lp(d,Hp(s),i)},LU=(t,s,a)=>Lp(Hp(t),[],a),HU=(t,s,a)=>{const i=xI(s,t,a);return i.extra.length===0?A.some(i):A.none()},Yi=(t,s,a,i)=>{const d=HU(t,s,a).getOrThunk(()=>xI(s,t-a(i),a)),g=d.within,h=d.extra,w=d.withinWidth;return h.length===1&&h[0].width<=a(i)?FU(g,h,w):h.length>=1?JE(g,h,i,w):LU(g,h,w)},_I=(t,s)=>{const a=De(s,i=>Fr(i));Ic.setGroups(t,a)},QE=t=>ur(t,s=>Qr(s.element).bind(a=>s.getSystem().getByDom(a).toOptional())),OR=(t,s,a)=>{const i=s.builtGroups.get();if(i.length===0)return;const d=na(t,s,"primary"),g=Yo.getCoupled(t,"overflowGroup");qt(d.element,"visibility","hidden");const h=i.concat([g]),w=QE(h);a([]),_I(d,h);const x=fa(d.element),T=Yi(x,s.builtGroups.get(),R=>Math.ceil(R.element.dom.getBoundingClientRect().width),g);T.extra.length===0?(Vt.remove(d,g),a([])):(_I(d,T.within),a(T.extra)),kn(d.element,"visibility"),Ul(d.element),w.each(It.focus)},AR=ae([Bs("splitToolbarBehaviours",[Yo]),rr("builtGroups",()=>Et([]))]),VU=ae([bl(["overflowToggledClass"]),zu("getOverflowBounds"),ke("lazySink"),rr("overflowGroups",()=>Et([])),vn("onOpened"),vn("onClosed")].concat(AR())),EI=ae([lr({factory:Ic,schema:P0(),name:"primary"}),Dc({schema:P0(),name:"overflow"}),Dc({name:"overflow-button"}),Dc({name:"overflow-group"})]),RR=ae((t,s)=>{pm(t,Math.floor(s))}),zU=ae([bl(["toggledClass"]),ke("lazySink"),Jc("fetch"),zu("getBounds"),ps("fireDismissalEventInstead",[me("event",Ql())]),dd(),vn("onToggled")]),UU=ae([Dc({name:"button",overrides:t=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:Fe([on.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:t.onToggled})])})}),Dc({factory:Ic,schema:P0(),name:"toolbar",overrides:t=>({toolbarBehaviours:Fe([yt.config({mode:"cyclic",onEscape:s=>(He(s,t,"button").each(It.focus),A.none())})])})})]),eT=Mn(),WU=(t,s)=>{eT.set(!0),DR(t,s),eT.clear()},DR=(t,s)=>{const a=Yo.getCoupled(t,"toolbarSandbox");wn.isOpen(a)?wn.close(a):wn.open(a,s.toolbar())},MR=(t,s,a,i)=>{const d=a.getBounds.map(h=>h()),g=a.lazySink(t).getOrDie();qs.positionWithinBounds(g,s,{anchor:{type:"hotspot",hotspot:t,layouts:i,overrides:{maxWidthFunction:RR()}}},d)},PR=(t,s,a,i,d)=>{Ic.setGroups(s,d),MR(t,s,a,i),on.on(t)},TI=(t,s,a)=>{const i=eb(),d=(h,w)=>{const x=eT.get().getOr(!1);a.fetch().get(T=>{PR(t,w,a,s.layouts,T),i.link(t.element),x||yt.focusIn(w)})},g=()=>{on.off(t),eT.get().getOr(!1)||It.focus(t),i.unlink(t.element)};return{dom:{tag:"div",attributes:{id:i.id}},behaviours:Fe([yt.config({mode:"special",onEscape:h=>(wn.close(h),A.some(!0))}),wn.config({onOpen:d,onClose:g,isPartOf:(h,w,x)=>od(w,x)||od(t,x),getAttachPoint:()=>a.lazySink(t).getOrDie()}),ha.config({channels:{...uu({isExtraPart:eo,...a.fireDismissalEventInstead.map(h=>({fireEventInstead:{event:h.event}})).getOr({})}),...Pb({doReposition:()=>{wn.getState(Yo.getCoupled(t,"toolbarSandbox")).each(h=>{MR(t,h,a,s.layouts)})}})}})])}},Wg=Vr({name:"FloatingToolbarButton",factory:(t,s,a,i)=>({..._r.sketch({...i.button(),action:d=>{DR(d,i)},buttonBehaviours:Rc.augment({dump:i.button().buttonBehaviours},[Yo.config({others:{toolbarSandbox:d=>TI(d,a,t)}})])}),apis:{setGroups:(d,g)=>{wn.getState(Yo.getCoupled(d,"toolbarSandbox")).each(h=>{PR(d,h,t,a.layouts,g)})},reposition:d=>{wn.getState(Yo.getCoupled(d,"toolbarSandbox")).each(g=>{MR(d,g,t,a.layouts)})},toggle:d=>{DR(d,i)},toggleWithoutFocusing:d=>{WU(d,i)},getToolbar:d=>wn.getState(Yo.getCoupled(d,"toolbarSandbox")),isOpen:d=>wn.isOpen(Yo.getCoupled(d,"toolbarSandbox"))}}),configFields:zU(),partFields:UU(),apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggleWithoutFocusing(s)},getToolbar:(t,s)=>t.getToolbar(s),isOpen:(t,s)=>t.isOpen(s)}}),jU=ae([ke("items"),bl(["itemSelector"]),Bs("tgroupBehaviours",[yt])]),kI=ae([Wb({name:"items",unit:"item"})]),OI=(t,s,a,i)=>({uid:t.uid,dom:t.dom,components:s,behaviours:$s(t.tgroupBehaviours,[yt.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),UC=Vr({name:"ToolbarGroup",configFields:jU(),partFields:kI(),factory:OI}),AI=t=>De(t,s=>Fr(s)),RI=(t,s,a)=>{OR(t,a,i=>{a.overflowGroups.set(i),s.getOpt(t).each(d=>{Wg.setGroups(d,AI(i))})})},GU=(t,s,a,i)=>{const d=Pn(Wg.sketch({fetch:()=>Tr.nu(g=>{g(AI(t.overflowGroups.get()))}),layouts:{onLtr:()=>[cs,bs],onRtl:()=>[bs,cs],onBottomLtr:()=>[Zn,vs],onBottomRtl:()=>[vs,Zn]},getBounds:a.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:i["overflow-button"](),toolbar:i.overflow()},onToggled:(g,h)=>t[h?"onOpened":"onClosed"](g)}));return{uid:t.uid,dom:t.dom,components:s,behaviours:$s(t.splitToolbarBehaviours,[Yo.config({others:{overflowGroup:()=>UC.sketch({...i["overflow-group"](),items:[d.asSpec()]})}})]),apis:{setGroups:(g,h)=>{t.builtGroups.set(De(h,g.getSystem().build)),RI(g,d,t)},refresh:g=>RI(g,d,t),toggle:g=>{d.getOpt(g).each(h=>{Wg.toggle(h)})},toggleWithoutFocusing:g=>{d.getOpt(g).each(Wg.toggleWithoutFocusing)},isOpen:g=>d.getOpt(g).map(Wg.isOpen).getOr(!1),reposition:g=>{d.getOpt(g).each(h=>{Wg.reposition(h)})},getOverflow:g=>d.getOpt(g).bind(Wg.getToolbar)},domModification:{attributes:{role:"group"}}}},NR=Vr({name:"SplitFloatingToolbar",configFields:VU(),partFields:EI(),factory:GU,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s),getOverflow:(t,s)=>t.getOverflow(s)}}),qU=ae([bl(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),vn("onOpened"),vn("onClosed")].concat(AR())),KU=ae([lr({factory:Ic,schema:P0(),name:"primary"}),lr({factory:Ic,schema:P0(),name:"overflow",overrides:t=>({toolbarBehaviours:Fe([mc.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:s=>{He(s,t,"overflow-button").each(a=>{on.off(a)}),t.onClosed(s)},onGrown:s=>{t.onOpened(s)},onStartGrow:s=>{He(s,t,"overflow-button").each(on.on)}}),yt.config({mode:"acyclic",onEscape:s=>(He(s,t,"overflow-button").each(It.focus),A.some(!0))})])})}),Dc({name:"overflow-button",overrides:t=>({buttonBehaviours:Fe([on.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])})}),Dc({name:"overflow-group"})]),YU=(t,s)=>He(t,s,"overflow").map(mc.hasGrown).getOr(!1),BR=(t,s,a)=>{He(t,s,"overflow-button").each(i=>{He(t,s,"overflow").each(d=>{if($R(t,s),mc.hasShrunk(d)){const g=s.onOpened;s.onOpened=h=>{a||yt.focusIn(d),g(h),s.onOpened=g}}else{const g=s.onClosed;s.onClosed=h=>{a||It.focus(i),g(h),s.onClosed=g}}mc.toggleGrow(d)})})},$R=(t,s)=>{He(t,s,"overflow").each(a=>{OR(t,s,i=>{const d=De(i,g=>Fr(g));Ic.setGroups(a,d)}),He(t,s,"overflow-button").each(i=>{mc.hasGrown(a)&&on.on(i)}),mc.refresh(a)})},XU=(t,s,a,i)=>{const d="alloy.toolbar.toggle",g=(h,w)=>{const x=De(w,h.getSystem().build);t.builtGroups.set(x)};return{uid:t.uid,dom:t.dom,components:s,behaviours:$s(t.splitToolbarBehaviours,[Yo.config({others:{overflowGroup:h=>UC.sketch({...i["overflow-group"](),items:[_r.sketch({...i["overflow-button"](),action:w=>{un(h,d)}})]})}}),Jt("toolbar-toggle-events",[Te(d,h=>{BR(h,t,!1)})])]),apis:{setGroups:(h,w)=>{g(h,w),$R(h,t)},refresh:h=>$R(h,t),toggle:h=>{BR(h,t,!1)},toggleWithoutFocusing:h=>{BR(h,t,!0)},isOpen:h=>YU(h,t)},domModification:{attributes:{role:"group"}}}},IR=Vr({name:"SplitSlidingToolbar",configFields:qU(),partFields:KU(),factory:XU,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},toggle:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s)}}),DI=t=>{const s=t.title.fold(()=>({}),a=>({attributes:{title:a}}));return{dom:{tag:"div",classes:["tox-toolbar__group"],...s},components:[UC.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:Fe([uo.config({}),It.config({})])}},tT=t=>UC.sketch(DI(t)),MI=(t,s)=>{const a=po(i=>{const d=De(t.initGroups,tT);Ic.setGroups(i,d)});return Fe([Ys.toolbarButton(t.providers.isDisabled),Is(),yt.config({mode:s,onEscape:t.onEscape,selector:".tox-toolbar__group"}),Jt("toolbar-events",[a])])},FR=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":DI({title:A.none(),items:[]}),"overflow-button":p9({name:"more",icon:A.some("more-drawer"),enabled:!0,tooltip:A.some("Reveal or hide additional toolbar items"),primary:!1,buttonType:A.none(),borderless:!1},A.none(),t.providers,[],"overflow-button")},splitToolbarBehaviours:MI(t,s)}},JU=t=>{const s=FR(t),a=4,i=NR.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return NR.sketch({...s,lazySink:t.getSink,getOverflowBounds:()=>{const d=t.moreDrawerData.lazyHeader().element,g=Nr(d),h=c1(d),w=Nr(h),x=Math.max(h.dom.scrollHeight,w.height);return Ts(g.x+a,w.y,g.width-a*2,x)},parts:{...s.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}},components:[i],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>t.onToggled(d,!0),onClosed:d=>t.onToggled(d,!1)})},QU=t=>{const s=IR.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),a=IR.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),i=FR(t);return IR.sketch({...i,components:[s,a],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>{d.getSystem().broadcastOn([dI()],{type:"opened"}),t.onToggled(d,!0)},onClosed:d=>{d.getSystem().broadcastOn([dI()],{type:"closed"}),t.onToggled(d,!1)}})},$0=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return Ic.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===Ui.scrolling?["tox-toolbar--scrolling"]:[])},components:[Ic.parts.groups({})],toolbarBehaviours:MI(t,s)})},PI=[Xf,li,ar("tooltip"),vr("buttonType","secondary",["primary","secondary"]),cr("borderless",!1),Jc("onAction")],nT=[...PI,Yf,Kl("type",["button"])],eW=[...PI,cr("active",!1),Kl("type",["togglebutton"])],LR={button:nT,togglebutton:eW},tW=[Kl("type",["group"]),Tc("buttons",[],Ra("type",LR))],nW=Ra("type",{...LR,group:tW}),DK=$t([Tc("buttons",[],nW),Jc("onShow"),Jc("onHide")]),oW=t=>No("view",DK,t),sW=(t,s)=>{var a,i;const d=t.type==="togglebutton",g=t.icon.map(ce=>Lg(ce,s.icons)).map(Pn),w=ce=>{const _e=Ie=>{g.map(xe=>xe.getOpt(ce).each(Ht=>{Vt.set(Ht,[Lg(Ie,s.icons)])}))},Se=Ie=>{const xe=ce.element;Ie?(oo(xe,"tox-button--enabled"),ct(xe,"aria-pressed",!0)):(Oo(xe,"tox-button--enabled"),Zo(xe,"aria-pressed"))},Le=()=>Na(ce.element,"tox-button--enabled");if(d)return t.onAction({setIcon:_e,setActive:Se,isActive:Le});if(t.type==="button")return t.onAction({setIcon:_e})},x={...t,name:d?t.text.getOr(t.icon.getOr("")):(a=t.text)!==null&&a!==void 0?a:t.icon.getOr(""),primary:t.buttonType==="primary",buttonType:A.from(t.buttonType),tooltip:t.tooltip,icon:t.icon,enabled:!0,borderless:t.borderless},T=BC((i=t.buttonType)!==null&&i!==void 0?i:"secondary"),R=d?t.text.map(s.translate):A.some(s.translate(t.text)),N=R.map(Lo),I=x.tooltip.or(R).map(ce=>({"aria-label":s.translate(ce)})).getOr({}),z=g.map(ce=>ce.asSpec()),V=Ap([z,N]),Y=t.icon.isSome()&&N.isSome(),de={tag:"button",classes:T.concat(...t.icon.isSome()&&!Y?["tox-button--icon"]:[]).concat(...Y?["tox-button--icon-and-text"]:[]).concat(...t.borderless?["tox-button--naked"]:[]).concat(...t.type==="togglebutton"&&t.active?["tox-button--enabled"]:[]),attributes:I},te=[],ie=Ip(x,A.some(w),te,de,V,t.tooltip,s);return _r.sketch(ie)},oT=(t,s)=>sW(t,s),rW=(t,s)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:De(t.buttons,a=>oT(a,s))}),WC=Qa().deviceType,NI=WC.isPhone(),BI=WC.isTablet(),HR=t=>{let s=!1;const a=De(t.buttons,i=>i.type==="group"?(s=!0,rW(i,t.providers)):oT(i,t.providers));return{uid:t.uid,dom:{tag:"div",classes:[s?"tox-view__toolbar":"tox-view__header",...NI||BI?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:Fe([It.config({}),yt.config({mode:"flow",selector:"button, .tox-button",focusInside:zf.OnEnterOrSpaceMode})]),components:s?a:[Cu.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),Cu.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:a})]}},aW=t=>({uid:t.uid,behaviours:Fe([It.config({}),uo.config({})]),dom:{tag:"div",classes:["tox-view__pane"]}}),$I=(t,s,a,i)=>{const d={getPane:g=>Js.getPart(g,t,"pane"),getOnShow:g=>t.viewConfig.onShow,getOnHide:g=>t.viewConfig.onHide};return{uid:t.uid,dom:t.dom,components:s,behaviours:Fe([It.config({}),yt.config({mode:"cyclic",focusInside:zf.OnEnterOrSpaceMode})]),apis:d}};var _u=Vr({name:"silver.View",configFields:[ke("viewConfig")],partFields:[dc({factory:{sketch:HR},schema:[ke("buttons"),ke("providers")],name:"header"}),dc({factory:{sketch:aW},schema:[],name:"pane"})],factory:$I,apis:{getPane:(t,s)=>t.getPane(s),getOnShow:(t,s)=>t.getOnShow(s),getOnHide:(t,s)=>t.getOnHide(s)}});const II=(t,s,a)=>th(s,(i,d)=>{const g=Ec(oW(i));return t.slot(d,_u.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:g,components:[...g.buttons.length>0?[_u.parts.header({buttons:g.buttons,providers:a})]:[],_u.parts.pane({})]}))}),cW=(t,s)=>kr.sketch(a=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:II(a,t,s),slotBehaviours:Q2.unnamedEvents([po(i=>kr.hideAllSlots(i))])})),FI=t=>Gt(kr.getSlotNames(t),s=>kr.isShowing(t,s)),iW=t=>{const s=t.element;qt(s,"display","none"),ct(s,"aria-hidden","true")},VR=t=>{const s=t.element;kn(s,"display"),Zo(s,"aria-hidden")},lW=t=>({getContainer:ae(t)}),LI=(t,s,a)=>{kr.getSlot(t,s).each(i=>{_u.getPane(i).each(d=>{a(i)(lW(d.element.dom))})})},HI=(t,s)=>LI(t,s,_u.getOnShow),VI=(t,s)=>LI(t,s,_u.getOnHide);var I0=pa({factory:(t,s)=>{const g={setViews:(h,w)=>{Vt.set(h,[cW(w,s.backstage.shared.providers)])},whichView:h=>yn.getCurrent(h).bind(FI),toggleView:(h,w,x,T)=>yn.getCurrent(h).exists(R=>{const N=FI(R),I=N.exists(V=>T===V),z=kr.getSlot(R,T).isSome();return z&&(kr.hideAllSlots(R),I?(iW(h),w()):(x(),VR(h),kr.showSlot(R,T),HI(R,T)),N.each(V=>VI(R,V))),z})};return{uid:t.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:Fe([Vt.config({}),yn.config({find:h=>{const w=Vt.contents(h);return xa(w)}})]),apis:g}},name:"silver.ViewWrapper",configFields:[ke("backstage")],apis:{setViews:(t,s,a)=>t.setViews(s,a),toggleView:(t,s,a,i,d)=>t.toggleView(s,a,i,d),whichView:(t,s)=>t.whichView(s)}});const uW=(t,s,a)=>{let i=!1;const d=h=>{Jr(h,".tox-statusbar").each(w=>{jo(w,"display")==="none"&&Fo(w,"aria-hidden")==="true"?(kn(w,"display"),Zo(w,"aria-hidden")):(qt(w,"display","none"),ct(w,"aria-hidden","true"))})},g={getSocket:h=>Js.getPart(h,t,"socket"),setSidebar:(h,w,x)=>{Js.getPart(h,t,"sidebar").each(T=>TK(T,w,x))},toggleSidebar:(h,w)=>{Js.getPart(h,t,"sidebar").each(x=>AU(x,w))},whichSidebar:h=>Js.getPart(h,t,"sidebar").bind(yI).getOrNull(),getHeader:h=>Js.getPart(h,t,"header"),getToolbar:h=>Js.getPart(h,t,"toolbar"),setToolbar:(h,w)=>{Js.getPart(h,t,"toolbar").each(x=>{const T=De(w,tT);x.getApis().setGroups(x,T)})},setToolbars:(h,w)=>{Js.getPart(h,t,"multiple-toolbar").each(x=>{const T=De(w,R=>De(R,tT));cI.setItems(x,T)})},refreshToolbar:h=>{Js.getPart(h,t,"toolbar").each(x=>x.getApis().refresh(x))},toggleToolbarDrawer:h=>{Js.getPart(h,t,"toolbar").each(w=>{mo(w.getApis().toggle,x=>x(w))})},toggleToolbarDrawerWithoutFocusing:h=>{Js.getPart(h,t,"toolbar").each(w=>{mo(w.getApis().toggleWithoutFocusing,x=>x(w))})},isToolbarDrawerToggled:h=>Js.getPart(h,t,"toolbar").bind(w=>A.from(w.getApis().isOpen).map(x=>x(w))).getOr(!1),getThrobber:h=>Js.getPart(h,t,"throbber"),focusToolbar:h=>{Js.getPart(h,t,"toolbar").orThunk(()=>Js.getPart(h,t,"multiple-toolbar")).each(x=>{yt.focusIn(x)})},setMenubar:(h,w)=>{Js.getPart(h,t,"menubar").each(x=>{B0.setMenus(x,w)})},focusMenubar:h=>{Js.getPart(h,t,"menubar").each(w=>{B0.focus(w)})},setViews:(h,w)=>{Js.getPart(h,t,"viewWrapper").each(x=>{I0.setViews(x,w)})},toggleView:(h,w)=>Js.getPart(h,t,"viewWrapper").exists(x=>I0.toggleView(x,()=>g.showMainView(h),()=>g.hideMainView(h),w)),whichView:h=>Js.getPart(h,t,"viewWrapper").bind(I0.whichView).getOrNull(),hideMainView:h=>{i=g.isToolbarDrawerToggled(h),i&&g.toggleToolbarDrawer(h),Js.getPart(h,t,"editorContainer").each(w=>{const x=w.element;d(x),qt(x,"display","none"),ct(x,"aria-hidden","true")})},showMainView:h=>{i&&g.toggleToolbarDrawer(h),Js.getPart(h,t,"editorContainer").each(w=>{const x=w.element;d(x),kn(x,"display"),Zo(x,"aria-hidden")})}};return{uid:t.uid,dom:t.dom,components:s,apis:g,behaviours:t.behaviours}},dW=Bd.optional({factory:B0,name:"menubar",schema:[ke("backstage")]}),zI=t=>t.type===Ui.sliding?QU:t.type===Ui.floating?JU:$0,fW=Bd.optional({factory:{sketch:t=>cI.sketch({uid:t.uid,dom:t.dom,listBehaviours:Fe([yt.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>$0({type:t.type,uid:ut("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:()=>(t.onEscape(),A.some(!0))}),setupItem:(s,a,i,d)=>{Ic.setGroups(a,i)},shell:!0})},name:"multiple-toolbar",schema:[ke("dom"),ke("onEscape")]}),mW=Bd.optional({factory:{sketch:t=>{const s=zI(t),a={type:t.type,uid:t.uid,onEscape:()=>(t.onEscape(),A.some(!0)),onToggled:(i,d)=>t.onToolbarToggled(d),cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes};return s(a)}},name:"toolbar",schema:[ke("dom"),ke("onEscape"),ke("getSink")]}),gW=Bd.optional({factory:{sketch:vU},name:"header",schema:[ke("dom")]}),UI=Bd.optional({factory:{sketch:SU},name:"promotion",schema:[ke("dom")]}),hW=Bd.optional({name:"socket",schema:[ke("dom")]}),pW=Bd.optional({factory:{sketch:RU},name:"sidebar",schema:[ke("dom")]}),UR=Bd.optional({factory:{sketch:hi},name:"throbber",schema:[ke("dom")]}),bW=Bd.optional({factory:I0,name:"viewWrapper",schema:[ke("backstage")]}),vW=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:t.components}),WI=Bd.optional({factory:{sketch:vW},name:"editorContainer",schema:[]});var ro=Vr({name:"OuterContainer",factory:uW,configFields:[ke("dom"),ke("behaviours")],partFields:[gW,dW,mW,fW,hW,pW,UI,UR,bW,WI],apis:{getSocket:(t,s)=>t.getSocket(s),setSidebar:(t,s,a,i)=>{t.setSidebar(s,a,i)},toggleSidebar:(t,s,a)=>{t.toggleSidebar(s,a)},whichSidebar:(t,s)=>t.whichSidebar(s),getHeader:(t,s)=>t.getHeader(s),getToolbar:(t,s)=>t.getToolbar(s),setToolbar:(t,s,a)=>{t.setToolbar(s,a)},setToolbars:(t,s,a)=>{t.setToolbars(s,a)},refreshToolbar:(t,s)=>t.refreshToolbar(s),toggleToolbarDrawer:(t,s)=>{t.toggleToolbarDrawer(s)},toggleToolbarDrawerWithoutFocusing:(t,s)=>{t.toggleToolbarDrawerWithoutFocusing(s)},isToolbarDrawerToggled:(t,s)=>t.isToolbarDrawerToggled(s),getThrobber:(t,s)=>t.getThrobber(s),setMenubar:(t,s,a)=>{t.setMenubar(s,a)},focusMenubar:(t,s)=>{t.focusMenubar(s)},focusToolbar:(t,s)=>{t.focusToolbar(s)},setViews:(t,s,a)=>{t.setViews(s,a)},toggleView:(t,s,a)=>t.toggleView(s,a),whichView:(t,s)=>t.whichView(s)}});const ZI="file edit view insert format tools table help",jI={file:{title:"File",items:"newdocument restoredraft | preview | importword exportpdf exportword | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code revisionhistory | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed inserttemplate codesample inserttable accordion math | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},GI=(t,s,a)=>{const i=DO(a).split(/[ ,]/);return{text:t.title,getItems:()=>we(t.items,d=>{const g=d.toLowerCase();return g.trim().length===0?[]:ja(i,h=>h===g)?[]:g==="separator"||g==="|"?[{type:"separator"}]:s.menuItems[g]?[s.menuItems[g]]:[]})}},WR=t=>t.split(" "),qI=(t,s)=>{const a={...jI,...s.menus},i=$o(s.menus).length>0,d=s.menubar===void 0||s.menubar===!0?WR(ZI):WR(s.menubar===!1?"":s.menubar),g=fo(d,w=>{const x=Ln(jI,w);return i?x||lt(s.menus,w).exists(T=>Ln(T,"items")):x}),h=De(g,w=>{const x=a[w];return GI({title:x.title,items:WR(x.items)},s,t)});return fo(h,w=>{const x=T=>J(T)||T.type!=="separator";return w.getItems().length>0&&ja(w.getItems(),x)})},yW=t=>{const s=()=>{t._skinLoaded=!0,Y_(t)};return()=>{t.initialized?s():t.on("init",s)}},KI=(t,s)=>()=>lB(t,{message:s}),YI=(t,s,a)=>(t.on("remove",()=>a.unload(s)),a.load(s)),ZR=(t,s,a,i)=>(t.on("remove",()=>i.unloadRawCss(s)),i.loadRawCss(s,a)),CW=async(t,s)=>{const i="ui/"+o0(t).getOr("default")+"/skin.css",d=tinymce.Resource.get(i);if(J(d))ZR(t,i,d,t.ui.styleSheetLoader);else{const g=t.editorManager.suffix,h=s+`/skin${g}.css`;return YI(t,h,t.ui.styleSheetLoader)}},jR=async(t,s)=>{if(YT(le.fromDom(t.getElement()))){const d="ui/"+o0(t).getOr("default")+"/skin.shadowdom.css",g=tinymce.Resource.get(d);if(J(g))ZR(t,d,g,Cp.DOM.styleSheetLoader);else{const h=t.editorManager.suffix,w=s+`/skin.shadowdom${h}.css`;return YI(t,w,Cp.DOM.styleSheetLoader)}}},GR=async(t,s)=>{const a=()=>{const d=BO(s),g=s.editorManager.suffix;d&&s.contentCSS.push(d+(t?"/content.inline":"/content")+`${g}.css`)};o0(s).fold(a,d=>{const g="ui/"+d+(t?"/content.inline":"/content")+".css",h=tinymce.Resource.get(g);J(h)?ZR(s,g,h,s.ui.styleSheetLoader):a()});const i=BO(s);if(!u_(s)&&J(i))return Promise.all([CW(s,i),jR(s,i)]).then()},XI=(t,s)=>GR(t,s).then(yW(s),KI(s,"Skin could not be loaded")),wW=_n(XI,!1),SW=_n(XI,!0),F0=(t,s,a)=>Do(a)?t.translate(s):t.translate([s,t.translate(a)]),xW=(t,s)=>{const a=(h,w,x,T)=>{const R=t.shared.providers.translate(h.title);if(h.type==="separator")return A.some({type:"separator",text:R});if(h.type==="submenu"){const N=we(h.getStyleItems(),I=>i(I,w,T));return w===0&&N.length<=0?A.none():A.some({type:"nestedmenuitem",text:R,enabled:N.length>0,getSubmenuItems:()=>we(h.getStyleItems(),I=>i(I,w,T))})}else return A.some({type:"togglemenuitem",text:R,icon:h.icon,active:h.isSelected(T),enabled:!x,onAction:s.onAction(h),...h.getStylePreview().fold(()=>({}),N=>({meta:{style:N}}))})},i=(h,w,x)=>{const T=h.type==="formatter"&&s.isInvalid(h);return w===0?T?[]:a(h,w,!1,x).toArray():a(h,w,T,x).toArray()},d=h=>{const w=s.getCurrentValue(),x=s.shouldHide?0:1;return we(h,T=>i(T,x,w))};return{validateItems:d,getFetch:(h,w)=>(x,T)=>{const R=w(),N=d(R),I=T0(N,Tl.CLOSE_ON_EXECUTE,h,{isHorizontalMenu:!1,search:A.none()});T(I)}}},L0=(t,s)=>{const a=s.dataset,i=a.type==="basic"?()=>De(a.data,d=>dR(d,s.isSelectedFor,s.getPreviewFor)):a.getData;return{items:xW(t,s),getStyleItems:i}},ZC=(t,s,a,i,d,g)=>{const{items:h,getStyleItems:w}=L0(s,a),x=Et(a.tooltip),T=N=>({getComponent:ae(N),setTooltip:I=>{const z=s.shared.providers.translate(I);ct(N.element,"aria-label",z),x.set(I)}}),R=N=>{const I=z=>N.setTooltip(F0(t,i(z.value),z.value));return t.on(d,I),X_(Mp(t,"NodeChange",z=>{const V=z.getComponent();a.updateText(V),Pt.set(z.getComponent(),!t.selection.isEditable())})(N),()=>t.off(d,I))};return B3({text:a.icon.isSome()?A.none():a.text,icon:a.icon,ariaLabel:A.some(a.tooltip),tooltip:A.none(),role:A.none(),fetch:h.getFetch(s,w),onSetup:R,getApi:T,columns:1,presets:"normal",classes:a.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[Er.config({...s.shared.providers.tooltips.getConfig({tooltipText:s.shared.providers.translate(a.tooltip),onShow:N=>{if(a.tooltip!==x.get()){const I=s.shared.providers.translate(x.get());Er.setComponents(N,s.shared.providers.tooltips.getComponents({tooltipText:I}))}}})})]},"tox-tbtn",s.shared,g)},_W=t=>De(t,s=>{let a=s,i=s;const d=s.split("=");return d.length>1&&(a=d[0],i=d[1]),{title:a,format:i}}),EW=t=>({type:"basic",data:t});var Vp;(function(t){t[t.SemiColon=0]="SemiColon",t[t.Space=1]="Space"})(Vp||(Vp={}));const sT=(t,s)=>s===Vp.SemiColon?t.replace(/;$/,"").split(";"):t.split(" "),jC=(t,s,a)=>{const i=t.options.get(s);return{type:"basic",data:_W(sT(i,a))}},JI="Align",nm=ae("Alignment {0}"),qR="left",KR=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],QI=t=>{const s=()=>Gt(KR,w=>t.formatter.match(w.format)),a=w=>()=>t.formatter.match(w),i=w=>A.none,d=w=>{const T=s().fold(ae(qR),R=>R.title.toLowerCase());vt(w,Hg,{icon:`align-${T}`}),fB(t,{value:T})},g=EW(KR),h=w=>()=>Gt(KR,x=>x.format===w.format).each(x=>t.execCommand(x.command));return{tooltip:F0(t,nm(),qR),text:A.none(),icon:A.some("align-left"),isSelectedFor:a,getCurrentValue:A.none,getPreviewFor:i,onAction:h,updateText:d,dataset:g,shouldHide:!1,isInvalid:w=>!t.formatter.canApply(w.format)}},TW=(t,s)=>ZC(t,s,QI(t),nm,"AlignTextUpdate","align"),kW=(t,s)=>{const a=L0(s,QI(t));t.ui.registry.addNestedMenuItem("align",{text:s.shared.providers.translate(JI),onSetup:ba(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},eF=(t,s)=>{const a=s(),i=De(a,d=>d.format);return A.from(t.formatter.closest(i)).bind(d=>Gt(a,g=>g.format===d))},OW="Blocks",tF=ae("Block {0}"),rT="Paragraph",nF=t=>{const s=g=>()=>t.formatter.match(g),a=g=>()=>{const h=t.formatter.get(g);return h?A.some({tag:h.length>0&&(h[0].inline||h[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(g))}):A.none()},i=g=>{const w=eF(t,()=>d.data).fold(ae(rT),x=>x.title);vt(g,qi,{text:w}),sH(t,{value:w})},d=jC(t,"block_formats",Vp.SemiColon);return{tooltip:F0(t,tF(),rT),text:A.some(rT),icon:A.none(),isSelectedFor:s,getCurrentValue:A.none,getPreviewFor:a,onAction:gB(t),updateText:i,dataset:d,shouldHide:!1,isInvalid:g=>!t.formatter.canApply(g.format)}},AW=(t,s)=>ZC(t,s,nF(t),tF,"BlocksTextUpdate","blocks"),YR=(t,s)=>{const a=L0(s,nF(t));t.ui.registry.addNestedMenuItem("blocks",{text:OW,onSetup:ba(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},RW="Fonts",oF=ae("Font {0}"),XR="System Font",DW=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],sF=t=>{const s=t.split(/\s*,\s*/);return De(s,a=>a.replace(/^['"]+|['"]+$/g,""))},rF=(t,s)=>s.length>0&&Ou(s,a=>t.indexOf(a.toLowerCase())>-1),aF=(t,s)=>{if(t.indexOf("-apple-system")===0||s.length>0){const a=sF(t.toLowerCase());return rF(a,DW)||rF(a,s)}else return!1},JR=t=>{const s=()=>{const x=V=>V?sF(V)[0]:"",T=t.queryCommandValue("FontName"),R=w.data,N=T?T.toLowerCase():"",I=LP(t);return{matchOpt:Gt(R,V=>{const Y=V.format;return Y.toLowerCase()===N||x(Y).toLowerCase()===x(N).toLowerCase()}).orThunk(()=>Ft(aF(N,I),{title:XR,format:N})),font:T}},a=x=>T=>T.exists(R=>R.format===x),i=()=>{const{matchOpt:x}=s();return x},d=x=>()=>A.some({tag:"div",styles:x.indexOf("dings")===-1?{"font-family":x}:{}}),g=x=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontName",!1,x.format)})},h=x=>{const{matchOpt:T,font:R}=s(),N=T.fold(ae(R),I=>I.title);vt(x,qi,{text:N}),rH(t,{value:N})},w=jC(t,"font_family_formats",Vp.SemiColon);return{tooltip:F0(t,oF(),XR),text:A.some(XR),icon:A.none(),isSelectedFor:a,getCurrentValue:i,getPreviewFor:d,onAction:g,updateText:h,dataset:w,shouldHide:!1,isInvalid:eo}},cF=(t,s)=>ZC(t,s,JR(t),oF,"FontFamilyTextUpdate","fontfamily"),MW=(t,s)=>{const a=L0(s,JR(t));t.ui.registry.addNestedMenuItem("fontfamily",{text:s.shared.providers.translate(RW),onSetup:ba(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},iF={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},PW=(()=>{const t="[0-9]+",a="[eE]"+("[+-]?"+t),i="\\.",d=w=>`(?:${w})?`,h=`[+-]?(?:${["Infinity",t+i+d(t)+d(a),i+t+d(a),t+d(a)].join("|")})`;return new RegExp(`^(${h})(.*)$`)})(),NW=(t,s)=>ja(s,a=>ja(iF[a],i=>t===i)),aT=(t,s)=>A.from(PW.exec(t)).bind(i=>{const d=Number(i[1]),g=i[2];return NW(g,s)?A.some({value:d,unit:g}):A.none()}),lF=(t,s)=>aT(t,s).map(({value:a,unit:i})=>a+i),uF={tab:ae(9),escape:ae(27),enter:ae(13),backspace:ae(8),delete:ae(46),left:ae(37),up:ae(38),right:ae(39),down:ae(40),space:ae(32),home:ae(36),end:ae(35),pageUp:ae(33),pageDown:ae(34)},dF=(t,s,a,i)=>{let d=A.none();const g=ce=>ce.map(_e=>it.getValue(_e)).getOr(""),h=Mp(t,"NodeChange SwitchMode",ce=>{const _e=ce.getComponent();d=A.some(_e),a.updateInputValue(_e),Pt.set(_e,!t.selection.isEditable())}),w=ce=>({getComponent:ae(ce)}),x=Et(ee),T=ut("custom-number-input-events"),R=(ce,_e,Se)=>{const Le=g(d),Ie=a.getNewValue(Le,ce),xe=Le.length-`${Ie}`.length,Ht=d.map(Ot=>Ot.element.dom.selectionStart-xe),mt=d.map(Ot=>Ot.element.dom.selectionEnd-xe);a.onAction(Ie,Se),d.each(Ot=>{it.setValue(Ot,Ie),_e&&(Ht.each(_t=>Ot.element.dom.selectionStart=_t),mt.each(_t=>Ot.element.dom.selectionEnd=_t))})},N=(ce,_e)=>R((Se,Le)=>Se-Le,ce,_e),I=(ce,_e)=>R((Se,Le)=>Se+Le,ce,_e),z=ce=>Ci(ce.element).fold(A.none,_e=>(rc(_e),A.some(!0))),V=ce=>Gh(ce.element)?(i1(ce.element).each(_e=>rc(_e)),A.some(!0)):A.none(),Y=(ce,_e,Se,Le)=>{const Ie=Et(ee),xe=s.shared.providers.translate(Se),Ht=ut("altExecuting"),mt=Mp(t,"NodeChange SwitchMode",_t=>{Pt.set(_t.getComponent(),!t.selection.isEditable())}),Ot=_t=>{Pt.isDisabled(_t)||ce(!0)};return _r.sketch({dom:{tag:"button",attributes:{"aria-label":xe,"data-mce-name":_e},classes:Le.concat(_e)},components:[TE(_e,s.shared.providers.icons)],buttonBehaviours:Fe([Pt.config({}),Er.config(s.shared.providers.tooltips.getConfig({tooltipText:xe})),Jt(Ht,[_d({onSetup:mt,getApi:w},Ie),Jf({getApi:w},Ie),Te(sc(),(_t,Rn)=>{(Rn.event.raw.keyCode===uF.space()||Rn.event.raw.keyCode===uF.enter())&&(Pt.isDisabled(_t)||ce(!1))}),Te(mf(),Ot),Te(Nm(),Ot)])]),eventOrder:{[sc()]:[Ht,"keying"],[mf()]:[Ht,"alloy.base.behaviour"],[Nm()]:[Ht,"alloy.base.behaviour"],[yr()]:["alloy.base.behaviour",Ht,"tooltipping"],[ti()]:[Ht,"tooltipping"]}})},de=Pn(Y(ce=>N(!1,ce),"minus","Decrease font size",[])),te=Pn(Y(ce=>I(!1,ce),"plus","Increase font size",[])),ie=Pn({dom:{tag:"div",classes:["tox-input-wrapper"]},components:[bu.sketch({inputBehaviours:Fe([Pt.config({}),Jt(T,[_d({onSetup:h,getApi:w},x),Jf({getApi:w},x)]),Jt("input-update-display-text",[Te(qi,(ce,_e)=>{it.setValue(ce,_e.event.text)}),Te(Zu(),ce=>{a.onAction(it.getValue(ce))}),Te(Xl(),ce=>{a.onAction(it.getValue(ce))})]),yt.config({mode:"special",onEnter:ce=>(R(bn,!0,!0),A.some(!0)),onEscape:z,onUp:ce=>(I(!0,!1),A.some(!0)),onDown:ce=>(N(!0,!1),A.some(!0)),onLeft:(ce,_e)=>(_e.cut(),A.none()),onRight:(ce,_e)=>(_e.cut(),A.none())})])})],behaviours:Fe([It.config({}),yt.config({mode:"special",onEnter:V,onSpace:V,onEscape:z}),Jt("input-wrapper-events",[Te(dl(),ce=>{dt([de,te],_e=>{const Se=le.fromDom(_e.get(ce).element.dom);Gh(Se)&&jh(Se)})})])])});return{dom:{tag:"div",classes:["tox-number-input"],attributes:{...Rt(i)?{"data-mce-name":i}:{}}},components:[de.asSpec(),ie.asSpec(),te.asSpec()],behaviours:Fe([It.config({}),yt.config({mode:"flow",focusInside:zf.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:ce=>Gh(ce.element)?A.none():(rc(ce.element),A.some(!0))})])}},BW="Font sizes",fF=ae("Font size {0}"),mF="12pt",$W={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},IW={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},FW=(t,s)=>{const a=Math.pow(10,s);return Math.round(t*a)/a},LW=(t,s)=>/[0-9.]+px$/.test(t)?FW(parseInt(t,10)*72/96,s||0)+"pt":lt(IW,t).getOr(t),gF=t=>lt($W,t).getOr(""),hF=t=>{const s=()=>{let x=A.none();const T=w.data,R=t.queryCommandValue("FontSize");if(R)for(let N=3;x.isNone()&&N>=0;N--){const I=LW(R,N),z=gF(I);x=Gt(T,V=>V.format===R||V.format===I||V.format===z)}return{matchOpt:x,size:R}},a=x=>T=>T.exists(R=>R.format===x),i=()=>{const{matchOpt:x}=s();return x},d=ae(A.none),g=x=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontSize",!1,x.format)})},h=x=>{const{matchOpt:T,size:R}=s(),N=T.fold(ae(R),I=>I.title);vt(x,qi,{text:N}),oH(t,{value:N})},w=jC(t,"font_size_formats",Vp.Space);return{tooltip:F0(t,fF(),mF),text:A.some(mF),icon:A.none(),isSelectedFor:a,getPreviewFor:d,getCurrentValue:i,onAction:g,updateText:h,dataset:w,shouldHide:!1,isInvalid:eo}},HW=(t,s)=>ZC(t,s,hF(t),fF,"FontSizeTextUpdate","fontsize"),VW=t=>{var s;const a={step:1};return(s={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[t])!==null&&s!==void 0?s:a},zW=16,UW=t=>t>=0,WW=t=>{const s=()=>t.queryCommandValue("FontSize");return{updateInputValue:i=>vt(i,qi,{text:s()}),onAction:(i,d)=>t.execCommand("FontSize",!1,i,{skip_focus:!d}),getNewValue:(i,d)=>{aT(i,["unsupportedLength","empty"]);const g=s(),h=aT(i,["unsupportedLength","empty"]).or(aT(g,["unsupportedLength","empty"])),w=h.map(I=>I.value).getOr(zW),x=OP(t),T=h.map(I=>I.unit).filter(I=>I!=="").getOr(x),R=d(w,VW(T).step),N=`${UW(R)?R:w}${T}`;return N!==g&&mB(t,{value:N}),N}}},ZW=(t,s)=>dF(t,s,WW(t),"fontsizeinput"),pF=(t,s)=>{const a=L0(s,hF(t));t.ui.registry.addNestedMenuItem("fontsize",{text:BW,onSetup:ba(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},jW="Formats",bF=t=>Do(t)?"Formats":"Format {0}",QR=(t,s)=>{const a="Formats",i=h=>()=>t.formatter.match(h),d=h=>()=>{const w=t.formatter.get(h);return w!==void 0?A.some({tag:w.length>0&&(w[0].inline||w[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(h))}):A.none()},g=h=>{const w=N=>lR(N)?we(N.items,w):U$(N)?[{title:N.title,format:N.format}]:[],x=we(Z$(t),w),R=eF(t,ae(x)).fold(ae({title:a,tooltipLabel:""}),N=>({title:N.title,tooltipLabel:N.title}));vt(h,qi,{text:R.title}),dB(t,{value:R.tooltipLabel})};return{tooltip:F0(t,bF(""),""),text:A.some(a),icon:A.none(),isSelectedFor:i,getCurrentValue:A.none,getPreviewFor:d,onAction:gB(t),updateText:g,shouldHide:a_(t),isInvalid:h=>!t.formatter.canApply(h.format),dataset:s}},GW=(t,s)=>{const a={type:"advanced",...s.styles};return ZC(t,s,QR(t,a),bF,"StylesTextUpdate","styles")},vF=(t,s)=>{const a={type:"advanced",...s.styles},i=L0(s,QR(t,a));t.ui.registry.addNestedMenuItem("styles",{text:jW,onSetup:ba(t),getSubmenuItems:()=>i.items.validateItems(i.getStyleItems())})},yF=ae([ke("toggleClass"),ke("fetch"),kc("onExecute"),me("getHotspot",A.some),me("getAnchorOverrides",ae({})),dd(),kc("onItemExecute"),Nn("lazySink"),ke("dom"),vn("onOpen"),Bs("splitDropdownBehaviours",[Yo,yt,It]),me("matchWidth",!1),me("useMinWidth",!1),me("eventOrder",{}),Nn("role")].concat(nE())),qW=lr({factory:_r,schema:[ke("dom")],name:"arrow",defaults:()=>({buttonBehaviours:Fe([It.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(Ku)},buttonBehaviours:Fe([on.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])})}),KW=lr({factory:_r,schema:[ke("dom")],name:"button",defaults:()=>({buttonBehaviours:Fe([It.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(a=>{t.onExecute(a,s)})}})}),YW=ae([qW,KW,dc({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[ke("text")],name:"aria-descriptor"}),Dc({schema:[Sf()],name:"menu",defaults:t=>({onExecute:(s,a)=>{s.getSystem().getByUid(t.uid).each(i=>{t.onItemExecute(i,s,a)})}})}),FB()]),H0=(t,s,a,i)=>{const d=R=>{yn.getCurrent(R).each(N=>{Je.highlightFirst(N),yt.focusIn(N)})},g=R=>{UA(t,bn,R,i,d,ra.HighlightMenuAndItem).get(ee)},h=R=>(g(R),A.some(!0)),w=R=>{const N=na(R,t,"button");return Ku(N),A.some(!0)},x={...Bn([po((R,N)=>{He(R,t,"aria-descriptor").each(z=>{const V=ut("aria");ct(z.element,"id",V),ct(R.element,"aria-describedby",V)})})]),...e_(A.some(g))},T={repositionMenus:R=>{on.isOn(R)&&HB(R)}};return{uid:t.uid,dom:t.dom,components:s,apis:T,eventOrder:{...t.eventOrder,[ma()]:["disabling","toggling","alloy.base.behaviour"]},events:x,behaviours:$s(t.splitDropdownBehaviours,[Yo.config({others:{sandbox:R=>{const N=na(R,t,"arrow");return jA(t,R,{onOpen:()=>{on.on(N),on.on(R)},onClose:()=>{on.off(N),on.off(R)}})}}}),yt.config({mode:"special",onSpace:w,onEnter:w,onDown:h}),It.config({}),on.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},cT=Vr({name:"SplitDropdown",configFields:yF(),partFields:YW(),factory:H0,apis:{repositionMenus:(t,s)=>t.repositionMenus(s)}}),CF=t=>({isEnabled:()=>!Pt.isDisabled(t),setEnabled:s=>Pt.set(t,!s),setText:s=>vt(t,qi,{text:s}),setIcon:s=>vt(t,Hg,{icon:s})}),XW=t=>({setActive:s=>{on.set(t,s)},isActive:()=>on.isOn(t),isEnabled:()=>!Pt.isDisabled(t),setEnabled:s=>Pt.set(t,!s),setText:s=>vt(t,qi,{text:s}),setIcon:s=>vt(t,Hg,{icon:s})}),wF=(t,s)=>t.map(a=>({"aria-label":s.translate(a)})).getOr({}),SF=ut("focus-button"),eD=(t,s,a,i,d,g)=>{const h=s.map(x=>Pn(J5(x,"tox-tbtn",d))),w=t.map(x=>Pn(Lg(x,d.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(s.isSome()?["tox-tbtn--select"]:[]),attributes:{...wF(a,d),...Rt(g)?{"data-mce-name":g}:{}}},components:Ap([w.map(x=>x.asSpec()),h.map(x=>x.asSpec())]),eventOrder:{[oc()]:["focusing","alloy.base.behaviour",Fg],[yr()]:[Fg,"toolbar-group-button-events"]},buttonBehaviours:Fe([Ys.toolbarButton(d.isDisabled),Is(),Jt(Fg,[po((x,T)=>EE(x)),Te(qi,(x,T)=>{h.bind(R=>R.getOpt(x)).each(R=>{Vt.set(R,[Lo(d.translate(T.event.text))])})}),Te(Hg,(x,T)=>{w.bind(R=>R.getOpt(x)).each(R=>{Vt.set(R,[Lg(T.event.icon,d.icons)])})}),Te(oc(),(x,T)=>{T.event.prevent(),un(x,SF)})])].concat(i.getOr([])))}},JW=(t,s,a,i,d)=>{const g=s.shared,h=Et(ee),w={toolbarButtonBehaviours:[],getApi:CF,onSetup:t.onSetup},x=[Jt("toolbar-group-button-events",[_d(w,h),Jf(w,h)])];return Wg.sketch({lazySink:g.getSink,fetch:()=>Tr.nu(T=>{T(De(a(t.items),tT))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:eD(t.icon,t.text,t.tooltip,A.some(x),g.providers,d),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:i}}}})},xF=(t,s,a,i)=>{var d;const g=Et(ee),h=eD(t.icon,t.text,t.tooltip,A.none(),a,i);return _r.sketch({dom:h.dom,components:h.components,eventOrder:X5,buttonBehaviours:{...Fe([Jt("toolbar-button-events",[Y5({onAction:t.onAction,getApi:s.getApi}),_d(s,g),Jf(s,g)]),...t.tooltip.map(w=>Er.config(a.tooltips.getConfig({tooltipText:a.translate(w)+t.shortcut.map(x=>` (${hA(x)})`).getOr("")}))).toArray(),Ys.toolbarButton(()=>!t.enabled||a.isDisabled()),Is()].concat(s.toolbarButtonBehaviours)),[Fg]:(d=h.buttonBehaviours)===null||d===void 0?void 0:d[Fg]}})},tD=(t,s,a)=>_F(t,s,[],a),_F=(t,s,a,i)=>xF(t,{toolbarButtonBehaviours:a.length>0?[Jt("toolbarButtonWith",a)]:[],getApi:CF,onSetup:t.onSetup},s,i),QW=(t,s,a)=>nD(t,s,[],a),nD=(t,s,a,i)=>xF(t,{toolbarButtonBehaviours:[Vt.config({}),on.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(a.length>0?[Jt("toolbarToggleButtonWith",a)]:[]),getApi:XW,onSetup:t.onSetup},s,i),EF=(t,s,a)=>i=>Tr.nu(d=>s.fetch(d)).map(d=>A.from(aE(Po(HA(ut("menu-value"),d,g=>{s.onItemAction(t(i),g)},s.columns,s.presets,Tl.CLOSE_ON_EXECUTE,s.select.getOr(eo),a),{movement:tE(s.columns,s.presets),menuBehaviours:Q2.unnamedEvents(s.columns!=="auto"?[]:[po((g,h)=>{U_(g,4,bN(s.presets)).each(({numRows:w,numColumns:x})=>{yt.setGridSize(g,w,x)})})])})))),eZ=(t,s,a)=>{const i=Et(t.tooltip.getOr("")),d=w=>({isEnabled:()=>!Pt.isDisabled(w),setEnabled:x=>Pt.set(w,!x),setIconFill:(x,T)=>{$n(w.element,`svg path[class="${x}"], rect[class="${x}"]`).each(R=>{ct(R,"fill",T)})},setActive:x=>{ct(w.element,"aria-pressed",x),$n(w.element,"span").each(T=>{w.getSystem().getByDom(T).each(R=>on.set(R,x))})},isActive:()=>$n(w.element,"span").exists(x=>w.getSystem().getByDom(x).exists(on.isOn)),setText:x=>$n(w.element,"span").each(T=>w.getSystem().getByDom(T).each(R=>vt(R,qi,{text:x}))),setIcon:x=>$n(w.element,"span").each(T=>w.getSystem().getByDom(T).each(R=>vt(R,Hg,{icon:x}))),setTooltip:x=>{const T=s.providers.translate(x);ct(w.element,"aria-label",T),i.set(x)}}),g=Et(ee),h={getApi:d,onSetup:t.onSetup};return cT.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...wF(t.tooltip,s.providers),...Rt(a)?{"data-mce-name":a}:{}}},onExecute:w=>{const x=d(w);x.isEnabled()&&t.onAction(x)},onItemExecute:(w,x,T)=>{},splitDropdownBehaviours:Fe([Ys.splitButton(s.providers.isDisabled),Is(),Jt("split-dropdown-events",[po((w,x)=>EE(w)),Te(SF,It.focus),_d(h,g),Jf(h,g)]),S0.config({}),...t.tooltip.map(w=>Er.config({...s.providers.tooltips.getConfig({tooltipText:s.providers.translate(w),onShow:x=>{if(i.get()!==w){const T=s.providers.translate(i.get());Er.setComponents(x,s.providers.tooltips.getComponents({tooltipText:T}))}}})})).toArray()]),eventOrder:{[yr()]:["alloy.base.behaviour","split-dropdown-events","tooltipping"],[ti()]:["split-dropdown-events","tooltipping"]},toggleClass:"tox-tbtn--enabled",lazySink:s.getSink,fetch:EF(d,t,s.providers),parts:{menu:G2(!1,t.columns,t.presets)},components:[cT.parts.button(eD(t.icon,t.text,A.none(),A.some([on.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),s.providers)),cT.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:WO("chevron-down",s.providers.icons)},buttonBehaviours:Fe([Ys.splitButton(s.providers.isDisabled),Is(),ZO()])}),cT.parts["aria-descriptor"]({text:s.providers.translate("To open the popup, press Shift+Enter")})]})},tZ=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],GC=(t,s)=>(a,i,d,g)=>{const h=t(a).mapError(w=>Ri(w)).getOrDie();return s(h,i,d,g)},nZ={button:GC(F_,(t,s,a,i)=>tD(t,s.shared.providers,i)),togglebutton:GC(u0,(t,s,a,i)=>QW(t,s.shared.providers,i)),menubutton:GC(wR,(t,s,a,i)=>NC(t,"tox-tbtn",s,A.none(),!1,i)),splitbutton:GC(SR,(t,s,a,i)=>eZ(t,s.shared,i)),grouptoolbarbutton:GC(CU,(t,s,a,i)=>{const d=a.ui.registry.getAll().buttons,g=w=>zp(a,{buttons:d,toolbar:w,allowToolbarGroups:!1},s,A.none()),h={[ud]:s.shared.header.isPositionedAtTop()?ld.TopToBottom:ld.BottomToTop};switch(t0(a)){case Ui.floating:return JW(t,s,g,h,i);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},oZ=(t,s,a,i)=>lt(nZ,t.type).fold(()=>(console.error("skipping button defined by",t),A.none()),d=>A.some(d(t,s,a,i))),TF={styles:GW,fontsize:HW,fontsizeinput:ZW,fontfamily:cF,blocks:AW,align:TW},kF=t=>{const s=De(tZ,a=>{const i=fo(a.items,d=>Ln(t,d)||Ln(TF,d));return{name:a.name,items:i}});return fo(s,a=>a.items.length>0)},sZ=t=>{const s=t.split("|");return De(s,a=>({items:a.trim().split(" ")}))},rZ=t=>Gn(t,s=>Ln(s,"name")&&Ln(s,"items")),aZ=t=>{const s=t.toolbar,a=t.buttons;return s===!1?[]:s===void 0||s===!0?kF(a):J(s)?sZ(s):rZ(s)?s:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},cZ=(t,s,a,i,d,g)=>lt(s,a.toLowerCase()).orThunk(()=>g.bind(h=>ur(h,w=>lt(s,w+a.toLowerCase())))).fold(()=>lt(TF,a.toLowerCase()).map(h=>h(t,d)),h=>h.type==="grouptoolbarbutton"&&!i?(console.warn(`Ignoring the '${a}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),A.none()):oZ(h,d,t,a.toLowerCase())),zp=(t,s,a,i)=>{const d=aZ(s),g=De(d,h=>{const w=we(h.items,x=>x.trim().length===0?[]:cZ(t,s.buttons,x,s.allowToolbarGroups,a,i).toArray());return{title:A.from(t.translate(h.name)),items:w}});return fo(g,h=>h.items.length>0)},OF=(t,s,a,i)=>{const d=s.mainUi.outerContainer,g=a.toolbar,h=a.buttons;if(Gn(g,J)){const w=g.map(x=>{const T={toolbar:x,buttons:h,allowToolbarGroups:a.allowToolbarGroups};return zp(t,T,i,A.none())});ro.setToolbars(d,w)}else ro.setToolbar(d,zp(t,a,i,A.none()))},qC=Qa(),iT=qC.os.isiOS()&&qC.os.version.major<=12,AF=(t,s)=>{const{uiMotherships:a}=s,i=t.dom;let d=t.getWin();const g=t.getDoc().documentElement,h=Et(To(d.innerWidth,d.innerHeight)),w=Et(To(g.offsetWidth,g.offsetHeight)),x=()=>{const I=h.get();(I.left!==d.innerWidth||I.top!==d.innerHeight)&&(h.set(To(d.innerWidth,d.innerHeight)),kA(t))},T=()=>{const I=t.getDoc().documentElement,z=w.get();(z.left!==I.offsetWidth||z.top!==I.offsetHeight)&&(w.set(To(I.offsetWidth,I.offsetHeight)),kA(t))},R=I=>{eH(t,I)};i.bind(d,"resize",x),i.bind(d,"scroll",R);const N=Oy(le.fromDom(t.getBody()),"load",T);t.on("hide",()=>{dt(a,I=>{qt(I.element,"display","none")})}),t.on("show",()=>{dt(a,I=>{kn(I.element,"display")})}),t.on("NodeChange",T),t.on("remove",()=>{N.unbind(),i.unbind(d,"resize",x),i.unbind(d,"scroll",R),d=null})},iZ=(t,s,a)=>{Gf(t)&&wl(a.mainUi.mothership.element,a.popupUi.mothership),Cx(s,a.dialogUi.mothership)};var lZ=Object.freeze({__proto__:null,render:(t,s,a,i,d)=>{const{mainUi:g,uiMotherships:h}=s,w=Et(0),x=g.outerContainer;wW(t);const T=le.fromDom(d.targetNode),R=Zc(Eo(T));wl(T,g.mothership),iZ(t,R,s),t.on("SkinLoaded",()=>{ro.setSidebar(x,a.sidebar,$P(t)),OF(t,s,a,i),w.set(t.getWin().innerWidth),ro.setMenubar(x,qI(t,a)),ro.setViews(x,a.views),AF(t,s)});const N=ro.getSocket(x).getOrDie("Could not find expected socket element");if(iT){ka(N.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const Y=$5(()=>{t.dispatch("ScrollContent")},20),de=ea(N.element,"scroll",Y.throttle);t.on("remove",de.unbind)}WN(t,s),t.addCommand("ToggleSidebar",(Y,de)=>{ro.toggleSidebar(x,de),t.dispatch("ToggleSidebar")}),t.addQueryValueHandler("ToggleSidebar",()=>{var Y;return(Y=ro.whichSidebar(x))!==null&&Y!==void 0?Y:""}),t.addCommand("ToggleView",(Y,de)=>{if(ro.toggleView(x,de)){const te=x.element;g.mothership.broadcastOn([Sl()],{target:te}),dt(h,ie=>{ie.broadcastOn([Sl()],{target:te})}),Ge(ro.whichView(x))&&(t.focus(),t.nodeChanged(),ro.refreshToolbar(x))}}),t.addQueryValueHandler("ToggleView",()=>{var Y;return(Y=ro.whichView(x))!==null&&Y!==void 0?Y:""});const I=t0(t),z=()=>{ro.refreshToolbar(s.mainUi.outerContainer)};(I===Ui.sliding||I===Ui.floating)&&t.on("ResizeWindow ResizeEditor ResizeContent",()=>{const Y=t.getWin().innerWidth;Y!==w.get()&&(z(),w.set(Y))});const V={setEnabled:Y=>{Z_(s,!Y)},isEnabled:()=>!Pt.isDisabled(x)};return{iframeContainer:N.element.dom,editorContainer:x.element.dom,api:V}}});const RF=t=>/^[0-9\.]+(|px)$/i.test(""+t)?A.some(parseInt(""+t,10)):A.none(),oD=t=>fn(t)?t+"px":t,Up=(t,s,a)=>{const i=s.filter(g=>t<g),d=a.filter(g=>t>g);return i.or(d).getOr(t)},DF=t=>{const s=s_(t),a=OO(t),i=P2(t);return RF(s).map(d=>Up(d,a,i))},MF=t=>DF(t).getOr(s_(t)),sD=t=>{const s=TO(t),a=kO(t),i=r_(t);return RF(s).map(d=>Up(d,a,i))},PF=t=>sD(t).getOr(TO(t)),{ToolbarLocation:rD,ToolbarMode:aD}=H7,uZ=40,dZ=(t,s,a,i,d)=>{const{mainUi:g,uiMotherships:h}=a,w=Cp.DOM,x=s0(t),T=xp(t),R=r_(t).or(sD(t)),N=i.shared.header,I=N.isPositionedAtTop,z=150,V=t0(t),Y=V===aD.sliding||V===aD.floating,de=Et(!1),te=()=>de.get()&&!t.removed,ie=cn=>Y?cn.fold(ae(0),Ze=>Ze.components().length>1?_s(Ze.components()[1].element):0):0,ce=cn=>{switch(MO(t)){case rD.auto:const Ze=ro.getToolbar(g.outerContainer),ht=ie(Ze),Yt=_s(cn.element)-ht,Dt=Mo(s);if(Dt.y>Yt)return"top";{const Wt=c1(s),Qn=Math.max(Wt.dom.scrollHeight,_s(Wt));return Dt.bottom<Qn-Yt||Br().bottom<Dt.bottom-Yt?"bottom":"top"}case rD.bottom:return"bottom";case rD.top:default:return"top"}},_e=cn=>{d.on(Ze=>{wo.setModes(Ze,[cn]),N.setDockingMode(cn);const ht=I()?ld.TopToBottom:ld.BottomToTop;ct(Ze.element,ud,ht)})},Se=()=>{d.on(cn=>{const Ze=R.getOrThunk(()=>hh().width-Si(s).left-10);qt(cn.element,"max-width",Ze+"px")})},Le=(cn,Ze)=>{d.on(ht=>{const Yt=ro.getToolbar(g.outerContainer),Dt=ie(Yt),Tt=Mo(s),Wt=Ie(t,g.outerContainer.element),Qn=()=>Wt.fold(()=>Tt.x,Ur=>{const yi=Mo(Ur);return qn(Ur,Zr())?Tt.x:Tt.x-yi.x}),Dn=()=>Wt.fold(()=>I()?Math.max(Tt.y-_s(ht.element)+Dt,0):Tt.bottom,Ur=>{var yi;const el=Mo(Ur),hc=(yi=Ur.dom.scrollTop)!==null&&yi!==void 0?yi:0,Jp=qn(Ur,Zr())?Math.max(Tt.y-_s(ht.element)+Dt,0):Tt.y-el.y+hc-_s(ht.element)+Dt;return I()?Jp:Tt.bottom}),ca=Qn(),vi=Ft(cn,Math.ceil(g.outerContainer.element.dom.getBoundingClientRect().width)).filter(Ur=>Ur>z).map(Ur=>{const yi=Ze.getOr(Gr()),el=window.innerWidth-(ca-yi.left),hc=Math.max(Math.min(Ur,el),z);return el<Ur&&qt(g.outerContainer.element,"width",hc+"px"),{width:hc+"px"}}).getOr({width:"max-content"}),ku={position:"absolute",left:Math.round(ca)+"px",top:Dn()+"px"};ka(g.outerContainer.element,{...ku,...vi})})},Ie=(cn,Ze)=>Gf(cn)?Ju(Ze):A.none(),xe=()=>{dt(h,cn=>{cn.broadcastOn([Ff()],{})})},Ht=()=>!x&&(da(g.outerContainer.element).left+Wl(g.outerContainer.element)>=window.innerWidth-uZ||nr(g.outerContainer.element,"width").isSome())?(qt(g.outerContainer.element,"position","absolute"),qt(g.outerContainer.element,"left","0px"),kn(g.outerContainer.element,"width"),!0):!1,mt=cn=>{if(!te())return;x||Se();const Ze=Gr(),ht=x?!1:Ht();if(Y&&ro.refreshToolbar(g.outerContainer),!x){const Yt=Gr(),Dt=Ft(Ze.left!==Yt.left,Ze);Le(ht,Dt),Dt.each(Tt=>{p1(Tt.left,Yt.top)})}T&&d.on(cn),xe()},Ot=()=>x||!T||!te()?!1:d.get().exists(cn=>{const Ze=N.getDockingMode(),ht=ce(cn);return ht!==Ze?(_e(ht),!0):!1});return{isVisible:te,isPositionedAtTop:I,show:()=>{de.set(!0),qt(g.outerContainer.element,"display","flex"),w.addClass(t.getBody(),"mce-edit-focus"),dt(h,cn=>{kn(cn.element,"display")}),Ot(),Gf(t)?mt(cn=>wo.isDocked(cn)?wo.reset(cn):wo.refresh(cn)):mt(wo.refresh)},hide:()=>{de.set(!1),qt(g.outerContainer.element,"display","none"),w.removeClass(t.getBody(),"mce-edit-focus"),dt(h,cn=>{qt(cn.element,"display","none")})},update:mt,updateMode:()=>{Ot()&&mt(wo.reset)},repositionPopups:xe}},NF=(t,s)=>{const a=Mo(t);return{pos:s?a.y:a.bottom,bounds:a}},fZ=(t,s,a,i)=>{const d=Et(NF(s,a.isPositionedAtTop())),g=T=>{const{pos:R,bounds:N}=NF(s,a.isPositionedAtTop()),{pos:I,bounds:z}=d.get(),V=N.height!==z.height||N.width!==z.width;d.set({pos:R,bounds:N}),V&&kA(t,T),a.isVisible()&&(I!==R?a.update(wo.reset):V&&(a.updateMode(),a.repositionPopups()))};i||(t.on("activate",a.show),t.on("deactivate",a.hide)),t.on("SkinLoaded ResizeWindow",()=>a.update(wo.reset)),t.on("NodeChange keydown",T=>{requestAnimationFrame(()=>g(T))});let h=0;const w=E3(()=>a.update(wo.refresh),33);t.on("ScrollWindow",()=>{const T=Gr().left;T!==h&&(h=T,w.throttle()),a.updateMode()}),Gf(t)&&t.on("ElementScroll",T=>{a.update(wo.refresh)});const x=ec();x.set(Oy(le.fromDom(t.getBody()),"load",T=>g(T.raw))),t.on("remove",()=>{x.clear()})};var KC=Object.freeze({__proto__:null,render:(t,s,a,i,d)=>{const{mainUi:g}=s,h=Mn(),w=le.fromDom(d.targetNode),x=dZ(t,w,s,i,h),T=TP(t);SW(t);const R=()=>{if(h.isSet()){x.show();return}h.set(ro.getHeader(g.outerContainer).getOrDie());const I=g_(t);Gf(t)?(wl(w,g.mothership),wl(w,s.popupUi.mothership)):Cx(I,g.mothership),Cx(I,s.dialogUi.mothership);const z=()=>{OF(t,s,a,i),ro.setMenubar(g.outerContainer,qI(t,a)),x.show(),fZ(t,w,x,T),t.nodeChanged()};T?t.once("SkinLoaded",z):z()};t.on("show",R),t.on("hide",x.hide),T||(t.on("focus",R),t.on("blur",x.hide)),t.on("init",()=>{(t.hasFocus()||T)&&R()}),WN(t,s);const N={show:R,hide:x.hide,setEnabled:I=>{Z_(s,!I)},isEnabled:()=>!Pt.isDisabled(g.outerContainer)};return{editorContainer:g.outerContainer.element.dom,api:N}}});const mZ=()=>{const t=Mn(),s=Mn(),a=Mn();return{dialogUi:t,popupUi:s,mainUi:a,getUiMotherships:()=>{const g=t.get().map(w=>w.mothership),h=s.get().map(w=>w.mothership);return g.fold(()=>h.toArray(),w=>h.fold(()=>[w],x=>qn(w.element,x.element)?[w]:[w,x]))},lazyGetInOuterOrDie:(g,h)=>()=>a.get().bind(w=>h(w.outerContainer)).getOrDie(`Could not find ${g} element in OuterContainer`)}},gZ="contexttoolbar-show",BF="contexttoolbar-hide",$F=t=>({hide:()=>un(t,Ds()),getValue:()=>it.getValue(t)}),IF=(t,s)=>Te(K5,(a,i)=>{const d=t.get(a),g=$F(d);s.onAction(g,i.event.buttonApi)}),FF=(t,s,a)=>{const{primary:i,...d}=s.original,g=Ec(F_({...d,type:"button",onAction:ee}));return _F(g,a,[IF(t,s)])},hZ=(t,s,a)=>{const{primary:i,...d}=s.original,g=Ec(u0({...d,type:"togglebutton",onAction:ee}));return nD(g,a,[IF(t,s)])},pZ=t=>t.type==="contextformtogglebutton",bZ=(t,s,a)=>pZ(s)?hZ(t,s,a):FF(t,s,a),vZ=(t,s,a)=>{const i=De(s,h=>Pn(bZ(t,h,a)));return{asSpecs:()=>De(i,h=>h.asSpec()),findPrimary:h=>ur(s,(w,x)=>w.primary?A.from(i[x]).bind(T=>T.getOpt(h)).filter(Ae(Pt.isDisabled)):A.none())}},LF=(t,s)=>{const a=t.label.fold(()=>({}),g=>({"aria-label":g})),i=Pn(bu.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:t.initValue(),inputAttributes:a,selectOnFocus:!0,inputBehaviours:Fe([yt.config({mode:"special",onEnter:g=>d.findPrimary(g).map(h=>(Ku(h),!0)),onLeft:(g,h)=>(h.cut(),A.none()),onRight:(g,h)=>(h.cut(),A.none())})])})),d=vZ(i,t.commands,s);return[{title:A.none(),items:[i.asSpec()]},{title:A.none(),items:d.asSpecs()}]},HF={renderContextForm:(t,s,a)=>$0({type:t,uid:ut("context-toolbar"),initGroups:LF(s,a),onEscape:A.none,cyclicKeying:!0,providers:a}),buildInitGroups:LF},VF=(t,s,a)=>s.bottom-t.y>=a&&t.bottom-s.y>=a,yZ=t=>{const s=t.getBoundingClientRect();if(s.height<=0&&s.width<=0){const a=cv(le.fromDom(t.startContainer),t.startOffset).element;return(Ka(a)?Uc(a):A.some(a)).filter(no).map(d=>d.dom.getBoundingClientRect()).getOr(s)}else return s},uT=t=>{const s=t.selection.getRng(),a=yZ(s);if(t.inline){const i=Gr();return Ts(i.left+a.left,i.top+a.top,a.width,a.height)}else{const i=Nr(le.fromDom(t.getBody()));return Ts(i.x+a.left,i.y+a.top,a.width,a.height)}},cD=(t,s)=>s.filter(a=>Hs(a)&&gm(a)).map(Nr).getOrThunk(()=>uT(t)),zF=(t,s,a)=>{const i=Math.max(t.x+a,s.x),d=Math.min(t.right-a,s.right);return{x:i,width:d-i}},UF=(t,s,a,i,d,g)=>{const h=le.fromDom(t.getContainer()),w=$n(h,".tox-editor-header").getOr(h),x=Mo(w),T=x.y>=s.bottom,R=i&&!T;if(t.inline&&R)return{y:Math.max(x.bottom+g,a.y),bottom:a.bottom};if(t.inline&&!R)return{y:a.y,bottom:Math.min(x.y-g,a.bottom)};const N=d==="line"?Mo(h):s;return R?{y:Math.max(x.bottom+g,a.y),bottom:Math.min(N.bottom-g,a.bottom)}:{y:Math.max(N.y+g,a.y),bottom:Math.min(x.y-g,a.bottom)}},WF=(t,s,a,i=0)=>{const d=hh(window),g=Mo(le.fromDom(t.getContentAreaContainer())),h=d_(t)||f_(t)||Sp(t),{x:w,width:x}=zF(g,d,i);if(t.inline&&!h)return Ts(w,d.y,x,d.height);{const T=s.header.isPositionedAtTop(),{y:R,bottom:N}=UF(t,g,d,T,a,i);return Ts(w,R,x,N-R)}},om=12,YC={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},XC={maxHeightFunction:rg(),maxWidthFunction:RR()},iD=(t,s)=>{const a=t.selection.getRng(),i=cv(le.fromDom(a.startContainer),a.startOffset);return a.startContainer===a.endContainer&&a.startOffset===a.endOffset-1&&qn(i.element,s)},lD=(t,s,a)=>{const i=nr(t,"position");qt(t,"position",s);const d=a(t);return i.each(g=>qt(t,"position",g)),d},uD=t=>t==="node",dT=(t,s,a,i,d)=>{const g=uT(t),h=i.lastElement().exists(w=>qn(a,w));if(iD(t,a))return h?H$:Dl;if(h)return lD(s,i.getMode(),()=>VF(g,Mo(s),-20)&&!i.isReposition()?R9:H$);{const w=i.getMode()==="fixed"?d.y+Gr().top:d.y,x=_s(s)+om;return w+x<=g.y?Dl:LC}},ZF=(t,s,a,i)=>{const d=x=>(T,R,N,I,z)=>{const V=dT(t,I,x,a,z),Y={...T,y:z.y,height:z.height};return{...V(Y,R,N,I,z),alwaysFit:!0}},g=x=>uD(i)?[d(x)]:[];return s?{onLtr:x=>[is,bs,cs,vs,Zn,Os].concat(g(x)),onRtl:x=>[is,cs,bs,Zn,vs,Os].concat(g(x))}:{onLtr:x=>[Os,is,vs,bs,Zn,cs].concat(g(x)),onRtl:x=>[Os,is,Zn,cs,vs,bs].concat(g(x))}},jF=(t,s,a,i)=>s==="line"?{bubble:si(om,0,YC),layouts:{onLtr:()=>[Cy],onRtl:()=>[ob]},overrides:XC}:{bubble:si(0,om,YC,1/om),layouts:ZF(t,a,i,s),overrides:XC},JC=(t,s)=>{const a=fo(s,g=>g.predicate(t.dom)),{pass:i,fail:d}=lm(a,g=>g.type==="contexttoolbar");return{contextToolbars:i,contextForms:d}},CZ=t=>{if(t.length<=1)return t;{const s=g=>ja(t,h=>h.position===g),a=g=>fo(t,h=>h.position===g),i=s("selection"),d=s("node");if(i||d)if(d&&i){const g=a("node"),h=De(a("selection"),w=>({...w,position:"node"}));return g.concat(h)}else return a(i?"selection":"node");else return a("line")}},GF=t=>{if(t.length<=1)return t;{const s=i=>Gt(t,d=>d.position===i);return s("selection").orThunk(()=>s("node")).orThunk(()=>s("line")).map(i=>i.position).fold(()=>[],i=>fo(t,d=>d.position===i))}},wZ=(t,s,a)=>{const i=JC(t,s);if(i.contextForms.length>0)return A.some({elem:t,toolbars:[i.contextForms[0]]});{const d=JC(t,a);if(d.contextForms.length>0)return A.some({elem:t,toolbars:[d.contextForms[0]]});if(i.contextToolbars.length>0||d.contextToolbars.length>0){const g=CZ(i.contextToolbars.concat(d.contextToolbars));return A.some({elem:t,toolbars:g})}else return A.none()}},SZ=(t,s,a)=>t(s)?A.none():T1(s,i=>{if(no(i)){const{contextToolbars:d,contextForms:g}=JC(i,a.inNodeScope),h=g.length>0?g:GF(d);return h.length>0?A.some({elem:i,toolbars:h}):A.none()}else return A.none()},t),fT=(t,s)=>{const a=le.fromDom(s.getBody()),i=h=>qn(h,a),d=h=>!i(h)&&!Cc(a,h),g=le.fromDom(s.selection.getNode());return d(g)?A.none():wZ(g,t.inNodeScope,t.inEditorScope).orThunk(()=>SZ(i,g,t))},qF=(t,s)=>{const a={},i=[],d=[],g={},h={},w=(R,N)=>{const I=Ec(J2(N));a[R]=I,I.launch.map(z=>{g["form:"+R]={...N.launch,type:z.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{s(I)}}}),I.scope==="editor"?d.push(I):i.push(I),h[R]=I},x=(R,N)=>{P8(N).each(I=>{N.scope==="editor"?d.push(I):i.push(I),h[R]=I})},T=$o(t);return dt(T,R=>{const N=t[R];N.type==="contextform"?w(R,N):N.type==="contexttoolbar"&&x(R,N)}),{forms:a,inNodeScope:i,inEditorScope:d,lookupTable:h,formNavigators:g}},KF=ut("forward-slide"),YF=ut("backward-slide"),dD=ut("change-slide-event"),fD="tox-pop--resizing",xZ=t=>{const s=Et([]);return Ao.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:a=>{s.set([]),Ao.getContent(a).each(i=>{kn(i.element,"visibility")}),Oo(a.element,fD),kn(a.element,"width")},inlineBehaviours:Fe([Jt("context-toolbar-events",[Lm(wh(),(a,i)=>{i.event.raw.propertyName==="width"&&(Oo(a.element,fD),kn(a.element,"width"))}),Te(dD,(a,i)=>{const d=a.element;kn(d,"width");const g=fa(d);Ao.setContent(a,i.event.contents),oo(d,fD);const h=fa(d);qt(d,"width",g+"px"),Ao.getContent(a).each(w=>{i.event.focus.bind(x=>(rc(x),Qr(d))).orThunk(()=>(yt.focusIn(w),Li(Eo(d))))}),setTimeout(()=>{qt(a.element,"width",h+"px")},0)}),Te(KF,(a,i)=>{Ao.getContent(a).each(d=>{s.set(s.get().concat([{bar:d,focus:Li(Eo(a.element))}]))}),vt(a,dD,{contents:i.event.forwardContents,focus:A.none()})}),Te(YF,(a,i)=>{n1(s.get()).each(d=>{s.set(s.get().slice(0,s.get().length-1)),vt(a,dD,{contents:Fr(d.bar),focus:d.focus})})})]),yt.config({mode:"special",onEscape:a=>n1(s.get()).fold(()=>t.onEscape(),i=>(un(a,YF),A.some(!0)))})]),lazySink:()=>tn.value(t.sink)})},mT="tox-pop--transition",XF=(t,s,a,i)=>{const d=i.backstage,g=d.shared,h=Qa().deviceType.isTouch,w=Mn(),x=Mn(),T=Mn(),R=wr(xZ({sink:a,onEscape:()=>(t.focus(),A.some(!0))})),N=()=>{const mt=T.get().getOr("node"),Ot=uD(mt)?1:0;return WF(t,g,mt,Ot)},I=()=>!t.removed&&!(h()&&d.isContextMenuOpen()),z=mt=>Ga(Au(mt,w.get(),qn),!0),V=()=>{if(I()){const mt=N(),Ot=Ga(T.get(),"node")?cD(t,w.get()):uT(t);return mt.height<=0||!VF(Ot,mt,.01)}else return!0},Y=()=>{w.clear(),x.clear(),T.clear(),Ao.hide(R)},de=()=>{if(Ao.isOpen(R)){const mt=R.element;kn(mt,"display"),V()?qt(mt,"display","none"):(x.set(0),Ao.reposition(R))}},te=mt=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[mt],behaviours:Fe([yt.config({mode:"acyclic"}),Jt("pop-dialog-wrap-events",[po(Ot=>{t.shortcuts.add("ctrl+F9","focus statusbar",()=>yt.focusIn(Ot))}),gl(Ot=>{t.shortcuts.remove("ctrl+F9")})])])}),ie=jc(()=>qF(s,mt=>{const Ot=Se([mt]);vt(R,KF,{forwardContents:te(Ot)})})),ce=(mt,Ot)=>zp(t,{buttons:mt,toolbar:Ot.items,allowToolbarGroups:!1},i.backstage,A.some(["form:"])),_e=(mt,Ot)=>HF.buildInitGroups(mt,Ot),Se=mt=>{const{buttons:Ot}=t.ui.registry.getAll(),_t=ie(),Rn={...Ot,..._t.formNavigators},Sn=t0(t)===Ui.scrolling?Ui.scrolling:Ui.default,cn=Xt(De(mt,Ze=>Ze.type==="contexttoolbar"?ce(Rn,Ze):_e(Ze,g.providers)));return $0({type:Sn,uid:ut("context-toolbar"),initGroups:cn,onEscape:A.none,cyclicKeying:!0,providers:g.providers})},Le=(mt,Ot)=>{const _t=mt==="node"?g.anchors.node(Ot):g.anchors.cursor(),Rn=jF(t,mt,h(),{lastElement:w.get,isReposition:()=>Ga(x.get(),0),getMode:()=>qs.getMode(a)});return Po(_t,Rn)},Ie=(mt,Ot)=>{if(Ht.cancel(),!I())return;const _t=Se(mt),Rn=mt[0].position,Sn=Le(Rn,Ot);T.set(Rn),x.set(1);const cn=R.element;kn(cn,"display"),z(Ot)||(Oo(cn,mT),qs.reset(a,R)),Ao.showWithinBounds(R,te(_t),{anchor:Sn,transition:{classes:[mT],mode:"placement"}},()=>A.some(N())),Ot.fold(w.clear,w.set),V()&&qt(cn,"display","none")};let xe=!1;const Ht=E3(()=>{if(!(!t.hasFocus()||t.removed||xe))if(Na(R.element,mT))Ht.throttle();else{const mt=ie();fT(mt,t).fold(Y,Ot=>{Ie(Ot.toolbars,A.some(Ot.elem))})}},17);t.on("init",()=>{t.on("remove",Y),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",de),t.on("click keyup focus SetContent",Ht.throttle),t.on(BF,Y),t.on(gZ,mt=>{const Ot=ie();lt(Ot.lookupTable,mt.toolbarKey).each(_t=>{Ie([_t],Ft(mt.target!==t,mt.target)),Ao.getContent(R).each(yt.focusIn)})}),t.on("focusout",mt=>{Qb.setEditorTimeout(t,()=>{Qr(a.element).isNone()&&Qr(R.element).isNone()&&Y()},0)}),t.on("SwitchMode",()=>{t.mode.isReadOnly()&&Y()}),t.on("ExecCommand",({command:mt})=>{mt.toLowerCase()==="toggleview"&&Y()}),t.on("AfterProgressState",mt=>{mt.state?Y():t.hasFocus()&&Ht.throttle()}),t.on("dragstart",()=>{xe=!0}),t.on("dragend drop",()=>{xe=!1}),t.on("NodeChange",mt=>{Qr(R.element).fold(Ht.throttle,ee)})})},JF=t=>{dt([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],a=>{t.ui.registry.addToggleButton(a.name,{tooltip:a.text,icon:a.icon,onAction:Bc(t,a.cmd),onSetup:J_(t,a.name)})}),t.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:ba(t),onAction:Bc(t,"JustifyNone")})},mD=(t,s)=>{const a=()=>{const i=s.getOptions(t),d=s.getCurrent(t).map(s.hash),g=Mn();return De(i,h=>({type:"togglemenuitem",text:s.display(h),onSetup:w=>{const x=R=>{R&&(g.on(N=>N.setActive(!1)),g.set(w)),w.setActive(R)};x(Ga(d,s.hash(h)));const T=s.watcher(t,h,x);return()=>{g.clear(),T()}},onAction:()=>s.setCurrent(t,h)}))};t.ui.registry.addMenuButton(s.name,{tooltip:s.text,icon:s.icon,fetch:i=>i(a()),onSetup:s.onToolbarSetup}),t.ui.registry.addNestedMenuItem(s.name,{type:"nestedmenuitem",text:s.text,getSubmenuItems:a,onSetup:s.onMenuSetup})},_Z=t=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:Og,hash:s=>lF(s,["fixed","relative","empty"]).getOr(s),display:bn,watcher:(s,a,i)=>s.formatter.formatChanged("lineheight",i,!1,{value:a}).unbind,getCurrent:s=>A.from(s.queryCommandValue("LineHeight")),setCurrent:(s,a)=>s.execCommand("LineHeight",!1,a),onToolbarSetup:ba(t),onMenuSetup:ba(t)}),QF=t=>A.from(xP(t)).map(a=>({name:"language",text:"Language",icon:"language",getOptions:ae(a),hash:i=>xn(i.customCode)?i.code:`${i.code}/${i.customCode}`,display:i=>i.title,watcher:(i,d,g)=>{var h;return i.formatter.formatChanged("lang",g,!1,{value:d.code,customValue:(h=d.customCode)!==null&&h!==void 0?h:null}).unbind},getCurrent:i=>{const d=le.fromDom(i.selection.getNode());return Pm(d,g=>A.some(g).filter(no).bind(h=>tr(h,"lang").map(x=>{const T=tr(h,"data-mce-lang").getOrUndefined();return{code:x,customCode:T,title:""}})))},setCurrent:(i,d)=>i.execCommand("Lang",!1,d),onToolbarSetup:i=>{const d=ec();return i.setActive(t.formatter.match("lang",{},void 0,!0)),d.set(t.formatter.formatChanged("lang",i.setActive,!0)),X_(d.clear,ba(t)(i))},onMenuSetup:ba(t)})),e6=t=>{mD(t,_Z(t)),QF(t).each(s=>mD(t,s))},EZ=(t,s)=>{kW(t,s),MW(t,s),vF(t,s),YR(t,s),pF(t,s)},NK=t=>Mp(t,"NodeChange",s=>{s.setEnabled(t.queryCommandState("outdent")&&t.selection.isEditable())}),TZ=t=>{t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:NK(t),onAction:Bc(t,"outdent")}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:ba(t),onAction:Bc(t,"indent")})},kZ=t=>{TZ(t)},t6=(t,s)=>a=>{a.setActive(s.get());const i=d=>{s.set(d.state),a.setActive(d.state)};return t.on("PastePlainTextToggle",i),X_(()=>t.off("PastePlainTextToggle",i),ba(t)(a))},OZ=t=>{const s=Et(BP(t)),a=()=>t.execCommand("mceTogglePlainTextPaste");t.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:a,onSetup:t6(t,s)}),t.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:a,onSetup:t6(t,s)})},gD=(t,s)=>()=>{t.execCommand("mceToggleFormat",!1,s)},AZ=t=>{Md.each([{name:"bold",text:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(s,a)=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:J_(t,s.name),onAction:gD(t,s.name),shortcut:s.shortcut})});for(let s=1;s<=6;s++){const a="h"+s,i=`Access+${s}`;t.ui.registry.addToggleButton(a,{text:a.toUpperCase(),tooltip:"Heading "+s,onSetup:J_(t,a),onAction:gD(t,a),shortcut:i})}},RZ=t=>{Md.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"help",text:"Help",action:"mceHelp",icon:"help",shortcut:"Alt+0"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print",shortcut:"Meta+P"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onAction:Bc(t,s.action),shortcut:s.shortcut})}),Md.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:ba(t),onAction:Bc(t,s.action)})})},DZ=t=>{Md.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],s=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onAction:Bc(t,s.action),onSetup:J_(t,s.name)})})},MZ=t=>{AZ(t),RZ(t),DZ(t)},PZ=t=>{Md.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onAction:Bc(t,s.action)})}),Md.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onSetup:ba(t),onAction:Bc(t,s.action)})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:ba(t),onAction:gD(t,"code")})},NZ=t=>{MZ(t),PZ(t)},gT=(t,s)=>Mp(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",a=>{a.setEnabled(!t.mode.isReadOnly()&&t.undoManager[s]())}),BZ=t=>{t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:gT(t,"hasUndo"),onAction:Bc(t,"undo")}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:gT(t,"hasRedo"),onAction:Bc(t,"redo")})},n6=t=>{t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:gT(t,"hasUndo"),onAction:Bc(t,"undo"),shortcut:"Meta+Z"}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:gT(t,"hasRedo"),onAction:Bc(t,"redo"),shortcut:"Meta+Y"})},$Z=t=>{BZ(t),n6(t)},IZ=t=>Mp(t,"VisualAid",s=>{s.setActive(t.hasVisual)}),FZ=t=>{t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:IZ(t),onAction:Bc(t,"mceToggleVisualAid")})},LZ=t=>{t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:Bc(t,"mceToggleVisualAid")})},HZ=t=>{LZ(t),FZ(t)},VZ=(t,s)=>{JF(t),NZ(t),EZ(t,s),$Z(t),gH(t),HZ(t),kZ(t),e6(t),OZ(t)},zZ=t=>J(t)?t.split(/[ ,]/):t,o6=t=>s=>s.options.get(t),UZ=t=>{const s=t.options.register;s("contextmenu_avoid_overlap",{processor:"string",default:""}),s("contextmenu_never_use_native",{processor:"boolean",default:!1}),s("contextmenu",{processor:a=>a===!1?{value:[],valid:!0}:J(a)||Gn(a,J)?{value:zZ(a),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},hT=o6("contextmenu_never_use_native"),WZ=o6("contextmenu_avoid_overlap"),ZZ=t=>pT(t).length===0,pT=t=>{const s=t.ui.registry.getAll().contextMenus,a=t.options.get("contextmenu");return t.options.isSet("contextmenu")?a:fo(a,i=>Ln(s,i))},V0=(t,s)=>({type:"makeshift",x:t,y:s}),s6=(t,s,a)=>V0(t.x+s,t.y+a),r6=t=>t.type==="longpress"||t.type.indexOf("touch")===0,jZ=t=>{if(r6(t)){const s=t.touches[0];return V0(s.pageX,s.pageY)}else return V0(t.pageX,t.pageY)},GZ=t=>{if(r6(t)){const s=t.touches[0];return V0(s.clientX,s.clientY)}else return V0(t.clientX,t.clientY)},qZ=(t,s)=>{const a=Cp.DOM.getPos(t);return s6(s,a.x,a.y)},KZ=(t,s)=>s.type==="contextmenu"||s.type==="longpress"?t.inline?jZ(s):qZ(t.getContentAreaContainer(),GZ(s)):bT(t),bT=t=>({type:"selection",root:le.fromDom(t.selection.getNode())}),YZ=t=>({type:"node",node:A.some(le.fromDom(t.selection.getNode())),root:le.fromDom(t.getBody())}),hD=(t,s,a)=>{switch(a){case"node":return YZ(t);case"point":return KZ(t,s);case"selection":return bT(t)}},XZ=(t,s,a,i,d,g)=>{const h=a(),w=hD(t,s,g);T0(h,Tl.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!1,search:A.none()}).map(x=>{s.preventDefault(),Ao.showMenuAt(d,{anchor:w},{menu:{markers:Rg("normal")},data:x})})},JZ={onLtr:()=>[is,bs,cs,vs,Zn,Os,Dl,LC,A0,IC,FC,LE],onRtl:()=>[is,cs,bs,Zn,vs,Os,Dl,LC,FC,LE,A0,IC]},pD=12,QZ={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},a6=(t,s)=>{const a=t.selection;if(a.isCollapsed()||s.touches.length<1)return!1;{const i=s.touches[0],d=a.getRng();return Ps(t.getWin(),lg.domRange(d)).exists(h=>h.left<=i.clientX&&h.right>=i.clientX&&h.top<=i.clientY&&h.bottom>=i.clientY)}},ej=t=>{const s=t.selection.getRng(),a=()=>{Qb.setEditorTimeout(t,()=>{t.selection.setRng(s)},10),g()};t.once("touchend",a);const i=h=>{h.preventDefault(),h.stopImmediatePropagation()};t.on("mousedown",i,!0);const d=()=>g();t.once("longpresscancel",d);const g=()=>{t.off("touchend",a),t.off("longpresscancel",d),t.off("mousedown",i)}},tj=(t,s,a)=>{const i=hD(t,s,a);return{bubble:si(0,a==="point"?pD:0,QZ),layouts:JZ,overrides:{maxWidthFunction:RR(),maxHeightFunction:rg()},...i}},bD=(t,s,a,i,d,g,h)=>{const w=tj(t,s,g);T0(a,Tl.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!0,search:A.none()}).map(x=>{s.preventDefault();const T=h?ra.HighlightMenuAndItem:ra.HighlightNone;Ao.showMenuWithinBounds(d,{anchor:w},{menu:{markers:Rg("normal"),highlightOnOpen:T},data:x,type:"horizontal"},()=>A.some(WF(t,i.shared,g==="node"?"node":"selection"))),t.dispatch(BF)})},nj=(t,s,a,i,d,g)=>{const h=Qa(),w=h.os.isiOS(),x=h.os.isMacOS(),T=h.os.isAndroid(),R=h.deviceType.isTouch(),N=()=>!(T||w||x&&R),I=()=>{const z=a();bD(t,s,z,i,d,g,N())};if((x||w)&&g!=="node"){const z=()=>{ej(t),I()};a6(t,s)?z():(t.once("selectionchange",z),t.once("touchend",()=>t.off("selectionchange",z)))}else I()},c6=t=>J(t)?t==="|":t.type==="separator",vD={type:"separator"},i6=t=>{const s=a=>({text:a.text,icon:a.icon,enabled:a.enabled,shortcut:a.shortcut});if(J(t))return t;switch(t.type){case"separator":return vD;case"submenu":return{type:"nestedmenuitem",...s(t),getSubmenuItems:()=>{const i=t.getSubmenuItems();return J(i)?i:De(i,i6)}};default:const a=t;return{type:"menuitem",...s(a),onAction:sn(a.onAction)}}},l6=(t,s)=>{if(s.length===0)return t;const i=n1(t).filter(d=>!c6(d)).fold(()=>[],d=>[vD]);return t.concat(i).concat(s).concat([vD])},u6=(t,s,a)=>{const i=bo(s,(d,g)=>lt(t,g.toLowerCase()).map(h=>{const w=h.update(a);if(J(w)&&qa(Hl(w)))return l6(d,w.split(" "));if(qe(w)&&w.length>0){const x=De(w,i6);return l6(d,x)}else return d}).getOrThunk(()=>d.concat([g])),[]);return i.length>0&&c6(i[i.length-1])&&i.pop(),i},oj=(t,s)=>s.ctrlKey&&!hT(t),sj=t=>t.type==="longpress"||Ln(t,"touches"),d6=(t,s)=>!sj(s)&&(s.button!==2||s.target===t.getBody()&&s.pointerType===""),f6=(t,s)=>d6(t,s)?t.selection.getStart(!0):s.target,rj=(t,s)=>{const a=WZ(t),i=d6(t,s)?"selection":"point";if(qa(a)){const d=f6(t,s);return aC(le.fromDom(d),a)?"node":i}else return i},aj=(t,s,a)=>{const d=Qa().deviceType.isTouch,g=wr(Ao.sketch({dom:{tag:"div"},lazySink:s,onEscape:()=>t.focus(),onShow:()=>a.setContextMenuState(!0),onHide:()=>a.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:Fe([Jt("dismissContextMenu",[Te(Ql(),(x,T)=>{wn.close(x),t.focus()})])])})),h=()=>Ao.hide(g),w=x=>{if(hT(t)&&x.preventDefault(),oj(t,x)||ZZ(t))return;const T=rj(t,x),R=()=>{const I=f6(t,x),z=t.ui.registry.getAll(),V=pT(t);return u6(z.contextMenus,V,I)};(d()?nj:XZ)(t,x,R,a,g,T)};t.on("init",()=>{const x="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(d()?"":" ResizeWindow");t.on(x,h),t.on("longpress contextmenu",w)})},yD=Da.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),vT=t=>s=>s.translate(-t.left,-t.top),QC=t=>s=>s.translate(t.left,t.top),sm=t=>(s,a)=>bo(t,(i,d)=>d(i),To(s,a)),ew=(t,s,a)=>t.fold(sm([QC(a),vT(s)]),sm([vT(s)]),sm([])),z0=(t,s,a)=>t.fold(sm([QC(a)]),sm([]),sm([QC(s)])),m6=(t,s,a)=>t.fold(sm([]),sm([vT(a)]),sm([QC(s),vT(a)])),cj=(t,s,a,i,d,g)=>{const h=z0(t,d,g),w=z0(s,d,g);return Math.abs(h.left-w.left)<=a&&Math.abs(h.top-w.top)<=i},Wp=(t,s,a,i,d,g)=>{const h=z0(t,d,g),w=z0(s,d,g),x=Math.abs(h.left-w.left),T=Math.abs(h.top-w.top);return To(x,T)},CD=(t,s,a)=>{const i=t.fold((d,g)=>({position:A.some("absolute"),left:A.some(d+"px"),top:A.some(g+"px")}),(d,g)=>({position:A.some("absolute"),left:A.some(d-a.left+"px"),top:A.some(g-a.top+"px")}),(d,g)=>({position:A.some("fixed"),left:A.some(d+"px"),top:A.some(g+"px")}));return{right:A.none(),bottom:A.none(),...i}},ij=(t,s,a)=>t.fold((i,d)=>yT(i+s,d+a),(i,d)=>Zg(i+s,d+a),(i,d)=>jg(i+s,d+a)),wD=(t,s,a,i)=>{const d=(g,h)=>(w,x)=>{const T=g(s,a,i);return h(w.getOr(T.left),x.getOr(T.top))};return t.fold(d(m6,yT),d(z0,Zg),d(ew,jg))},yT=yD.offset,Zg=yD.absolute,jg=yD.fixed,g6=(t,s)=>{const a=Fo(t,s);return xn(a)?NaN:parseInt(a,10)},lj=(t,s)=>{const a=t.element,i=g6(a,s.leftAttr),d=g6(a,s.topAttr);return isNaN(i)||isNaN(d)?A.none():A.some(To(i,d))},uj=(t,s,a)=>{const i=t.element;ct(i,s.leftAttr,a.left+"px"),ct(i,s.topAttr,a.top+"px")},dj=(t,s)=>{const a=t.element;Zo(a,s.leftAttr),Zo(a,s.topAttr)},fj=(t,s,a,i)=>lj(t,s).fold(()=>a,d=>jg(d.left+i.left,d.top+i.top)),mj=(t,s,a,i,d,g)=>{const h=fj(t,s,a,i),w=s.mustSnap?hj(t,s,h,d,g):pj(t,s,h,d,g),x=ew(h,d,g);return uj(t,s,x),w.fold(()=>({coord:jg(x.left,x.top),extra:A.none()}),T=>({coord:T.output,extra:T.extra}))},gj=(t,s)=>{dj(t,s)},h6=(t,s,a,i)=>ur(t,d=>{const g=d.sensor;return cj(s,g,d.range.left,d.range.top,a,i)?A.some({output:wD(d.output,s,a,i),extra:d.extra}):A.none()}),hj=(t,s,a,i,d)=>{const g=s.getSnapPoints(t);return h6(g,a,i,d).orThunk(()=>bo(g,(x,T)=>{const R=T.sensor,N=Wp(a,R,T.range.left,T.range.top,i,d);return x.deltas.fold(()=>({deltas:A.some(N),snap:A.some(T)}),I=>{const z=(N.left+N.top)/2,V=(I.left+I.top)/2;return z<=V?{deltas:A.some(N),snap:A.some(T)}:x})},{deltas:A.none(),snap:A.none()}).snap.map(x=>({output:wD(x.output,a,i,d),extra:x.extra})))},pj=(t,s,a,i,d)=>{const g=s.getSnapPoints(t);return h6(g,a,i,d)},p6=(t,s,a)=>({coord:wD(t.output,t.output,s,a),extra:t.extra});var vj=Object.freeze({__proto__:null,snapTo:(t,s,a,i)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=Ya(t.element),h=Gr(g),w=Uv(d),x=p6(i,h,w),T=CD(x.coord,h,w);ze(d,T)}}});const Zp="data-initial-z-index",yj=t=>{Uc(t.element).filter(no).each(s=>{tr(s,Zp).fold(()=>kn(s,"z-index"),a=>qt(s,"z-index",a)),Zo(s,Zp)})},Cj=t=>{Uc(t.element).filter(no).each(s=>{nr(s,"z-index").each(a=>{ct(s,Zp,a)}),qt(s,"z-index",jo(t.element,"z-index"))})},CT=(t,s)=>{t.getSystem().addToGui(s),Cj(s)},wj=t=>{yj(t),t.getSystem().removeFromGui(t)},b6=(t,s,a)=>t.getSystem().build(Cu.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[s]},events:a}));var Sj=ps("snaps",[ke("getSnapPoints"),vn("onSensor"),ke("leftAttr"),ke("topAttr"),me("lazyViewport",Br),me("mustSnap",!1)]);const SD=[me("useFixed",eo),ke("blockerClass"),me("getTarget",bn),me("onDrag",ee),me("repositionTarget",!0),me("onDrop",ee),ko("getBounds",Br),Sj],xj=t=>dm(nr(t,"left"),nr(t,"top"),nr(t,"position"),(s,a,i)=>(i==="fixed"?jg:yT)(parseInt(s,10),parseInt(a,10))).getOrThunk(()=>{const s=da(t);return Zg(s.left,s.top)}),_j=(t,s,a,i,d)=>{const g=d.bounds,h=z0(s,a,i),w=oi(h.left,g.x,g.x+g.width-d.width),x=oi(h.top,g.y,g.y+g.height-d.height),T=Zg(w,x);return s.fold(()=>{const R=m6(T,a,i);return yT(R.left,R.top)},ae(T),()=>{const R=ew(T,a,i);return jg(R.left,R.top)})},Ej=(t,s,a,i,d,g,h)=>{const w=s.fold(()=>{const x=ij(a,g.left,g.top),T=ew(x,i,d);return jg(T.left,T.top)},x=>{const T=mj(t,x,a,g,i,d);return T.extra.each(R=>{x.onSensor(t,R)}),T.coord});return _j(t,w,i,d,h)},Tj=(t,s,a,i)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=Ya(t.element),h=Gr(g),w=Uv(d),x=xj(d),T=Ej(t,s.snaps,x,h,w,i,a),R=CD(T,h,w);ze(d,R)}s.onDrag(t,d,i)},v6=(t,s)=>({bounds:t.getBounds(),height:Pu(s.element),width:Wl(s.element)}),xD=(t,s,a,i,d)=>{const g=a.update(i,d),h=a.getStartData().getOrThunk(()=>v6(s,t));g.each(w=>{Tj(t,s,h,w)})},y6=(t,s,a,i)=>{s.each(wj),a.snaps.each(g=>{gj(t,g)});const d=a.getTarget(t.element);i.reset(),a.onDrop(t,d)},_D=t=>(s,a)=>{const i=d=>{a.setStartData(v6(s,d))};return Bn([Te(gf(),d=>{a.getStartData().each(()=>i(d))}),...t(s,a,i)])},kj=t=>Bn([Te(oc(),t.forceDrop),Te(Ch(),t.drop),Te(yh(),(s,a)=>{t.move(a.event)}),Te(Bm(),t.delayDrop)]);var Oj=Object.freeze({__proto__:null,getData:t=>A.from(To(t.x,t.y)),getDelta:(t,s)=>To(s.left-t.left,s.top-t.top)});const C6=(t,s,a)=>[Te(oc(),(i,d)=>{if(d.event.raw.button!==0)return;d.stop();const h=()=>y6(i,A.some(T),t,s),w=zB(h,200),x={drop:h,delayDrop:w.schedule,forceDrop:h,move:N=>{w.cancel(),xD(i,t,s,Oj,N)}},T=b6(i,t.blockerClass,kj(x));(()=>{a(i),CT(i,T)})()})],wT=[...SD,so("dragger",{handlers:_D(C6)})],Aj=t=>Bn([Te(ul(),t.forceDrop),Te(Nm(),t.drop),Te(Mv(),t.drop),Te(ff(),(s,a)=>{t.move(a.event)})]),Rj=t=>{const s=t[0];return A.some(To(s.clientX,s.clientY))};var w6=Object.freeze({__proto__:null,getData:t=>{const a=t.raw.touches;return a.length===1?Rj(a):A.none()},getDelta:(t,s)=>To(s.left-t.left,s.top-t.top)});const S6=(t,s,a)=>{const i=Mn(),d=g=>{y6(g,i.get(),t,s),i.clear()};return[Te(ul(),(g,h)=>{h.stop();const w=()=>d(g),x={drop:w,delayDrop:ee,forceDrop:w,move:N=>{xD(g,t,s,w6,N)}},T=b6(g,t.blockerClass,Aj(x));i.set(T),(()=>{a(g),CT(g,T)})()}),Te(ff(),(g,h)=>{h.stop(),xD(g,t,s,w6,h.event)}),Te(Nm(),(g,h)=>{h.stop(),d(g)}),Te(Mv(),d)]},x6=[...SD,so("dragger",{handlers:_D(S6)})],Dj=(t,s,a)=>[...C6(t,s,a),...S6(t,s,a)],Mj=[...SD,so("dragger",{handlers:_D(Dj)})];var ED=Object.freeze({__proto__:null,mouse:wT,touch:x6,mouseOrTouch:Mj}),Nj=Object.freeze({__proto__:null,init:()=>{let t=A.none(),s=A.none();const a=()=>{t=A.none(),s=A.none()},i=(x,T)=>{const R=t.map(N=>x.getDelta(N,T));return t=A.some(T),R},d=(x,T)=>x.getData(T).bind(R=>i(x,R)),g=x=>{s=A.some(x)},h=()=>s,w=ae({});return Pa({readState:w,reset:a,update:d,getStartData:h,setStartData:g})}});const jp=rS({branchKey:"mode",branches:ED,name:"dragging",active:{events:(t,s)=>t.dragger.handlers(t,s)},extra:{snap:t=>({sensor:t.sensor,range:t.range,output:t.output,extra:A.from(t.extra)})},state:Nj,apis:vj}),TD=40,ST=TD/2,_6=(t,s,a,i,d,g)=>t.fold(()=>jp.snap({sensor:Zg(a-ST,i-ST),range:To(d,g),output:Zg(A.some(a),A.some(i)),extra:{td:s}}),h=>{const w=a-ST,x=i-ST,T=TD,R=TD,N=h.element.dom.getBoundingClientRect();return jp.snap({sensor:Zg(w,x),range:To(T,R),output:Zg(A.some(a-N.width/2),A.some(i-N.height/2)),extra:{td:s}})}),E6=(t,s,a)=>{const i=(d,g)=>d.exists(h=>qn(h,g));return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(d,g)=>{const h=g.td;i(s.get(),h)||(s.set(h),a(h))},mustSnap:!0}},T6=t=>Pn(_r.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:Fe([jp.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),S0.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),Bj=(t,s)=>{const a=Et([]),i=Et([]),d=Et(!1),g=Mn(),h=Mn(),w=Ie=>{const xe=Nr(Ie);return _6(z.getOpt(s),Ie,xe.x,xe.y,xe.width,xe.height)},x=()=>De(a.get(),Ie=>w(Ie)),T=Ie=>{const xe=Nr(Ie);return _6(V.getOpt(s),Ie,xe.right,xe.bottom,xe.width,xe.height)},R=()=>De(i.get(),Ie=>T(Ie)),N=E6(x,g,Ie=>{h.get().each(xe=>{t.dispatch("TableSelectorChange",{start:Ie,finish:xe})})}),I=E6(R,h,Ie=>{g.get().each(xe=>{t.dispatch("TableSelectorChange",{start:xe,finish:Ie})})}),z=T6(N),V=T6(I),Y=wr(z.asSpec()),de=wr(V.asSpec()),te=(Ie,xe,Ht,mt)=>{const Ot=xe.dom.getBoundingClientRect();kn(Ie.element,"display");const _t=Xd(le.fromDom(t.getBody())).dom.innerHeight,Rn=Ht(Ot),Sn=mt(Ot,_t);(Rn||Sn)&&qt(Ie.element,"display","none")},ie=(Ie,xe,Ht,mt)=>{const Ot=Ht(xe);jp.snapTo(Ie,Ot),te(Ie,xe,Sn=>Sn[mt]<0,(Sn,cn)=>Sn[mt]>cn)},ce=Ie=>ie(Y,Ie,w,"top"),_e=()=>g.get().each(ce),Se=Ie=>ie(de,Ie,T,"bottom"),Le=()=>h.get().each(Se);if(Qa().deviceType.isTouch()){const Ie=xe=>De(xe,le.fromDom);t.on("TableSelectionChange",xe=>{d.get()||(Cl(s,Y),Cl(s,de),d.set(!0));const Ht=le.fromDom(xe.start),mt=le.fromDom(xe.finish);g.set(Ht),h.set(mt),A.from(xe.otherCells).each(Ot=>{a.set(Ie(Ot.upOrLeftCells)),i.set(Ie(Ot.downOrRightCells)),ce(Ht),Se(mt)})}),t.on("ResizeEditor ResizeWindow ScrollContent",()=>{_e(),Le()}),t.on("TableSelectionClear",()=>{d.get()&&(lu(Y),lu(de),d.set(!1)),g.clear(),h.clear()})}};var $j=`<svg width="50px" height="16px" viewBox="0 0 50 16" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.143 0c2.608.015 5.186 2.178 5.186 5.331 0 0 .077 3.812-.084 4.87-.361 2.41-2.164 4.074-4.65 4.496-1.453.284-2.523.49-3.212.623-.373.071-.634.122-.785.152-.184.038-.997.145-1.35.145-2.732 0-5.21-2.04-5.248-5.33 0 0 0-3.514.03-4.442.093-2.4 1.758-4.342 4.926-4.963 0 0 3.875-.752 4.036-.782.368-.07.775-.1 1.15-.1Zm1.826 2.8L5.83 3.989v2.393l-2.455.475v5.968l6.137-1.189V9.243l2.456-.476V2.8ZM5.83 6.382l3.682-.713v3.574l-3.682.713V6.382Zm27.173-1.64-.084-1.066h-2.226v9.132h2.456V7.743c-.008-1.151.998-2.064 2.149-2.072 1.15-.008 1.987.92 1.995 2.072v5.065h2.455V7.359c-.015-2.18-1.657-3.929-3.837-3.913a3.993 3.993 0 0 0-2.908 1.296Zm-6.3-4.266L29.16 0v2.387l-2.456.475V.476Zm0 3.2v9.132h2.456V3.676h-2.456Zm18.179 11.787L49.11 3.676H46.58l-1.612 4.527-.46 1.382-.384-1.382-1.611-4.527H39.98l3.3 9.132L42.15 16l2.732-.537ZM22.867 9.738c0 .752.568 1.075.921 1.075.353 0 .668-.047.998-.154l.537 1.765c-.23.154-.92.537-2.225.537-1.305 0-2.655-.997-2.686-2.686a136.877 136.877 0 0 1 0-4.374H18.8V3.676h1.612v-1.98l2.455-.476v2.456h2.302V5.9h-2.302v3.837Z"/>
</svg>
`;const Ij=t=>t.nodeName==="BR"||!!t.getAttribute("data-mce-bogus")||t.getAttribute("data-mce-type")==="bookmark",Fj=(t,s,a)=>{var i;const d=(i=s.delimiter)!==null&&i!==void 0?i:"›",g=(T,R,N)=>_r.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":N,"aria-level":N+1}},components:[Lo(T)],action:I=>{t.focus(),t.selection.select(R),t.nodeChanged()},buttonBehaviours:Fe([Ys.button(a.isDisabled),Is()])}),h=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[Lo(` ${d} `)]}),w=T=>bo(T,(R,N,I)=>{const z=g(N.name,N.element,I);return I===0?R.concat([z]):R.concat([h(),z])},[]),x=T=>{const R=[];let N=T.length;for(;N-- >0;){const I=T[N];if(I.nodeType===1&&!Ij(I)){const z=nH(t,I);if(z.isDefaultPrevented()||R.push({name:z.name,element:I}),z.isPropagationStopped())break}}return R};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:Fe([yt.config({mode:"flow",selector:"div[role=button]"}),Pt.config({disabled:a.isDisabled}),Is(),uo.config({}),Vt.config({}),Jt("elementPathEvents",[po((T,R)=>{t.shortcuts.add("alt+F11","focus statusbar elementpath",()=>yt.focusIn(T)),t.on("NodeChange",N=>{const I=x(N.parents),z=I.length>0?w(I):[];Vt.set(T,z)})})])]),components:[]}};var Gg;(function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Vertical=2]="Vertical"})(Gg||(Gg={}));const Lj=(t,s,a,i,d)=>{const g={height:Up(i+s.top,OO(t),P2(t))};return a===Gg.Both&&(g.width=Up(d+s.left,kO(t),r_(t))),g},k6=(t,s,a)=>{const i=le.fromDom(t.getContainer()),d=Lj(t,s,a,_s(i),fa(i));As(d,(g,h)=>{fn(g)&&qt(i,h,oD(g))}),Q8(t)},O6=t=>{const s=NP(t);return s===!1?Gg.None:s==="both"?Gg.Both:Gg.Vertical},xT=(t,s,a,i)=>{const g=To(a*20,i*20);return k6(t,g,s),A.some(!0)},Hj=(t,s)=>{const a=O6(t);if(a===Gg.None)return A.none();const i=a===Gg.Both?"Press the arrow keys to resize the editor.":"Press the Up and Down arrow keys to resize the editor.";return A.some(Wi("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{"aria-label":s.translate(i),"data-mce-name":"resize-handle"},behaviours:[jp.config({mode:"mouse",repositionTarget:!1,onDrag:(d,g,h)=>k6(t,h,a),blockerClass:"tox-blocker"}),yt.config({mode:"special",onLeft:()=>xT(t,a,-1,0),onRight:()=>xT(t,a,1,0),onUp:()=>xT(t,a,0,-1),onDown:()=>xT(t,a,0,1)}),uo.config({}),It.config({}),Er.config(s.tooltips.getConfig({tooltipText:s.translate("Resize")}))]},s.icons))},Vj=(t,s)=>{const a=(i,d,g)=>Vt.set(i,[Lo(s.translate(["{0} "+g,d[g]]))]);return _r.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:Fe([Ys.button(s.isDisabled),Is(),uo.config({}),Vt.config({}),it.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),Jt("wordcount-events",[ni(i=>{const d=it.getValue(i),g=d.mode==="words"?"characters":"words";it.setValue(i,{mode:g,count:d.count}),a(i,d.count,g)}),po(i=>{t.on("wordCountUpdate",d=>{const{mode:g}=it.getValue(i);it.setValue(i,{mode:g,count:d.wordCount}),a(i,d.wordCount,g)})})])]),eventOrder:{[ma()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},zj=(t,s)=>{const a=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=poweredby&utm_source=tiny&utm_medium=referral&utm_content=v7",rel:"noopener",target:"_blank","aria-label":ii.translate(["Powered by {0}","Tiny"])},innerHtml:$j.trim()},behaviours:Fe([It.config({})])}]}),i=()=>{const w=hA("Alt+0");return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[Lo(ii.translate(["Press {0} for help",w]))]}},d=()=>{const w=[];return t.hasPlugin("wordcount")&&w.push(Vj(t,s)),n0(t)&&w.push(a()),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:w}},g=()=>{const w=[],x=FP(t),T=PP(t),R=n0(t)||t.hasPlugin("wordcount"),N=()=>{const I="tox-statusbar__text-container--flex-start",z="tox-statusbar__text-container--flex-end",V="tox-statusbar__text-container--space-around";if(x){const Y="tox-statusbar__text-container-3-cols";return!R&&!T?[Y,V]:R&&!T?[Y,z]:[Y,I]}return[R&&!T?z:I]};return T&&w.push(Fj(t,{},s)),x&&w.push(i()),R&&w.push(d()),w.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...N()]},components:w}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const w=g(),x=Hj(t,s);return w.concat(x.toArray())})()}},A6=(t,s)=>s.get().getOrDie(`UI for ${t} has not been rendered`),Uj=(t,s)=>{const a=t.inline,i=a?KC:lZ,d=xp(t)?bU:uI,g=mZ(),h=Mn(),w=Mn(),x=Mn(),I=Qa().deviceType.isTouch()?["tox-platform-touch"]:[],z=m_(t),V=t0(t),Y=Pn({dom:{tag:"div",classes:["tox-anchorbar"]}}),de=Pn({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),te=()=>g.mainUi.get().map(Tt=>Tt.outerContainer).bind(ro.getHeader),ie=()=>tn.fromOption(g.dialogUi.get().map(Tt=>Tt.sink),"UI has not been rendered"),ce=()=>tn.fromOption(g.popupUi.get().map(Tt=>Tt.sink),"(popup) UI has not been rendered"),_e=g.lazyGetInOuterOrDie("anchor bar",Y.getOpt),Se=g.lazyGetInOuterOrDie("bottom anchor bar",de.getOpt),Le=g.lazyGetInOuterOrDie("toolbar",ro.getToolbar),Ie=g.lazyGetInOuterOrDie("throbber",ro.getThrobber),xe=lU({popup:ce,dialog:ie},t,_e,Se),Ht=()=>{const Tt={attributes:{[ud]:z?ld.BottomToTop:ld.TopToBottom}},Wt=ro.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:xe.popup,onEscape:()=>{t.focus()}}),Qn=ro.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:xe.popup.shared.getSink,providers:xe.popup.shared.providers,onEscape:()=>{t.focus()},onToolbarToggled:Jp=>{OA(t,Jp)},type:V,lazyToolbar:Le,lazyHeader:()=>te().getOrDie("Could not find header element"),...Tt}),Dn=ro.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:xe.popup.shared.providers,onEscape:()=>{t.focus()},type:V}),ca=Sp(t),vi=f_(t),ku=d_(t),Ur=IP(t),yi=mt(),el=ca||vi||ku,hc=()=>ca?[Dn]:vi?[Qn]:[],Ld=Ur?[yi,Wt]:[Wt];return ro.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(el?[]:["tox-editor-header--empty"]),...Tt},components:Xt([ku?Ld:[],hc(),s0(t)?[]:[Y.asSpec()]]),sticky:xp(t),editor:t,sharedBackstage:xe.popup.shared})},mt=()=>ro.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),Ot=()=>{const Tt=ro.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),Wt=ro.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[Tt,Wt]}},_t=()=>{const Tt=g_(t),Wt=qn(Zr(),Tt)&&jo(Tt,"display")==="grid",Qn={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(I),attributes:{...ii.isRtl()?{dir:"rtl"}:{}}},behaviours:Fe([qs.config({useFixed:()=>d.isDocked(te)})])},Dn={dom:{styles:{width:document.body.clientWidth+"px"}},events:Bn([Te(ml(),ku=>{qt(ku.element,"width",document.body.clientWidth+"px")})])},ca=wr(Po(Qn,Wt?Dn:{})),vi=uC(ca);return w.set(vi),{sink:ca,mothership:vi}},Rn=()=>{const Tt={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(I),attributes:{...ii.isRtl()?{dir:"rtl"}:{}}},behaviours:Fe([qs.config({useFixed:()=>d.isDocked(te),getBounds:()=>s.getPopupSinkBounds()})])},Wt=wr(Tt),Qn=uC(Wt);return x.set(Qn),{sink:Wt,mothership:Qn}},Sn=()=>{const Tt=Ht(),Wt=Ot(),Qn=ro.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:xe.popup}),Dn=ro.parts.viewWrapper({backstage:xe.popup}),ca=l_(t)&&!a?A.some(zj(t,xe.popup.shared.providers)):A.none(),vi=Xt([z?[]:[Tt],a?[]:[Wt],z?[Tt]:[]]),ku=ro.parts.editorContainer({components:Xt([vi,a?[]:[de.asSpec()]])}),Ur=IO(t),yi={role:"application",...ii.isRtl()?{dir:"rtl"}:{},...Ur?{"aria-hidden":"true"}:{}},el=wr(ro.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(a?["tox-tinymce-inline"]:[]).concat(z?["tox-tinymce--toolbar-bottom"]:[]).concat(I),styles:{visibility:"hidden",...Ur?{opacity:"0",border:"0"}:{}},attributes:yi},components:[ku,...a?[]:[Dn,...ca.toArray()],Qn],behaviours:Fe([Is(),Pt.config({disableClass:"tox-tinymce--disabled"}),yt.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),hc=uC(el);return h.set(hc),{mothership:hc,outerContainer:el}},cn=Tt=>{const Wt=oD(MF(t)),Qn=oD(PF(t));return t.inline||(Mu("div","width",Qn)&&qt(Tt.element,"width",Qn),Mu("div","height",Wt)?qt(Tt.element,"height",Wt):qt(Tt.element,"height","400px")),Wt},Ze=Tt=>{t.addShortcut("alt+F9","focus menubar",()=>{ro.focusMenubar(Tt)}),t.addShortcut("alt+F10","focus toolbar",()=>{ro.focusToolbar(Tt)}),t.addCommand("ToggleToolbarDrawer",(Wt,Qn)=>{Qn!=null&&Qn.skipFocus?ro.toggleToolbarDrawerWithoutFocusing(Tt):ro.toggleToolbarDrawer(Tt)}),t.addQueryStateHandler("ToggleToolbarDrawer",()=>ro.isToolbarDrawerToggled(Tt))},ht=Tt=>{const{mainUi:Wt,popupUi:Qn,uiMotherships:Dn}=Tt;Io(_P(t),(q0,MT)=>{t.ui.registry.addGroupToolbarButton(MT,q0)});const{buttons:ca,menuItems:vi,contextToolbars:ku,sidebars:Ur,views:yi}=t.ui.registry.getAll(),el=$O(t),hc={menuItems:vi,menus:h_(t),menubar:PO(t),toolbar:el.getOrThunk(()=>N2(t)),allowToolbarGroups:V===Ui.floating,buttons:ca,sidebar:Ur,views:yi};Ze(Wt.outerContainer),uU(t,Wt.mothership,Dn),d.setup(t,xe.popup.shared,te),VZ(t,xe.popup),aj(t,xe.popup.shared.getSink,xe.popup),TU(t),SI(t,Ie,xe.popup.shared),XF(t,ku,Qn.sink,{backstage:xe.popup}),Bj(t,Qn.sink);const Ld=t.getElement(),Jp=cn(Wt.outerContainer),LD={targetNode:Ld,height:Jp};return i.render(t,Tt,hc,xe.popup,LD)},Yt=Tt=>(x.set(Tt.mothership),Tt),Dt=()=>{const Tt=Sn(),Wt=_t(),Qn=Gf(t)?Rn():Yt(Wt);g.dialogUi.set(Wt),g.popupUi.set(Qn),g.mainUi.set(Tt);const Dn={popupUi:Qn,dialogUi:Wt,mainUi:Tt,uiMotherships:g.getUiMotherships()};return ht(Dn)};return{popups:{backstage:xe.popup,getMothership:()=>A6("popups",x)},dialogs:{backstage:xe.dialog,getMothership:()=>A6("dialogs",w)},renderUI:Dt}},Wj=t=>t.dom.textContent,Zj=(t,s)=>{const a=tr(t,"id").fold(()=>{const i=ut("dialog-label");return ct(s,"id",i),i},bn);ct(t,"aria-labelledby",a)},R6=ae([ke("lazySink"),Nn("dragBlockClass"),ko("getBounds",Br),me("useTabstopAt",Bt),me("firstTabstop",0),me("eventOrder",{}),Bs("modalBehaviours",[yt]),Xr("onExecute"),nu("onEscape")]),_T={sketch:bn},Gp=ae([dc({name:"draghandle",overrides:(t,s)=>({behaviours:Fe([jp.config({mode:"mouse",getTarget:a=>su(a,'[role="dialog"]').getOr(a),blockerClass:t.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(s,null,2)).message),getBounds:t.getDragBounds})])})}),lr({schema:[ke("dom")],name:"title"}),lr({factory:_T,schema:[ke("dom")],name:"close"}),lr({factory:_T,schema:[ke("dom")],name:"body"}),dc({factory:_T,schema:[ke("dom")],name:"footer"}),Dc({factory:{sketch:(t,s)=>({...t,dom:s.dom,components:s.components})},schema:[me("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),me("components",[])],name:"blocker"})]),jj=(t,s,a,i)=>{const d=Mn(),g=V=>{d.set(V);const Y=t.lazySink(V).getOrDie(),de=i.blocker(),te=Y.getSystem().build({...de,components:de.components.concat([Fr(V)]),behaviours:Fe([It.config({}),Jt("dialog-blocker-events",[Lm(Di(),()=>{Id.isBlocked(V)?ee():yt.focusIn(V)})])])});Cl(Y,te),yt.focusIn(V)},h=V=>{d.clear(),Uc(V.element).each(Y=>{V.getSystem().getByDom(Y).each(de=>{lu(de)})})},w=V=>na(V,t,"body"),x=V=>He(V,t,"footer"),T=(V,Y)=>{Id.block(V,Y)},R=V=>{Id.unblock(V)},N=ut("modal-events"),I={...t.eventOrder,[yr()]:[N].concat(t.eventOrder["alloy.system.attached"]||[])},z=Qa();return{uid:t.uid,dom:t.dom,components:s,apis:{show:g,hide:h,getBody:w,getFooter:x,setIdle:R,setBusy:T},eventOrder:I,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:$s(t.modalBehaviours,[Vt.config({}),yt.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt,firstTabstop:t.firstTabstop}),Id.config({getRoot:d.get}),Jt(N,[po(V=>{const Y=na(V,t,"title").element,de=Wj(Y);z.os.isMacOS()&&Rt(de)?ct(V.element,"aria-label",de):Zj(V.element,Y)})])])}},ys=Vr({name:"ModalDialog",configFields:R6(),partFields:Gp(),factory:jj,apis:{show:(t,s)=>{t.show(s)},hide:(t,s)=>{t.hide(s)},getBody:(t,s)=>t.getBody(s),getFooter:(t,s)=>t.getFooter(s),setBusy:(t,s,a)=>{t.setBusy(s,a)},setIdle:(t,s)=>{t.setIdle(s)}}}),ET=$t([us,nA].concat(f0)),Gj=pt,kD=[I_("button"),li,vr("align","end",["start","end"]),$_,kl,kv("buttonType",["primary","secondary"])],D6=[...kD,Yf],OD=[Kl("type",["submit","cancel","custom"]),...D6],qj=[Kl("type",["menu"]),Xf,l0,li,nc("items",ET),...kD],qp=[...kD,Kl("type",["togglebutton"]),l0,li,Xf,cr("active",!1)],M6=Ra("type",{submit:OD,cancel:OD,custom:OD,menu:qj,togglebutton:qp}),Kj=[us,Yf,Kl("level",["info","warn","error","success"]),DN,me("url","")],Yj=$t(Kj),Xj=t=>[us,t],Jj=[us,Yf,kl,I_("button"),li,aA,kv("buttonType",["primary","secondary","toolbar"]),$_],Qj=$t(Jj),U0=[us,nA],Eu=U0.concat([sA]),eG=U0.concat([oA,kl]),AD=$t(eG),tw=pt,RD=Eu.concat([NN("auto")]),TT=$t(RD),Kp=x1([Tp,Yf,DN]),kT=Eu.concat([ll("storageKey","default")]),tG=$t(kT),P6=hs,N6=$t(Eu),oG=hs,sG=U0.concat([ll("tag","textarea"),Go("scriptId"),Go("scriptUrl"),zu("onFocus"),Vw("settings",void 0)]),rG=U0.concat([ll("tag","textarea"),Jc("init")]),B6=Ai(t=>No("customeditor.old",pr(rG),t).orThunk(()=>No("customeditor.new",pr(sG),t))),$6=hs,aG=$t(Eu),cG=lk(),iG=t=>[us,ho("columns"),t],F6=[us,Go("html"),vr("presets","presentation",["presentation","document"])],lG=$t(F6),uG=Eu.concat([cr("border",!1),cr("sandboxed",!0),cr("streamContent",!1),cr("transparent",!0)]),dG=$t(uG),DD=hs,MD=$t(U0.concat([ar("height")])),fG=$t([Go("url"),uf("zoom"),uf("cachedWidth"),uf("cachedHeight")]),L6=Eu.concat([ar("inputMode"),ar("placeholder"),cr("maximized",!1),kl]),mG=$t(L6),gG=hs,H6=t=>[us,oA,t,vr("align","start",["start","center","end"])],hG=[Yf,Tp],pG=[Yf,nc("items",ql("items",()=>qg))],qg=rl([$t(hG),$t(pG)]),V6=Eu.concat([nc("items",qg),kl]),bG=$t(V6),OT=hs,W0=Eu.concat([Tv("items",[Yf,Tp]),Dm("size",1),kl]),AT=$t(W0),z6=hs,RT=Eu.concat([cr("constrain",!0),kl]),gc=$t(RT),nw=$t([Go("width"),Go("height")]),U6=U0.concat([oA,Dm("min",0),Dm("max",0)]),W6=$t(U6),vG=Ti,yG=[us,nc("header",hs),nc("cells",lf(hs))],Kg=$t(yG),zK=Eu.concat([ar("placeholder"),cr("maximized",!1),kl]),CG=$t(zK),Z6=hs,Yp=[Kl("type",["directory","leaf"]),RN,Go("id"),il("menu",gI)],ND=$t(Yp),wG=Yp.concat([nc("children",ql("children",()=>Oi("type",{directory:j6,leaf:ND})))]),j6=$t(wG),SG=Oi("type",{directory:j6,leaf:ND}),xG=[us,nc("items",SG),zu("onLeafAction"),zu("onToggleExpand"),Tc("defaultExpandedIds",[],hs),ar("defaultSelectedId")],Z0=$t(xG),UK=Eu.concat([vr("filetype","file",["image","media","file"]),kl,ar("picker_text")]),_G=$t(UK),EG=$t([Tp,cA]),G6=t=>rs("items","items",_c(),lf(Ai(s=>No(`Checking item of ${t}`,BD,s).fold(a=>tn.error(Ri(a)),a=>tn.value(a))))),BD=Hu(()=>Oi("type",{alertbanner:Yj,bar:$t(Xj(G6("bar"))),button:Qj,checkbox:AD,colorinput:tG,colorpicker:N6,dropzone:aG,grid:$t(iG(G6("grid"))),iframe:dG,input:mG,listbox:bG,selectbox:AT,sizeinput:gc,slider:W6,textarea:CG,urlinput:_G,customeditor:B6,htmlpanel:lG,imagepreview:MD,collection:TT,label:$t(H6(G6("label"))),table:Kg,tree:Z0,panel:j0})),TG=[us,me("classes",[]),nc("items",BD)],j0=$t(TG),kG=[I_("tab"),RN,nc("items",BD)],OG=[us,Tv("tabs",kG)],q6=$t(OG),AG=D6,WK=M6,e=$t([Go("title"),as("body",Oi("type",{panel:j0,tabpanel:q6})),ll("size","normal"),Tc("buttons",[],WK),me("initialData",{}),ko("onAction",ee),ko("onChange",ee),ko("onSubmit",ee),ko("onClose",ee),ko("onCancel",ee),ko("onTabChange",ee)]),n=t=>No("dialog",e,t),o=$t([Kl("type",["cancel","custom"]),...AG]),r=$t([Go("title"),Go("url"),uf("height"),uf("width"),_1("buttons",o),ko("onAction",ee),ko("onCancel",ee),ko("onClose",ee),ko("onMessage",ee)]),c=t=>No("dialog",r,t),u=t=>ye(t)?[t].concat(we(tv(t),u)):qe(t)?we(t,u):[],m=t=>J(t.type)&&J(t.name),v={checkbox:tw,colorinput:P6,colorpicker:oG,dropzone:cG,input:gG,iframe:DD,imagepreview:fG,selectbox:z6,sizeinput:nw,slider:vG,listbox:OT,size:nw,textarea:Z6,urlinput:EG,customeditor:$6,collection:Kp,togglemenuitem:Gj},C=t=>A.from(v[t.type]),E=t=>fo(u(t),m),D=t=>{const s=E(t),a=we(s,i=>C(i).fold(()=>[],d=>[as(i.name,d)]));return $t(a)},M=t=>{var s;const a=Ec(n(t)),i=D(t),d=(s=t.initialData)!==null&&s!==void 0?s:{};return{internalDialog:a,dataValidator:i,initialData:d}},B={open:(t,s)=>{const a=M(s);return t(a.internalDialog,a.initialData,a.dataValidator)},openUrl:(t,s)=>{const a=Ec(c(s));return t(a)},redial:t=>M(t)};var q=Object.freeze({__proto__:null,events:(t,s)=>{const a=(i,d)=>{t.updateState.each(g=>{const h=g(i,d);s.set(h)}),t.renderComponents.each(g=>{const h=g(d,s.get());(t.reuseDom?eP:Wf)(i,h)})};return Bn([Te(ei(),(i,d)=>{const g=d;if(!g.universal){const h=t.channel;Uo(g.channels,h)&&a(i,g.data)}}),po((i,d)=>{t.initialData.each(g=>{a(i,g)})})])}}),K=Object.freeze({__proto__:null,getState:(t,s,a)=>a}),ne=[ke("channel"),Nn("renderComponents"),Nn("updateState"),Nn("initialData"),cr("reuseDom",!0)],se=Object.freeze({__proto__:null,init:()=>{const t=Et(A.none()),s=()=>t.set(A.none());return{readState:()=>t.get().getOr("none"),get:t.get,set:t.set,clear:s}}});const ue=Ws({fields:ne,name:"reflecting",active:q,apis:K,state:se}),Oe=t=>{const s=[],a={};return As(t,(i,d)=>{i.fold(()=>{s.push(d)},g=>{a[d]=g})}),s.length>0?tn.error(s):tn.value(a)},Ue=(t,s,a)=>{const i=Pn(Ig.sketch(d=>({dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:De(t.items,g=>I$(d,g,s,a))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[i.asSpec()]}],behaviours:Fe([yt.config({mode:"acyclic",useTabstopAt:Ae(DC)}),Gi.memento(i),vz(i,{postprocess:d=>Oe(d).fold(g=>(console.error(g),{}),bn)}),Jt("dialog-body-panel",[Te(Di(),(d,g)=>{d.getSystem().broadcastOn([_E],{newFocus:A.some(g.event.target)})})])])}},st=(t,s)=>({uid:t.uid,dom:t.dom,components:t.components,events:e_(t.action),behaviours:$s(t.tabButtonBehaviours,[It.config({}),yt.config({mode:"execution",useSpace:!0,useEnter:!0}),it.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}),$e=pa({name:"TabButton",configFields:[me("uid",void 0),ke("value"),rs("dom","dom",w1(()=>({attributes:{role:"tab",id:ut("aria"),"aria-selected":"false"}})),Ei()),Nn("action"),me("domModification",{}),Bs("tabButtonBehaviours",[It,yt,it]),ke("view")],factory:st}),Ce=ae([ke("tabs"),ke("dom"),me("clickToDismiss",!1),Bs("tabbarBehaviours",[Je,yt]),bl(["tabClass","selectedClass"])]),Ee=Wb({factory:$e,name:"tabs",unit:"tab",overrides:t=>{const s=(i,d)=>{Je.dehighlight(i,d),vt(i,Xw(),{tabbar:i,button:d})},a=(i,d)=>{Je.highlight(i,d),vt(i,Yw(),{tabbar:i,button:d})};return{action:i=>{const d=i.getSystem().getByUid(t.uid).getOrDie(),g=Je.isHighlighted(d,i);(g&&t.clickToDismiss?s:g?ee:a)(d,i)},domModification:{classes:[t.markers.tabClass]}}}}),ot=ae([Ee]),wt=(t,s,a,i)=>({uid:t.uid,dom:t.dom,components:s,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:$s(t.tabbarBehaviours,[Je.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:(d,g)=>{ct(g.element,"aria-selected","true")},onDehighlight:(d,g)=>{ct(g.element,"aria-selected","false")}}),yt.config({mode:"flow",getInitial:d=>Je.getHighlighted(d).map(g=>g.element),selector:"."+t.markers.tabClass,executeOnMove:!0})])}),Qt=Vr({name:"Tabbar",configFields:Ce(),partFields:ot(),factory:wt}),hn=(t,s)=>({uid:t.uid,dom:t.dom,behaviours:$s(t.tabviewBehaviours,[Vt.config({})]),domModification:{attributes:{role:"tabpanel"}}}),Un=pa({name:"Tabview",configFields:[Bs("tabviewBehaviours",[Vt])],factory:hn}),Xn=ae([me("selectFirst",!0),vn("onChangeTab"),vn("onDismissTab"),me("tabs",[]),Bs("tabSectionBehaviours",[])]),co=lr({factory:Qt,schema:[ke("dom"),Vu("markers",[ke("tabClass"),ke("selectedClass")])],name:"tabbar",defaults:t=>({tabs:t.tabs})}),Or=lr({factory:Un,name:"tabview"}),Jn=ae([co,Or]),Xe=(t,s,a,i)=>{const d=h=>{const w=it.getValue(h);He(h,t,"tabview").each(x=>{Gt(t.tabs,R=>R.value===w).each(R=>{const N=R.view();tr(h.element,"id").each(I=>{ct(x.element,"aria-labelledby",I)}),Vt.set(x,N),t.onChangeTab(x,h,N)})})},g=(h,w)=>{He(h,t,"tabbar").each(x=>{w(x).each(Ku)})};return{uid:t.uid,dom:t.dom,components:s,behaviours:rp(t.tabSectionBehaviours),events:Bn(Xt([t.selectFirst?[po((h,w)=>{g(h,Je.getFirst)})]:[],[Te(Yw(),(h,w)=>{const x=w.event.button;d(x)}),Te(Xw(),(h,w)=>{const x=w.event.button;t.onDismissTab(h,x)})]])),apis:{getViewItems:h=>He(h,t,"tabview").map(w=>Vt.contents(w)).getOr([]),showTab:(h,w)=>{g(h,T=>{const R=Je.getCandidates(T);return Gt(R,I=>it.getValue(I)===w).filter(I=>!Je.isHighlighted(T,I))})}}}},bt=Vr({name:"TabSection",configFields:Xn(),partFields:Jn(),factory:Xe,apis:{getViewItems:(t,s)=>t.getViewItems(s),showTab:(t,s,a)=>{t.showTab(s,a)}}}),En=(t,s,a)=>De(t,(i,d)=>{Vt.set(a,t[d].view());const g=s.dom.getBoundingClientRect();return Vt.set(a,[]),g.height}),nt=t=>xa(eh(t,(s,a)=>s>a?-1:s<a?1:0)),kt=(t,s,a)=>{const i=c1(t).dom,d=su(t,".tox-dialog-wrap").getOr(t),g=jo(d,"position")==="fixed";let h;g?h=Math.max(i.clientHeight,window.innerHeight):h=Math.max(i.offsetHeight,i.scrollHeight);const w=_s(s),T=s.dom.offsetLeft>=a.dom.offsetLeft+fa(a)?Math.max(_s(a),w):w,R=parseInt(jo(t,"margin-top"),10)||0,N=parseInt(jo(t,"margin-bottom"),10)||0,z=_s(t)+R+N-T;return h-z},rn=(t,s)=>{xa(t).each(a=>bt.showTab(s,a.value))},rt=(t,s)=>{qt(t,"height",s+"px"),qt(t,"flex-basis",s+"px")},nn=(t,s,a)=>{su(t,'[role="dialog"]').each(i=>{$n(i,'[role="tablist"]').each(d=>{a.get().map(g=>(qt(s,"height","0"),qt(s,"flex-basis","0"),Math.min(g,kt(i,s,d)))).each(g=>{rt(s,g)})})})},an=t=>$n(t,'[role="tabpanel"]'),Fs=t=>{const s=Mn();return{extraEvents:[po(d=>{const g=d.element;an(g).each(h=>{qt(h,"visibility","hidden"),d.getSystem().getByDom(h).toOptional().each(w=>{const x=En(t,h,w);nt(x).fold(s.clear,s.set)}),nn(g,h,s),kn(h,"visibility"),rn(t,d),requestAnimationFrame(()=>{nn(g,h,s)})})}),Te(ml(),d=>{const g=d.element;an(g).each(h=>{nn(g,h,s)})}),Te(JA,(d,g)=>{const h=d.element;an(h).each(w=>{const x=Li(Eo(w));qt(w,"visibility","hidden");const T=nr(w,"height").map(I=>parseInt(I,10));kn(w,"height"),kn(w,"flex-basis");const R=w.dom.getBoundingClientRect().height;T.forall(I=>R>I)?(s.set(R),nn(h,w,s)):T.each(I=>{rt(w,I)}),kn(w,"visibility"),x.each(rc)})})],selectFirst:!1}},Fn="send-data-to-section",Cs="send-data-to-view",Xi=(t,s,a)=>{const i=Et({}),d=T=>{const R=it.getValue(T),N=Oe(R).getOr({}),I=i.get(),z=Po(I,N);i.set(z)},g=T=>{const R=i.get();it.setValue(T,R)},h=Et(null),w=De(t.tabs,T=>({value:T.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[Lo(a.shared.providers.translate(T.title))],view:()=>[Ig.sketch(R=>({dom:{tag:"div",classes:["tox-form"]},components:De(T.items,N=>I$(R,N,s,a)),formBehaviours:Fe([yt.config({mode:"acyclic",useTabstopAt:Ae(DC)}),Jt("TabView.form.events",[po(g),gl(d)]),ha.config({channels:Uu([{key:Fn,value:{onReceive:d}},{key:Cs,value:{onReceive:g}}])})])}))]})),x=Fs(w);return bt.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(T,R,N)=>{const I=it.getValue(R);vt(T,JB,{name:I,oldName:h.get()}),h.set(I)},tabs:w,components:[bt.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[Qt.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:Fe([uo.config({})])}),bt.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:x.selectFirst,tabSectionBehaviours:Fe([Jt("tabpanel",x.extraEvents),yt.config({mode:"acyclic"}),yn.config({find:T=>xa(bt.getViewItems(T))}),$p(A.none(),T=>(T.getSystem().broadcastOn([Fn],{}),i.get()),(T,R)=>{i.set(R),T.getSystem().broadcastOn([Cs],{})})])})},Ml=(t,s,a,i,d)=>{const g=x=>{const T=x.body;switch(T.type){case"tabpanel":return[Xi(T,x.initialData,i)];default:return[Ue(T,x.initialData,i)]}},h=(x,T)=>A.some({isTabPanel:()=>T.body.type==="tabpanel"}),w={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...a.map(x=>({id:x})).getOr({}),...d?w:{}}},components:[],behaviours:Fe([Gi.childAt(0),ue.config({channel:`${V5}-${s}`,updateState:h,renderComponents:g,initialData:t})])}},ya=(t,s,a,i,d)=>Ml(t,s,A.some(a),i,d),Fc=(t,s,a)=>{const i=Ml(t,s,A.none(),a,!1);return ys.parts.body(i)},Ji=t=>{const s={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[O3(A.none(),{dom:{tag:"iframe",attributes:{src:t.url}},behaviours:Fe([uo.config({}),It.config({})])})]}],behaviours:Fe([yt.config({mode:"acyclic",useTabstopAt:Ae(DC)})])};return ys.parts.body(s)},Lc=e0.deviceType.isTouch(),pi=(t,s)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,s]}),xt=(t,s)=>ys.parts.close(_r.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":s.translate("Close")}},action:t,buttonBehaviours:Fe([uo.config({})])})),Cn=()=>ys.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),So=(t,s)=>ys.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:Kf(`<p>${sN(s.translate(t))}</p>`)}]}]}),Vo=t=>ys.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t}),ds=(t,s)=>[Cu.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),Cu.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:s})],Ls=t=>{const s="tox-dialog",a=s+"-wrap",i=a+"__backdrop",d=s+"__disable-scroll";return ys.sketch({lazySink:t.lazySink,onEscape:g=>(t.onEscape(g),A.some(!0)),useTabstopAt:g=>!DC(g),firstTabstop:t.firstTabstop,dom:{tag:"div",classes:[s].concat(t.extraClasses),styles:{position:"relative",...t.extraStyles}},components:[t.header,t.body,...t.footer.toArray()],parts:{blocker:{dom:Kf(`<div class="${a}"></div>`),components:[{dom:{tag:"div",classes:Lc?[i,i+"--opaque"]:[i]}}]}},dragBlockClass:a,modalBehaviours:Fe([It.config({}),Jt("dialog-events",t.dialogEvents.concat([Lm(Di(),(g,h)=>{Id.isBlocked(g)?ee():yt.focusIn(g)}),Te(Eh(),(g,h)=>{g.getSystem().broadcastOn([_E],{newFocus:h.event.newFocus})})])),Jt("scroll-lock",[po(()=>{oo(Zr(),d)}),gl(()=>{Oo(Zr(),d)})]),...t.extraBehaviours]),eventOrder:{[ma()]:["dialog-events"],[yr()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[ti()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...t.eventOrder}})},es=t=>_r.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),"data-mce-name":"close"}},buttonBehaviours:Fe([uo.config({}),Er.config(t.tooltips.getConfig({tooltipText:t.translate("Close")}))]),components:[Wi("close",{tag:"span",classes:["tox-icon"]},t.icons)],action:s=>{un(s,Qf)}}),ts=(t,s,a,i)=>{const d=g=>[Lo(i.translate(g.title))];return{dom:{tag:"h1",classes:["tox-dialog__title"],attributes:{...a.map(g=>({id:g})).getOr({})}},components:[],behaviours:Fe([ue.config({channel:`${H5}-${s}`,initialData:t,renderComponents:d})])}},aa=()=>({dom:Kf('<div class="tox-dialog__draghandle"></div>')}),Pl=(t,s,a,i)=>Cu.sketch({dom:Kf('<div class="tox-dialog__header"></div>'),components:[ts(t,s,A.some(a),i),aa(),es(i)],containerBehaviours:Fe([jp.config({mode:"mouse",blockerClass:"blocker",getTarget:d=>Fi(d,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}),Nl=(t,s,a)=>{const i=ys.parts.title(ts(t,s,A.none(),a)),d=ys.parts.draghandle(aa()),g=ys.parts.close(es(a)),h=[i].concat(t.draggable?[d]:[]).concat([g]);return Cu.sketch({dom:Kf('<div class="tox-dialog__header"></div>'),components:h})},Qi=(t,s,a)=>Nl({title:a.shared.providers.translate(t),draggable:a.dialog.isDraggableModal()},s,a.shared.providers),bi=(t,s,a,i)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":a.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${i.getOr(0)}px`,position:"absolute"}},behaviours:s,components:[{dom:Kf('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),rm=(t,s,a)=>({onClose:()=>a.closeWindow(),onBlock:i=>{const d=$n(t().element,".tox-dialog__header").map(g=>_s(g));ys.setBusy(t(),(g,h)=>bi(i.message,h,s,d))},onUnblock:()=>{ys.setIdle(t())}}),Xp="tox-dialog--fullscreen",Yg="tox-dialog--width-lg",ow="tox-dialog--width-md",Bl=t=>{switch(t){case"large":return A.some(Yg);case"medium":return A.some(ow);default:return A.none()}},sw=(t,s)=>{const a=le.fromDom(s.element.dom);Na(a,Xp)||(Ba(a,[Yg,ow]),Bl(t).each(i=>oo(a,i)))},$D=(t,s)=>{const a=le.fromDom(t.element.dom),i=yk(a),d=Gt(i,g=>g===Yg||g===ow).or(Bl(s));pk(a,[Xp,...d.toArray()])},zr=(t,s,a)=>wr(Ls({...t,firstTabstop:1,lazySink:a.shared.getSink,extraBehaviours:[wE({}),...t.extraBehaviours],onEscape:i=>{un(i,Qf)},dialogEvents:s,eventOrder:{[ei()]:[ue.name(),ha.name()],[yr()]:["scroll-lock",ue.name(),"messages","dialog-events","alloy.base.behaviour"],[ti()]:["alloy.base.behaviour","dialog-events","messages",ue.name(),"scroll-lock"]}})),am=(t,s={})=>{const a=i=>{const d=De(i.items,g=>{const h=lt(s,g.name).getOr(Et(!1));return{...g,storage:h}});return{...i,items:d}};return De(t,i=>i.type==="menu"?a(i):i)},ID=t=>bo(t,(s,a)=>a.type==="menu"?bo(a.items,(d,g)=>(d[g.name]=g.storage,d),s):s,{}),DT=(t,s)=>[$v(Di(),L5),t(C0,(a,i,d,g)=>{Li(Eo(g.element)).fold(ee,jh),s.onClose(),i.onClose()}),t(Qf,(a,i,d,g)=>{i.onCancel(a),un(g,C0)}),Te(XA,(a,i)=>s.onUnblock()),Te(YA,(a,i)=>s.onBlock(i.event))],Fd=(t,s)=>{const a=(d,g)=>Te(d,(h,w)=>{i(h,(x,T)=>{g(t(),x,w.event,h)})}),i=(d,g)=>{ue.getState(d).get().each(h=>{g(h,d)})};return[...DT(a,s),a(kd,(d,g,h)=>{g.onAction(d,{name:h.name})})]},G0=(t,s,a)=>{const i=(g,h)=>Te(g,(w,x)=>{d(w,(T,R)=>{h(t(),T,x.event,w)})}),d=(g,h)=>{ue.getState(g).get().each(w=>{h(w.internalDialog,g)})};return[...DT(i,s),i(fC,(g,h)=>h.onSubmit(g)),i($c,(g,h,w)=>{h.onChange(g,{name:w.name})}),i(kd,(g,h,w,x)=>{const T=()=>x.getSystem().isConnected()?yt.focusIn(x):void 0,R=z=>uv(z,"disabled")||tr(z,"aria-disabled").exists(V=>V==="true"),N=Eo(x.element),I=Li(N);h.onAction(g,{name:w.name,value:w.value}),Li(N).fold(T,z=>{R(z)||I.exists(V=>Cc(z,V)&&R(V))?T():a().toOptional().filter(V=>!Cc(V.element,z)).each(T)})}),i(JB,(g,h,w)=>{h.onTabChange(g,{newTabName:w.name,oldTabName:w.oldName})}),gl(g=>{const h=t();it.setValue(g,h.getData())})]},ge=(t,s)=>$E(t,t.type,s),pe=(t,s,a)=>Gt(s,i=>i.name===a).bind(i=>i.memento.getOpt(t)),Ke=(t,s)=>{const a=s.map(w=>w.footerButtons).getOr([]),i=lm(a,w=>w.align==="start"),d=(w,x)=>Cu.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${w}`]},components:De(x,T=>T.memento.asSpec())}),g=d("start",i.pass),h=d("end",i.fail);return[g,h]},Ve=(t,s,a)=>{const i=(d,g)=>{const h=De(g.buttons,x=>{const T=Pn(ge(x,a));return{name:x.name,align:x.align,memento:T}}),w=x=>pe(d,h,x);return A.some({lookupByName:w,footerButtons:h})};return{dom:Kf('<div class="tox-dialog__footer"></div>'),components:[],behaviours:Fe([ue.config({channel:`${z5}-${s}`,initialData:t,updateState:i,renderComponents:Ke})])}},Nt=(t,s,a)=>Ve(t,s,a),mn=(t,s,a)=>ys.parts.footer(Ve(t,s,a)),xo=(t,s)=>{if(t.getRoot().getSystem().isConnected()){const i=yn.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return Ig.getField(i,s).orThunk(()=>t.getFooter().bind(h=>ue.getState(h).get()).bind(h=>h.lookupByName(s)))}else return A.none()},$l=(t,s)=>{const a=t.getRoot();return ue.getState(a).get().map(i=>Ec(No("data",i.dataValidator,s))).getOr(s)},rw=(t,s,a)=>{const i=V=>{const Y=t.getRoot();Y.getSystem().isConnected()&&V(Y)},z={getData:()=>{const V=t.getRoot(),Y=V.getSystem().isConnected()?t.getFormWrapper():V,de=it.getValue(Y),te=Io(a,ie=>ie.get());return{...de,...te}},setData:V=>{i(Y=>{const de=z.getData(),te=Po(de,V),ie=$l(t,te),ce=t.getFormWrapper();it.setValue(ce,ie),As(a,(_e,Se)=>{Ln(te,Se)&&_e.set(te[Se])})})},setEnabled:(V,Y)=>{xo(t,V).each(Y?Pt.enable:Pt.disable)},focus:V=>{xo(t,V).each(It.focus)},block:V=>{if(!J(V))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");i(Y=>{vt(Y,YA,{message:V})})},unblock:()=>{i(V=>{un(V,XA)})},showTab:V=>{i(Y=>{const de=t.getBody();ue.getState(de).get().exists(ie=>ie.isTabPanel())&&yn.getCurrent(de).each(ie=>{bt.showTab(ie,V)})})},redial:V=>{i(Y=>{const de=t.getId(),te=s(V),ie=am(te.internalDialog.buttons,a);Y.getSystem().broadcastOn([`${xE}-${de}`],te),Y.getSystem().broadcastOn([`${H5}-${de}`],te.internalDialog),Y.getSystem().broadcastOn([`${V5}-${de}`],te.internalDialog),Y.getSystem().broadcastOn([`${z5}-${de}`],{...te.internalDialog,buttons:ie}),z.setData(te.initialData)})},close:()=>{i(V=>{un(V,C0)})},toggleFullscreen:t.toggleFullscreen};return z},RG=(t,s,a)=>{const i=ut("dialog"),d=t.internalDialog,g=Qi(d.title,i,a),h=Et(d.size),w=Bl(h.get()).toArray(),x=(ie,ce)=>(h.set(ce.internalDialog.size),sw(ce.internalDialog.size,ie),A.some(ce)),T=Fc({body:d.body,initialData:d.initialData},i,a),R=am(d.buttons),N=ID(R),I=Ft(R.length!==0,mn({buttons:R},i,a)),z=G0(()=>te,rm(()=>Y,a.shared.providers,s),a.shared.getSink),V={id:i,header:g,body:T,footer:I,extraClasses:w,extraBehaviours:[ue.config({channel:`${xE}-${i}`,updateState:x,initialData:t})],extraStyles:{}},Y=zr(V,z,a),de=(()=>{const ie=()=>{const _e=ys.getBody(Y);return yn.getCurrent(_e).getOr(_e)},ce=()=>{$D(Y,h.get())};return{getId:ae(i),getRoot:ae(Y),getBody:()=>ys.getBody(Y),getFooter:()=>ys.getFooter(Y),getFormWrapper:ie,toggleFullscreen:ce}})(),te=rw(de,s.redial,N);return{dialog:Y,instanceApi:te}},aw=(t,s,a,i=!1,d)=>{const g=ut("dialog"),h=ut("dialog-label"),w=ut("dialog-content"),x=t.internalDialog,T=Et(x.size),R=Bl(T.get()).toArray(),N=(Ie,xe)=>(T.set(xe.internalDialog.size),sw(xe.internalDialog.size,Ie),d(),A.some(xe)),I=Pn(Pl({title:x.title,draggable:!0},g,h,a.shared.providers)),z=Pn(ya({body:x.body,initialData:x.initialData},g,w,a,i)),V=am(x.buttons),Y=ID(V),de=Ft(V.length!==0,Pn(Nt({buttons:V},g,a))),te=G0(()=>Le,{onBlock:Ie=>{Id.block(_e,(xe,Ht)=>{const mt=I.getOpt(_e).map(Ot=>_s(Ot.element));return bi(Ie.message,Ht,a.shared.providers,mt)})},onUnblock:()=>{Id.unblock(_e)},onClose:()=>s.closeWindow()},a.shared.getSink),ie="tox-dialog-inline",ce=Qa().os,_e=wr({dom:{tag:"div",classes:["tox-dialog",ie,...R],attributes:{role:"dialog",...ce.isMacOS()?{"aria-label":x.title}:{"aria-labelledby":h}}},eventOrder:{[ei()]:[ue.name(),ha.name()],[ma()]:["execute-on-form"],[yr()]:["reflecting","execute-on-form"]},behaviours:Fe([yt.config({mode:"cyclic",onEscape:Ie=>(un(Ie,C0),A.some(!0)),useTabstopAt:Ie=>!DC(Ie)&&(zc(Ie)!=="button"||Fo(Ie,"disabled")!=="disabled"),firstTabstop:1}),ue.config({channel:`${xE}-${g}`,updateState:N,initialData:t}),It.config({}),Jt("execute-on-form",te.concat([Lm(Di(),(Ie,xe)=>{yt.focusIn(Ie)}),Te(Eh(),(Ie,xe)=>{Ie.getSystem().broadcastOn([_E],{newFocus:xe.event.newFocus})})])),Id.config({getRoot:()=>A.some(_e)}),Vt.config({}),wE({})]),components:[I.asSpec(),z.asSpec(),...de.map(Ie=>Ie.asSpec()).toArray()]}),Se=()=>{$D(_e,T.get())},Le=rw({getId:ae(g),getRoot:ae(_e),getFooter:()=>de.map(Ie=>Ie.get(_e)),getBody:()=>z.get(_e),getFormWrapper:()=>{const Ie=z.get(_e);return yn.getCurrent(Ie).getOr(Ie)},toggleFullscreen:Se},s.redial,Y);return{dialog:_e,instanceApi:Le}};var Tu=tinymce.util.Tools.resolve("tinymce.util.URI");const K6=t=>{const s=h=>{t.getSystem().isConnected()&&h(t)};return{block:h=>{if(!J(h))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");s(w=>{vt(w,YA,{message:h})})},unblock:()=>{s(h=>{un(h,XA)})},close:()=>{s(h=>{un(h,C0)})},sendMessage:h=>{s(w=>{w.getSystem().broadcastOn([U5],h)})}}},Y6=["insertContent","setContent","execCommand","close","block","unblock"],FD=t=>ye(t)&&Y6.indexOf(t.mceAction)!==-1,X6=t=>!FD(t)&&ye(t)&&Ln(t,"mceAction"),DG=(t,s,a)=>{switch(a.mceAction){case"insertContent":t.insertContent(a.content);break;case"setContent":t.setContent(a.content);break;case"execCommand":const i=en(a.ui)?a.ui:!1;t.execCommand(a.cmd,i,a.value);break;case"close":s.close();break;case"block":s.block(a.message);break;case"unblock":s.unblock();break}},dn=(t,s,a,i)=>{const d=ut("dialog"),g=Qi(t.title,d,i),h=Ji(t),w=t.buttons.bind(ce=>ce.length===0?A.none():A.some(mn({buttons:ce},d,i))),x=Fd(()=>ie,rm(()=>te,i.shared.providers,s)),T={...t.height.fold(()=>({}),ce=>({height:ce+"px","max-height":ce+"px"})),...t.width.fold(()=>({}),ce=>({width:ce+"px","max-width":ce+"px"}))},R=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],N=new Tu(t.url,{base_uri:new Tu(window.location.href)}),I=`${N.protocol}://${N.host}${N.port?":"+N.port:""}`,z=ec(),V=(ce,_e)=>A.some(_e),Y=[ue.config({channel:`${xE}-${d}`,updateState:V,initialData:t}),Jt("messages",[po(()=>{const ce=ea(le.fromDom(window),"message",_e=>{if(N.isSameOrigin(new Tu(_e.raw.origin))){const Se=_e.raw.data;FD(Se)?DG(a,ie,Se):X6(Se)&&t.onMessage(ie,Se)}});z.set(ce)}),gl(z.clear)]),ha.config({channels:{[U5]:{onReceive:(ce,_e)=>{$n(ce.element,"iframe").each(Se=>{const Le=Se.dom.contentWindow;Rt(Le)&&Le.postMessage(_e,I)})}}}})],te=zr({id:d,header:g,body:h,footer:w,extraClasses:R,extraBehaviours:Y,extraStyles:T},x,i),ie=K6(te);return{dialog:te,instanceApi:ie}},be=t=>{const s=t.shared;return{open:(i,d)=>{const g=()=>{ys.hide(T),d()},h=Pn($E({name:"close-alert",text:"OK",primary:!0,buttonType:A.some("primary"),align:"end",enabled:!0,icon:A.none()},"cancel",t)),w=Cn(),x=xt(g,s.providers),T=wr(Ls({lazySink:()=>s.getSink(),header:pi(w,x),body:So(i,s.providers),footer:A.some(Vo(ds([],[h.asSpec()]))),onEscape:g,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Te(Qf,g)],eventOrder:{}}));ys.show(T);const R=h.get(T);It.focus(R)}}},Ct=t=>{const s=t.shared;return{open:(i,d)=>{const g=I=>{ys.hide(R),d(I)},h=Pn($E({name:"yes",text:"Yes",primary:!0,buttonType:A.some("primary"),align:"end",enabled:!0,icon:A.none()},"submit",t)),w=$E({name:"no",text:"No",primary:!1,buttonType:A.some("secondary"),align:"end",enabled:!0,icon:A.none()},"cancel",t),x=Cn(),T=xt(()=>g(!1),s.providers),R=wr(Ls({lazySink:()=>s.getSink(),header:pi(x,T),body:So(i,s.providers),footer:A.some(Vo(ds([],[w,h.asSpec()]))),onEscape:()=>g(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Te(Qf,()=>g(!1)),Te(fC,()=>g(!0))],eventOrder:{}}));ys.show(R);const N=h.get(R);It.focus(N)}}},Lt=(t,s)=>Ec(No("data",s,t)),Xo=t=>aC(t,".tox-alert-dialog")||aC(t,".tox-confirm-dialog"),Ca=(t,s,a)=>s&&a?[]:[wo.config({contextual:{lazyContext:()=>A.some(Mo(le.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"],lazyViewport:i=>Ag(t,i.element).map(g=>({bounds:qf(g),optScrollEnv:A.some({currentScrollTop:g.element.dom.scrollTop,scrollElmTop:da(g.element).top})})).getOrThunk(()=>({bounds:Br(),optScrollEnv:A.none()}))})],Il=t=>{const s=t.editor,a=xp(s),i=be(t.backstages.dialog),d=Ct(t.backstages.dialog),g=(V,Y,de)=>{if(!xn(Y)){if(Y.inline==="toolbar")return T(V,t.backstages.popup.shared.anchors.inlineDialog(),de,Y);if(Y.inline==="bottom")return R(V,t.backstages.popup.shared.anchors.inlineBottomDialog(),de,Y);if(Y.inline==="cursor")return T(V,t.backstages.popup.shared.anchors.cursor(),de,Y)}return x(V,de)},h=(V,Y)=>w(V,Y),w=(V,Y)=>{const de=te=>{const ie=dn(te,{closeWindow:()=>{ys.hide(ie.dialog),Y(ie.instanceApi)}},s,t.backstages.dialog);return ys.show(ie.dialog),ie.instanceApi};return B.openUrl(de,V)},x=(V,Y)=>{const de=(te,ie,ce)=>{const _e=ie,Le=RG({dataValidator:ce,initialData:_e,internalDialog:te},{redial:B.redial,closeWindow:()=>{ys.hide(Le.dialog),Y(Le.instanceApi)}},t.backstages.dialog);return ys.show(Le.dialog),Le.instanceApi.setData(_e),Le.instanceApi};return B.open(de,V)},T=(V,Y,de,te)=>{const ie=(ce,_e,Se)=>{const Le=Lt(_e,Se),Ie=Mn(),xe=t.backstages.popup.shared.header.isPositionedAtTop(),Ht={dataValidator:Se,initialData:Le,internalDialog:ce},mt=()=>Ie.on(Sn=>{Ao.reposition(Sn),(!a||!xe)&&wo.refresh(Sn)}),Ot=aw(Ht,{redial:B.redial,closeWindow:()=>{Ie.on(Ao.hide),s.off("ResizeEditor",mt),Ie.clear(),de(Ot.instanceApi)}},t.backstages.popup,te.ariaAttrs,mt),_t=wr(Ao.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:te.persistent?{event:"doNotDismissYet"}:{},...xe?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Fe([Jt("window-manager-inline-events",[Te(Ql(),(Sn,cn)=>{un(Ot.dialog,Qf)})]),...Ca(s,a,xe)]),isExtraPart:(Sn,cn)=>Xo(cn)}));Ie.set(_t);const Rn=()=>{const Sn=s.inline?Zr():le.fromDom(s.getContainer()),cn=Mo(Sn);return A.some(cn)};return Ao.showWithinBounds(_t,Fr(Ot.dialog),{anchor:Y},Rn),(!a||!xe)&&(wo.refresh(_t),s.on("ResizeEditor",mt)),Ot.instanceApi.setData(Le),yt.focusIn(Ot.dialog),Ot.instanceApi};return B.open(ie,V)},R=(V,Y,de,te)=>{const ie=(ce,_e,Se)=>{const Le=Lt(_e,Se),Ie=Mn(),xe=t.backstages.popup.shared.header.isPositionedAtTop(),Ht={dataValidator:Se,initialData:Le,internalDialog:ce},mt=()=>Ie.on(Sn=>{Ao.reposition(Sn),wo.refresh(Sn)}),Ot=aw(Ht,{redial:B.redial,closeWindow:()=>{Ie.on(Ao.hide),s.off("ResizeEditor ScrollWindow ElementScroll",mt),Ie.clear(),de(Ot.instanceApi)}},t.backstages.popup,te.ariaAttrs,mt),_t=wr(Ao.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:te.persistent?{event:"doNotDismissYet"}:{},...xe?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Fe([Jt("window-manager-inline-events",[Te(Ql(),(Sn,cn)=>{un(Ot.dialog,Qf)})]),wo.config({contextual:{lazyContext:()=>A.some(Mo(le.fromDom(s.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:Sn=>Ag(s,Sn.element).map(Ze=>({bounds:qf(Ze),optScrollEnv:A.some({currentScrollTop:Ze.element.dom.scrollTop,scrollElmTop:da(Ze.element).top})})).getOrThunk(()=>({bounds:Br(),optScrollEnv:A.none()}))})]),isExtraPart:(Sn,cn)=>Xo(cn)}));Ie.set(_t);const Rn=()=>t.backstages.popup.shared.getSink().toOptional().bind(Sn=>{const cn=Ag(s,Sn.element),Ze=15,ht=cn.map(Tt=>qf(Tt)).getOr(Br()),Yt=Mo(le.fromDom(s.getContentAreaContainer())),Dt=hv(Yt,ht);return A.some(Ts(Dt.x,Dt.y,Dt.width,Dt.height-Ze))});return Ao.showWithinBounds(_t,Fr(Ot.dialog),{anchor:Y},Rn),wo.refresh(_t),s.on("ResizeEditor ScrollWindow ElementScroll ResizeWindow",mt),Ot.instanceApi.setData(Le),yt.focusIn(Ot.dialog),Ot.instanceApi};return B.open(ie,V)};return{open:g,openUrl:h,alert:(V,Y)=>{i.open(V,Y)},close:V=>{V.close()},confirm:(V,Y)=>{d.open(V,Y)}}},Qs=t=>{M2(t),lH(t),UZ(t)};var Fl=()=>{pv.add("silver",t=>{Qs(t);let s=()=>Br();const{dialogs:a,popups:i,renderUI:d}=Uj(t,{getPopupSinkBounds:()=>s()}),g=()=>{const T=d();return Ag(t,i.getMothership().element).each(N=>{s=()=>qf(N)}),T};QH.register(t,i.backstage.shared);const h=Il({editor:t,backstages:{popup:i.backstage,dialog:a.backstage}}),w=Mn(),x=()=>lN(t,{backstage:i.backstage},i.getMothership(),w);return{renderUI:g,getWindowManagerImpl:ae(h),getNotificationManagerImpl:x}})};Fl()})();(function(){var b=tinymce.util.Tools.resolve("tinymce.ModelManager");const S=(l,f,p)=>{var y;return p(l,f.prototype)?!0:((y=l.constructor)===null||y===void 0?void 0:y.name)===f.name},k=l=>{const f=typeof l;return l===null?"null":f==="object"&&Array.isArray(l)?"array":f==="object"&&S(l,String,(p,y)=>y.isPrototypeOf(p))?"string":f},P=l=>f=>k(f)===l,F=l=>f=>typeof f===l,H=l=>f=>l===f,j=P("string"),J=P("object"),ye=P("array"),Qe=H(null),qe=F("boolean"),Ge=H(void 0),en=l=>l==null,xn=l=>!en(l),Zt=F("function"),Rt=F("number"),Ne=()=>{},fn=(l,f)=>(...p)=>l(f.apply(null,p)),Gn=(l,f)=>p=>l(f(p)),ee=l=>()=>l,sn=l=>l,Hc=(l,f)=>l===f;function Tn(l,...f){return(...p)=>{const y=f.concat(p);return l.apply(null,y)}}const ae=l=>f=>!l(f),bn=l=>()=>{throw new Error(l)},fs=l=>l(),_n=ee(!1),Ae=ee(!0);class oe{constructor(f,p){this.tag=f,this.value=p}static some(f){return new oe(!0,f)}static none(){return oe.singletonNone}fold(f,p){return this.tag?p(this.value):f()}isSome(){return this.tag}isNone(){return!this.tag}map(f){return this.tag?oe.some(f(this.value)):oe.none()}bind(f){return this.tag?f(this.value):oe.none()}exists(f){return this.tag&&f(this.value)}forall(f){return!this.tag||f(this.value)}filter(f){return!this.tag||f(this.value)?this:oe.none()}getOr(f){return this.tag?this.value:f}or(f){return this.tag?this:f}getOrThunk(f){return this.tag?this.value:f()}orThunk(f){return this.tag?this:f()}getOrDie(f){if(this.tag)return this.value;throw new Error(f??"Called getOrDie on None")}static from(f){return xn(f)?oe.some(f):oe.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(f){this.tag&&f(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}oe.singletonNone=new oe(!1);const Za=Array.prototype.slice,eo=Array.prototype.indexOf,Bt=Array.prototype.push,A=(l,f)=>eo.call(l,f),ns=(l,f)=>A(l,f)>-1,et=(l,f)=>{for(let p=0,y=l.length;p<y;p++){const _=l[p];if(f(_,p))return!0}return!1},zo=(l,f)=>{const p=[];for(let y=0;y<l;y++)p.push(f(y));return p},jt=(l,f)=>{const p=l.length,y=new Array(p);for(let _=0;_<p;_++){const O=l[_];y[_]=f(O,_)}return y},Be=(l,f)=>{for(let p=0,y=l.length;p<y;p++){const _=l[p];f(_,p)}},Uo=(l,f)=>{for(let p=l.length-1;p>=0;p--){const y=l[p];f(y,p)}},ja=(l,f)=>{const p=[],y=[];for(let _=0,O=l.length;_<O;_++){const $=l[_];(f($,_)?p:y).push($)}return{pass:p,fail:y}},os=(l,f)=>{const p=[];for(let y=0,_=l.length;y<_;y++){const O=l[y];f(O,y)&&p.push(O)}return p},ia=(l,f,p)=>(Uo(l,(y,_)=>{p=f(p,y,_)}),p),De=(l,f,p)=>(Be(l,(y,_)=>{p=f(p,y,_)}),p),dt=(l,f,p)=>{for(let y=0,_=l.length;y<_;y++){const O=l[y];if(f(O,y))return oe.some(O);if(p(O,y))break}return oe.none()},L=(l,f)=>dt(l,f,_n),lm=(l,f)=>{for(let p=0,y=l.length;p<y;p++){const _=l[p];if(f(_,p))return oe.some(p)}return oe.none()},fo=l=>{const f=[];for(let p=0,y=l.length;p<y;++p){if(!ye(l[p]))throw new Error("Arr.flatten item "+p+" was not an array, input: "+l);Bt.apply(f,l[p])}return f},Ss=(l,f)=>fo(jt(l,f)),bo=(l,f)=>{for(let p=0,y=l.length;p<y;++p){const _=l[p];if(f(_,p)!==!0)return!1}return!0},WT=l=>{const f=Za.call(l,0);return f.reverse(),f},Gt=(l,f)=>{const p={};for(let y=0,_=l.length;y<_;y++){const O=l[y];p[String(O)]=f(O,y)}return p},vo=(l,f)=>{const p=Za.call(l,0);return p.sort(f),p},Xt=(l,f)=>f>=0&&f<l.length?oe.some(l[f]):oe.none(),we=l=>Xt(l,0),Ou=l=>Xt(l,l.length-1),Rr=(l,f)=>{for(let p=0;p<l.length;p++){const y=f(l[p],p);if(y.isSome())return y}return oe.none()},Mt=Object.keys,Zd=Object.hasOwnProperty,Wo=(l,f)=>{const p=Mt(l);for(let y=0,_=p.length;y<_;y++){const O=p[y],$=l[O];f($,O)}},eh=(l,f)=>ss(l,(p,y)=>({k:y,v:f(p,y)})),ss=(l,f)=>{const p={};return Wo(l,(y,_)=>{const O=f(y,_);p[O.k]=O.v}),p},xa=l=>(f,p)=>{l[p]=f},n1=(l,f,p,y)=>{Wo(l,(_,O)=>{(f(_,O)?p:y)(_,O)})},vc=(l,f)=>{const p={};return n1(l,f,xa(p),Ne),p},ur=(l,f)=>{const p=[];return Wo(l,(y,_)=>{p.push(f(y,_))}),p},$o=l=>ur(l,sn),o1=(l,f)=>As(l,f)?oe.from(l[f]):oe.none(),As=(l,f)=>Zd.call(l,f),Io=(l,f)=>As(l,f)&&l[f]!==void 0&&l[f]!==null,um=l=>{for(const f in l)if(Zd.call(l,f))return!1;return!0},Dr=typeof window<"u"?window:Function("return this;")(),Ll=(l,f)=>{let p=f??Dr;for(let y=0;y<l.length&&p!==void 0&&p!==null;++y)p=p[l[y]];return p},_a=(l,f)=>{const p=l.split(".");return Ll(p,f)},jd=(l,f)=>_a(l,f),th=(l,f)=>{const p=jd(l,f);if(p==null)throw new Error(l+" not available on this browser");return p},Wr=Object.getPrototypeOf,tv=l=>th("HTMLElement",l),lt=l=>{const f=_a("ownerDocument.defaultView",l);return J(l)&&(tv(f).prototype.isPrototypeOf(l)||/^HTML\w*Element$/.test(Wr(l).constructor.name))},Ln=8,yc=9,Ga=11,s1=1,Gd=3,_o=l=>l.dom.nodeName.toLowerCase(),Au=l=>l.dom.nodeType,dm=l=>f=>Au(f)===l,mo=l=>Au(l)===Ln||_o(l)==="#comment",Ft=l=>Ea(l)&&lt(l.dom),Ea=dm(s1),qd=dm(Gd),r1=dm(yc),nv=dm(Ga),la=l=>f=>Ea(f)&&_o(f)===l,Mr=(l,f,p)=>{if(j(p)||qe(p)||Rt(p))l.setAttribute(f,p+"");else throw console.error("Invalid call to Attribute.set. Key ",f,":: Value ",p,":: Element ",l),new Error("Attribute value was not simple")},xs=(l,f,p)=>{Mr(l.dom,f,p)},nl=(l,f)=>{const p=l.dom;Wo(f,(y,_)=>{Mr(p,_,y)})},a1=(l,f)=>{Wo(f,(p,y)=>{p.fold(()=>{Do(l,y)},_=>{Mr(l.dom,y,_)})})},Hl=(l,f)=>{const p=l.dom.getAttribute(f);return p===null?void 0:p},qa=(l,f)=>oe.from(Hl(l,f)),Do=(l,f)=>{l.dom.removeAttribute(f)},Vc=l=>De(l.dom.attributes,(f,p)=>(f[p.name]=p.value,f),{}),ol=(l,f)=>{const y=(f||document).createElement("div");if(y.innerHTML=l,!y.hasChildNodes()||y.childNodes.length>1){const _="HTML does not have a single root node";throw console.error(_,l),new Error(_)}return Vl(y.childNodes[0])},ZT=(l,f)=>{const y=(f||document).createElement(l);return Vl(y)},jT=(l,f)=>{const y=(f||document).createTextNode(l);return Vl(y)},Vl=l=>{if(l==null)throw new Error("Node cannot be null or undefined");return{dom:l}},le={fromHtml:ol,fromTag:ZT,fromText:jT,fromDom:Vl,fromPoint:(l,f,p)=>oe.from(l.dom.elementFromPoint(f,p)).map(Vl)},Ta=(l,f)=>{const p=l.dom;if(p.nodeType!==s1)return!1;{const y=p;if(y.matches!==void 0)return y.matches(f);if(y.msMatchesSelector!==void 0)return y.msMatchesSelector(f);if(y.webkitMatchesSelector!==void 0)return y.webkitMatchesSelector(f);if(y.mozMatchesSelector!==void 0)return y.mozMatchesSelector(f);throw new Error("Browser lacks native selectors")}},fm=l=>l.nodeType!==s1&&l.nodeType!==yc&&l.nodeType!==Ga||l.childElementCount===0,bw=(l,f)=>{const p=f===void 0?document:f.dom;return fm(p)?[]:jt(p.querySelectorAll(l),le.fromDom)},ov=(l,f)=>{const p=f===void 0?document:f.dom;return fm(p)?oe.none():oe.from(p.querySelector(l)).map(le.fromDom)},yo=(l,f)=>l.dom===f.dom,sv=(l,f)=>{const p=l.dom,y=f.dom;return p===y?!1:p.contains(y)},GT=Ta,nh=l=>le.fromDom(l.dom.ownerDocument),mm=l=>r1(l)?l:nh(l),dr=l=>le.fromDom(mm(l).dom.documentElement),ms=l=>le.fromDom(mm(l).dom.defaultView),zl=l=>oe.from(l.dom.parentNode).map(le.fromDom),zc=l=>oe.from(l.dom.parentElement).map(le.fromDom),Kd=(l,f)=>{const p=Zt(f)?f:_n;let y=l.dom;const _=[];for(;y.parentNode!==null&&y.parentNode!==void 0;){const O=y.parentNode,$=le.fromDom(O);if(_.push($),p($)===!0)break;y=O}return _},oh=l=>oe.from(l.dom.previousSibling).map(le.fromDom),gm=l=>oe.from(l.dom.nextSibling).map(le.fromDom),no=l=>jt(l.dom.childNodes,le.fromDom),Ka=(l,f)=>{const p=l.dom.childNodes;return oe.from(p[f]).map(le.fromDom)},qT=l=>Ka(l,0),Yd=(l,f)=>{zl(l).each(y=>{y.dom.insertBefore(f.dom,l.dom)})},Ru=(l,f)=>{gm(l).fold(()=>{zl(l).each(_=>{Jo(_,f)})},y=>{Yd(y,f)})},ua=(l,f)=>{qT(l).fold(()=>{Jo(l,f)},y=>{l.dom.insertBefore(f.dom,y.dom)})},Jo=(l,f)=>{l.dom.appendChild(f.dom)},KT=(l,f,p)=>{Ka(l,p).fold(()=>{Jo(l,f)},y=>{Yd(y,f)})},rv=(l,f)=>{Yd(l,f),Jo(f,l)},qn=(l,f)=>{Be(f,(p,y)=>{const _=y===0?l:f[y-1];Ru(_,p)})},Cc=(l,f)=>{Be(f,p=>{Jo(l,p)})},Ya=l=>{l.dom.textContent="",Be(no(l),f=>{fr(f)})},fr=l=>{const f=l.dom;f.parentNode!==null&&f.parentNode.removeChild(f)},c1=l=>{const f=no(l);f.length>0&&qn(l,f),fr(l)},Xd=(l,f)=>le.fromDom(l.dom.cloneNode(f)),Uc=l=>Xd(l,!1),Jd=l=>Xd(l,!0),Ci=(l,f)=>{const p=le.fromTag(f),y=Vc(l);return nl(p,y),p},vw=(l,f)=>{const p=Ci(l,f),y=no(Jd(l));return Cc(p,y),p},av=(l,f)=>{const p=Ci(l,f);Ru(l,p);const y=no(l);return Cc(p,y),fr(l),p},yw=["tfoot","thead","tbody","colgroup"],Wc=l=>ns(yw,l),Du=(l,f)=>({rows:l,columns:f}),i1=(l,f)=>({row:l,column:f}),l1=(l,f,p)=>({element:l,rowspan:f,colspan:p}),cv=(l,f,p,y)=>({element:l,rowspan:f,colspan:p,isNew:y}),iv=(l,f,p,y,_,O)=>({element:l,rowspan:f,colspan:p,row:y,column:_,isLocked:O}),sh=(l,f,p)=>({element:l,cells:f,section:p}),Cw=(l,f,p,y)=>({element:l,cells:f,section:p,isNew:y}),Eo=(l,f,p)=>({element:l,isNew:f,isLocked:p}),Zc=(l,f,p,y)=>({element:l,cells:f,section:p,isNew:y}),YT=(l,f,p,y)=>({startRow:l,startCol:f,finishRow:p,finishCol:y}),lv=(l,f,p)=>({element:l,colspan:f,column:p}),wi=(l,f)=>({element:l,columns:f}),XT=l=>nv(l)&&xn(l.dom.host),u1=Zt(Element.prototype.attachShadow)&&Zt(Node.prototype.getRootNode),Hs=ee(u1),Zr=u1?l=>le.fromDom(l.dom.getRootNode()):mm,Qd=l=>{const f=Zr(l);return XT(f)?oe.some(f):oe.none()},ww=l=>le.fromDom(l.dom.host),ct=l=>{if(Hs()&&xn(l.target)){const f=le.fromDom(l.target);if(Ea(f)&&Sw(f)&&l.composed&&l.composedPath){const p=l.composedPath();if(p)return we(p)}}return oe.from(l.target)},Sw=l=>xn(l.dom.shadowRoot),Fo=l=>{const f=qd(l)?l.dom.parentNode:l.dom;if(f==null||f.ownerDocument===null)return!1;const p=f.ownerDocument;return Qd(le.fromDom(f)).fold(()=>p.body.contains(f),Gn(Fo,ww))},tr=()=>uv(le.fromDom(document)),uv=l=>{const f=l.dom.body;if(f==null)throw new Error("Body is not available yet");return le.fromDom(f)},Zo=(l,f,p)=>os(Kd(l,p),f),JT=(l,f)=>os(no(l),f),rh=(l,f)=>{let p=[];return Be(no(l),y=>{f(y)&&(p=p.concat([y])),p=p.concat(rh(y,f))}),p},ah=(l,f,p)=>Zo(l,y=>Ta(y,f),p),qt=(l,f)=>JT(l,p=>Ta(p,f)),ka=(l,f)=>bw(f,l);var ze=(l,f,p,y,_)=>l(p,y)?oe.some(p):Zt(_)&&_(p)?oe.none():f(p,y,_);const jo=(l,f,p)=>{let y=l.dom;const _=Zt(p)?p:_n;for(;y.parentNode;){y=y.parentNode;const O=le.fromDom(y);if(f(O))return oe.some(O);if(_(O))break}return oe.none()},ch=(l,f,p)=>ze((_,O)=>O(_),jo,l,f,p),nr=(l,f)=>{const p=_=>f(le.fromDom(_));return L(l.dom.childNodes,p).map(le.fromDom)},mr=(l,f)=>{const p=y=>{for(let _=0;_<y.childNodes.length;_++){const O=le.fromDom(y.childNodes[_]);if(f(O))return oe.some(O);const $=p(y.childNodes[_]);if($.isSome())return $}return oe.none()};return p(l.dom)},Mu=(l,f,p)=>jo(l,y=>Ta(y,f),p),kn=(l,f)=>nr(l,p=>Ta(p,f)),Ul=(l,f)=>ov(f,l),or=(l,f,p)=>ze((_,O)=>Ta(_,O),Mu,l,f,p),hm=(l,f,p=Hc)=>l.exists(y=>p(y,f)),_s=l=>{const f=[],p=y=>{f.push(y)};for(let y=0;y<l.length;y++)l[y].each(p);return f},Pu=(l,f)=>l!=null?f(l):oe.none(),dv=(l,f)=>l?oe.some(f):oe.none(),xw=(l,f)=>l.substring(f),To=(l,f,p)=>f===""||l.length>=f.length&&l.substr(p,p+f.length)===f,_w=(l,f)=>da(l,f)?xw(l,f.length):l,Pr=(l,f,p=0,y)=>{const _=l.indexOf(f,p);return _!==-1?Ge(y)?!0:_+f.length<=y:!1},da=(l,f)=>To(l,f,0),Si=(l,f)=>To(l,f,l.length-f.length),On=(l=>f=>f.replace(l,""))(/^\s+|\s+$/g),fa=l=>l.length>0,Wl=l=>{const f=parseFloat(l);return isNaN(f)?oe.none():oe.some(f)},pm=l=>l.style!==void 0&&Zt(l.style.getPropertyValue),jc=(l,f,p)=>{if(!j(p))throw console.error("Invalid call to CSS.set. Property ",f,":: Value ",p,":: Element ",l),new Error("CSS value must be a string: "+p);pm(l)&&l.style.setProperty(f,p)},Xa=(l,f)=>{pm(l)&&l.style.removeProperty(f)},Co=(l,f,p)=>{const y=l.dom;jc(y,f,p)},ih=(l,f)=>{const p=l.dom;Wo(f,(y,_)=>{jc(p,_,y)})},ef=(l,f)=>{const p=l.dom,_=window.getComputedStyle(p).getPropertyValue(f);return _===""&&!Fo(l)?bm(p,f):_},bm=(l,f)=>pm(l)?l.style.getPropertyValue(f):"",vm=(l,f)=>{const p=l.dom,y=bm(p,f);return oe.from(y).filter(_=>_.length>0)},io=(l,f)=>{const p=l.dom;Xa(p,f),hm(qa(l,"style").map(On),"")&&Do(l,"style")},Zl=(l,f)=>{const p=l.dom,y=f.dom;pm(p)&&pm(y)&&(y.style.cssText=p.style.cssText)},Es=(l,f,p=0)=>qa(l,f).map(y=>parseInt(y,10)).getOr(p),xi=(l,f)=>Es(l,f,1),tf=l=>la("col")(l)?Es(l,"span",1)>1:xi(l,"colspan")>1,Rs=l=>xi(l,"rowspan")>1,Gc=(l,f)=>parseInt(ef(l,f),10),ym=ee(10),f1=ee(10),lh=(l,f)=>m1(l,f,Ae),m1=(l,f,p)=>Ss(no(l),y=>Ta(y,f)?p(y)?[y]:[]:m1(y,f,p)),Cm=(l,f,p=_n)=>{if(p(f))return oe.none();if(ns(l,_o(f)))return oe.some(f);const y=_=>Ta(_,"table")||p(_);return Mu(f,l.join(","),y)},g1=(l,f)=>Cm(["td","th"],l,f),Nu=l=>lh(l,"th,td"),uh=l=>Ta(l,"colgroup")?qt(l,"col"):Ss(h1(l),f=>qt(f,"col")),Oa=(l,f)=>or(l,"table",f),nf=l=>lh(l,"tr"),h1=l=>Oa(l).fold(ee([]),f=>qt(f,"colgroup")),of=(l,f)=>jt(l,p=>{if(_o(p)==="colgroup"){const y=jt(uh(p),_=>{const O=Es(_,"span",1);return l1(_,1,O)});return sh(p,y,"colgroup")}else{const y=jt(Nu(p),_=>{const O=Es(_,"rowspan",1),$=Es(_,"colspan",1);return l1(_,O,$)});return sh(p,y,f(p))}}),Ew=l=>zl(l).map(f=>{const p=_o(f);return Wc(p)?p:"tbody"}).getOr("tbody"),dh=l=>{const f=nf(l),y=[...h1(l),...f];return of(y,Ew)},Tw=(l,f)=>of(l,()=>f),wm=l=>{let f=!1,p;return(...y)=>(f||(f=!0,p=l.apply(null,y)),p)},kw=(l,f,p,y)=>{const _=l.isiOS()&&/ipad/i.test(p)===!0,O=l.isiOS()&&!_,$=l.isiOS()||l.isAndroid(),U=$||y("(pointer:coarse)"),G=_||!O&&$&&y("(min-device-width:768px)"),Q=O||$&&!G,fe=f.isSafari()&&l.isiOS()&&/safari/i.test(p)===!1,Pe=!Q&&!G&&!fe;return{isiPad:ee(_),isiPhone:ee(O),isTablet:ee(G),isPhone:ee(Q),isTouch:ee(U),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:ee(fe),isDesktop:ee(Pe)}},Sm=(l,f)=>{for(let p=0;p<l.length;p++){const y=l[p];if(y.test(f))return y}},QT=(l,f)=>{const p=Sm(l,f);if(!p)return{major:0,minor:0};const y=_=>Number(f.replace(p,"$"+_));return Ja(y(1),y(2))},X=(l,f)=>{const p=String(f).toLowerCase();return l.length===0?fv():QT(l,p)},fv=()=>Ja(0,0),Ja=(l,f)=>({major:l,minor:f}),sf={nu:Ja,detect:X,unknown:fv},sM=(l,f)=>Rr(f.brands,p=>{const y=p.brand.toLowerCase();return L(l,_=>{var O;return y===((O=_.brand)===null||O===void 0?void 0:O.toLowerCase())}).map(_=>({current:_.name,version:sf.nu(parseInt(p.version,10),0)}))}),Ow=(l,f)=>{const p=String(f).toLowerCase();return L(l,y=>y.search(p))},Wn=(l,f)=>Ow(l,f).map(p=>{const y=sf.detect(p.versionRegexes,f);return{current:p.name,version:y}}),_i=(l,f)=>Ow(l,f).map(p=>{const y=sf.detect(p.versionRegexes,f);return{current:p.name,version:y}}),Qa=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,jr=l=>f=>Pr(f,l),Aw=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:l=>Pr(l,"edge/")&&Pr(l,"chrome")&&Pr(l,"safari")&&Pr(l,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Qa],search:l=>Pr(l,"chrome")&&!Pr(l,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:l=>Pr(l,"msie")||Pr(l,"trident")},{name:"Opera",versionRegexes:[Qa,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:jr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:jr("firefox")},{name:"Safari",versionRegexes:[Qa,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:l=>(Pr(l,"safari")||Pr(l,"mobile/"))&&Pr(l,"applewebkit")}],fh=[{name:"Windows",search:jr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:l=>Pr(l,"iphone")||Pr(l,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:jr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:jr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:jr("linux"),versionRegexes:[]},{name:"Solaris",search:jr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:jr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:jr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],wc={browsers:ee(Aw),oses:ee(fh)},mh="Edge",mv="Chromium",Rw="IE",qc="Opera",xm="Firefox",gv="Safari",Sc=()=>gr({current:void 0,version:sf.unknown()}),gr=l=>{const f=l.current,p=l.version,y=_=>()=>f===_;return{current:f,version:p,isEdge:y(mh),isChromium:y(mv),isIE:y(Rw),isOpera:y(qc),isFirefox:y(xm),isSafari:y(gv)}},Bu={unknown:Sc,nu:gr,edge:ee(mh),chromium:ee(mv),ie:ee(Rw),opera:ee(qc),firefox:ee(xm),safari:ee(gv)},_m="Windows",Kc="iOS",Gr="Android",p1="Linux",Dw="macOS",gh="Solaris",hh="FreeBSD",b1="ChromeOS",jl=()=>v1({current:void 0,version:sf.unknown()}),v1=l=>{const f=l.current,p=l.version,y=_=>()=>f===_;return{current:f,version:p,isWindows:y(_m),isiOS:y(Kc),isAndroid:y(Gr),isMacOS:y(Dw),isLinux:y(p1),isSolaris:y(gh),isFreeBSD:y(hh),isChromeOS:y(b1)}},ek={unknown:jl,nu:v1,windows:ee(_m),ios:ee(Kc),android:ee(Gr),linux:ee(p1),macos:ee(Dw),solaris:ee(gh),freebsd:ee(hh),chromeos:ee(b1)},tk={detect:(l,f,p)=>{const y=wc.browsers(),_=wc.oses(),O=f.bind(G=>sM(y,G)).orThunk(()=>Wn(y,l)).fold(Bu.unknown,Bu.nu),$=_i(_,l).fold(ek.unknown,ek.nu),U=kw($,O,l,p);return{browser:O,os:$,deviceType:U}}},y1=l=>window.matchMedia(l).matches;let nk=wm(()=>tk.detect(navigator.userAgent,oe.from(navigator.userAgentData),y1));const rf=()=>nk(),Ts=(l,f)=>{const p=(U,G)=>{if(!Rt(G)&&!G.match(/^[0-9]+$/))throw new Error(l+".set accepts only positive integer values. Value was "+G);const Q=U.dom;pm(Q)&&(Q.style[l]=G+"px")},y=U=>{const G=f(U);if(G<=0||G===null){const Q=ef(U,l);return parseFloat(Q)||0}return G},_=y,O=(U,G)=>De(G,(Q,fe)=>{const Pe=ef(U,fe),tt=Pe===void 0?0:parseInt(Pe,10);return isNaN(tt)?Q:Q+tt},0);return{set:p,get:y,getOuter:_,aggregate:O,max:(U,G,Q)=>{const fe=O(U,Q);return G>fe?G-fe:0}}},Mo=(l,f)=>Wl(l).getOr(f),Nr=(l,f,p)=>Mo(ef(l,f),p),hv=(l,f,p,y)=>{const _=Nr(l,`padding-${p}`,0),O=Nr(l,`padding-${y}`,0),$=Nr(l,`border-${p}-width`,0),U=Nr(l,`border-${y}-width`,0);return f-_-O-$-U},ok=(l,f)=>{const p=l.dom,y=p.getBoundingClientRect().width||p.offsetWidth;return f==="border-box"?y:hv(l,y,"left","right")},Br=l=>Nr(l,"height",l.dom.offsetHeight),Et=l=>Nr(l,"width",l.dom.offsetWidth),Em=l=>ok(l,"content-box"),af=Ts("width",l=>l.dom.offsetWidth),ec=l=>af.get(l),Mn=l=>af.getOuter(l),pv=Em,Tm=Et,ph=(l,f,p)=>{const y=l.cells,_=y.slice(0,f),O=y.slice(f),$=_.concat(p).concat(O);return qr(l,$)},sk=(l,f,p)=>ph(l,f,[p]),tn=(l,f,p)=>{const y=l.cells;y[f]=p},qr=(l,f)=>Zc(l.element,f,l.section,l.isNew),Yc=(l,f)=>{const p=l.cells,y=jt(p,f);return Zc(l.element,y,l.section,l.isNew)},xc=(l,f)=>l.cells[f],Kr=(l,f)=>xc(l,f).element,tc=l=>l.cells.length,Vs=l=>{const f=ja(l,p=>p.section==="colgroup");return{rows:f.fail,cols:f.pass}},Mw=(l,f,p)=>{const y=jt(l.cells,p);return Zc(f(l.element),y,l.section,!0)},hr="data-snooker-locked-cols",sl=l=>qa(l,hr).bind(f=>oe.from(f.match(/\d+/g))).map(f=>Gt(f,Ae)),$u=l=>{const f=De(Vs(l).rows,(y,_)=>(Be(_.cells,(O,$)=>{O.isLocked&&(y[$]=!0)}),y),{}),p=ur(f,(y,_)=>parseInt(_,10));return vo(p)},gs=(l,f)=>l+","+f,Qo=(l,f,p)=>oe.from(l.access[gs(f,p)]),Pw=(l,f,p)=>{const y=Iu(l,_=>p(f,_.element));return y.length>0?oe.some(y[0]):oe.none()},Iu=(l,f)=>{const p=Ss(l.all,y=>y.cells);return os(p,f)},Fu=l=>{const f={};let p=0;return Be(l.cells,y=>{const _=y.colspan;zo(_,O=>{const $=p+O;f[$]=lv(y.element,_,$)}),p+=_}),f},go=l=>{const f={},p=[],_=we(l).map(Ye=>Ye.element).bind(Oa).bind(sl).getOr({});let O=0,$=0,U=0;const{pass:G,fail:Q}=ja(l,Ye=>Ye.section==="colgroup");Be(Q,Ye=>{const We=[];Be(Ye.cells,gt=>{let Re=0;for(;f[gs(U,Re)]!==void 0;)Re++;const je=Io(_,Re.toString()),At=iv(gt.element,gt.rowspan,gt.colspan,U,Re,je);for(let Je=0;Je<gt.colspan;Je++)for(let An=0;An<gt.rowspan;An++){const jn=U+An,Hn=Re+Je,Ks=gs(jn,Hn);f[Ks]=At,$=Math.max($,Hn+1)}We.push(At)}),O++,p.push(sh(Ye.element,We,Ye.section)),U++});const{columns:fe,colgroups:Pe}=Ou(G).map(Ye=>{const We=Fu(Ye);return{colgroups:[wi(Ye.element,$o(We))],columns:We}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:Du(O,$),access:f,all:p,columns:fe,colgroups:Pe}},gn={fromTable:l=>{const f=dh(l);return go(f)},generate:go,getAt:Qo,findItem:Pw,filterItems:Iu,justCells:l=>Ss(l.all,f=>f.cells),justColumns:l=>$o(l.columns),hasColumns:l=>Mt(l.columns).length>0,getColumnAt:(l,f)=>oe.from(l.columns[f])},km=(l,f=Ae)=>{const p=l.grid,y=zo(p.columns,sn),_=zo(p.rows,sn);return jt(y,O=>C1(()=>Ss(_,Q=>gn.getAt(l,Q,O).filter(fe=>fe.column===O).toArray()),Q=>Q.colspan===1&&f(Q.element),()=>gn.getAt(l,0,O)))},C1=(l,f,p)=>{const y=l();return L(y,f).orThunk(()=>oe.from(y[0]).orThunk(p)).map($=>$.element)},w1=l=>{const f=l.grid,p=zo(f.rows,sn),y=zo(f.columns,sn);return jt(p,_=>C1(()=>Ss(y,G=>gn.getAt(l,_,G).filter(Q=>Q.row===_).fold(ee([]),Q=>[Q])),G=>G.rowspan===1,()=>gn.getAt(l,_,0)))},ak=(l,f)=>{if(f<0||f>=l.length-1)return oe.none();const p=l[f].fold(()=>{const _=WT(l.slice(0,f));return Rr(_,(O,$)=>O.map(U=>({value:U,delta:$+1})))},_=>oe.some({value:_,delta:0})),y=l[f+1].fold(()=>{const _=l.slice(f+1);return Rr(_,(O,$)=>O.map(U=>({value:U,delta:$+1})))},_=>oe.some({value:_,delta:1}));return p.bind(_=>y.map(O=>{const $=O.delta+_.delta;return Math.abs(O.value-_.value)/$}))},Bw=(l,f)=>p=>$w(p)==="rtl"?f:l,$w=l=>ef(l,"direction")==="rtl"?"rtl":"ltr",Iw=Ts("height",l=>{const f=l.dom;return Fo(l)?f.getBoundingClientRect().height:f.offsetHeight}),Gl=l=>Iw.get(l),bv=l=>Iw.getOuter(l),Om=Br,Fw=(l,f)=>({left:l,top:f,translate:(y,_)=>Fw(l+y,f+_)}),Aa=Fw,vv=l=>{const f=l.getBoundingClientRect();return Aa(f.left,f.top)},bh=(l,f)=>l!==void 0?l:f!==void 0?f:0,Am=l=>{const f=l.dom.ownerDocument,p=f.body,y=f.defaultView,_=f.documentElement;if(p===l.dom)return Aa(p.offsetLeft,p.offsetTop);const O=bh(y==null?void 0:y.pageYOffset,_.scrollTop),$=bh(y==null?void 0:y.pageXOffset,_.scrollLeft),U=bh(_.clientTop,p.clientTop),G=bh(_.clientLeft,p.clientLeft);return ck(l).translate($-G,O-U)},ck=l=>{const f=l.dom,y=f.ownerDocument.body;return y===f?Aa(y.offsetLeft,y.offsetTop):Fo(l)?vv(f):Aa(0,0)},yv=(l,f)=>({row:l,y:f}),Lu=(l,f)=>({col:l,x:f}),Cv=l=>Am(l).left+Mn(l),wv=l=>Am(l).left,sr=(l,f)=>Lu(l,wv(f)),Sv=(l,f)=>Lu(l,Cv(f)),xv=l=>Am(l).top,Lw=(l,f)=>yv(l,xv(f)),zs=(l,f)=>yv(l,xv(f)+bv(f)),Hu=(l,f,p)=>{if(p.length===0)return[];const y=jt(p.slice(1),(O,$)=>O.map(U=>l($,U))),_=p[p.length-1].map(O=>f(p.length-1,O));return y.concat([_])},Us=l=>-l,pr={delta:sn,positions:l=>Hu(Lw,zs,l),edge:xv},rl=Bw({delta:sn,edge:wv,positions:l=>Hu(sr,Sv,l)},{delta:Us,edge:Cv,positions:l=>Hu(Sv,sr,l)}),S1={delta:(l,f)=>rl(f).delta(l,f),positions:(l,f)=>rl(f).positions(l,f),edge:l=>rl(l).edge(l)},ik={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},x1=(()=>{const l="[0-9]+",p="[eE]"+("[+-]?"+l),y="\\.",_=U=>`(?:${U})?`,$=`[+-]?(?:${["Infinity",l+y+_(l)+_(p),y+l+_(p),l+_(p)].join("|")})`;return new RegExp(`^(${$})(.*)$`)})(),Ei=(l,f)=>et(f,p=>et(ik[p],y=>l===y)),vh=(l,f)=>oe.from(x1.exec(l)).bind(y=>{const _=Number(y[1]),O=y[2];return Ei(O,f)?oe.some({value:_,unit:O}):oe.none()}),Ti=/(\d+(\.\d+)?)%/,hs=/(\d+(\.\d+)?)px|em/,pt=la("col"),ki=la("tr"),_v=(l,f,p)=>{const y=zc(l).getOrThunk(()=>uv(nh(l)));return f(l)/p(y)*100},Rm=(l,f)=>{Co(l,"width",f+"px")},Xc=(l,f)=>{Co(l,"width",f+"%")},Oi=(l,f)=>{Co(l,"height",f+"px")},lk=l=>{io(l,"height")},Ai=l=>Om(l)+"px",Hw=(l,f,p,y)=>{const _=Oa(l).map(O=>{const $=p(O);return Math.floor(f/100*$)}).getOr(f);return y(l,_),_},al=(l,f,p,y)=>{const _=parseFloat(l);return Si(l,"%")&&_o(f)!=="table"?Hw(f,_,p,y):_},No=l=>{const f=Ai(l);return f?al(f,l,Gl,Oi):Gl(l)},Ec=(l,f,p)=>{const y=p(l),_=xi(l,f);return y/_},Me=(l,f)=>vm(l,f).orThunk(()=>qa(l,f).map(p=>p+"px")),Ri=l=>Me(l,"width"),Ra=l=>Me(l,"height"),ql=l=>_v(l,ec,pv),rs=l=>pt(l)?ec(l):Tm(l),rr=l=>ki(l)?Gl(l):Ec(l,"rowspan",No),Bo=l=>Ri(l).bind(p=>vh(p,["fixed","relative","empty"])),ke=(l,f,p)=>{Co(l,"width",f+p)},as=l=>ec(l)+"px",ho=l=>Gl(l)+"px",Go=l=>_v(l,ec,pv)+"%",Kl=l=>Ri(l).exists(f=>Ti.test(f)),cl=l=>Ri(l).exists(f=>hs.test(f)),Jc=l=>Ri(l).isNone(),Ev=ee(Ti),Vu=la("col"),Tv=l=>Ri(l).getOrThunk(()=>rs(l)+"px"),nc=l=>Ra(l).getOrThunk(()=>rr(l)+"px"),Nn=l=>jt(gn.justColumns(l),f=>oe.from(f.element)),il=l=>{const f=rf().browser,p=f.isChromium()||f.isFirefox();return Vu(l)?p:!0},uf=(l,f,p,y,_,O)=>l.filter(y).fold(()=>O(ak(p,f)),$=>_($)),ar=(l,f,p,y)=>{const _=km(l),O=gn.hasColumns(l)?Nn(l):_,$=[oe.some(S1.edge(f))].concat(jt(S1.positions(_,f),G=>G.map(Q=>Q.x))),U=ae(tf);return jt(O,(G,Q)=>uf(G,Q,$,U,fe=>{if(il(fe))return p(fe);{const Pe=Pu(_[Q],sn);return uf(Pe,Q,$,U,tt=>y(oe.some(ec(tt))),y)}},y))},kv=l=>l.map(f=>f+"px").getOr(""),zu=(l,f)=>ar(l,f,Tv,kv),_1=(l,f,p)=>ar(l,f,ql,y=>y.fold(()=>p.minCellWidth(),_=>_/p.pixelWidth()*100)),ps=(l,f,p)=>ar(l,f,rs,y=>y.getOrThunk(p.minCellWidth)),br=(l,f,p,y)=>{const _=w1(l),O=jt(l.all,U=>oe.some(U.element)),$=[oe.some(pr.edge(f))].concat(jt(pr.positions(_,f),U=>U.map(G=>G.y)));return jt(O,(U,G)=>uf(U,G,$,Ae,p,y))},me=(l,f)=>br(l,f,rr,p=>p.getOrThunk(f1)),lo=(l,f)=>br(l,f,nc,kv),Dm=(l,f)=>()=>Fo(l)?f(l):parseFloat(vm(l,"width").getOr("0")),ll=l=>{const f=Dm(l,ec),p=ee(0);return{width:f,pixelWidth:f,getWidths:(_,O)=>ps(_,l,O),getCellDelta:p,singleColumnWidth:ee([0]),minCellWidth:p,setElementWidth:Ne,adjustTableWidth:Ne,isRelative:!0,label:"none"}},vr=l=>{const f=Dm(l,G=>parseFloat(Go(G))),p=Dm(l,ec);return{width:f,pixelWidth:p,getWidths:(G,Q)=>_1(G,l,Q),getCellDelta:G=>G/p()*100,singleColumnWidth:(G,Q)=>[100-G],minCellWidth:()=>ym()/p()*100,setElementWidth:Xc,adjustTableWidth:G=>{const Q=f(),fe=G/100*Q,Pe=Q+fe;Xc(l,Pe)},isRelative:!0,label:"percent"}},cr=l=>{const f=Dm(l,ec);return{width:f,pixelWidth:f,getWidths:($,U)=>ps($,l,U),getCellDelta:sn,singleColumnWidth:($,U)=>[Math.max(ym(),$+U)-$],minCellWidth:ym,setElementWidth:Rm,adjustTableWidth:$=>{const U=f()+$;Rm(l,U)},isRelative:!1,label:"pixel"}},ko=(l,f)=>Ev().exec(f)!==null?vr(l):cr(l),Tc={getTableSize:l=>Ri(l).fold(()=>ll(l),p=>ko(l,p)),pixelSize:cr,percentageSize:vr,noneSize:ll},Ov=(l,f,p,y,_,O)=>({minRow:l,minCol:f,maxRow:p,maxCol:y,allCells:_,selectedCells:O}),rM=(l,f)=>{const p=l.grid.columns;let _=l.grid.rows,O=p,$=0,U=0;const G=[],Q=[];return Wo(l.access,fe=>{if(G.push(fe),f(fe)){Q.push(fe);const Pe=fe.row,tt=Pe+fe.rowspan-1,Ye=fe.column,We=Ye+fe.colspan-1;Pe<_?_=Pe:tt>$&&($=tt),Ye<O?O=Ye:We>U&&(U=We)}}),Ov(_,O,$,U,G,Q)},Da=(l,f,p)=>{const y=l[p].element,_=le.fromTag("td");Jo(_,le.fromTag("br")),(f?Jo:ua)(y,_)},uk=(l,f,p,y)=>{const _=os(l,U=>U.section!=="colgroup"),O=f.grid.columns,$=f.grid.rows;for(let U=0;U<$;U++){let G=!1;for(let Q=0;Q<O;Q++)U<p.minRow||U>p.maxRow||Q<p.minCol||Q>p.maxCol||(gn.getAt(f,U,Q).filter(y).isNone()?Da(_,G,U):G=!0)}},Av=(l,f,p,y)=>{Wo(p.columns,$=>{($.column<f.minCol||$.column>f.maxCol)&&fr($.element)});const _=os(lh(l,"tr"),$=>$.dom.childElementCount===0);Be(_,fr),(f.minCol===f.maxCol||f.minRow===f.maxRow)&&Be(lh(l,"th,td"),$=>{Do($,"rowspan"),Do($,"colspan")}),Do(l,hr),Do(l,"data-snooker-col-series"),Tc.getTableSize(l).adjustTableWidth(y)},zw=(l,f,p,y)=>{if(y.minCol===0&&f.grid.columns===y.maxCol+1)return 0;const _=ps(f,l,p),O=De(_,(Q,fe)=>Q+fe,0),G=De(_.slice(y.minCol,y.maxCol+1),(Q,fe)=>Q+fe,0)/O*p.pixelWidth()-p.pixelWidth();return p.getCellDelta(G)},Uw=(l,f)=>{const p=tt=>Ta(tt.element,f),y=Jd(l),_=dh(y),O=Tc.getTableSize(l),$=gn.generate(_),U=rM($,p),G="th:not("+f+"),td:not("+f+")",Q=m1(y,"th,td",tt=>Ta(tt,G));Be(Q,fr),uk(_,$,U,p);const fe=gn.fromTable(l),Pe=zw(l,fe,O,U);return Av(y,U,$,Pe),y},Ww=" ",Uu=((l,f)=>{const p=O=>{if(!l(O))throw new Error("Can only get "+f+" value of a "+f+" node");return y(O).getOr("")},y=O=>l(O)?oe.from(O.dom.nodeValue):oe.none();return{get:p,getOption:y,set:(O,$)=>{if(!l(O))throw new Error("Can only set raw "+f+" value of a "+f+" node");O.dom.nodeValue=$}}})(qd,"text"),Rv=l=>Uu.get(l),E1=l=>Uu.getOption(l),dk=(l,f)=>Uu.set(l,f),Yl=l=>_o(l)==="img"?1:E1(l).fold(()=>no(l).length,f=>f.length),T1=l=>E1(l).filter(f=>f.trim().length!==0||f.indexOf(Ww)>-1).isSome(),Pm=l=>Ft(l)&&Hl(l,"contenteditable")==="false",k1=["img","br"],Wu=l=>T1(l)||ns(k1,_o(l))||Pm(l),df=l=>mr(l,Wu),O1=l=>fk(l,Wu),fk=(l,f)=>{const p=y=>{const _=no(y);for(let O=_.length-1;O>=0;O--){const $=_[O];if(f($))return oe.some($);const U=p($);if(U.isSome())return U}return oe.none()};return p(l)},Zw={scope:["row","col"]},Dv=l=>()=>{const f=le.fromTag("td",l.dom);return Jo(f,le.fromTag("br",l.dom)),f},ks=l=>()=>le.fromTag("col",l.dom),ul=l=>()=>le.fromTag("colgroup",l.dom),ff=l=>()=>le.fromTag("tr",l.dom),Nm=(l,f,p)=>{const y=vw(l,f);return Wo(p,(_,O)=>{_===null?Do(y,O):xs(y,O,_)}),y},Mv=l=>l,oc=(l,f,p)=>df(l).map(_=>{const O=p.join(","),$=ah(_,O,U=>yo(U,l));return ia($,(U,G)=>{const Q=Uc(G);return Jo(U,Q),Q},f)}).getOr(f),yh=(l,f)=>{Wo(Zw,(p,y)=>qa(l,y).filter(_=>ns(p,_)).each(_=>xs(f,y,_)))},Bm=(l,f,p)=>{const y=($,U)=>{Zl($.element,U),io(U,"height"),$.colspan!==1&&io(U,"width")},_=$=>{const U=le.fromTag(_o($.element),f.dom),G=p.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),Q=G.length>0?oc($.element,U,G):U;return Jo(Q,le.fromTag("br")),y($,U),yh($.element,U),l($.element,U),U};return{col:$=>{const U=le.fromTag(_o($.element),f.dom);return y($,U),l($.element,U),U},colgroup:ul(f),row:ff(f),cell:_,replace:Nm,colGap:ks(f),gap:Dv(f)}},Ch=l=>({col:ks(l),colgroup:ul(l),row:ff(l),cell:Dv(l),replace:Mv,colGap:ks(l),gap:Dv(l)}),dl=(l,f)=>{const y=document.createElement("div");return y.innerHTML=l,no(le.fromDom(y))},Di=l=>jt(l,le.fromDom),Zu=l=>f=>f.options.get(l),sc="100%",jw=l=>{var f;const p=l.dom,y=(f=p.getParent(l.selection.getStart(),p.isBlock))!==null&&f!==void 0?f:l.getBody();return pv(le.fromDom(y))+"px"},fl=(l,f)=>ei(l)||!Sh(l)?f:Gu(l)?{...f,width:jw(l)}:{...f,width:sc},Xl=(l,f)=>ei(l)||Sh(l)?f:Gu(l)?{...f,width:jw(l)}:{...f,width:sc},mf=l=>{const f=l.options.register;f("table_clone_elements",{processor:"string[]"}),f("table_use_colgroups",{processor:"boolean",default:!0}),f("table_header_type",{processor:p=>{const y=ns(["section","cells","sectionCells","auto"],p);return y?{value:p,valid:y}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),f("table_sizing_mode",{processor:"string",default:"auto"}),f("table_default_attributes",{processor:"object",default:{border:"1"}}),f("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),f("table_column_resizing",{processor:p=>{const y=ns(["preservetable","resizetable"],p);return y?{value:p,valid:y}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),f("table_resize_bars",{processor:"boolean",default:!0}),f("table_style_by_css",{processor:"boolean",default:!0}),f("table_merge_content_on_paste",{processor:"boolean",default:!0})},Gw=l=>oe.from(l.options.get("table_clone_elements")),wh=l=>{const f=l.options.get("object_resizing");return ns(f.split(","),"table")},ju=Zu("table_header_type"),Pv=Zu("table_column_resizing"),qo=l=>Pv(l)==="preservetable",Nv=l=>Pv(l)==="resizetable",Qc=Zu("table_sizing_mode"),Jl=l=>Qc(l)==="relative",Gu=l=>Qc(l)==="fixed",ei=l=>Qc(l)==="responsive",ma=Zu("table_resize_bars"),Sh=Zu("table_style_by_css"),A1=Zu("table_merge_content_on_paste"),qu=l=>{const f=l.options,p=f.get("table_default_attributes");return f.isSet("table_default_attributes")?p:Xl(l,p)},Ds=l=>{const f=l.options,p=f.get("table_default_styles");return f.isSet("table_default_styles")?p:fl(l,p)},R1=Zu("table_use_colgroups"),xh=l=>or(l,"[contenteditable]"),_h=(l,f=!1)=>Fo(l)?l.dom.isContentEditable:xh(l).fold(ee(f),p=>qw(p)==="true"),qw=l=>l.dom.contentEditable,gf=l=>le.fromDom(l.getBody()),ml=l=>f=>yo(f,gf(l)),yr=l=>{Do(l,"data-mce-style");const f=p=>Do(p,"data-mce-style");Be(Nu(l),f),Be(uh(l),f),Be(nf(l),f)},ti=l=>le.fromDom(l.selection.getStart()),Ql=l=>l.getBoundingClientRect().width,Bv=l=>l.getBoundingClientRect().height,Eh=l=>(f,p)=>{const y=f.dom.getStyle(p,l)||f.dom.getAttrib(p,l);return oe.from(y).filter(fa)},Th=Eh("width"),Kw=Eh("height"),Yw=l=>/^(\d+(\.\d+)?)%$/.test(l),Xw=l=>/^(\d+(\.\d+)?)px$/.test(l),kh=l=>ch(l,la("table")).exists(_h),$m=(l,f)=>{const p=f.column,y=f.column+f.colspan-1,_=f.row,O=f.row+f.rowspan-1;return p<=l.finishCol&&y>=l.startCol&&_<=l.finishRow&&O>=l.startRow},un=(l,f)=>f.column>=l.startCol&&f.column+f.colspan-1<=l.finishCol&&f.row>=l.startRow&&f.row+f.rowspan-1<=l.finishRow,vt=(l,f)=>{let p=!0;const y=Tn(un,f);for(let _=f.startRow;_<=f.finishRow;_++)for(let O=f.startCol;O<=f.finishCol;O++)p=p&&gn.getAt(l,_,O).exists(y);return p?oe.some(f):oe.none()},Ku=(l,f)=>YT(Math.min(l.row,f.row),Math.min(l.column,f.column),Math.max(l.row+l.rowspan-1,f.row+f.rowspan-1),Math.max(l.column+l.colspan-1,f.column+f.colspan-1)),Oh=(l,f,p)=>{const y=gn.findItem(l,f,yo),_=gn.findItem(l,p,yo);return y.bind(O=>_.map($=>Ku(O,$)))},D1=(l,f,p)=>Oh(l,f,p).bind(y=>vt(l,y)),Jw=(l,f,p,y)=>gn.findItem(l,f,yo).bind(_=>{const O=p>0?_.row+_.rowspan-1:_.row,$=y>0?_.column+_.colspan-1:_.column;return gn.getAt(l,O+p,$+y).map(G=>G.element)}),Ah=(l,f,p)=>Oh(l,f,p).map(y=>{const _=gn.filterItems(l,Tn($m,y));return jt(_,O=>O.element)}),Bn=(l,f)=>{const p=(y,_)=>sv(_,y);return gn.findItem(l,f,p).map(y=>y.element)},Qw=(l,f,p)=>Oa(l).bind(y=>{const _=Fm(y);return Jw(_,l,f,p)}),mk=(l,f,p)=>{const y=Fm(l);return Ah(y,f,p)},Im=(l,f,p,y,_)=>{const O=Fm(l),$=yo(l,p)?oe.some(f):Bn(O,f),U=yo(l,_)?oe.some(y):Bn(O,y);return $.bind(G=>U.bind(Q=>Ah(O,G,Q)))},Te=(l,f,p)=>{const y=Fm(l);return D1(y,f,p)},Fm=gn.fromTable;var gk=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Yu=()=>{const l=Q=>le.fromDom(Q.dom.cloneNode(!1)),f=Q=>mm(Q).dom,p=Q=>Ea(Q)?_o(Q)==="body"?!0:ns(gk,_o(Q)):!1,y=Q=>Ea(Q)?ns(["br","img","hr","input"],_o(Q)):!1,_=Q=>Ea(Q)&&Hl(Q,"contenteditable")==="false",O=(Q,fe)=>Q.dom.compareDocumentPosition(fe.dom),$=(Q,fe)=>{const Pe=Vc(Q);nl(fe,Pe)},U=Q=>{const fe=_o(Q);return ns(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],fe)},G=Q=>Ea(Q)?qa(Q,"lang"):oe.none();return{up:ee({selector:Mu,closest:or,predicate:jo,all:Kd}),down:ee({selector:ka,predicate:rh}),styles:ee({get:ef,getRaw:vm,set:Co,remove:io}),attrs:ee({get:Hl,set:xs,remove:Do,copyTo:$}),insert:ee({before:Yd,after:Ru,afterAll:qn,append:Jo,appendAll:Cc,prepend:ua,wrap:rv}),remove:ee({unwrap:c1,remove:fr}),create:ee({nu:le.fromTag,clone:l,text:le.fromText}),query:ee({comparePosition:O,prevSibling:oh,nextSibling:gm}),property:ee({children:no,name:_o,parent:zl,document:f,isText:qd,isComment:mo,isElement:Ea,isSpecial:U,getLanguage:G,getText:Rv,setText:dk,isBoundary:p,isEmptyTag:y,isNonEditable:_}),eq:yo,is:GT}};const eS=(l,f,p,y)=>{const _=p[0],O=p.slice(1);return y(l,f,_,O)},hf=(l,f,p)=>p.length>0?eS(l,f,p,$v):oe.none(),$v=(l,f,p,y)=>{const _=f(l,p);return ia(y,(O,$)=>{const U=f(l,$);return Mi(l,O,U)},_)},Mi=(l,f,p)=>f.bind(y=>p.filter(Tn(l.eq,y))),Iv=(l,f)=>Tn(l.eq,f),Lm=(l,f,p,y=_n)=>{const _=[f].concat(l.up().all(f)),O=[p].concat(l.up().all(p)),$=fe=>lm(fe,y).fold(()=>fe,tt=>fe.slice(0,tt+1)),U=$(_),G=$(O),Q=L(U,fe=>et(G,Iv(l,fe)));return{firstpath:U,secondpath:G,shared:Q}},po=hf,gl=Lm,tS=Yu(),ni=(l,f)=>po(tS,(p,y)=>l(y),f),Fv=(l,f,p)=>gl(tS,l,f,p),Rh=l=>Mu(l,"table"),Hm=(l,f,p)=>{const y=_=>O=>p!==void 0&&p(O)||yo(O,_);return yo(l,f)?oe.some({boxes:oe.some([l]),start:l,finish:f}):Rh(l).bind(_=>Rh(f).bind(O=>{if(yo(_,O))return oe.some({boxes:mk(_,l,f),start:l,finish:f});if(sv(_,O)){const $=ah(f,"td,th",y(_)),U=$.length>0?$[$.length-1]:f;return oe.some({boxes:Im(_,l,_,f,O),start:l,finish:U})}else if(sv(O,_)){const $=ah(l,"td,th",y(O)),U=$.length>0?$[$.length-1]:l;return oe.some({boxes:Im(O,l,_,f,O),start:l,finish:U})}else return Fv(l,f).shared.bind($=>or($,"table",p).bind(U=>{const G=ah(f,"td,th",y(U)),Q=G.length>0?G[G.length-1]:f,fe=ah(l,"td,th",y(U)),Pe=fe.length>0?fe[fe.length-1]:l;return oe.some({boxes:Im(U,l,_,f,O),start:Pe,finish:Q})}))}))},Dh=(l,f)=>{const p=ka(l,f);return p.length>0?oe.some(p):oe.none()},Ma=(l,f)=>L(l,p=>Ta(p,f)),nS=(l,f,p)=>Ul(l,f).bind(y=>Ul(l,p).bind(_=>ni(Rh,[y,_]).map(O=>({first:y,last:_,table:O})))),Mh=(l,f)=>Mu(l,"table").bind(p=>Ul(p,f).bind(y=>Hm(y,l).bind(_=>_.boxes.map(O=>({boxes:O,start:_.start,finish:_.finish}))))),Lv=(l,f,p,y,_)=>Ma(l,_).bind(O=>Qw(O,f,p).bind($=>Mh($,y))),Xu=(l,f)=>Dh(l,f),Hv=(l,f,p)=>nS(l,f,p).bind(y=>{const _=G=>yo(l,G),O="thead,tfoot,tbody,table",$=Mu(y.first,O,_),U=Mu(y.last,O,_);return $.bind(G=>U.bind(Q=>yo(G,Q)?Te(y.table,y.first,y.last):oe.none()))}),oS=sn,Vv=l=>{const f=(y,_)=>qa(y,_).exists(O=>parseInt(O,10)>1),p=y=>f(y,"rowspan")||f(y,"colspan");return l.length>0&&bo(l,p)?oe.some(l):oe.none()},sS=(l,f,p)=>f.length<=1?oe.none():Hv(l,p.firstSelectedSelector,p.lastSelectedSelector).map(y=>({bounds:y,cells:f})),$r="data-mce-selected",Pa="td["+$r+"],th["+$r+"]",Fe="["+$r+"]",M1="data-mce-first-selected",Ws="td["+M1+"],th["+M1+"]",P1="data-mce-last-selected",rS="td["+P1+"],th["+P1+"]",ao=Fe,eu={selected:$r,selectedSelector:Pa,firstSelected:M1,firstSelectedSelector:Ws,lastSelected:P1,lastSelectedSelector:rS},N1=(l,f,p)=>({element:p,mergable:sS(f,l,eu),unmergable:Vv(l),selection:oS(l)}),hk=(l,f,p)=>({element:l,clipboard:f,generators:p}),tu=(l,f,p,y)=>({selection:oS(l),clipboard:p,generators:y}),B1=l=>Oa(l).bind(f=>Xu(f,eu.firstSelectedSelector)).fold(ee(l),f=>f[0]),Pi=l=>(f,p)=>{const y=_o(f),_=y==="col"||y==="colgroup"?B1(f):f;return or(_,l,p)},aS=Pi("th,td,caption"),zv=Pi("th,td"),oo=l=>Di(l.model.table.getSelectedCells()),Vm=l=>os(oo(l),f=>Ta(f,eu.selectedSelector)),Oo=l=>Oa(l[0]).map(f=>{const p=Uw(f,ao);return yr(p),[p]}),cS=(l,f)=>jt(f,p=>l.selection.serializer.serialize(p.dom,{})).join(""),Na=l=>jt(l,f=>f.dom.innerText).join(""),zm=(l,f)=>{l.on("BeforeGetContent",p=>{const y=_=>{p.preventDefault(),Oo(_).each(O=>{p.content=p.format==="text"?Na(O):cS(l,O)})};if(p.selection===!0){const _=Vm(l);_.length>=1&&y(_)}}),l.on("BeforeSetContent",p=>{if(p.selection===!0&&p.paste===!0){const y=oo(l);we(y).each(_=>{Oa(_).each(O=>{const $=os(dl(p.content),G=>_o(G)!=="meta"),U=la("table");if(A1(l)&&$.length===1&&U($[0])){p.preventDefault();const G=le.fromDom(l.getDoc()),Q=Ch(G),fe=hk(_,$[0],Q);f.pasteCells(O,fe).each(()=>{l.focus()})}})})}})},Ba=(l,f)=>({element:l,offset:f}),pk=(l,f,p)=>l.property().isText(f)&&l.property().getText(f).trim().length===0||l.property().isComment(f)?p(f).bind(y=>pk(l,y,p).orThunk(()=>oe.some(y))):oe.none(),bk=(l,f)=>l.property().isText(f)?l.property().getText(f).length:l.property().children(f).length,vk=(l,f)=>{const p=pk(l,f,l.query().prevSibling).getOr(f);if(l.property().isText(p))return Ba(p,bk(l,p));const y=l.property().children(p);return y.length>0?vk(l,y[y.length-1]):Ba(p,bk(l,p))},yk=vk,Ms=Yu(),Yr=l=>yk(Ms,l),Ph=(l,f)=>{tf(l)||Bo(l).each(y=>{const _=y.value/2;ke(l,_,y.unit),ke(f,_,y.unit)})},Ju=l=>jt(l,ee(0)),Uv=(l,f,p,y,_)=>_(l.slice(0,f)).concat(y).concat(_(l.slice(p))),Um=l=>(f,p,y,_)=>{if(l(y)){const O=Math.max(_,f[p]-Math.abs(y)),$=Math.abs(O-f[p]);return y>=0?$:-$}else return y},hl=Um(l=>l<0),Wm=Um(Ae),pf=()=>{const l=(U,G,Q,fe,Pe)=>{const tt=hl(U,G,fe,Pe);return Uv(U,G,Q+1,[tt,0],Ju)},f=(U,G,Q,fe)=>{const Pe=(100+Q)/100,tt=Math.max(fe,(U[G]+Q)/Pe);return jt(U,(Ye,We)=>(We===G?tt:Ye/Pe)-Ye)},p=(U,G,Q,fe,Pe,tt)=>tt?f(U,G,fe,Pe):l(U,G,Q,fe,Pe);return{resizeTable:(U,G)=>U(G),clampTableDelta:hl,calcLeftEdgeDeltas:p,calcMiddleDeltas:(U,G,Q,fe,Pe,tt,Ye)=>p(U,Q,fe,Pe,tt,Ye),calcRightEdgeDeltas:(U,G,Q,fe,Pe,tt)=>{if(tt)return f(U,Q,fe,Pe);{const Ye=hl(U,Q,fe,Pe);return Ju(U.slice(0,Q)).concat([Ye])}},calcRedestributedWidths:(U,G,Q,fe)=>{if(fe){const tt=(G+Q)/G,Ye=jt(U,We=>We/tt);return{delta:tt*100-100,newSizes:Ye}}else return{delta:Q,newSizes:U}}}},Qu=()=>{const l=($,U,G,Q,fe)=>{const Pe=Q>=0?G:U,tt=Wm($,Pe,Q,fe);return Uv($,U,G+1,[tt,-tt],Ju)};return{resizeTable:($,U,G)=>{G&&$(U)},clampTableDelta:($,U,G,Q,fe)=>{if(fe){if(G>=0)return G;{const Pe=De($,(tt,Ye)=>tt+Ye-Q,0);return Math.max(-Pe,G)}}else return hl($,U,G,Q)},calcLeftEdgeDeltas:l,calcMiddleDeltas:($,U,G,Q,fe,Pe)=>l($,G,Q,fe,Pe),calcRightEdgeDeltas:($,U,G,Q,fe,Pe)=>{if(Pe)return Ju($);{const tt=Q/$.length;return jt($,ee(tt))}},calcRedestributedWidths:($,U,G,Q)=>({delta:0,newSizes:$})}},pl=l=>gn.fromTable(l).grid,bf=la("th"),vf=l=>bo(l,f=>bf(f.element)),Ck=(l,f)=>l&&f?"sectionCells":l?"section":"cells",Wv=l=>{const f=l.section==="thead",p=hm($1(l.cells),"th");return l.section==="tfoot"?{type:"footer"}:f||p?{type:"header",subType:Ck(f,p)}:{type:"body"}},$1=l=>{const f=os(l,p=>bf(p.element));return f.length===0?oe.some("td"):f.length===l.length?oe.some("th"):oe.none()},iS=l=>{const f=jt(l,_=>Wv(_).type),p=ns(f,"header"),y=ns(f,"footer");if(!p&&!y)return oe.some("body");{const _=ns(f,"body");return p&&!_&&!y?oe.some("header"):!p&&!_&&y?oe.some("footer"):oe.none()}},Zv=l=>Rr(l.all,f=>{const p=Wv(f);return p.type==="header"?oe.from(p.subType):oe.none()}),I1=(l,f,p)=>Eo(p(l.element,f),!0,l.isLocked),jv=(l,f)=>l.section!==f?Zc(l.element,l.cells,f,l.isNew):l,F1=()=>({transformRow:jv,transformCell:(l,f,p)=>{const y=p(l.element,f),_=_o(y)!=="td"?av(y,"td"):y;return Eo(_,l.isNew,l.isLocked)}}),Zm=()=>({transformRow:jv,transformCell:I1}),L1=()=>({transformRow:(l,f)=>jv(l,f==="thead"?"tbody":f),transformCell:I1}),Ni={getTableSectionType:(l,f)=>{const p=gn.fromTable(l);switch(Zv(p).getOr(f)){case"section":return F1();case"sectionCells":return Zm();case"cells":return L1()}},section:F1,sectionCells:Zm,cells:L1,fallback:()=>({transformRow:sn,transformCell:I1})},jm=(l,f,p,y)=>{p===y?Do(l,f):xs(l,f,p)},lS=(l,f,p)=>{Ou(qt(l,f)).fold(()=>ua(l,p),y=>Ru(y,p))},uS=(l,f)=>{const p=kn(l,f).getOrThunk(()=>{const y=le.fromTag(f,nh(l).dom);return f==="thead"?lS(l,"caption,colgroup",y):f==="colgroup"?lS(l,"caption",y):Jo(l,y),y});return Ya(p),p},H1=(l,f)=>{const p=[],y=[],_=Ye=>jt(Ye,We=>{We.isNew&&p.push(We.element);const gt=We.element;return Ya(gt),Be(We.cells,Re=>{Re.isNew&&y.push(Re.element),jm(Re.element,"colspan",Re.colspan,1),jm(Re.element,"rowspan",Re.rowspan,1),Jo(gt,Re.element)}),gt}),O=Ye=>Ss(Ye,We=>jt(We.cells,gt=>(jm(gt.element,"span",gt.colspan,1),gt.element))),$=(Ye,We)=>{const gt=uS(l,We),je=(We==="colgroup"?O:_)(Ye);Cc(gt,je)},U=Ye=>{kn(l,Ye).each(fr)},G=(Ye,We)=>{Ye.length>0?$(Ye,We):U(We)},Q=[],fe=[],Pe=[],tt=[];return Be(f,Ye=>{switch(Ye.section){case"thead":Q.push(Ye);break;case"tbody":fe.push(Ye);break;case"tfoot":Pe.push(Ye);break;case"colgroup":tt.push(Ye);break}}),G(tt,"colgroup"),G(Q,"thead"),G(fe,"tbody"),G(Pe,"tfoot"),{newRows:p,newCells:y}},ed=l=>jt(l,f=>{const p=Uc(f.element);return Be(f.cells,y=>{const _=Jd(y.element);jm(_,"colspan",y.colspan,1),jm(_,"rowspan",y.rowspan,1),Jo(p,_)}),p}),Sk=(l,f)=>jt(l,p=>xc(p,f)),Gv=(l,f)=>l[f],Nh=(l,f)=>{if(l.length===0)return 0;const p=l[0];return lm(l,_=>!f(p.element,_.element)).getOr(l.length)},xk=(l,f,p,y)=>{const _=Gv(l,f),O=_.section==="colgroup",$=Nh(_.cells.slice(p),y),U=O?1:Nh(Sk(l.slice(f),p),y);return{colspan:$,rowspan:U}},V1=(l,f)=>{const p=jt(l,_=>jt(_.cells,_n)),y=(_,O,$,U)=>{for(let G=_;G<_+$;G++)for(let Q=O;Q<O+U;Q++)p[G][Q]=!0};return jt(l,(_,O)=>{const $=Ss(_.cells,(U,G)=>{if(p[O][G]===!1){const Q=xk(l,O,G,f);return y(O,G,Q.rowspan,Q.colspan),[cv(U.element,Q.rowspan,Q.colspan,U.isNew)]}else return[]});return Cw(_.element,$,_.section,_.isNew)})},Gm=(l,f,p)=>{const y=[];Be(l.colgroups,_=>{const O=[];for(let $=0;$<l.grid.columns;$++){const U=gn.getColumnAt(l,$).map(G=>Eo(G.element,p,!1)).getOrThunk(()=>Eo(f.colGap(),!0,!1));O.push(U)}y.push(Zc(_.element,O,"colgroup",p))});for(let _=0;_<l.grid.rows;_++){const O=[];for(let G=0;G<l.grid.columns;G++){const Q=gn.getAt(l,_,G).map(fe=>Eo(fe.element,p,fe.isLocked)).getOrThunk(()=>Eo(f.gap(),!0,!1));O.push(Q)}const $=l.all[_],U=Zc($.element,O,$.section,p);y.push(U)}return y},dS=(l,f)=>Gm(l,f,!1),z1=l=>V1(l,yo),qv=(l,f)=>Rr(l.all,p=>L(p.cells,y=>yo(f,y.element))),fS=(l,f,p)=>{const y=jt(f.selection,O=>g1(O).bind($=>qv(l,$)).filter(p)),_=_s(y);return dv(_.length>0,_)},Cr=(l,f,p,y,_)=>(O,$,U,G)=>{const Q=gn.fromTable(O),fe=oe.from(G==null?void 0:G.section).getOrThunk(Ni.fallback);return f(Q,$).map(tt=>{const Ye=dS(Q,U),We=l(Ye,tt,yo,_(U),fe),gt=$u(We.grid),Re=z1(We.grid);return{info:tt,grid:Re,cursor:We.cursor,lockedColumns:gt}}).bind(tt=>{const Ye=H1(O,tt.grid),We=oe.from(G==null?void 0:G.sizing).getOrThunk(()=>Tc.getTableSize(O)),gt=oe.from(G==null?void 0:G.resize).getOrThunk(Qu);return p(O,tt.grid,tt.info,{sizing:We,resize:gt,section:fe}),y(O),Do(O,hr),tt.lockedColumns.length>0&&xs(O,hr,tt.lockedColumns.join(",")),oe.some({cursor:tt.cursor,newRows:Ye.newRows,newCells:Ye.newCells})})},Bh=(l,f)=>g1(f.element).bind(p=>qv(l,p).map(y=>({...y,generators:f.generators,clipboard:f.clipboard}))),Kv=(l,f)=>fS(l,f,Ae).map(p=>({cells:p,generators:f.generators,clipboard:f.clipboard})),qm=(l,f)=>f.mergable,mS=(l,f)=>f.unmergable,Bi=(l,f)=>fS(l,f,Ae),ga=(l,f)=>fS(l,f,p=>!p.isLocked),Km=(l,f)=>qv(l,f).exists(p=>!p.isLocked),Ym=(l,f)=>bo(f,p=>Km(l,p)),$h=(l,f)=>qm(l,f).filter(p=>Ym(l,p.cells)),_k=(l,f)=>mS(l,f).filter(p=>Ym(l,p)),Ek=(l,f,p,y)=>{const _=Vs(l).rows;if(_.length===0)return l;for(let O=f.startRow;O<=f.finishRow;O++)for(let $=f.startCol;$<=f.finishCol;$++){const U=_[O],G=xc(U,$).isLocked;tn(U,$,Eo(y(),!1,G))}return l},Xm=(l,f,p,y)=>{const _=Vs(l).rows;let O=!0;for(let $=0;$<_.length;$++)for(let U=0;U<tc(_[0]);U++){const G=_[$],Q=xc(G,U),fe=Q.element,Pe=p(fe,f);Pe&&!O?tn(G,U,Eo(y(),!0,Q.isLocked)):Pe&&(O=!1)}return l},$a=(l,f)=>De(l,(p,y)=>et(p,_=>f(_.element,y.element))?p:p.concat([y]),[]),gS=(l,f,p,y)=>(f>0&&f<l[0].cells.length&&Be(l,_=>{const O=_.cells[f-1];let $=0;const U=y();for(;_.cells.length>f+$&&p(O.element,_.cells[f+$].element);)tn(_,f+$,Eo(U,!0,_.cells[f+$].isLocked)),$++}),l),Ko=(l,f,p,y)=>{const _=Vs(l).rows;if(f>0&&f<_.length){const O=_[f-1].cells,$=$a(O,p);Be($,U=>{let G=oe.none();for(let Q=f;Q<_.length;Q++)for(let fe=0;fe<tc(_[0]);fe++){const Pe=_[Q],tt=xc(Pe,fe);p(tt.element,U.element)&&(G.isNone()&&(G=oe.some(y())),G.each(We=>{tn(Pe,fe,Eo(We,!0,tt.isLocked))}))}})}return l},yf=l=>{const f=O=>O(l),p=ee(l),y=()=>_,_={tag:!0,inner:l,fold:(O,$)=>$(l),isValue:Ae,isError:_n,map:O=>U1.value(O(l)),mapError:y,bind:f,exists:f,forall:f,getOr:p,or:y,getOrThunk:p,orThunk:y,getOrDie:p,each:O=>{O(l)},toOptional:()=>oe.some(l)};return _},Ia=l=>{const f=()=>p,p={tag:!1,inner:l,fold:(y,_)=>y(l),isValue:_n,isError:Ae,map:f,mapError:y=>U1.error(y(l)),bind:f,exists:_n,forall:Ae,getOr:sn,or:sn,getOrThunk:fs,orThunk:fs,getOrDie:bn(String(l)),each:Ne,toOptional:oe.none};return p},U1={value:yf,error:Ia,fromOption:(l,f)=>l.fold(()=>Ia(f),yf)},Jm=(l,f,p)=>{if(l.row>=f.length||l.column>tc(f[0]))return U1.error("invalid start address out of table bounds, row: "+l.row+", column: "+l.column);const y=f.slice(l.row),_=y[0].cells.slice(l.column),O=tc(p[0]),$=p.length;return U1.value({rowDelta:y.length-$,colDelta:_.length-O})},Cf=(l,f)=>{const p=tc(l[0]),y=tc(f[0]);return{rowDelta:0,colDelta:p-y}},$i=(l,f)=>{const p=l.length,y=f.length;return{rowDelta:p-y,colDelta:0}},Fa=(l,f,p,y)=>{const _=f.section==="colgroup"?p.col:p.cell;return zo(l,O=>Eo(_(),!0,y(O)))},Yv=(l,f,p,y)=>{const _=l[l.length-1];return l.concat(zo(f,()=>{const O=_.section==="colgroup"?p.colgroup:p.row,$=Mw(_,O,sn),U=Fa($.cells.length,$,p,G=>As(y,G.toString()));return qr($,U)}))},Xv=(l,f,p,y)=>jt(l,_=>{const O=Fa(f,_,p,_n);return ph(_,y,O)}),Jv=(l,f,p)=>jt(l,y=>De(p,(_,O)=>{const $=Fa(1,y,f,Ae)[0];return sk(_,O,$)},y)),wf=(l,f,p)=>{const y=f.colDelta<0?Xv:sn,_=f.rowDelta<0?Yv:sn,O=$u(l),$=tc(l[0]),U=et(O,fe=>fe===$-1),G=y(l,Math.abs(f.colDelta),p,U?$-1:$),Q=$u(G);return _(G,Math.abs(f.rowDelta),p,Gt(Q,Ae))},Tk=(l,f,p,y)=>{const _=xc(l[f],p),O=Tn(y,_.element),$=l[f];return l.length>1&&tc($)>1&&(p>0&&O(Kr($,p-1))||p<$.cells.length-1&&O(Kr($,p+1))||f>0&&O(Kr(l[f-1],p))||f<l.length-1&&O(Kr(l[f+1],p)))},Sf=(l,f,p,y,_,O)=>{const $=l.row,U=l.column,G=p.length,Q=tc(p[0]),fe=$+G,Pe=U+Q+O.length,tt=Gt(O,Ae);for(let Ye=$;Ye<fe;Ye++){let We=0;for(let gt=U;gt<Pe;gt++){if(tt[gt]){We++;continue}Tk(f,Ye,gt,_)&&Xm(f,Kr(f[Ye],gt),_,y.cell);const Re=gt-U-We,je=xc(p[Ye-$],Re),At=je.element,Je=y.replace(At);tn(f[Ye],gt,Eo(Je,!0,je.isLocked))}}return f},bl=(l,f,p)=>{const y=tc(f[0]),_=Vs(f).cols.length+l.row,O=zo(y-l.column,U=>U+l.column),$=L(O,U=>bo(p,G=>G!==U)).getOr(y-1);return{row:_,column:$}},Ih=(l,f,p)=>os(p,y=>y>=l.column&&y<=tc(f[0])+l.column),vn=(l,f,p,y,_)=>{const O=$u(f),$=bl(l,f,O),U=Vs(p).rows,G=Ih($,U,O);return Jm($,f,U).map(fe=>{const Pe={...fe,colDelta:fe.colDelta-G.length},tt=wf(f,Pe,y),Ye=$u(tt),We=Ih($,U,Ye);return Sf($,tt,U,y,_,We)})},Xr=(l,f,p,y,_)=>{gS(f,l,_,y.cell);const O=$i(p,f),$=wf(p,O,y),U=$i(f,$),G=wf(f,U,y);return jt(G,(Q,fe)=>ph(Q,l,$[fe].cells))},kc=(l,f,p,y,_)=>{Ko(f,l,_,y.cell);const O=$u(f),$=Cf(f,p),U={...$,colDelta:$.colDelta-O.length},G=wf(f,U,y),{cols:Q,rows:fe}=Vs(G),Pe=$u(G),tt=Cf(p,f),Ye={...tt,colDelta:tt.colDelta+Pe.length},We=Jv(p,y,Pe),gt=wf(We,Ye,y);return[...Q,...fe.slice(0,l),...gt,...fe.slice(l,fe.length)]},nu=(l,f,p,y)=>Mw(l,_=>y(_,p),f),so=(l,f,p,y,_)=>{const{rows:O,cols:$}=Vs(l),U=O.slice(0,f),G=O.slice(f),Q=nu(O[p],(fe,Pe)=>f>0&&f<O.length&&y(Kr(O[f-1],Pe),Kr(O[f],Pe))?xc(O[f],Pe):Eo(_(fe.element,y),!0,fe.isLocked),y,_);return[...$,...U,Q,...G]},hS=(l,f,p,y,_,O,$)=>{if(p==="colgroup"||!y){const U=xc(l,_);return Eo($(U.element,O),!0,!1)}else return xc(l,f)},W1=(l,f,p,y,_)=>jt(l,O=>{const $=f>0&&f<tc(O)&&y(Kr(O,f-1),Kr(O,f)),U=hS(O,f,O.section,$,p,y,_);return sk(O,f,U)}),Fh=(l,f)=>Ss(l,p=>{const y=p.cells,_=ia(f,(O,$)=>$>=0&&$<O.length?O.slice(0,$).concat(O.slice($+1)):O,y);return _.length>0?[Zc(p.element,_,p.section,p.isNew)]:[]}),Z1=(l,f,p)=>{const{rows:y,cols:_}=Vs(l);return[..._,...y.slice(0,f),...y.slice(p+1)]},kk=(l,f,p,y)=>Kr(l[f],p)!==void 0&&f>0&&y(Kr(l[f-1],p),Kr(l[f],p)),wo=(l,f,p)=>f>0&&p(Kr(l,f-1),Kr(l,f)),Qv=(l,f,p,y)=>kk(l,f,p,y)||wo(l[f],p,y),Ok=(l,f)=>bo(f,sn)&&vf(l.cells)?Ae:(y,_,O)=>!(_o(y.element)==="th"&&f[O]),Ak=(l,f)=>bo(f,sn)&&vf(l)?Ae:(y,_,O)=>!(_o(y.element)==="th"&&f[_]),Qm=(l,f,p,y)=>{const _=$=>$==="row"?Rs(f):tf(f),O=$=>_($)?`${$}group`:$;return l?bf(f)?O(p):null:y&&bf(f)?O(p==="row"?"col":"row"):null},ut=(l,f)=>(p,y,_)=>oe.some(Qm(l,p.element,"col",f[_])),Rk=(l,f)=>(p,y)=>oe.some(Qm(l,p.element,"row",f[y])),pS=(l,f,p)=>Eo(p(l.element,f),!0,l.isLocked),j1=(l,f,p,y,_,O,$)=>{const U=G=>et(f,Q=>p(G.element,Q.element));return jt(l,(G,Q)=>Yc(G,(fe,Pe)=>{if(U(fe)){const tt=$(fe,Q,Pe)?_(fe,p,y):fe;return O(tt,Q,Pe).each(Ye=>{a1(tt.element,{scope:oe.from(Ye)})}),tt}else return fe}))},ey=(l,f,p)=>Ss(l,(y,_)=>Qv(l,_,f,p)?[]:[xc(y,f)]),Dk=(l,f,p)=>{const y=l[f];return Ss(y.cells,(_,O)=>Qv(l,f,O,p)?[]:[_])},Lh=(l,f,p,y,_)=>{const O=Vs(l).rows,$=Ss(f,fe=>ey(O,fe,y)),U=jt(O,fe=>vf(fe.cells)),G=Ak($,U),Q=Rk(p,U);return j1(l,$,y,_,pS,Q,G)},Hh=(l,f,p,y,_,O,$)=>{const{cols:U,rows:G}=Vs(l),Q=G[f[0]],fe=Ss(f,Re=>Dk(G,Re,_)),Pe=jt(Q.cells,(Re,je)=>vf(ey(G,je,_))),tt=[...G];Be(f,Re=>{tt[Re]=$.transformRow(G[Re],p)});const Ye=[...U,...tt],We=Ok(Q,Pe),gt=ut(y,Pe);return j1(Ye,fe,_,O,$.transformCell,gt,We)},xf=(l,f,p,y)=>{const _=Vs(l).rows,O=jt(f,$=>xc(_[$.row],$.column));return j1(l,O,p,y,pS,oe.none,Ae)},vl={generate:l=>{if(!ye(l))throw new Error("cases must be an array");if(l.length===0)throw new Error("there must be at least one case");const f=[],p={};return Be(l,(y,_)=>{const O=Mt(y);if(O.length!==1)throw new Error("one and only one name per case");const $=O[0],U=y[$];if(p[$]!==void 0)throw new Error("duplicate key detected:"+$);if($==="cata")throw new Error("cannot have a case named cata (sorry)");if(!ye(U))throw new Error("case arguments must be an array");f.push($),p[$]=(...G)=>{const Q=G.length;if(Q!==U.length)throw new Error("Wrong number of arguments to case "+$+". Expected "+U.length+" ("+U+"), got "+Q);return{fold:(...Pe)=>{if(Pe.length!==l.length)throw new Error("Wrong number of arguments to fold. Expected "+l.length+", got "+Pe.length);return Pe[_].apply(null,G)},match:Pe=>{const tt=Mt(Pe);if(f.length!==tt.length)throw new Error("Wrong number of arguments to match. Expected: "+f.join(",")+`
Actual: `+tt.join(","));if(!bo(f,We=>ns(tt,We)))throw new Error("Not all branches were specified when using match. Specified: "+tt.join(", ")+`
Required: `+f.join(", "));return Pe[$].apply(null,G)},log:Pe=>{console.log(Pe,{constructors:f,constructor:$,params:G})}}}}),p}},ou={...vl.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},bS=(l,f)=>l.length===0?ou.none():l.length===1?ou.only(0):f===0?ou.left(0,1):f===l.length-1?ou.right(f-1,f):f>0&&f<l.length-1?ou.middle(f-1,f,f+1):ou.none(),Ii=(l,f,p,y,_)=>{const O=l.slice(0),$=bS(l,f),U=ee(jt(O,ee(0))),G=tt=>y.singleColumnWidth(O[tt],p),Q=(tt,Ye)=>_.calcLeftEdgeDeltas(O,tt,Ye,p,y.minCellWidth(),y.isRelative),fe=(tt,Ye,We)=>_.calcMiddleDeltas(O,tt,Ye,We,p,y.minCellWidth(),y.isRelative),Pe=(tt,Ye)=>_.calcRightEdgeDeltas(O,tt,Ye,p,y.minCellWidth(),y.isRelative);return $.fold(U,G,Q,fe,Pe)},vS=(l,f,p)=>{let y=0;for(let _=l;_<f;_++)y+=p[_]!==void 0?p[_]:0;return y},eg=(l,f)=>{const p=gn.justCells(l);return jt(p,y=>{const _=vS(y.column,y.column+y.colspan,f);return{element:y.element,width:_,colspan:y.colspan}})},Pk=(l,f)=>{const p=gn.justColumns(l);return jt(p,(y,_)=>({element:y.element,width:f[_],colspan:y.colspan}))},Nk=(l,f)=>jt(l.all,(p,y)=>({element:p.element,height:f[y]})),Bk=l=>ia(l,(f,p)=>f+p,0),ty=(l,f)=>gn.hasColumns(l)?Pk(l,f):eg(l,f),G1=(l,f,p)=>{const y=ty(l,f);Be(y,_=>{p.setElementWidth(_.element,_.width)})},yS=(l,f,p,y,_)=>{const O=gn.fromTable(l),$=_.getCellDelta(f),U=_.getWidths(O,_),G=p===O.grid.columns-1,Q=y.clampTableDelta(U,p,$,_.minCellWidth(),G),fe=Ii(U,p,Q,_,y),Pe=jt(fe,(tt,Ye)=>tt+U[Ye]);G1(O,Pe,_),y.resizeTable(_.adjustTableWidth,Q,G)},ny=(l,f,p)=>{const y=gn.fromTable(l),_=me(y,l),O=jt(_,(G,Q)=>p===Q?Math.max(f+G,f1()):G),$=Nk(y,O);Be($,G=>{Oi(G.element,G.height)}),Be(gn.justCells(y),G=>{lk(G.element)});const U=Bk(O);Oi(l,U)},$k=(l,f,p,y,_)=>{const O=gn.generate(f),$=y.getWidths(O,y),U=y.pixelWidth(),{newSizes:G,delta:Q}=_.calcRedestributedWidths($,U,p.pixelDelta,y.isRelative);G1(O,G,y),y.adjustTableWidth(Q)},Vh=(l,f,p,y)=>{const _=gn.generate(f),O=y.getWidths(_,y);G1(_,O,y)},td=l=>De(l,(p,y)=>et(p,O=>O.column===y.column)?p:p.concat([y]),[]).sort((p,y)=>p.column-y.column),tg=la("col"),q1=la("colgroup"),oy=l=>_o(l)==="tr"||q1(l),K1=l=>{const f=Es(l,"colspan",1),p=Es(l,"rowspan",1);return{element:l,colspan:f,rowspan:p}},sy=(l,f=K1)=>{const p=U=>tg(U.element)?l.col(U):l.cell(U),y=U=>q1(U.element)?l.colgroup(U):l.row(U),_=U=>{if(oy(U))return y({element:U});{const G=U,Q=p(f(G));return O=oe.some({item:G,replacement:Q}),Q}};let O=oe.none();return{getOrInit:(U,G)=>O.fold(()=>_(U),Q=>G(U,Q.item)?Q.replacement:_(U))}},ry=l=>f=>{const p=[],y=($,U)=>L(p,G=>U(G.item,$)),_=$=>{const U=l==="td"?{scope:null}:{},G=f.replace($,l,U);return p.push({item:$,sub:G}),G};return{replaceOrInit:($,U)=>{if(oy($)||tg($))return $;{const G=$;return y(G,U).fold(()=>_(G),Q=>U($,Q.item)?Q.sub:_(G))}}}},ay=l=>qa(l,"scope").map(f=>f.substr(0,3)),Zs={modification:sy,transform:ry,merging:l=>({unmerge:y=>{const _=ay(y);return _.each(O=>xs(y,"scope",O)),()=>{const O=l.cell({element:y,colspan:1,rowspan:1});return io(O,"width"),io(y,"width"),_.each($=>xs(O,"scope",$)),O}},merge:y=>{const _=()=>{const O=_s(jt(y,ay));if(O.length===0)return oe.none();{const $=O[0],U=["row","col"];return et(O,Q=>Q!==$&&ns(U,Q))?oe.none():oe.from($)}};return io(y[0],"width"),_().fold(()=>Do(y[0],"scope"),O=>xs(y[0],"scope",O+"group")),ee(y[0])}})},Ik=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],wS=(l,f)=>{const p=l.property().name(f);return ns(["ol","ul"],p)},nd=(l,f)=>{const p=l.property().name(f);return ns(Ik,p)},_f=(l,f)=>ns(["br","img","hr","input"],l.property().name(f)),cy=Yu(),he=l=>nd(cy,l),yl=l=>wS(cy,l),Fk=l=>_f(cy,l),SS=l=>{const f=la("br"),p=G=>bo(G,Q=>f(Q)||qd(Q)&&Rv(Q).trim().length===0),y=G=>_o(G)==="li"||jo(G,yl).isSome(),_=G=>gm(G).map(Q=>he(Q)?!0:Fk(Q)?_o(Q)!=="img":!1).getOr(!1),O=G=>O1(G).bind(Q=>{const fe=_(Q);return zl(Q).map(Pe=>fe===!0||y(Pe)||f(Q)||he(Pe)&&!yo(G,Pe)?[]:[le.fromTag("br")])}).getOr([]),U=(()=>{const G=Ss(l,Q=>{const fe=no(Q);return p(fe)?[]:fe.concat(O(Q))});return G.length===0?[le.fromTag("br")]:G})();Ya(l[0]),Cc(l[0],U)},zh=l=>_h(l,!0),Oc=l=>{Nu(l).length===0&&fr(l)},Uh=(l,f)=>({grid:l,cursor:f}),xS=l=>Rr(l,f=>Rr(f.cells,p=>{const y=p.element;return dv(zh(y),y)})),iy=(l,f,p)=>{var y,_;const O=Vs(l).rows;return oe.from((_=(y=O[f])===null||y===void 0?void 0:y.cells[p])===null||_===void 0?void 0:_.element).filter(zh).orThunk(()=>xS(O))},Ir=(l,f,p)=>{const y=iy(l,f,p);return Uh(l,y)},Y1=l=>De(l,(p,y)=>et(p,O=>O.row===y.row)?p:p.concat([y]),[]).sort((p,y)=>p.row-y.row),_S=(l,f,p,y)=>{const _=f[0].row,O=Y1(f),$=ia(O,(U,G)=>({grid:so(U.grid,_,G.row+U.delta,p,y.getOrInit),delta:U.delta+1}),{grid:l,delta:0}).grid;return Ir($,_,f[0].column)},Lk=(l,f,p,y)=>{const _=Y1(f),O=_[_.length-1],$=O.row+O.rowspan,U=ia(_,(G,Q)=>so(G,$,Q.row,p,y.getOrInit),l);return Ir(U,$,f[0].column)},ES=(l,f,p,y)=>{const _=f.details,O=td(_),$=O[0].column,U=ia(O,(G,Q)=>({grid:W1(G.grid,$,Q.column+G.delta,p,y.getOrInit),delta:G.delta+1}),{grid:l,delta:0}).grid;return Ir(U,_[0].row,$)},Hk=(l,f,p,y)=>{const _=f.details,O=_[_.length-1],$=O.column+O.colspan,U=td(_),G=ia(U,(Q,fe)=>W1(Q,$,fe.column,p,y.getOrInit),l);return Ir(G,_[0].row,$)},TS=(l,f,p,y)=>{const _=td(f),O=jt(_,U=>U.column),$=Lh(l,O,!0,p,y.replaceOrInit);return Ir($,f[0].row,f[0].column)},Vk=(l,f,p,y)=>{const _=xf(l,f,p,y.replaceOrInit);return Ir(_,f[0].row,f[0].column)},zk=(l,f,p,y)=>{const _=td(f),O=jt(_,U=>U.column),$=Lh(l,O,!1,p,y.replaceOrInit);return Ir($,f[0].row,f[0].column)},kS=(l,f,p,y)=>{const _=xf(l,f,p,y.replaceOrInit);return Ir(_,f[0].row,f[0].column)},ng=(l,f)=>(p,y,_,O,$)=>{const U=Y1(y),G=jt(U,fe=>fe.row),Q=Hh(p,G,l,f,_,O.replaceOrInit,$);return Ir(Q,y[0].row,y[0].column)},Uk=ng("thead",!0),OS=ng("tbody",!1),Lo=ng("tfoot",!1),X1=(l,f,p,y)=>{const _=td(f.details),O=Fh(l,jt(_,U=>U.column)),$=O.length>0?O[0].cells.length-1:0;return Ir(O,_[0].row,Math.min(_[0].column,$))},AS=(l,f,p,y)=>{const _=Y1(f),O=Z1(l,_[0].row,_[_.length-1].row),$=Math.max(Vs(O).rows.length-1,0);return Ir(O,Math.min(f[0].row,$),f[0].column)},RS=(l,f,p,y)=>{const _=f.cells;SS(_);const O=Ek(l,f.bounds,p,y.merge(_));return Uh(O,oe.from(_[0]))},J1=(l,f,p,y)=>{const O=ia(f,($,U)=>Xm($,U,p,y.unmerge(U)),l);return Uh(O,oe.from(f[0]))},wr=(l,f,p,y)=>{const O=((G,Q)=>{const fe=gn.fromTable(G);return Gm(fe,Q,!0)})(f.clipboard,f.generators),$=i1(f.row,f.column);return vn($,l,O,f.generators,p).fold(()=>Uh(l,oe.some(f.element)),G=>Ir(G,f.row,f.column))},Fr=(l,f,p)=>{const y=Tw(l,p.section),_=gn.generate(y);return Gm(_,f,!0)},DS=(l,f,p,y)=>{const _=Vs(l).rows,O=f.cells[0].column,$=_[f.cells[0].row],U=Fr(f.clipboard,f.generators,$),G=Xr(O,l,U,f.generators,p);return Ir(G,f.cells[0].row,f.cells[0].column)},MS=(l,f,p,y)=>{const _=Vs(l).rows,O=f.cells[f.cells.length-1].column+f.cells[f.cells.length-1].colspan,$=_[f.cells[0].row],U=Fr(f.clipboard,f.generators,$),G=Xr(O,l,U,f.generators,p);return Ir(G,f.cells[0].row,O)},ly=(l,f,p,y)=>{const _=Vs(l).rows,O=f.cells[0].row,$=_[O],U=Fr(f.clipboard,f.generators,$),G=kc(O,l,U,f.generators,p);return Ir(G,f.cells[0].row,f.cells[0].column)},PS=(l,f,p,y)=>{const _=Vs(l).rows,O=f.cells[f.cells.length-1].row+f.cells[f.cells.length-1].rowspan,$=_[f.cells[0].row],U=Fr(f.clipboard,f.generators,$),G=kc(O,l,U,f.generators,p);return Ir(G,O,f.cells[0].column)},NS=(l,f)=>{const p=gn.fromTable(l);return Bi(p,f).bind(_=>{const O=_[_.length-1],$=_[0].column,U=O.column+O.colspan,G=fo(jt(p.all,Q=>os(Q.cells,fe=>fe.column>=$&&fe.column<U)));return $1(G)}).getOr("")},uy=(l,f)=>{const p=gn.fromTable(l);return Bi(p,f).bind($1).getOr("")},dy=(l,f)=>{const p=gn.fromTable(l);return Bi(p,f).bind(_=>{const O=_[_.length-1],$=_[0].row,U=O.row+O.rowspan,G=p.all.slice($,U);return iS(G)}).getOr("")},Q1=(l,f,p,y)=>Vh(l,f,p,y.sizing),su=(l,f,p,y)=>$k(l,f,p,y.sizing,y.resize),Jr=(l,f)=>et(f,p=>p.column===0&&p.isLocked),fy=(l,f)=>et(f,p=>p.column+p.colspan>=l.grid.columns&&p.isLocked),$n=(l,f)=>{const p=km(l),y=td(f);return De(y,(_,O)=>{const U=p[O.column].map(Mn).getOr(0);return _+U},0)},Fi=l=>(f,p)=>Bi(f,p).filter(y=>!(l?Jr:fy)(f,y)).map(y=>({details:y,pixelDelta:$n(f,y)})),Wh=(l,f)=>ga(l,f).map(p=>({details:p,pixelDelta:-$n(l,p)})),BS=l=>(f,p)=>Kv(f,p).filter(y=>!(l?Jr:fy)(f,y.cells)),eb=Zs.transform("th"),tb=Zs.transform("td"),od=Cr(_S,Bi,Ne,Ne,Zs.modification),js=Cr(Lk,Bi,Ne,Ne,Zs.modification),sd=Cr(ES,Fi(!0),su,Ne,Zs.modification),my=Cr(Hk,Fi(!1),su,Ne,Zs.modification),$S=Cr(X1,Wh,su,Oc,Zs.modification),Wk=Cr(AS,Bi,Ne,Oc,Zs.modification),og=Cr(TS,ga,Ne,Ne,eb),gy=Cr(zk,ga,Ne,Ne,tb),hy=Cr(Uk,ga,Ne,Ne,eb),py=Cr(OS,ga,Ne,Ne,tb),by=Cr(Lo,ga,Ne,Ne,tb),ft=Cr(Vk,ga,Ne,Ne,eb),Zh=Cr(kS,ga,Ne,Ne,tb),vy=Cr(RS,$h,Q1,Ne,Zs.merging),sg=Cr(J1,_k,Q1,Ne,Zs.merging),oi=Cr(wr,Bh,Q1,Ne,Zs.modification),Zk=Cr(DS,BS(!0),Ne,Ne,Zs.modification),Gs=Cr(MS,BS(!1),Ne,Ne,Zs.modification),jk=Cr(ly,Kv,Ne,Ne,Zs.modification),rd=Cr(PS,Kv,Ne,Ne,Zs.modification),yy=NS,IS=uy,Sr=dy,ad=(l,f)=>l.dispatch("NewRow",{node:f}),nb=(l,f)=>l.dispatch("NewCell",{node:f}),cd=(l,f,p)=>{l.dispatch("TableModified",{...p,table:f})},Gk=(l,f,p,y,_)=>{l.dispatch("TableSelectionChange",{cells:f,start:p,finish:y,otherCells:_})},qk=l=>{l.dispatch("TableSelectionClear")},bs=(l,f,p,y,_)=>{l.dispatch("ObjectResizeStart",{target:f,width:p,height:y,origin:_})},cs=(l,f,p,y,_)=>{l.dispatch("ObjectResized",{target:f,width:p,height:y,origin:_})},vs={structure:!1,style:!0},Zn={structure:!0,style:!1},Os={structure:!0,style:!0},is=(l,f)=>Jl(l)?Tc.percentageSize(f):Gu(l)?Tc.pixelSize(f):Tc.getTableSize(f),Cy=(l,f,p)=>{const y=Ho=>_o(gf(Ho))==="table",_=Ho=>!y(l)||pl(Ho).rows>1,O=Ho=>!y(l)||pl(Ho).columns>1,$=Gw(l),U=Nv(l)?Ne:Ph,G=Ho=>{switch(ju(l)){case"section":return Ni.section();case"sectionCells":return Ni.sectionCells();case"cells":return Ni.cells();default:return Ni.getTableSectionType(Ho,"section")}},Q=(Ho,El)=>El.cursor.fold(()=>{const gp=Nu(Ho);return we(gp).filter(Fo).map(Va=>{p.clearSelectedCells(Ho.dom);const Kt=l.dom.createRng();return Kt.selectNode(Va.dom),l.selection.setRng(Kt),xs(Va,"data-mce-selected","1"),Kt})},gp=>{const Va=Yr(gp),Kt=l.dom.createRng();return Kt.setStart(Va.element.dom,Va.offset),Kt.setEnd(Va.element.dom,Va.offset),l.selection.setRng(Kt),p.clearSelectedCells(Ho.dom),oe.some(Kt)}),fe=(Ho,El,gp,Va)=>(Kt,C2,w2=!1)=>{yr(Kt);const Kb=le.fromDom(l.getDoc()),Wx=Bm(gp,Kb,$),zf={sizing:is(l,Kt),resize:Nv(l)?pf():Qu(),section:G(Kt)};return El(Kt)?Ho(Kt,C2,Wx,zf).bind(mu=>{f.refresh(Kt.dom),Be(mu.newRows,hp=>{ad(l,hp.dom)}),Be(mu.newCells,hp=>{nb(l,hp.dom)});const Zx=Q(Kt,mu);return Fo(Kt)&&(yr(Kt),w2||cd(l,Kt.dom,Va)),Zx.map(hp=>({rng:hp,effect:Va}))}):oe.none()},Pe=fe(Wk,_,Ne,Zn),tt=fe($S,O,Ne,Zn),Ye=fe(od,Ae,Ne,Zn),We=fe(js,Ae,Ne,Zn),gt=fe(sd,Ae,U,Zn),Re=fe(my,Ae,U,Zn),je=fe(vy,Ae,Ne,Zn),At=fe(sg,Ae,Ne,Zn),Je=fe(Zk,Ae,Ne,Zn),An=fe(Gs,Ae,Ne,Zn),jn=fe(jk,Ae,Ne,Zn),Hn=fe(rd,Ae,Ne,Zn),Ks=fe(oi,Ae,Ne,Os),ls=fe(ft,Ae,Ne,Zn),_l=fe(Zh,Ae,Ne,Zn),wd=fe(og,Ae,Ne,Zn),Sd=fe(gy,Ae,Ne,Zn),In=fe(hy,Ae,Ne,Zn),oa=fe(py,Ae,Ne,Zn),sa=fe(by,Ae,Ne,Zn);return{deleteRow:Pe,deleteColumn:tt,insertRowsBefore:Ye,insertRowsAfter:We,insertColumnsBefore:gt,insertColumnsAfter:Re,mergeCells:je,unmergeCells:At,pasteColsBefore:Je,pasteColsAfter:An,pasteRowsBefore:jn,pasteRowsAfter:Hn,pasteCells:Ks,makeCellsHeader:ls,unmakeCellsHeader:_l,makeColumnsHeader:wd,unmakeColumnsHeader:Sd,makeRowsHeader:In,makeRowsBody:oa,makeRowsFooter:sa,getTableRowType:Sr,getTableCellType:IS,getTableColType:yy}},ob=(l,f,p)=>{const y=Es(l,f,1);p===1||y<=1?Do(l,f):xs(l,f,Math.min(p,y))},wy=(l,f)=>p=>{const y=p.column+p.colspan-1,_=p.column;return y>=l&&_<f},FS=(l,f,p)=>{if(gn.hasColumns(l)){const y=os(gn.justColumns(l),wy(f,p)),_=jt(y,$=>{const U=Jd($.element);return ob(U,"span",p-f),U}),O=le.fromTag("colgroup");return Cc(O,_),[O]}else return[]},LS=(l,f,p)=>jt(l.all,y=>{const _=os(y.cells,wy(f,p)),O=jt(_,U=>{const G=Jd(U.element);return ob(G,"colspan",p-f),G}),$=le.fromTag("tr");return Cc($,O),$}),sb=(l,f)=>{const p=gn.fromTable(l);return ga(p,f).map(_=>{const O=_[_.length-1],$=_[0].column,U=O.column+O.colspan,G=FS(p,$,U),Q=LS(p,$,U);return[...G,...Q]})},rb=(l,f,p)=>{const y=gn.fromTable(l);return Bi(y,f).bind(O=>{const $=Gm(y,p,!1),G=Vs($).rows.slice(O[0].row,O[O.length-1].row+O[O.length-1].rowspan),Q=Ss(G,Pe=>{const tt=os(Pe.cells,Ye=>!Ye.isLocked);return tt.length>0?[{...Pe,cells:tt}]:[]}),fe=z1(Q);return dv(fe.length>0,fe)}).map(O=>ed(O))},Ef=vl.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),Sy=(l,f,p)=>{const y=p.substring(0,p.length-l.length),_=parseFloat(y);return y===_.toString()?f(_):Ef.invalid(p)},Tf={...Ef,from:l=>Si(l,"%")?Sy("%",Ef.percent,l):Si(l,"px")?Sy("px",Ef.pixels,l):Ef.invalid(l)},Kk=(l,f)=>jt(l,p=>Tf.from(p).fold(()=>p,_=>_/f*100+"%",_=>_+"%")),ha=(l,f,p)=>{const y=p/f;return jt(l,_=>Tf.from(_).fold(()=>_,$=>$*y+"px",$=>$/100*p+"px"))},lM=(l,f)=>{const p=l.fold(()=>ee(""),y=>{const _=y/f;return ee(_+"px")},()=>{const y=100/f;return ee(y+"%")});return zo(f,p)},Yk=(l,f,p)=>l.fold(()=>f,y=>ha(f,p,y),y=>Kk(f,p)),rc=(l,f,p)=>{const y=Tf.from(p),_=bo(l,O=>O==="0px")?lM(y,l.length):Yk(y,l,f);return Qr(_)},jh=(l,f)=>l.length===0?f:ia(l,(p,y)=>Tf.from(y).fold(ee(0),sn,sn)+p,0),Gh=(l,f)=>{const p=Math.floor(l);return{value:p+f,remainder:l-p}},Li=(l,f)=>Tf.from(l).fold(ee(l),p=>p+f+"px",p=>p+f+"%"),Qr=l=>{if(l.length===0)return l;const f=ia(l,(y,_)=>{const O=Tf.from(_).fold(()=>({value:_,remainder:0}),$=>Gh($,"px"),$=>({value:$+"%",remainder:0}));return{output:[O.value].concat(y.output),remainder:y.remainder+O.remainder}},{output:[],remainder:0}),p=f.output;return p.slice(0,p.length-1).concat([Li(p[p.length-1],Math.round(f.remainder))])},id=Tf.from,xy=(l,f,p)=>{Be(f,y=>{const _=l.slice(y.column,y.colspan+y.column),O=jh(_,ym());Co(y.element,"width",O+p)})},ab=(l,f,p)=>{Be(f,(y,_)=>{const O=jh([l[_]],ym());Co(y.element,"width",O+p)})},HS=(l,f,p)=>{Be(p,y=>{io(y.element,"height")}),Be(f,(y,_)=>{Co(y.element,"height",l[_])})},kf=l=>id(l).fold(ee("px"),ee("px"),ee("%")),_y=(l,f,p)=>{const y=gn.fromTable(l),_=y.all,O=gn.justCells(y),$=gn.justColumns(y);f.each(U=>{const G=kf(U),Q=ec(l),fe=zu(y,l),Pe=rc(fe,Q,U);gn.hasColumns(y)?ab(Pe,$,G):xy(Pe,O,G),Co(l,"width",U)}),p.each(U=>{const G=Gl(l),Q=lo(y,l),fe=rc(Q,G,U);HS(fe,_,O),Co(l,"height",U)})},Ey=Kl,VS=cl,zS=Jc,qh=l=>{Do(l,"width"),Do(l,"height")},Of=l=>{const f=Go(l);_y(l,oe.some(f),oe.none()),qh(l)},Ty=l=>{const f=as(l);_y(l,oe.some(f),oe.none()),qh(l)},ky=l=>{const f=ho(l);_y(l,oe.none(),oe.some(f)),qh(l)},US=l=>{io(l,"width");const f=uh(l),p=f.length>0?f:Nu(l);Be(p,y=>{io(y,"width"),qh(y)}),qh(l)},WS={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},Xk=()=>le.fromTag("th"),cb=()=>le.fromTag("td"),ZS=()=>le.fromTag("col"),Jk=(l,f,p,y)=>{const _=le.fromTag("tr");for(let O=0;O<l;O++){const $=y<f||O<p?Xk():cb();O<p&&xs($,"scope","row"),y<f&&xs($,"scope","col"),Jo($,le.fromTag("br")),Jo(_,$)}return _},jS=l=>{const f=le.fromTag("colgroup");return zo(l,()=>Jo(f,ZS())),f},Kh=(l,f,p,y)=>zo(l,_=>Jk(f,p,y,_)),Qk=(l,f,p,y,_,O=WS)=>{const $=le.fromTag("table"),U=_!=="cells";ih($,O.styles),nl($,O.attributes),O.colGroups&&Jo($,jS(f));const G=Math.min(l,p);if(U&&p>0){const Ye=le.fromTag("thead");Jo($,Ye);const gt=Kh(p,f,_==="sectionCells"?G:0,y);Cc(Ye,gt)}const Q=le.fromTag("tbody");Jo($,Q);const fe=U?l-G:l,tt=Kh(fe,f,U?0:p,y);return Cc(Q,tt),$},GS=l=>l.dom.innerHTML,ea=l=>{const f=le.fromTag("div"),p=le.fromDom(l.dom.cloneNode(!0));return Jo(f,p),GS(f)},Oy=(l,f)=>{l.selection.select(f.dom,!0),l.selection.collapse(!0)},Ay=(l,f)=>{Ul(f,"td,th").each(Tn(Oy,l))},Ry=(l,f)=>{Be(ka(f,"tr"),p=>{ad(l,p.dom),Be(ka(p,"th,td"),y=>{nb(l,y.dom)})})},ib=l=>j(l)&&l.indexOf("%")!==-1,e4=(l,f,p,y,_)=>{const O=Ds(l),$={styles:O,attributes:qu(l),colGroups:R1(l)};return l.undoManager.ignore(()=>{const U=Qk(p,f,_,y,ju(l),$);xs(U,"data-mce-id","__mce");const G=ea(U);l.insertContent(G),l.addVisual()}),Ul(gf(l),'table[data-mce-id="__mce"]').map(U=>(Gu(l)?Ty(U):ei(l)?US(U):(Jl(l)||ib(O.width))&&Of(U),yr(U),Do(U,"data-mce-id"),Ry(l,U),Ay(l,U),U.dom)).getOrNull()},t4=(l,f,p,y={})=>{const _=O=>Rt(O)&&O>0;if(_(f)&&_(p)){const O=y.headerRows||0,$=y.headerColumns||0;return e4(l,p,f,$,O)}else return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null};var lb=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const qS="x-tinymce/dom-table-",Dy=qS+"rows",My=qS+"columns",Yh=l=>{const f=lb.FakeClipboardItem(l);lb.write([f])},Py=l=>{var f;const p=(f=lb.read())!==null&&f!==void 0?f:[];return Rr(p,y=>oe.from(y.getType(l)))},KS=l=>{Py(l).isSome()&&lb.clear()},YS=l=>{l.fold(n4,f=>Yh({[Dy]:f}))},XS=()=>Py(Dy),n4=()=>KS(Dy),JS=l=>{l.fold(ex,f=>Yh({[My]:f}))},QS=()=>Py(My),ex=()=>KS(My),ub=l=>aS(ti(l),ml(l)).filter(kh),rg=l=>zv(ti(l),ml(l)).filter(kh),tx=(l,f)=>{const p=ml(l),y=()=>ub(l).each(Re=>{Oa(Re,p).filter(ae(p)).each(je=>{const At=le.fromText("");if(Ru(je,At),fr(je),l.dom.isEmpty(l.getBody()))l.setContent(""),l.selection.setCursorLocation();else{const Je=l.dom.createRng();Je.setStart(At.dom,0),Je.setEnd(At.dom,0),l.selection.setRng(Je),l.nodeChanged()}})}),_=Re=>ub(l).each(je=>{ei(l)||Gu(l)||Jl(l)||Oa(je,p).each(Je=>{Re==="relative"&&!Ey(Je)?Of(Je):Re==="fixed"&&!VS(Je)?Ty(Je):Re==="responsive"&&!zS(Je)&&US(Je),yr(Je),cd(l,Je.dom,Zn)})}),O=Re=>Oa(Re,p),$=Re=>rg(l).bind(je=>O(je).map(At=>Re(At,je))),U=(Re,je)=>{$(At=>{l.formatter.toggle("tableclass",{value:je},At.dom),cd(l,At.dom,vs)})},G=(Re,je)=>{$(At=>{const Je=oo(l),jn=bo(Je,Hn=>l.formatter.match("tablecellclass",{value:je},Hn.dom))?l.formatter.remove:l.formatter.apply;Be(Je,Hn=>jn("tablecellclass",{value:je},Hn.dom)),cd(l,At.dom,vs)})},Q=()=>{ub(l).each(Re=>{Oa(Re,p).each(je=>{kn(je,"caption").fold(()=>{const At=le.fromTag("caption");Jo(At,le.fromText("Caption")),KT(je,At,0),l.selection.setCursorLocation(At.dom,0)},At=>{la("caption")(Re)&&ov("td",je).each(Je=>l.selection.setCursorLocation(Je.dom,0)),fr(At)}),cd(l,je.dom,Zn)})})},fe=Re=>{l.focus()},Pe=(Re,je=!1)=>$((At,Je)=>{const An=N1(oo(l),At,Je);Re(At,An,je).each(fe)}),tt=()=>$((Re,je)=>{const At=N1(oo(l),Re,je),Je=Bm(Ne,le.fromDom(l.getDoc()),oe.none());return rb(Re,At,Je)}),Ye=()=>$((Re,je)=>{const At=N1(oo(l),Re,je);return sb(Re,At)}),We=(Re,je)=>je().each(At=>{const Je=jt(At,An=>Jd(An));$((An,jn)=>{const Hn=Ch(le.fromDom(l.getDoc())),Ks=tu(oo(l),jn,Je,Hn);Re(An,Ks).each(fe)})}),gt=Re=>(je,At)=>o1(At,"type").each(Je=>{Pe(Re(Je),At.no_events)});Wo({mceTableSplitCells:()=>Pe(f.unmergeCells),mceTableMergeCells:()=>Pe(f.mergeCells),mceTableInsertRowBefore:()=>Pe(f.insertRowsBefore),mceTableInsertRowAfter:()=>Pe(f.insertRowsAfter),mceTableInsertColBefore:()=>Pe(f.insertColumnsBefore),mceTableInsertColAfter:()=>Pe(f.insertColumnsAfter),mceTableDeleteCol:()=>Pe(f.deleteColumn),mceTableDeleteRow:()=>Pe(f.deleteRow),mceTableCutCol:()=>Ye().each(Re=>{JS(Re),Pe(f.deleteColumn)}),mceTableCutRow:()=>tt().each(Re=>{YS(Re),Pe(f.deleteRow)}),mceTableCopyCol:()=>Ye().each(Re=>JS(Re)),mceTableCopyRow:()=>tt().each(Re=>YS(Re)),mceTablePasteColBefore:()=>We(f.pasteColsBefore,QS),mceTablePasteColAfter:()=>We(f.pasteColsAfter,QS),mceTablePasteRowBefore:()=>We(f.pasteRowsBefore,XS),mceTablePasteRowAfter:()=>We(f.pasteRowsAfter,XS),mceTableDelete:y,mceTableCellToggleClass:G,mceTableToggleClass:U,mceTableToggleCaption:Q,mceTableSizingMode:(Re,je)=>_(je),mceTableCellType:gt(Re=>Re==="th"?f.makeCellsHeader:f.unmakeCellsHeader),mceTableColType:gt(Re=>Re==="th"?f.makeColumnsHeader:f.unmakeColumnsHeader),mceTableRowType:gt(Re=>{switch(Re){case"header":return f.makeRowsHeader;case"footer":return f.makeRowsFooter;default:return f.makeRowsBody}})},(Re,je)=>l.addCommand(je,Re)),l.addCommand("mceInsertTable",(Re,je)=>{t4(l,je.rows,je.columns,je.options)}),l.addCommand("mceTableApplyCellStyle",(Re,je)=>{const At=jn=>"tablecell"+jn.toLowerCase().replace("-","");if(!J(je))return;const Je=os(oo(l),kh);if(Je.length===0)return;const An=vc(je,(jn,Hn)=>l.formatter.has(At(Hn))&&j(jn));um(An)||(Wo(An,(jn,Hn)=>{const Ks=At(Hn);Be(Je,ls=>{jn===""?l.formatter.remove(Ks,{value:null},ls.dom,!0):l.formatter.apply(Ks,{value:jn},ls.dom)})}),O(Je[0]).each(jn=>cd(l,jn.dom,vs)))})},o4=(l,f)=>{const p=ml(l),y=_=>zv(ti(l)).bind(O=>Oa(O,p).map($=>{const U=N1(oo(l),$,O);return _($,U)})).getOr("");Wo({mceTableRowType:()=>y(f.getTableRowType),mceTableCellType:()=>y(f.getTableCellType),mceTableColType:()=>y(f.getTableColType)},(_,O)=>l.addQueryValueHandler(O,_))},db=vl.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),s4=(l,f,p,y)=>l.fold(f,p,y),si=l=>l.fold(sn,sn,sn),fb=db.before,mb=db.on,gb=db.after,ta={before:fb,on:mb,after:gb,cata:s4,getStart:si},ud={create:(l,f)=>({selection:l,kill:f})},r4=(l,f)=>{const p=l.document.createRange();return p.selectNode(f.dom),p},dd=(l,f)=>{const p=l.document.createRange();return Xh(p,f),p},Xh=(l,f)=>l.selectNodeContents(f.dom),a4=(l,f)=>{f.fold(p=>{l.setStartBefore(p.dom)},(p,y)=>{l.setStart(p.dom,y)},p=>{l.setStartAfter(p.dom)})},c4=(l,f)=>{f.fold(p=>{l.setEndBefore(p.dom)},(p,y)=>{l.setEnd(p.dom,y)},p=>{l.setEndAfter(p.dom)})},nx=(l,f,p)=>{const y=l.document.createRange();return a4(y,f),c4(y,p),y},hb=(l,f,p,y,_)=>{const O=l.document.createRange();return O.setStart(f.dom,p),O.setEnd(y.dom,_),O},pb=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom,width:l.width,height:l.height}),i4=l=>{const f=l.getClientRects(),p=f.length>0?f[0]:l.getBoundingClientRect();return p.width>0||p.height>0?oe.some(p).map(pb):oe.none()},Jh=vl.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Ny=(l,f,p)=>f(le.fromDom(p.startContainer),p.startOffset,le.fromDom(p.endContainer),p.endOffset),l4=(l,f)=>f.match({domRange:p=>({ltr:ee(p),rtl:oe.none}),relative:(p,y)=>({ltr:wm(()=>nx(l,p,y)),rtl:wm(()=>oe.some(nx(l,y,p)))}),exact:(p,y,_,O)=>({ltr:wm(()=>hb(l,p,y,_,O)),rtl:wm(()=>oe.some(hb(l,_,O,p,y)))})}),By=(l,f)=>{const p=f.ltr();return p.collapsed?f.rtl().filter(_=>_.collapsed===!1).map(_=>Jh.rtl(le.fromDom(_.endContainer),_.endOffset,le.fromDom(_.startContainer),_.startOffset)).getOrThunk(()=>Ny(l,Jh.ltr,p)):Ny(l,Jh.ltr,p)},$y=(l,f)=>{const p=l4(l,f);return By(l,p)},bb=(l,f)=>$y(l,f).match({ltr:(y,_,O,$)=>{const U=l.document.createRange();return U.setStart(y.dom,_),U.setEnd(O.dom,$),U},rtl:(y,_,O,$)=>{const U=l.document.createRange();return U.setStart(O.dom,$),U.setEnd(y.dom,_),U}});Jh.ltr,Jh.rtl;const Af={create:(l,f,p,y)=>({start:l,soffset:f,finish:p,foffset:y})},Iy={create:(l,f,p,y)=>({start:ta.on(l,f),finish:ta.on(p,y)})},sx=(l,f)=>{const p=bb(l,f);return Af.create(le.fromDom(p.startContainer),p.startOffset,le.fromDom(p.endContainer),p.endOffset)},vb=Iy.create,d4=(l,f,p,y,_,O,$)=>yo(p,_)&&y===O?oe.none():or(p,"td,th",f).bind(U=>or(_,"td,th",f).bind(G=>fd(l,f,U,G,$))),fd=(l,f,p,y,_)=>yo(p,y)?oe.none():Hm(p,y,f).bind(O=>{const $=O.boxes.getOr([]);return $.length>1?(_(l,$,O.start,O.finish),oe.some(ud.create(oe.some(vb(p,0,p,Yl(p))),!0))):oe.none()}),uM=(l,f,p,y,_)=>{const O=$=>(_.clearBeforeUpdate(p),_.selectRange(p,$.boxes,$.start,$.finish),$.boxes);return Lv(y,l,f,_.firstSelectedSelector,_.lastSelectedSelector).map(O)},ag=(l,f)=>({item:l,mode:f}),yb=(l,f,p,y=cg)=>l.property().parent(f).map(_=>ag(_,y)),cg=(l,f,p,y=ig)=>p.sibling(l,f).map(_=>ag(_,y)),ig=(l,f,p,y=ig)=>{const _=l.property().children(f);return p.first(_).map($=>ag($,y))},f4=[{current:yb,next:cg,fallback:oe.none()},{current:cg,next:ig,fallback:oe.some(yb)},{current:ig,next:ig,fallback:oe.some(cg)}],rx=(l,f,p,y,_=f4)=>L(_,$=>$.current===p).bind($=>$.current(l,f,y,$.next).orThunk(()=>$.fallback.bind(U=>rx(l,f,U,y)))),ru={left:()=>({sibling:(p,y)=>p.query().prevSibling(y),first:p=>p.length>0?oe.some(p[p.length-1]):oe.none()}),right:()=>({sibling:(p,y)=>p.query().nextSibling(y),first:p=>p.length>0?oe.some(p[0]):oe.none()})},Fy=(l,f,p,y,_,O)=>rx(l,f,y,_).bind(U=>O(U.item)?oe.none():p(U.item)?oe.some(U.item):Fy(l,U.item,p,U.mode,_,O)),Ly=(l,f,p,y)=>Fy(l,f,p,cg,ru.left(),y),g4=(l,f,p,y)=>Fy(l,f,p,cg,ru.right(),y),Hy=l=>f=>l.property().children(f).length===0,ax=(l,f,p)=>ix(l,f,Hy(l),p),cx=(l,f,p)=>lg(l,f,Hy(l),p),ix=Ly,lg=g4,wb=Yu(),Rf=(l,f)=>ax(wb,l,f),au=(l,f)=>cx(wb,l,f),Qh=(l,f,p)=>ix(wb,l,f,p),ug=(l,f,p)=>lg(wb,l,f,p),h4=(l,f,p)=>jo(l,f,p).isSome(),Hi=vl.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),ac=(l,f,p)=>{const y=l.getRect(f),_=l.getRect(p);return _.right>y.left&&_.left<y.right},Sb=l=>or(l,"tr"),Df={...Hi,verify:(l,f,p,y,_,O,$)=>or(y,"td,th",$).bind(U=>or(f,"td,th",$).map(G=>yo(U,G)?yo(y,U)&&Yl(U)===_?O(G):Hi.none("in same cell"):ni(Sb,[U,G]).fold(()=>ac(l,G,U)?Hi.success():O(G),Q=>O(G)))).getOr(Hi.none("default")),cata:(l,f,p,y,_)=>l.fold(f,p,y,_)},dg=(l,f,p,y)=>({parent:l,children:f,element:p,index:y}),fg=l=>zl(l).bind(f=>{const p=no(f);return xr(p,l).map(y=>dg(f,p,l,y))}),xr=(l,f)=>lm(l,Tn(yo,f)),xb=la("br"),Mf=(l,f,p)=>f(l,p).bind(y=>qd(y)&&Rv(y).trim().length===0?Mf(y,f,p):oe.some(y)),_b=(l,f,p)=>p.traverse(f).orThunk(()=>Mf(f,p.gather,l)).map(p.relative),lx=(l,f)=>Ka(l,f).filter(xb).orThunk(()=>Ka(l,f-1).filter(xb)),Vy=(l,f,p,y)=>lx(f,p).bind(_=>y.traverse(_).fold(()=>Mf(_,y.gather,l).map(y.relative),O=>fg(O).map($=>ta.on($.parent,$.index)))),Eb=(l,f,p,y)=>(xb(f)?_b(l,f,y):Vy(l,f,p,y)).map(O=>({start:O,finish:O})),Ps=l=>Df.cata(l,f=>oe.none(),()=>oe.none(),f=>oe.some(Ba(f,0)),f=>oe.some(Ba(f,Yl(f)))),Tb=(l,f)=>({left:l.left,top:l.top+f,right:l.right,bottom:l.bottom+f}),ri=(l,f)=>({left:l.left,top:l.top-f,right:l.right,bottom:l.bottom-f}),zy=(l,f,p)=>({left:l.left+f,top:l.top+p,right:l.right+f,bottom:l.bottom+p}),Uy=l=>l.top,cu=l=>l.bottom,ux=(l,f,p)=>p>=0&&p<Yl(f)?l.getRangedRect(f,p,f,p+1):p>0?l.getRangedRect(f,p-1,f,p):oe.none(),md=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom}),kb=(l,f)=>oe.some(l.getRect(f)),Ob=(l,f,p)=>Ea(f)?kb(l,f).map(md):qd(f)?ux(l,f,p).map(md):oe.none(),Wy=(l,f)=>Ea(f)?kb(l,f).map(md):qd(f)?l.getRangedRect(f,0,f,Yl(f)).map(md):oe.none(),Pf=5,mg=100,ir=vl.generate([{none:[]},{retry:["caret"]}]),dx=(l,f)=>l.left<f.left||Math.abs(f.right-l.left)<1||l.left>f.right,Zy=(l,f,p)=>ch(f,he).fold(_n,y=>Wy(l,y).exists(_=>dx(p,_))),jy=(l,f,p,y,_)=>{const O=Tb(_,Pf);return Math.abs(p.bottom-y.bottom)<1||p.top>_.bottom?ir.retry(O):p.top===_.bottom?ir.retry(Tb(_,1)):Zy(l,f,_)?ir.retry(zy(O,Pf,0)):ir.none()},Gy={point:Uy,adjuster:(l,f,p,y,_)=>{const O=ri(_,Pf);return Math.abs(p.top-y.top)<1||p.bottom<_.top?ir.retry(O):p.bottom===_.top?ir.retry(ri(_,1)):Zy(l,f,_)?ir.retry(zy(O,Pf,0)):ir.none()},move:ri,gather:Rf},mx={point:cu,adjuster:jy,move:Tb,gather:au},gx=(l,f,p)=>l.elementFromPoint(f,p).filter(y=>_o(y)==="table").isSome(),cc=(l,f,p,y,_)=>iu(l,f,p,f.move(y,Pf),_),iu=(l,f,p,y,_)=>_===0?oe.some(y):gx(l,y.left,f.point(y))?cc(l,f,p,y,_-1):l.situsFromPoint(y.left,f.point(y)).bind(O=>O.start.fold(oe.none,$=>Wy(l,$).bind(U=>f.adjuster(l,$,U,p,y).fold(oe.none,G=>iu(l,f,p,G,_-1))).orThunk(()=>oe.some(y)),oe.none)),hx=(l,f,p)=>l.point(f)>p.getInnerHeight()?oe.some(l.point(f)-p.getInnerHeight()):l.point(f)<0?oe.some(-l.point(f)):oe.none(),Nf=(l,f,p)=>{const y=l.move(p,Pf),_=iu(f,l,p,y,mg).getOr(y);return hx(l,_,f).fold(()=>f.situsFromPoint(_.left,l.point(_)),O=>(f.scrollBy(0,O),f.situsFromPoint(_.left,l.point(_)-O)))},Lr={tryUp:Tn(Nf,Gy),tryDown:Tn(Nf,mx),getJumpSize:ee(Pf)},La=20,Hr=(l,f,p)=>l.getSelection().bind(y=>Eb(f,y.finish,y.foffset,p).fold(()=>oe.some(Ba(y.finish,y.foffset)),_=>{const O=l.fromSitus(_),$=Df.verify(l,y.finish,y.foffset,O.finish,O.foffset,p.failure,f);return Ps($)})),ic=(l,f,p,y,_,O)=>O===0?oe.none():Bf(l,f,p,y,_).bind($=>{const U=l.fromSitus($),G=Df.verify(l,p,y,U.finish,U.foffset,_.failure,f);return Df.cata(G,()=>oe.none(),()=>oe.some($),Q=>yo(p,Q)&&y===0?Ab(l,p,y,ri,_):ic(l,f,Q,0,_,O-1),Q=>yo(p,Q)&&y===Yl(Q)?Ab(l,p,y,Tb,_):ic(l,f,Q,Yl(Q),_,O-1))}),Ab=(l,f,p,y,_)=>Ob(l,f,p).bind(O=>lc(l,_,y(O,Lr.getJumpSize()))),lc=(l,f,p)=>{const y=rf().browser;return y.isChromium()||y.isSafari()||y.isFirefox()?f.retry(l,p):oe.none()},Bf=(l,f,p,y,_)=>Ob(l,p,y).bind(O=>lc(l,_,O)),b4=(l,f,p)=>Hr(l,f,p).bind(y=>ic(l,f,y.element,y.offset,p,La).map(l.fromSitus)),px=(l,f)=>h4(l,p=>zl(p).exists(y=>yo(y,f))),v4=(l,f,p,y,_)=>or(y,"td,th",f).bind(O=>or(O,"table",f).bind($=>px(_,$)?b4(l,f,p).bind(U=>or(U.finish,"td,th",f).map(G=>({start:O,finish:G,range:U}))):oe.none())),bx=(l,f,p,y,_,O)=>O(y,f).orThunk(()=>v4(l,f,p,y,_).map($=>{const U=$.range;return ud.create(oe.some(vb(U.start,U.soffset,U.finish,U.foffset)),!0)})),vx=(l,f)=>or(l,"tr",f).bind(p=>or(p,"table",f).bind(y=>{const _=ka(y,"tr");return yo(p,_[0])?Qh(y,O=>O1(O).isSome(),f).map(O=>{const $=Yl(O);return ud.create(oe.some(vb(O,$,O,$)),!0)}):oe.none()})),qy=(l,f)=>or(l,"tr",f).bind(p=>or(p,"table",f).bind(y=>{const _=ka(y,"tr");return yo(p,_[_.length-1])?ug(y,O=>df(O).isSome(),f).map(O=>ud.create(oe.some(vb(O,0,O,0)),!0)):oe.none()})),Ky=(l,f,p,y,_,O,$)=>v4(l,p,y,_,O).bind(U=>fd(f,p,U.start,U.finish,$)),qs=l=>{let f=l;return{get:()=>f,set:_=>{f=_}}},Yy=l=>{const f=qs(oe.none()),p=()=>f.get().each(l);return{clear:()=>{p(),f.set(oe.none())},isSet:()=>f.get().isSome(),get:()=>f.get(),set:U=>{p(),f.set(oe.some(U))}}},gd=()=>{const l=Yy(Ne);return{...l,on:p=>l.get().each(p)}},gg=(l,f)=>or(l,"td,th",f),Xy=l=>zc(l).exists(_h),Rb=(l,f,p,y)=>{const _=gd(),O=_.clear,$=fe=>{_.on(Pe=>{y.clearBeforeUpdate(f),gg(fe.target,p).each(tt=>{Hm(Pe,tt,p).each(Ye=>{const We=Ye.boxes.getOr([]);if(We.length===1){const gt=We[0],Re=qw(gt)==="false",je=hm(xh(fe.target),gt,yo);Re&&je&&(y.selectRange(f,We,gt,gt),l.selectContents(gt))}else We.length>1&&(y.selectRange(f,We,Ye.start,Ye.finish),l.selectContents(tt))})})})};return{clearstate:O,mousedown:fe=>{y.clear(f),gg(fe.target,p).filter(Xy).each(_.set)},mouseover:fe=>{$(fe)},mouseup:fe=>{$(fe),O()}}},ep={traverse:gm,gather:au,relative:ta.before,retry:Lr.tryDown,failure:Df.failedDown},Jy={traverse:oh,gather:Rf,relative:ta.before,retry:Lr.tryUp,failure:Df.failedUp},hg=l=>f=>f===l,Qy=hg(38),Cl=hg(40),$f=l=>l>=37&&l<=40,yx={isBackward:hg(37),isForward:hg(39)},lu={isBackward:hg(39),isForward:hg(37)},uc=l=>{const f=l!==void 0?l.dom:document,p=f.body.scrollLeft||f.documentElement.scrollLeft,y=f.body.scrollTop||f.documentElement.scrollTop;return Aa(p,y)},Cx=(l,f,p)=>{const _=(p!==void 0?p.dom:document).defaultView;_&&_.scrollBy(l,f)},wl=vl.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),If=l=>wl.exact(l.start,l.soffset,l.finish,l.foffset),e2=l=>l.match({domRange:f=>le.fromDom(f.startContainer),relative:(f,p)=>ta.getStart(f),exact:(f,p,y,_)=>f}),Db=wl.domRange,wx=wl.relative,y4=wl.exact,C4=l=>{const f=e2(l);return ms(f)},Sx=Af.create,hd={domRange:Db,relative:wx,exact:y4,exactFromRange:If,getWin:C4,range:Sx},pg=(l,f,p)=>{var y,_;return oe.from((_=(y=l.dom).caretPositionFromPoint)===null||_===void 0?void 0:_.call(y,f,p)).bind(O=>{if(O.offsetNode===null)return oe.none();const $=l.dom.createRange();return $.setStart(O.offsetNode,O.offset),$.collapse(),oe.some($)})},tp=(l,f,p)=>{var y,_;return oe.from((_=(y=l.dom).caretRangeFromPoint)===null||_===void 0?void 0:_.call(y,f,p))},w4=document.caretPositionFromPoint?pg:document.caretRangeFromPoint?tp:oe.none,S4=(l,f,p)=>{const y=le.fromDom(l.document);return w4(y,f,p).map(_=>Af.create(le.fromDom(_.startContainer),_.startOffset,le.fromDom(_.endContainer),_.endOffset))},bg=(l,f)=>{const p=_o(l);return p==="input"?ta.after(l):ns(["br","img"],p)?f===0?ta.before(l):ta.after(l):ta.on(l,f)},t2=(l,f)=>{const p=l.fold(ta.before,bg,ta.after),y=f.fold(ta.before,bg,ta.after);return hd.relative(p,y)},Mb=(l,f,p,y)=>{const _=bg(l,f),O=bg(p,y);return hd.relative(_,O)},n2=(l,f,p,y)=>{const O=nh(l).dom.createRange();return O.setStart(l.dom,f),O.setEnd(p.dom,y),O},o2=(l,f,p,y)=>{const _=n2(l,f,p,y),O=yo(l,p)&&f===y;return _.collapsed&&!O},vg=l=>oe.from(l.getSelection()),s2=(l,f)=>{vg(l).each(p=>{p.removeAllRanges(),p.addRange(f)})},yg=(l,f,p,y,_)=>{const O=hb(l,f,p,y,_);s2(l,O)},r2=(l,f,p,y,_,O)=>{f.collapse(p.dom,y),f.extend(_.dom,O)},wn=(l,f)=>$y(l,f).match({ltr:(p,y,_,O)=>{yg(l,p,y,_,O)},rtl:(p,y,_,O)=>{vg(l).each($=>{if($.setBaseAndExtent)$.setBaseAndExtent(p.dom,y,_.dom,O);else if($.extend)try{r2(l,$,p,y,_,O)}catch{yg(l,_,O,p,y)}else yg(l,_,O,p,y)})}}),Sl=(l,f,p,y,_)=>{const O=Mb(f,p,y,_);wn(l,O)},Ff=(l,f,p)=>{const y=t2(f,p);wn(l,y)},np=l=>{if(l.rangeCount>0){const f=l.getRangeAt(0),p=l.getRangeAt(l.rangeCount-1);return oe.some(Af.create(le.fromDom(f.startContainer),f.startOffset,le.fromDom(p.endContainer),p.endOffset))}else return oe.none()},a2=l=>{if(l.anchorNode===null||l.focusNode===null)return np(l);{const f=le.fromDom(l.anchorNode),p=le.fromDom(l.focusNode);return o2(f,l.anchorOffset,p,l.focusOffset)?oe.some(Af.create(f,l.anchorOffset,p,l.focusOffset)):np(l)}},uu=(l,f,p=!0)=>{const _=(p?dd:r4)(l,f);s2(l,_)},c2=l=>vg(l).filter(f=>f.rangeCount>0).bind(a2),Pb=l=>c2(l).map(f=>hd.exact(f.start,f.soffset,f.finish,f.foffset)),i2=(l,f)=>{const p=bb(l,f);return i4(p)},l2=(l,f,p)=>S4(l,f,p),Lf=l=>{vg(l).each(f=>f.removeAllRanges())},Nb=l=>({elementFromPoint:(Re,je)=>le.fromPoint(le.fromDom(l.document),Re,je),getRect:Re=>Re.dom.getBoundingClientRect(),getRangedRect:(Re,je,At,Je)=>{const An=hd.exact(Re,je,At,Je);return i2(l,An)},getSelection:()=>Pb(l).map(Re=>sx(l,Re)),fromSitus:Re=>{const je=hd.relative(Re.start,Re.finish);return sx(l,je)},situsFromPoint:(Re,je)=>l2(l,Re,je).map(At=>Iy.create(At.start,At.soffset,At.finish,At.foffset)),clearSelection:()=>{Lf(l)},collapseSelection:(Re=!1)=>{Pb(l).each(je=>je.fold(At=>At.collapse(Re),(At,Je)=>{const An=Re?At:Je;Ff(l,An,An)},(At,Je,An,jn)=>{const Hn=Re?At:An,Ks=Re?Je:jn;Sl(l,Hn,Ks,Hn,Ks)}))},setSelection:Re=>{Sl(l,Re.start,Re.soffset,Re.finish,Re.foffset)},setRelativeSelection:(Re,je)=>{Ff(l,Re,je)},selectNode:Re=>{uu(l,Re,!1)},selectContents:Re=>{uu(l,Re)},getInnerHeight:()=>l.innerHeight,getScrollY:()=>uc(le.fromDom(l.document)).top,scrollBy:(Re,je)=>{Cx(Re,je,le.fromDom(l.document))}}),Hf=(l,f)=>({rows:l,cols:f}),Bb=(l,f,p,y)=>{const _=Nb(l),O=Rb(_,f,p,y);return{clearstate:O.clearstate,mousedown:O.mousedown,mouseover:O.mouseover,mouseup:O.mouseup}},xx=l=>ch(l,Ft).exists(_h),Cg=(l,f)=>xx(l)||xx(f),$b=(l,f,p,y)=>{const _=Nb(l),O=()=>(y.clear(f),oe.none());return{keydown:(G,Q,fe,Pe,tt,Ye)=>{const We=G.raw,gt=We.which,Re=We.shiftKey===!0;return Dh(f,y.selectedSelector).fold(()=>($f(gt)&&!Re&&y.clearBeforeUpdate(f),$f(gt)&&Re&&!Cg(Q,Pe)?oe.none:Cl(gt)&&Re?Tn(Ky,_,f,p,ep,Pe,Q,y.selectRange):Qy(gt)&&Re?Tn(Ky,_,f,p,Jy,Pe,Q,y.selectRange):Cl(gt)?Tn(bx,_,p,ep,Pe,Q,qy):Qy(gt)?Tn(bx,_,p,Jy,Pe,Q,vx):oe.none),At=>{const Je=An=>()=>Rr(An,Hn=>uM(Hn.rows,Hn.cols,f,At,y)).fold(()=>nS(f,y.firstSelectedSelector,y.lastSelectedSelector).map(Hn=>{const Ks=Cl(gt)||Ye.isForward(gt)?ta.after:ta.before;return _.setRelativeSelection(ta.on(Hn.first,0),Ks(Hn.table)),y.clear(f),ud.create(oe.none(),!0)}),Hn=>oe.some(ud.create(oe.none(),!0)));return $f(gt)&&Re&&!Cg(Q,Pe)?oe.none:Cl(gt)&&Re?Je([Hf(1,0)]):Qy(gt)&&Re?Je([Hf(-1,0)]):Ye.isBackward(gt)&&Re?Je([Hf(0,-1),Hf(-1,0)]):Ye.isForward(gt)&&Re?Je([Hf(0,1),Hf(1,0)]):$f(gt)&&!Re?O:oe.none})()},keyup:(G,Q,fe,Pe,tt)=>Dh(f,y.selectedSelector).fold(()=>{const Ye=G.raw,We=Ye.which;return Ye.shiftKey===!0&&$f(We)&&Cg(Q,Pe)?d4(f,p,Q,fe,Pe,tt,y.selectRange):oe.none()},oe.none)}},x4=(l,f,p,y)=>{const _=Nb(l);return(O,$)=>{y.clearBeforeUpdate(f),Hm(O,$,p).each(U=>{const G=U.boxes.getOr([]);y.selectRange(f,G,U.start,U.finish),_.selectContents($),_.collapseSelection()})}},Ib=(l,f)=>{const p=Hl(l,f);return p===void 0||p===""?[]:p.split(" ")},du=(l,f,p)=>{const _=Ib(l,f).concat([p]);return xs(l,f,_.join(" ")),!0},_4=(l,f,p)=>{const y=os(Ib(l,f),_=>_!==p);return y.length>0?xs(l,f,y.join(" ")):Do(l,f),!1},op=l=>l.dom.classList!==void 0,Ac=l=>Ib(l,"class"),Ns=(l,f)=>du(l,"class",f),E4=(l,f)=>_4(l,"class",f),Vi=(l,f)=>{op(l)?l.dom.classList.add(f):Ns(l,f)},T4=l=>{(op(l)?l.dom.classList:Ac(l)).length===0&&Do(l,"class")},_x=(l,f)=>{op(l)?l.dom.classList.remove(f):E4(l,f),T4(l)},sp=(l,f)=>op(l)&&l.dom.classList.contains(f),wg=(l,f)=>{Be(f,p=>{_x(l,p)})},Ex=l=>f=>{Vi(f,l)},Tx=l=>f=>{wg(f,l)},kx={byClass:l=>{const f=Ex(l.selected),p=Tx([l.selected,l.lastSelected,l.firstSelected]),y=O=>{const $=ka(O,l.selectedSelector);Be($,p)};return{clearBeforeUpdate:y,clear:y,selectRange:(O,$,U,G)=>{y(O),Be($,f),Vi(U,l.firstSelected),Vi(G,l.lastSelected)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}},byAttr:(l,f,p)=>{const y=G=>{Do(G,l.selected),Do(G,l.firstSelected),Do(G,l.lastSelected)},_=G=>{xs(G,l.selected,"1")},O=G=>{$(G),p()},$=G=>{const Q=ka(G,`${l.selectedSelector},${l.firstSelectedSelector},${l.lastSelectedSelector}`);Be(Q,y)};return{clearBeforeUpdate:$,clear:O,selectRange:(G,Q,fe,Pe)=>{O(G),Be(Q,_),xs(fe,l.firstSelected,"1"),xs(Pe,l.lastSelected,"1"),f(Q,fe,Pe)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}}},Ox=(l,f,p,y)=>{switch(l.tag){case"none":return f();case"single":return y(l.element);case"multiple":return p(l.elements)}},it=()=>({tag:"none"}),Bs=l=>({tag:"multiple",elements:l}),rp=l=>({tag:"single",element:l}),$s=(l,f,p)=>({get:()=>Xu(l(),p).fold(()=>f().fold(it,rp),Bs)}),Rc=(l,f)=>{const p=l.slice(0,f[f.length-1].row+1),y=z1(p);return Ss(y,_=>{const O=_.cells.slice(0,f[f.length-1].column+1);return jt(O,$=>$.element)})},u2=(l,f)=>{const p=l.slice(f[0].row+f[0].rowspan-1,l.length),y=z1(p);return Ss(y,_=>{const O=_.cells.slice(f[0].column+f[0].colspan-1,_.cells.length);return jt(O,$=>$.element)})},Vf=(l,f,p)=>{const y=gn.fromTable(l);return Bi(y,f).map(O=>{const $=Gm(y,p,!1),{rows:U}=Vs($),G=Rc(U,O),Q=u2(U,O);return{upOrLeftCells:G,downOrRightCells:Q}})},Fb=(l,f,p,y,_,O,$)=>({target:l,x:f,y:p,stop:y,prevent:_,kill:O,raw:$}),pd=l=>{const f=le.fromDom(ct(l).getOr(l.target)),p=()=>l.stopPropagation(),y=()=>l.preventDefault(),_=fn(y,p);return Fb(f,l.clientX,l.clientY,p,y,_,l)},ap=(l,f)=>p=>{l(p)&&f(pd(p))},Ax=(l,f,p,y,_)=>{const O=ap(p,y);return l.dom.addEventListener(f,O,_),{unbind:Tn(O4,l,f,O,_)}},k4=(l,f,p,y)=>Ax(l,f,p,y,!1),O4=(l,f,p,y)=>{l.dom.removeEventListener(f,p,y)},A4=Ae,bd=(l,f,p)=>k4(l,f,A4,p),cp=pd,ip=l=>!sp(le.fromDom(l.target),"ephox-snooker-resizer-bar"),Lb=(l,f)=>{const p=$s(()=>le.fromDom(l.getBody()),()=>zv(ti(l),ml(l)),eu.selectedSelector),y=(G,Q,fe)=>{Oa(Q).each(tt=>{const Ye=jt(G,At=>At.dom),We=Gw(l),gt=Bm(Ne,le.fromDom(l.getDoc()),We),Re=oo(l),je=Vf(tt,{selection:Re},gt).map(At=>eh(At,Je=>jt(Je,An=>An.dom))).getOrUndefined();Gk(l,Ye,Q.dom,fe.dom,je)})},_=()=>qk(l),O=kx.byAttr(eu,y,_);return l.on("init",G=>{const Q=l.getWin(),fe=gf(l),Pe=ml(l),tt=()=>{const In=l.selection,oa=le.fromDom(In.getStart()),sa=le.fromDom(In.getEnd());ni(Oa,[oa,sa]).fold(()=>O.clear(fe),Ne)},Ye=Bb(Q,fe,Pe,O),We=$b(Q,fe,Pe,O),gt=x4(Q,fe,Pe,O),Re=In=>In.raw.shiftKey===!0;l.on("TableSelectorChange",In=>gt(In.start,In.finish));const je=(In,oa)=>{Re(In)&&(oa.kill&&In.kill(),oa.selection.each(sa=>{const Mc=hd.relative(sa.start,sa.finish),Pc=bb(Q,Mc);l.selection.setRng(Pc)}))},At=In=>{const oa=cp(In);if(oa.raw.shiftKey&&$f(oa.raw.which)){const sa=l.selection.getRng(),Mc=le.fromDom(sa.startContainer),Pc=le.fromDom(sa.endContainer);We.keyup(oa,Mc,sa.startOffset,Pc,sa.endOffset).each(ln=>{je(oa,ln)})}},Je=In=>{const oa=cp(In);f.hide();const sa=l.selection.getRng(),Mc=le.fromDom(sa.startContainer),Pc=le.fromDom(sa.endContainer),ln=Bw(yx,lu)(le.fromDom(l.selection.getStart()));We.keydown(oa,Mc,sa.startOffset,Pc,sa.endOffset,ln).each(Ho=>{je(oa,Ho)}),f.show()},An=In=>In.button===0,jn=In=>In.buttons===void 0?!0:(In.buttons&1)!==0,Hn=In=>{Ye.clearstate()},Ks=In=>{An(In)&&ip(In)&&Ye.mousedown(cp(In))},ls=In=>{jn(In)&&ip(In)&&Ye.mouseover(cp(In))},_l=In=>{An(In)&&ip(In)&&Ye.mouseup(cp(In))},Sd=(()=>{const In=qs(le.fromDom(fe)),oa=qs(0);return{touchEnd:Mc=>{const Pc=le.fromDom(Mc.target);if(la("td")(Pc)||la("th")(Pc)){const ln=In.get(),Ho=oa.get();yo(ln,Pc)&&Mc.timeStamp-Ho<300&&(Mc.preventDefault(),gt(Pc,Pc))}In.set(Pc),oa.set(Mc.timeStamp)}}})();l.on("dragstart",Hn),l.on("mousedown",Ks),l.on("mouseover",ls),l.on("mouseup",_l),l.on("touchend",Sd.touchEnd),l.on("keyup",At),l.on("keydown",Je),l.on("NodeChange",tt)}),l.on("PreInit",()=>{l.serializer.addTempAttr(eu.firstSelected),l.serializer.addTempAttr(eu.lastSelected)}),{getSelectedCells:()=>Ox(p.get(),ee([]),G=>jt(G,Q=>Q.dom),G=>[G.dom]),clearSelectedCells:G=>O.clear(le.fromDom(G))}},Ha=l=>{let f=[];return{bind:O=>{if(O===void 0)throw new Error("Event bind error: undefined handler");f.push(O)},unbind:O=>{f=os(f,$=>$!==O)},trigger:(...O)=>{const $={};Be(l,(U,G)=>{$[U]=O[G]}),Be(f,U=>{U($)})}}},xl=l=>{const f=eh(l,y=>({bind:y.bind,unbind:y.unbind})),p=eh(l,y=>y.trigger);return{registry:f,trigger:p}},vd=(l,f)=>{let p=null;const y=()=>{Qe(p)||(clearTimeout(p),p=null)};return{cancel:y,throttle:(...O)=>{y(),p=setTimeout(()=>{p=null,l.apply(null,O)},f)}}},yd=l=>l.slice(0).sort(),R4=(l,f)=>{throw new Error("All required keys ("+yd(l).join(", ")+") were not specified. Specified keys were: "+yd(f).join(", ")+".")},Hb=l=>{throw new Error("Unsupported keys for object: "+yd(l).join(", "))},Vb=(l,f)=>{if(!ye(f))throw new Error("The "+l+" fields must be an array. Was: "+f+".");Be(f,p=>{if(!j(p))throw new Error("The value "+p+" in the "+l+" fields was not a string.")})},D4=(l,f)=>{throw new Error("All values need to be of type: "+f+". Keys ("+yd(l).join(", ")+") were not.")},M4=l=>{const f=yd(l);L(f,(y,_)=>_<f.length-1&&y===f[_+1]).each(y=>{throw new Error("The field: "+y+" occurs more than once in the combined fields: ["+f.join(", ")+"].")})},P4=(l,f)=>N4(l,f,{validate:Zt,label:"function"}),N4=(l,f,p)=>{if(f.length===0)throw new Error("You must specify at least one required field.");return Vb("required",f),M4(f),y=>{const _=Mt(y);bo(f,U=>ns(_,U))||R4(f,_),l(f,_);const $=os(f,U=>!p.validate(y[U],U));return $.length>0&&D4($,p.label),y}},Rx=(l,f)=>{const p=os(f,y=>!ns(l,y));p.length>0&&Hb(p)},zb=l=>P4(Rx,l),B4=zb(["compare","extract","mutate","sink"]),Ub=zb(["element","start","stop","destroy"]),lr=zb(["forceDrop","drop","move","delayDrop"]),Dc=()=>{let l=oe.none();const f=()=>{l=oe.none()},p=(O,$)=>{const U=l.map(G=>O.compare(G,$));return l=oe.some($),U},y=(O,$)=>{$.extract(O).each(G=>{p($,G).each(fe=>{_.trigger.move(fe)})})},_=xl({move:Ha(["info"])});return{onEvent:y,reset:f,events:_.registry}},dc=()=>{const l=xl({move:Ha(["info"])});return{onEvent:Ne,reset:Ne,events:l.registry}},Wb=()=>{const l=dc(),f=Dc();let p=l;return{on:()=>{p.reset(),p=f},off:()=>{p.reset(),p=l},isOn:()=>p===f,onEvent:(U,G)=>{p.onEvent(U,G)},events:f.events}},Zb=(l,f,p)=>{let y=!1;const _=xl({start:Ha([]),stop:Ha([])}),O=Wb(),$=()=>{We.stop(),O.isOn()&&(O.off(),_.trigger.stop())},U=vd($,200),G=Re=>{We.start(Re),O.on(),_.trigger.start()},Q=Re=>{U.cancel(),O.onEvent(Re,f)};O.events.move.bind(Re=>{f.mutate(l,Re.info)});const fe=()=>{y=!0},Pe=()=>{y=!1},tt=()=>y,Ye=Re=>(...je)=>{y&&Re.apply(null,je)},We=f.sink(lr({forceDrop:$,drop:Ye($),move:Ye(Q),delayDrop:Ye(U.throttle)}),p),gt=()=>{We.destroy()};return{element:We.element,go:G,on:fe,off:Pe,isActive:tt,destroy:gt,events:_.registry}},Dx=l=>{const f=l.replace(/\./g,"-");return{resolve:y=>f+"-"+y}},Mx=Dx("ephox-dragster").resolve,f2=l=>{const f={layerClass:Mx("blocker"),...l},p=le.fromTag("div");return xs(p,"role","presentation"),ih(p,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Vi(p,Mx("blocker")),Vi(p,f.layerClass),{element:ee(p),destroy:()=>{fr(p)}}};var jb=B4({compare:(l,f)=>Aa(f.left-l.left,f.top-l.top),extract:l=>oe.some(Aa(l.x,l.y)),sink:(l,f)=>{const p=f2(f),y=bd(p.element(),"mousedown",l.forceDrop),_=bd(p.element(),"mouseup",l.drop),O=bd(p.element(),"mousemove",l.move),$=bd(p.element(),"mouseout",l.delayDrop),U=()=>{p.destroy(),_.unbind(),O.unbind(),$.unbind(),y.unbind()},G=fe=>{Jo(fe,p.element())},Q=()=>{fr(p.element())};return Ub({element:p.element,start:G,stop:Q,destroy:U})},mutate:(l,f)=>{l.mutate(f.left,f.top)}});const m2=(l,f={})=>{var p;const y=(p=f.mode)!==null&&p!==void 0?p:jb;return Zb(l,y,f)},na=Dx("ephox-snooker").resolve,Bx=()=>{const l=xl({drag:Ha(["xDelta","yDelta"])});return{mutate:(p,y)=>{l.trigger.drag(p,y)},events:l.registry}},g2=()=>{const l=xl({drag:Ha(["xDelta","yDelta","target"])});let f=oe.none();const p=Bx();return p.events.drag.bind(O=>{f.each($=>{l.trigger.drag(O.xDelta,O.yDelta,$)})}),{assign:O=>{f=oe.some(O)},get:()=>f,mutate:p.mutate,events:l.registry}},lp=(l,f,p,y,_)=>{const O=le.fromTag("div");return ih(O,{position:"absolute",left:f-y/2+"px",top:p+"px",height:_+"px",width:y+"px"}),nl(O,{"data-column":l,role:"presentation"}),O},up=(l,f,p,y,_)=>{const O=le.fromTag("div");return ih(O,{position:"absolute",left:f+"px",top:p-_/2+"px",height:_+"px",width:y+"px"}),nl(O,{"data-row":l,role:"presentation"}),O},Gb=na("resizer-bar"),dp=na("resizer-rows"),$x=na("resizer-cols"),Ix=7,h2=(l,f)=>Ss(l.all,(p,y)=>f(p.element)?[y]:[]),p2=(l,f)=>{const p=[];return zo(l.grid.columns,y=>{gn.getColumnAt(l,y).map(O=>O.element).forall(f)&&p.push(y)}),os(p,y=>{const _=gn.filterItems(l,O=>O.column===y);return bo(_,O=>f(O.element))})},fu=l=>{const f=ka(l.parent(),"."+Gb);Be(f,fr)},b2=(l,f,p)=>{const y=l.origin();Be(f,_=>{_.each(O=>{const $=p(y,O);Vi($,Gb),Jo(l.parent(),$)})})},Fx=(l,f,p,y)=>{b2(l,f,(_,O)=>{const $=lp(O.col,O.x-_.left,p.top-_.top,Ix,y);return Vi($,$x),$})},F4=(l,f,p,y)=>{b2(l,f,(_,O)=>{const $=up(O.row,p.left-_.left,O.y-_.top,y,Ix);return Vi($,dp),$})},L4=(l,f,p,y,_)=>{const O=Am(p),$=f.isResizable,U=y.length>0?pr.positions(y,p):[],G=U.length>0?h2(l,$):[],Q=os(U,(Ye,We)=>et(G,gt=>We===gt));F4(f,Q,O,Mn(p));const fe=_.length>0?S1.positions(_,p):[],Pe=fe.length>0?p2(l,$):[],tt=os(fe,(Ye,We)=>et(Pe,gt=>We===gt));Fx(f,tt,O,bv(p))},Lx=(l,f)=>{if(fu(l),l.isResizable(f)){const p=gn.fromTable(f),y=w1(p),_=km(p);L4(p,l,f,y,_)}},pa=(l,f)=>{const p=ka(l.parent(),"."+Gb);Be(p,f)},Vr=l=>{pa(l,f=>{Co(f,"display","none")})},Sg=l=>{pa(l,f=>{Co(f,"display","block")})},gM=l=>sp(l,dp),H4=l=>sp(l,$x),v2=na("resizer-bar-dragging"),yn=l=>{const f=g2(),p=m2(f,{});let y=oe.none();const _=(We,gt)=>oe.from(Hl(We,gt));f.events.drag.bind(We=>{_(We.target,"data-row").each(gt=>{const Re=Gc(We.target,"top");Co(We.target,"top",Re+We.yDelta+"px")}),_(We.target,"data-column").each(gt=>{const Re=Gc(We.target,"left");Co(We.target,"left",Re+We.xDelta+"px")})});const O=(We,gt)=>{const Re=Gc(We,gt),je=Es(We,"data-initial-"+gt,0);return Re-je};p.events.stop.bind(()=>{f.get().each(We=>{y.each(gt=>{_(We,"data-row").each(Re=>{const je=O(We,"top");Do(We,"data-initial-top"),Ye.trigger.adjustHeight(gt,je,parseInt(Re,10))}),_(We,"data-column").each(Re=>{const je=O(We,"left");Do(We,"data-initial-left"),Ye.trigger.adjustWidth(gt,je,parseInt(Re,10))}),Lx(l,gt)})})});const $=(We,gt)=>{Ye.trigger.startAdjust(),f.assign(We),xs(We,"data-initial-"+gt,Gc(We,gt)),Vi(We,v2),Co(We,"opacity","0.2"),p.go(l.parent())},U=bd(l.parent(),"mousedown",We=>{gM(We.target)&&$(We.target,"top"),H4(We.target)&&$(We.target,"left")}),G=We=>yo(We,l.view()),Q=We=>or(We,"table",G).filter(_h),fe=bd(l.view(),"mouseover",We=>{Q(We.target).fold(()=>{Fo(We.target)&&fu(l)},gt=>{p.isActive()&&(y=oe.some(gt),Lx(l,gt))})}),Pe=()=>{U.unbind(),fe.unbind(),p.destroy(),fu(l)},tt=We=>{Lx(l,We)},Ye=xl({adjustHeight:Ha(["table","delta","row"]),adjustWidth:Ha(["table","delta","column"]),startAdjust:Ha([])});return{destroy:Pe,refresh:tt,on:p.on,off:p.off,hideBars:Tn(Vr,l),showBars:Tn(Sg,l),events:Ye.registry}},Hx={create:(l,f,p)=>{const y=pr,_=S1,O=yn(l),$=xl({beforeResize:Ha(["table","type"]),afterResize:Ha(["table","type"]),startDrag:Ha([])});return O.events.adjustHeight.bind(U=>{const G=U.table;$.trigger.beforeResize(G,"row");const Q=y.delta(U.delta,G);ny(G,Q,U.row),$.trigger.afterResize(G,"row")}),O.events.startAdjust.bind(U=>{$.trigger.startDrag()}),O.events.adjustWidth.bind(U=>{const G=U.table;$.trigger.beforeResize(G,"col");const Q=_.delta(U.delta,G),fe=p(G);yS(G,Q,U.column,f,fe),$.trigger.afterResize(G,"col")}),{on:O.on,off:O.off,refreshBars:O.refresh,hideBars:O.hideBars,showBars:O.showBars,destroy:O.destroy,events:$.registry}}},fp={only:(l,f)=>{const p=r1(l)?dr(l):l;return{parent:ee(p),view:ee(l),origin:ee(Aa(0,0)),isResizable:f}},detached:(l,f,p)=>{const y=()=>Am(f);return{parent:ee(f),view:ee(l),origin:y,isResizable:p}},body:(l,f,p)=>({parent:ee(f),view:ee(l),origin:ee(Aa(0,0)),isResizable:p})},V4=()=>{const l=le.fromTag("div");return ih(l,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),Jo(tr(),l),l},z4=(l,f)=>l.inline?fp.body(le.fromDom(l.getBody()),V4(),f):fp.only(le.fromDom(l.getDoc()),f),U4=(l,f)=>{l.inline&&fr(f.parent())},qb=l=>xn(l)&&l.nodeName==="TABLE",mp="bar-",zx=l=>Hl(l,"data-mce-resize")!=="false",bM=l=>{const f=gn.fromTable(l);gn.hasColumns(f)||Be(Nu(l),p=>{const y=ef(p,"width");Co(p,"width",y),Do(p,"width")})},xg=l=>da(l,"corner-"),y2=l=>_w(l,"corner-"),vM=l=>{const f=gd(),p=gd(),y=gd();let _,O,$,U;const G=je=>is(l,je),Q=()=>qo(l)?Qu():pf(),fe=je=>pl(je).columns,Pe=je=>pl(je).rows,tt=(je,At,Je,An)=>{const jn=y2(At),Hn=Si(jn,"e"),Ks=da(jn,"n");if(O===""&&Of(je),U===""&&ky(je),Je!==_&&O!==""){Co(je,"width",O);const ls=Q(),_l=G(je),wd=qo(l)||Hn?fe(je)-1:0;yS(je,Je-_,wd,ls,_l)}else if(Yw(O)){const ls=parseFloat(O.replace("%","")),_l=Je*ls/_;Co(je,"width",_l+"%")}if(Xw(O)&&bM(je),An!==$&&U!==""){Co(je,"height",U);const ls=Ks?0:Pe(je)-1;ny(je,An-$,ls)}},Ye=()=>{p.on(je=>{je.destroy()}),y.on(je=>{U4(l,je)})};return l.on("init",()=>{const je=z4(l,zx);if(y.set(je),wh(l)&&ma(l)){const At=Q(),Je=Hx.create(je,At,G);Je.on(),Je.events.startDrag.bind(An=>{f.set(l.selection.getRng())}),Je.events.beforeResize.bind(An=>{const jn=An.table.dom;bs(l,jn,Ql(jn),Bv(jn),mp+An.type)}),Je.events.afterResize.bind(An=>{const jn=An.table,Hn=jn.dom;yr(jn),f.on(Ks=>{l.selection.setRng(Ks),l.focus()}),cs(l,Hn,Ql(Hn),Bv(Hn),mp+An.type),l.undoManager.add()}),p.set(Je)}}),l.on("ObjectResizeStart",je=>{const At=je.target;if(qb(At)){const Je=le.fromDom(At);Be(l.dom.select(".mce-clonedresizable"),An=>{l.dom.addClass(An,"mce-"+Pv(l)+"-columns")}),!VS(Je)&&Gu(l)?Ty(Je):!Ey(Je)&&Jl(l)&&Of(Je),zS(Je)&&da(je.origin,mp)&&Of(Je),_=je.width,O=ei(l)?"":Th(l,At).getOr(""),$=je.height,U=Kw(l,At).getOr("")}}),l.on("ObjectResized",je=>{const At=je.target;if(qb(At)){const Je=le.fromDom(At),An=je.origin;xg(An)&&tt(Je,An,je.width,je.height),yr(Je),cd(l,Je.dom,vs)}}),l.on("SwitchMode",()=>{p.on(je=>{l.mode.isReadOnly()?je.hideBars():je.showBars()})}),l.on("dragstart dragend",je=>{p.on(At=>{je.type==="dragstart"?(At.hideBars(),At.off()):(At.on(),At.showBars())})}),l.on("remove",()=>{Ye()}),{refresh:je=>{p.on(At=>At.refreshBars(le.fromDom(je)))},hide:()=>{p.on(je=>je.hideBars())},show:()=>{p.on(je=>je.showBars())}}},Ux=l=>{mf(l);const f=vM(l),p=Lb(l,f),y=Cy(l,f,p);return tx(l,y),o4(l,y),zm(l,y),{getSelectedCells:p.getSelectedCells,clearSelectedCells:p.clearSelectedCells}},W4=l=>({table:Ux(l)});var Pt=()=>{b.add("dom",W4)};Pt()})();var QG=!1,eq=!1,fw=[],tq=-1;function $Q(b){IQ(b)}function IQ(b){fw.includes(b)||fw.push(b),FQ()}function QY(b){let S=fw.indexOf(b);S!==-1&&S>tq&&fw.splice(S,1)}function FQ(){!eq&&!QG&&(QG=!0,queueMicrotask(LQ))}function LQ(){QG=!1,eq=!0;for(let b=0;b<fw.length;b++)fw[b](),tq=b;fw.length=0,tq=-1,eq=!1}var VT,pw,zT,eX,nq=!0;function HQ(b){nq=!1,b(),nq=!0}function VQ(b){VT=b.reactive,zT=b.release,pw=S=>b.effect(S,{scheduler:k=>{nq?$Q(k):k()}}),eX=b.raw}function vY(b){pw=b}function zQ(b){let S=()=>{};return[P=>{let F=pw(P);return b._x_effects||(b._x_effects=new Set,b._x_runEffects=()=>{b._x_effects.forEach(H=>H())}),b._x_effects.add(F),S=()=>{F!==void 0&&(b._x_effects.delete(F),zT(F))},F},()=>{S()}]}function tX(b,S){let k=!0,P,F=pw(()=>{let H=b();JSON.stringify(H),k?P=H:queueMicrotask(()=>{S(H,P),P=H}),k=!1});return()=>zT(F)}var nX=[],oX=[],sX=[];function UQ(b){sX.push(b)}function Cq(b,S){typeof S=="function"?(b._x_cleanups||(b._x_cleanups=[]),b._x_cleanups.push(S)):(S=b,oX.push(S))}function rX(b){nX.push(b)}function aX(b,S,k){b._x_attributeCleanups||(b._x_attributeCleanups={}),b._x_attributeCleanups[S]||(b._x_attributeCleanups[S]=[]),b._x_attributeCleanups[S].push(k)}function cX(b,S){b._x_attributeCleanups&&Object.entries(b._x_attributeCleanups).forEach(([k,P])=>{(S===void 0||S.includes(k))&&(P.forEach(F=>F()),delete b._x_attributeCleanups[k])})}function WQ(b){if(b._x_cleanups)for(;b._x_cleanups.length;)b._x_cleanups.pop()()}var wq=new MutationObserver(Eq),Sq=!1;function xq(){wq.observe(document,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0}),Sq=!0}function iX(){ZQ(),wq.disconnect(),Sq=!1}var UD=[];function ZQ(){let b=wq.takeRecords();UD.push(()=>b.length>0&&Eq(b));let S=UD.length;queueMicrotask(()=>{if(UD.length===S)for(;UD.length>0;)UD.shift()()})}function Wa(b){if(!Sq)return b();iX();let S=b();return xq(),S}var _q=!1,fL=[];function jQ(){_q=!0}function GQ(){_q=!1,Eq(fL),fL=[]}function Eq(b){if(_q){fL=fL.concat(b);return}let S=new Set,k=new Set,P=new Map,F=new Map;for(let H=0;H<b.length;H++)if(!b[H].target._x_ignoreMutationObserver&&(b[H].type==="childList"&&(b[H].addedNodes.forEach(j=>j.nodeType===1&&S.add(j)),b[H].removedNodes.forEach(j=>j.nodeType===1&&k.add(j))),b[H].type==="attributes")){let j=b[H].target,J=b[H].attributeName,ye=b[H].oldValue,Qe=()=>{P.has(j)||P.set(j,[]),P.get(j).push({name:J,value:j.getAttribute(J)})},qe=()=>{F.has(j)||F.set(j,[]),F.get(j).push(J)};j.hasAttribute(J)&&ye===null?Qe():j.hasAttribute(J)?(qe(),Qe()):qe()}F.forEach((H,j)=>{cX(j,H)}),P.forEach((H,j)=>{nX.forEach(J=>J(j,H))});for(let H of k)S.has(H)||oX.forEach(j=>j(H));S.forEach(H=>{H._x_ignoreSelf=!0,H._x_ignore=!0});for(let H of S)k.has(H)||H.isConnected&&(delete H._x_ignoreSelf,delete H._x_ignore,sX.forEach(j=>j(H)),H._x_ignore=!0,H._x_ignoreSelf=!0);S.forEach(H=>{delete H._x_ignoreSelf,delete H._x_ignore}),S=null,k=null,P=null,F=null}function lX(b){return tM(FT(b))}function eM(b,S,k){return b._x_dataStack=[S,...FT(k||b)],()=>{b._x_dataStack=b._x_dataStack.filter(P=>P!==S)}}function FT(b){return b._x_dataStack?b._x_dataStack:typeof ShadowRoot=="function"&&b instanceof ShadowRoot?FT(b.host):b.parentNode?FT(b.parentNode):[]}function tM(b){return new Proxy({objects:b},qQ)}var qQ={ownKeys({objects:b}){return Array.from(new Set(b.flatMap(S=>Object.keys(S))))},has({objects:b},S){return S==Symbol.unscopables?!1:b.some(k=>Object.prototype.hasOwnProperty.call(k,S)||Reflect.has(k,S))},get({objects:b},S,k){return S=="toJSON"?KQ:Reflect.get(b.find(P=>Reflect.has(P,S))||{},S,k)},set({objects:b},S,k,P){const F=b.find(j=>Object.prototype.hasOwnProperty.call(j,S))||b[b.length-1],H=Object.getOwnPropertyDescriptor(F,S);return H!=null&&H.set&&(H!=null&&H.get)?Reflect.set(F,S,k,P):Reflect.set(F,S,k)}};function KQ(){return Reflect.ownKeys(this).reduce((S,k)=>(S[k]=Reflect.get(this,k),S),{})}function uX(b){let S=P=>typeof P=="object"&&!Array.isArray(P)&&P!==null,k=(P,F="")=>{Object.entries(Object.getOwnPropertyDescriptors(P)).forEach(([H,{value:j,enumerable:J}])=>{if(J===!1||j===void 0||typeof j=="object"&&j!==null&&j.__v_skip)return;let ye=F===""?H:`${F}.${H}`;typeof j=="object"&&j!==null&&j._x_interceptor?P[H]=j.initialize(b,ye,H):S(j)&&j!==P&&!(j instanceof Element)&&k(j,ye)})};return k(b)}function dX(b,S=()=>{}){let k={initialValue:void 0,_x_interceptor:!0,initialize(P,F,H){return b(this.initialValue,()=>YQ(P,F),j=>oq(P,F,j),F,H)}};return S(k),P=>{if(typeof P=="object"&&P!==null&&P._x_interceptor){let F=k.initialize.bind(k);k.initialize=(H,j,J)=>{let ye=P.initialize(H,j,J);return k.initialValue=ye,F(H,j,J)}}else k.initialValue=P;return k}}function YQ(b,S){return S.split(".").reduce((k,P)=>k[P],b)}function oq(b,S,k){if(typeof S=="string"&&(S=S.split(".")),S.length===1)b[S[0]]=k;else{if(S.length===0)throw error;return b[S[0]]||(b[S[0]]={}),oq(b[S[0]],S.slice(1),k)}}var fX={};function im(b,S){fX[b]=S}function sq(b,S){return Object.entries(fX).forEach(([k,P])=>{let F=null;function H(){if(F)return F;{let[j,J]=vX(S);return F={interceptor:dX,...j},Cq(S,J),F}}Object.defineProperty(b,`$${k}`,{get(){return P(S,H())},enumerable:!1})}),b}function XQ(b,S,k,...P){try{return k(...P)}catch(F){YD(F,b,S)}}function YD(b,S,k=void 0){b=Object.assign(b??{message:"No error message given."},{el:S,expression:k}),console.warn(`Alpine Expression Error: ${b.message}

${k?'Expression: "'+k+`"

`:""}`,S),setTimeout(()=>{throw b},0)}var uL=!0;function mX(b){let S=uL;uL=!1;let k=b();return uL=S,k}function mw(b,S,k={}){let P;return tl(b,S)(F=>P=F,k),P}function tl(...b){return gX(...b)}var gX=hX;function JQ(b){gX=b}function hX(b,S){let k={};sq(k,b);let P=[k,...FT(b)],F=typeof S=="function"?QQ(P,S):tee(P,S,b);return XQ.bind(null,b,S,F)}function QQ(b,S){return(k=()=>{},{scope:P={},params:F=[]}={})=>{let H=S.apply(tM([P,...b]),F);mL(k,H)}}var UG={};function eee(b,S){if(UG[b])return UG[b];let k=Object.getPrototypeOf(async function(){}).constructor,P=/^[\n\s]*if.*\(.*\)/.test(b.trim())||/^(let|const)\s/.test(b.trim())?`(async()=>{ ${b} })()`:b,H=(()=>{try{let j=new k(["__self","scope"],`with (scope) { __self.result = ${P} }; __self.finished = true; return __self.result;`);return Object.defineProperty(j,"name",{value:`[Alpine] ${b}`}),j}catch(j){return YD(j,S,b),Promise.resolve()}})();return UG[b]=H,H}function tee(b,S,k){let P=eee(S,k);return(F=()=>{},{scope:H={},params:j=[]}={})=>{P.result=void 0,P.finished=!1;let J=tM([H,...b]);if(typeof P=="function"){let ye=P(P,J).catch(Qe=>YD(Qe,k,S));P.finished?(mL(F,P.result,J,j,k),P.result=void 0):ye.then(Qe=>{mL(F,Qe,J,j,k)}).catch(Qe=>YD(Qe,k,S)).finally(()=>P.result=void 0)}}}function mL(b,S,k,P,F){if(uL&&typeof S=="function"){let H=S.apply(k,P);H instanceof Promise?H.then(j=>mL(b,j,k,P)).catch(j=>YD(j,F,S)):b(H)}else typeof S=="object"&&S instanceof Promise?S.then(H=>b(H)):b(S)}var Tq="x-";function UT(b=""){return Tq+b}function nee(b){Tq=b}var gL={};function Sa(b,S){return gL[b]=S,{before(k){if(!gL[k]){console.warn(String.raw`Cannot find directive \`${k}\`. \`${b}\` will use the default order of execution`);return}const P=uw.indexOf(k);uw.splice(P>=0?P:uw.indexOf("DEFAULT"),0,b)}}}function oee(b){return Object.keys(gL).includes(b)}function kq(b,S,k){if(S=Array.from(S),b._x_virtualDirectives){let H=Object.entries(b._x_virtualDirectives).map(([J,ye])=>({name:J,value:ye})),j=pX(H);H=H.map(J=>j.find(ye=>ye.name===J.name)?{name:`x-bind:${J.name}`,value:`"${J.value}"`}:J),S=S.concat(H)}let P={};return S.map(wX((H,j)=>P[H]=j)).filter(xX).map(aee(P,k)).sort(cee).map(H=>ree(b,H))}function pX(b){return Array.from(b).map(wX()).filter(S=>!xX(S))}var rq=!1,jD=new Map,bX=Symbol();function see(b){rq=!0;let S=Symbol();bX=S,jD.set(S,[]);let k=()=>{for(;jD.get(S).length;)jD.get(S).shift()();jD.delete(S)},P=()=>{rq=!1,k()};b(k),P()}function vX(b){let S=[],k=J=>S.push(J),[P,F]=zQ(b);return S.push(F),[{Alpine:oM,effect:P,cleanup:k,evaluateLater:tl.bind(tl,b),evaluate:mw.bind(mw,b)},()=>S.forEach(J=>J())]}function ree(b,S){let k=()=>{},P=gL[S.type]||k,[F,H]=vX(b);aX(b,S.original,H);let j=()=>{b._x_ignore||b._x_ignoreSelf||(P.inline&&P.inline(b,S,F),P=P.bind(P,b,S,F),rq?jD.get(bX).push(P):P())};return j.runCleanups=H,j}var yX=(b,S)=>({name:k,value:P})=>(k.startsWith(b)&&(k=k.replace(b,S)),{name:k,value:P}),CX=b=>b;function wX(b=()=>{}){return({name:S,value:k})=>{let{name:P,value:F}=SX.reduce((H,j)=>j(H),{name:S,value:k});return P!==S&&b(P,S),{name:P,value:F}}}var SX=[];function Oq(b){SX.push(b)}function xX({name:b}){return _X().test(b)}var _X=()=>new RegExp(`^${Tq}([^:^.]+)\\b`);function aee(b,S){return({name:k,value:P})=>{let F=k.match(_X()),H=k.match(/:([a-zA-Z0-9\-_:]+)/),j=k.match(/\.[^.\]]+(?=[^\]]*$)/g)||[],J=S||b[k]||k;return{type:F?F[1]:null,value:H?H[1]:null,modifiers:j.map(ye=>ye.replace(".","")),expression:P,original:J}}}var aq="DEFAULT",uw=["ignore","ref","data","id","anchor","bind","init","for","model","modelable","transition","show","if",aq,"teleport"];function cee(b,S){let k=uw.indexOf(b.type)===-1?aq:b.type,P=uw.indexOf(S.type)===-1?aq:S.type;return uw.indexOf(k)-uw.indexOf(P)}function GD(b,S,k={}){b.dispatchEvent(new CustomEvent(S,{detail:k,bubbles:!0,composed:!0,cancelable:!0}))}function X0(b,S){if(typeof ShadowRoot=="function"&&b instanceof ShadowRoot){Array.from(b.children).forEach(F=>X0(F,S));return}let k=!1;if(S(b,()=>k=!0),k)return;let P=b.firstElementChild;for(;P;)X0(P,S),P=P.nextElementSibling}function zd(b,...S){console.warn(`Alpine Warning: ${b}`,...S)}var yY=!1;function iee(){yY&&zd("Alpine has already been initialized on this page. Calling Alpine.start() more than once can cause problems."),yY=!0,document.body||zd("Unable to initialize. Trying to load Alpine before `<body>` is available. Did you forget to add `defer` in Alpine's `<script>` tag?"),GD(document,"alpine:init"),GD(document,"alpine:initializing"),xq(),UQ(S=>t1(S,X0)),Cq(S=>DX(S)),rX((S,k)=>{kq(S,k).forEach(P=>P())});let b=S=>!CL(S.parentElement,!0);Array.from(document.querySelectorAll(kX().join(","))).filter(b).forEach(S=>{t1(S)}),GD(document,"alpine:initialized"),setTimeout(()=>{dee()})}var Aq=[],EX=[];function TX(){return Aq.map(b=>b())}function kX(){return Aq.concat(EX).map(b=>b())}function OX(b){Aq.push(b)}function AX(b){EX.push(b)}function CL(b,S=!1){return nM(b,k=>{if((S?kX():TX()).some(F=>k.matches(F)))return!0})}function nM(b,S){if(b){if(S(b))return b;if(b._x_teleportBack&&(b=b._x_teleportBack),!!b.parentElement)return nM(b.parentElement,S)}}function lee(b){return TX().some(S=>b.matches(S))}var RX=[];function uee(b){RX.push(b)}function t1(b,S=X0,k=()=>{}){see(()=>{S(b,(P,F)=>{k(P,F),RX.forEach(H=>H(P,F)),kq(P,P.attributes).forEach(H=>H()),P._x_ignore&&F()})})}function DX(b,S=X0){S(b,k=>{cX(k),WQ(k)})}function dee(){[["ui","dialog",["[x-dialog], [x-popover]"]],["anchor","anchor",["[x-anchor]"]],["sort","sort",["[x-sort]"]]].forEach(([S,k,P])=>{oee(k)||P.some(F=>{if(document.querySelector(F))return zd(`found "${F}", but missing ${S} plugin`),!0})})}var cq=[],Rq=!1;function Dq(b=()=>{}){return queueMicrotask(()=>{Rq||setTimeout(()=>{iq()})}),new Promise(S=>{cq.push(()=>{b(),S()})})}function iq(){for(Rq=!1;cq.length;)cq.shift()()}function fee(){Rq=!0}function Mq(b,S){return Array.isArray(S)?CY(b,S.join(" ")):typeof S=="object"&&S!==null?mee(b,S):typeof S=="function"?Mq(b,S()):CY(b,S)}function CY(b,S){let k=F=>F.split(" ").filter(H=>!b.classList.contains(H)).filter(Boolean),P=F=>(b.classList.add(...F),()=>{b.classList.remove(...F)});return S=S===!0?S="":S||"",P(k(S))}function mee(b,S){let k=J=>J.split(" ").filter(Boolean),P=Object.entries(S).flatMap(([J,ye])=>ye?k(J):!1).filter(Boolean),F=Object.entries(S).flatMap(([J,ye])=>ye?!1:k(J)).filter(Boolean),H=[],j=[];return F.forEach(J=>{b.classList.contains(J)&&(b.classList.remove(J),j.push(J))}),P.forEach(J=>{b.classList.contains(J)||(b.classList.add(J),H.push(J))}),()=>{j.forEach(J=>b.classList.add(J)),H.forEach(J=>b.classList.remove(J))}}function wL(b,S){return typeof S=="object"&&S!==null?gee(b,S):hee(b,S)}function gee(b,S){let k={};return Object.entries(S).forEach(([P,F])=>{k[P]=b.style[P],P.startsWith("--")||(P=pee(P)),b.style.setProperty(P,F)}),setTimeout(()=>{b.style.length===0&&b.removeAttribute("style")}),()=>{wL(b,k)}}function hee(b,S){let k=b.getAttribute("style",S);return b.setAttribute("style",S),()=>{b.setAttribute("style",k||"")}}function pee(b){return b.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function lq(b,S=()=>{}){let k=!1;return function(){k?S.apply(this,arguments):(k=!0,b.apply(this,arguments))}}Sa("transition",(b,{value:S,modifiers:k,expression:P},{evaluate:F})=>{typeof P=="function"&&(P=F(P)),P!==!1&&(!P||typeof P=="boolean"?vee(b,k,S):bee(b,P,S))});function bee(b,S,k){MX(b,Mq,""),{enter:F=>{b._x_transition.enter.during=F},"enter-start":F=>{b._x_transition.enter.start=F},"enter-end":F=>{b._x_transition.enter.end=F},leave:F=>{b._x_transition.leave.during=F},"leave-start":F=>{b._x_transition.leave.start=F},"leave-end":F=>{b._x_transition.leave.end=F}}[k](S)}function vee(b,S,k){MX(b,wL);let P=!S.includes("in")&&!S.includes("out")&&!k,F=P||S.includes("in")||["enter"].includes(k),H=P||S.includes("out")||["leave"].includes(k);S.includes("in")&&!P&&(S=S.filter((fn,Gn)=>Gn<S.indexOf("out"))),S.includes("out")&&!P&&(S=S.filter((fn,Gn)=>Gn>S.indexOf("out")));let j=!S.includes("opacity")&&!S.includes("scale"),J=j||S.includes("opacity"),ye=j||S.includes("scale"),Qe=J?0:1,qe=ye?WD(S,"scale",95)/100:1,Ge=WD(S,"delay",0)/1e3,en=WD(S,"origin","center"),xn="opacity, transform",Zt=WD(S,"duration",150)/1e3,Rt=WD(S,"duration",75)/1e3,Ne="cubic-bezier(0.4, 0.0, 0.2, 1)";F&&(b._x_transition.enter.during={transformOrigin:en,transitionDelay:`${Ge}s`,transitionProperty:xn,transitionDuration:`${Zt}s`,transitionTimingFunction:Ne},b._x_transition.enter.start={opacity:Qe,transform:`scale(${qe})`},b._x_transition.enter.end={opacity:1,transform:"scale(1)"}),H&&(b._x_transition.leave.during={transformOrigin:en,transitionDelay:`${Ge}s`,transitionProperty:xn,transitionDuration:`${Rt}s`,transitionTimingFunction:Ne},b._x_transition.leave.start={opacity:1,transform:"scale(1)"},b._x_transition.leave.end={opacity:Qe,transform:`scale(${qe})`})}function MX(b,S,k={}){b._x_transition||(b._x_transition={enter:{during:k,start:k,end:k},leave:{during:k,start:k,end:k},in(P=()=>{},F=()=>{}){uq(b,S,{during:this.enter.during,start:this.enter.start,end:this.enter.end},P,F)},out(P=()=>{},F=()=>{}){uq(b,S,{during:this.leave.during,start:this.leave.start,end:this.leave.end},P,F)}})}window.Element.prototype._x_toggleAndCascadeWithTransitions=function(b,S,k,P){const F=document.visibilityState==="visible"?requestAnimationFrame:setTimeout;let H=()=>F(k);if(S){b._x_transition&&(b._x_transition.enter||b._x_transition.leave)?b._x_transition.enter&&(Object.entries(b._x_transition.enter.during).length||Object.entries(b._x_transition.enter.start).length||Object.entries(b._x_transition.enter.end).length)?b._x_transition.in(k):H():b._x_transition?b._x_transition.in(k):H();return}b._x_hidePromise=b._x_transition?new Promise((j,J)=>{b._x_transition.out(()=>{},()=>j(P)),b._x_transitioning&&b._x_transitioning.beforeCancel(()=>J({isFromCancelledTransition:!0}))}):Promise.resolve(P),queueMicrotask(()=>{let j=PX(b);j?(j._x_hideChildren||(j._x_hideChildren=[]),j._x_hideChildren.push(b)):F(()=>{let J=ye=>{let Qe=Promise.all([ye._x_hidePromise,...(ye._x_hideChildren||[]).map(J)]).then(([qe])=>qe());return delete ye._x_hidePromise,delete ye._x_hideChildren,Qe};J(b).catch(ye=>{if(!ye.isFromCancelledTransition)throw ye})})})};function PX(b){let S=b.parentNode;if(S)return S._x_hidePromise?S:PX(S)}function uq(b,S,{during:k,start:P,end:F}={},H=()=>{},j=()=>{}){if(b._x_transitioning&&b._x_transitioning.cancel(),Object.keys(k).length===0&&Object.keys(P).length===0&&Object.keys(F).length===0){H(),j();return}let J,ye,Qe;yee(b,{start(){J=S(b,P)},during(){ye=S(b,k)},before:H,end(){J(),Qe=S(b,F)},after:j,cleanup(){ye(),Qe()}})}function yee(b,S){let k,P,F,H=lq(()=>{Wa(()=>{k=!0,P||S.before(),F||(S.end(),iq()),S.after(),b.isConnected&&S.cleanup(),delete b._x_transitioning})});b._x_transitioning={beforeCancels:[],beforeCancel(j){this.beforeCancels.push(j)},cancel:lq(function(){for(;this.beforeCancels.length;)this.beforeCancels.shift()();H()}),finish:H},Wa(()=>{S.start(),S.during()}),fee(),requestAnimationFrame(()=>{if(k)return;let j=Number(getComputedStyle(b).transitionDuration.replace(/,.*/,"").replace("s",""))*1e3,J=Number(getComputedStyle(b).transitionDelay.replace(/,.*/,"").replace("s",""))*1e3;j===0&&(j=Number(getComputedStyle(b).animationDuration.replace("s",""))*1e3),Wa(()=>{S.before()}),P=!0,requestAnimationFrame(()=>{k||(Wa(()=>{S.end()}),iq(),setTimeout(b._x_transitioning.finish,j+J),F=!0)})})}function WD(b,S,k){if(b.indexOf(S)===-1)return k;const P=b[b.indexOf(S)+1];if(!P||S==="scale"&&isNaN(P))return k;if(S==="duration"||S==="delay"){let F=P.match(/([0-9]+)ms/);if(F)return F[1]}return S==="origin"&&["top","right","left","center","bottom"].includes(b[b.indexOf(S)+2])?[P,b[b.indexOf(S)+2]].join(" "):P}var J0=!1;function ev(b,S=()=>{}){return(...k)=>J0?S(...k):b(...k)}function Cee(b){return(...S)=>J0&&b(...S)}var NX=[];function SL(b){NX.push(b)}function wee(b,S){NX.forEach(k=>k(b,S)),J0=!0,BX(()=>{t1(S,(k,P)=>{P(k,()=>{})})}),J0=!1}var dq=!1;function See(b,S){S._x_dataStack||(S._x_dataStack=b._x_dataStack),J0=!0,dq=!0,BX(()=>{xee(S)}),J0=!1,dq=!1}function xee(b){let S=!1;t1(b,(P,F)=>{X0(P,(H,j)=>{if(S&&lee(H))return j();S=!0,F(H,j)})})}function BX(b){let S=pw;vY((k,P)=>{let F=S(k);return zT(F),()=>{}}),b(),vY(S)}function $X(b,S,k,P=[]){switch(b._x_bindings||(b._x_bindings=VT({})),b._x_bindings[S]=k,S=P.includes("camel")?Dee(S):S,S){case"value":_ee(b,k);break;case"style":Tee(b,k);break;case"class":Eee(b,k);break;case"selected":case"checked":kee(b,S,k);break;default:IX(b,S,k);break}}function _ee(b,S){if(b.type==="radio")b.attributes.value===void 0&&(b.value=S),window.fromModel&&(typeof S=="boolean"?b.checked=dL(b.value)===S:b.checked=wY(b.value,S));else if(b.type==="checkbox")Number.isInteger(S)?b.value=S:!Array.isArray(S)&&typeof S!="boolean"&&![null,void 0].includes(S)?b.value=String(S):Array.isArray(S)?b.checked=S.some(k=>wY(k,b.value)):b.checked=!!S;else if(b.tagName==="SELECT")Ree(b,S);else{if(b.value===S)return;b.value=S===void 0?"":S}}function Eee(b,S){b._x_undoAddedClasses&&b._x_undoAddedClasses(),b._x_undoAddedClasses=Mq(b,S)}function Tee(b,S){b._x_undoAddedStyles&&b._x_undoAddedStyles(),b._x_undoAddedStyles=wL(b,S)}function kee(b,S,k){IX(b,S,k),Aee(b,S,k)}function IX(b,S,k){[null,void 0,!1].includes(k)&&Mee(S)?b.removeAttribute(S):(FX(S)&&(k=S),Oee(b,S,k))}function Oee(b,S,k){b.getAttribute(S)!=k&&b.setAttribute(S,k)}function Aee(b,S,k){b[S]!==k&&(b[S]=k)}function Ree(b,S){const k=[].concat(S).map(P=>P+"");Array.from(b.options).forEach(P=>{P.selected=k.includes(P.value)})}function Dee(b){return b.toLowerCase().replace(/-(\w)/g,(S,k)=>k.toUpperCase())}function wY(b,S){return b==S}function dL(b){return[1,"1","true","on","yes",!0].includes(b)?!0:[0,"0","false","off","no",!1].includes(b)?!1:b?!!b:null}function FX(b){return["disabled","checked","required","readonly","open","selected","autofocus","itemscope","multiple","novalidate","allowfullscreen","allowpaymentrequest","formnovalidate","autoplay","controls","loop","muted","playsinline","default","ismap","reversed","async","defer","nomodule"].includes(b)}function Mee(b){return!["aria-pressed","aria-checked","aria-expanded","aria-selected"].includes(b)}function Pee(b,S,k){return b._x_bindings&&b._x_bindings[S]!==void 0?b._x_bindings[S]:LX(b,S,k)}function Nee(b,S,k,P=!0){if(b._x_bindings&&b._x_bindings[S]!==void 0)return b._x_bindings[S];if(b._x_inlineBindings&&b._x_inlineBindings[S]!==void 0){let F=b._x_inlineBindings[S];return F.extract=P,mX(()=>mw(b,F.expression))}return LX(b,S,k)}function LX(b,S,k){let P=b.getAttribute(S);return P===null?typeof k=="function"?k():k:P===""?!0:FX(S)?!![S,"true"].includes(P):P}function HX(b,S){var k;return function(){var P=this,F=arguments,H=function(){k=null,b.apply(P,F)};clearTimeout(k),k=setTimeout(H,S)}}function VX(b,S){let k;return function(){let P=this,F=arguments;k||(b.apply(P,F),k=!0,setTimeout(()=>k=!1,S))}}function zX({get:b,set:S},{get:k,set:P}){let F=!0,H,j=pw(()=>{let J=b(),ye=k();if(F)P(WG(J)),F=!1;else{let Qe=JSON.stringify(J),qe=JSON.stringify(ye);Qe!==H?P(WG(J)):Qe!==qe&&S(WG(ye))}H=JSON.stringify(b()),JSON.stringify(k())});return()=>{zT(j)}}function WG(b){return typeof b=="object"?JSON.parse(JSON.stringify(b)):b}function Bee(b){(Array.isArray(b)?b:[b]).forEach(k=>k(oM))}var lw={},SY=!1;function $ee(b,S){if(SY||(lw=VT(lw),SY=!0),S===void 0)return lw[b];lw[b]=S,typeof S=="object"&&S!==null&&S.hasOwnProperty("init")&&typeof S.init=="function"&&lw[b].init(),uX(lw[b])}function Iee(){return lw}var UX={};function Fee(b,S){let k=typeof S!="function"?()=>S:S;return b instanceof Element?WX(b,k()):(UX[b]=k,()=>{})}function Lee(b){return Object.entries(UX).forEach(([S,k])=>{Object.defineProperty(b,S,{get(){return(...P)=>k(...P)}})}),b}function WX(b,S,k){let P=[];for(;P.length;)P.pop()();let F=Object.entries(S).map(([j,J])=>({name:j,value:J})),H=pX(F);return F=F.map(j=>H.find(J=>J.name===j.name)?{name:`x-bind:${j.name}`,value:`"${j.value}"`}:j),kq(b,F,k).map(j=>{P.push(j.runCleanups),j()}),()=>{for(;P.length;)P.pop()()}}var ZX={};function Hee(b,S){ZX[b]=S}function Vee(b,S){return Object.entries(ZX).forEach(([k,P])=>{Object.defineProperty(b,k,{get(){return(...F)=>P.bind(S)(...F)},enumerable:!1})}),b}var zee={get reactive(){return VT},get release(){return zT},get effect(){return pw},get raw(){return eX},version:"3.13.10",flushAndStopDeferringMutations:GQ,dontAutoEvaluateFunctions:mX,disableEffectScheduling:HQ,startObservingMutations:xq,stopObservingMutations:iX,setReactivityEngine:VQ,onAttributeRemoved:aX,onAttributesAdded:rX,closestDataStack:FT,skipDuringClone:ev,onlyDuringClone:Cee,addRootSelector:OX,addInitSelector:AX,interceptClone:SL,addScopeToNode:eM,deferMutations:jQ,mapAttributes:Oq,evaluateLater:tl,interceptInit:uee,setEvaluator:JQ,mergeProxies:tM,extractProp:Nee,findClosest:nM,onElRemoved:Cq,closestRoot:CL,destroyTree:DX,interceptor:dX,transition:uq,setStyles:wL,mutateDom:Wa,directive:Sa,entangle:zX,throttle:VX,debounce:HX,evaluate:mw,initTree:t1,nextTick:Dq,prefixed:UT,prefix:nee,plugin:Bee,magic:im,store:$ee,start:iee,clone:See,cloneNode:wee,bound:Pee,$data:lX,watch:tX,walk:X0,data:Hee,bind:Fee},oM=zee;function Uee(b,S){const k=Object.create(null),P=b.split(",");for(let F=0;F<P.length;F++)k[P[F]]=!0;return F=>!!k[F]}var Wee=Object.freeze({}),Zee=Object.prototype.hasOwnProperty,xL=(b,S)=>Zee.call(b,S),gw=Array.isArray,qD=b=>jX(b)==="[object Map]",jee=b=>typeof b=="string",Pq=b=>typeof b=="symbol",_L=b=>b!==null&&typeof b=="object",Gee=Object.prototype.toString,jX=b=>Gee.call(b),GX=b=>jX(b).slice(8,-1),Nq=b=>jee(b)&&b!=="NaN"&&b[0]!=="-"&&""+parseInt(b,10)===b,qee=b=>{const S=Object.create(null);return k=>S[k]||(S[k]=b(k))},Kee=qee(b=>b.charAt(0).toUpperCase()+b.slice(1)),qX=(b,S)=>b!==S&&(b===b||S===S),fq=new WeakMap,ZD=[],Xg,hw=Symbol("iterate"),mq=Symbol("Map key iterate");function Yee(b){return b&&b._isEffect===!0}function Xee(b,S=Wee){Yee(b)&&(b=b.raw);const k=ete(b,S);return S.lazy||k(),k}function Jee(b){b.active&&(KX(b),b.options.onStop&&b.options.onStop(),b.active=!1)}var Qee=0;function ete(b,S){const k=function(){if(!k.active)return b();if(!ZD.includes(k)){KX(k);try{return nte(),ZD.push(k),Xg=k,b()}finally{ZD.pop(),YX(),Xg=ZD[ZD.length-1]}}};return k.id=Qee++,k.allowRecurse=!!S.allowRecurse,k._isEffect=!0,k.active=!0,k.raw=b,k.deps=[],k.options=S,k}function KX(b){const{deps:S}=b;if(S.length){for(let k=0;k<S.length;k++)S[k].delete(b);S.length=0}}var LT=!0,Bq=[];function tte(){Bq.push(LT),LT=!1}function nte(){Bq.push(LT),LT=!0}function YX(){const b=Bq.pop();LT=b===void 0?!0:b}function cm(b,S,k){if(!LT||Xg===void 0)return;let P=fq.get(b);P||fq.set(b,P=new Map);let F=P.get(k);F||P.set(k,F=new Set),F.has(Xg)||(F.add(Xg),Xg.deps.push(F),Xg.options.onTrack&&Xg.options.onTrack({effect:Xg,target:b,type:S,key:k}))}function Q0(b,S,k,P,F,H){const j=fq.get(b);if(!j)return;const J=new Set,ye=qe=>{qe&&qe.forEach(Ge=>{(Ge!==Xg||Ge.allowRecurse)&&J.add(Ge)})};if(S==="clear")j.forEach(ye);else if(k==="length"&&gw(b))j.forEach((qe,Ge)=>{(Ge==="length"||Ge>=P)&&ye(qe)});else switch(k!==void 0&&ye(j.get(k)),S){case"add":gw(b)?Nq(k)&&ye(j.get("length")):(ye(j.get(hw)),qD(b)&&ye(j.get(mq)));break;case"delete":gw(b)||(ye(j.get(hw)),qD(b)&&ye(j.get(mq)));break;case"set":qD(b)&&ye(j.get(hw));break}const Qe=qe=>{qe.options.onTrigger&&qe.options.onTrigger({effect:qe,target:b,key:k,type:S,newValue:P,oldValue:F,oldTarget:H}),qe.options.scheduler?qe.options.scheduler(qe):qe()};J.forEach(Qe)}var ote=Uee("__proto__,__v_isRef,__isVue"),XX=new Set(Object.getOwnPropertyNames(Symbol).map(b=>Symbol[b]).filter(Pq)),ste=JX(),rte=JX(!0),xY=ate();function ate(){const b={};return["includes","indexOf","lastIndexOf"].forEach(S=>{b[S]=function(...k){const P=er(this);for(let H=0,j=this.length;H<j;H++)cm(P,"get",H+"");const F=P[S](...k);return F===-1||F===!1?P[S](...k.map(er)):F}}),["push","pop","shift","unshift","splice"].forEach(S=>{b[S]=function(...k){tte();const P=er(this)[S].apply(this,k);return YX(),P}}),b}function JX(b=!1,S=!1){return function(P,F,H){if(F==="__v_isReactive")return!b;if(F==="__v_isReadonly")return b;if(F==="__v_raw"&&H===(b?S?Cte:nJ:S?yte:tJ).get(P))return P;const j=gw(P);if(!b&&j&&xL(xY,F))return Reflect.get(xY,F,H);const J=Reflect.get(P,F,H);return(Pq(F)?XX.has(F):ote(F))||(b||cm(P,"get",F),S)?J:gq(J)?!j||!Nq(F)?J.value:J:_L(J)?b?oJ(J):Lq(J):J}}var cte=ite();function ite(b=!1){return function(k,P,F,H){let j=k[P];if(!b&&(F=er(F),j=er(j),!gw(k)&&gq(j)&&!gq(F)))return j.value=F,!0;const J=gw(k)&&Nq(P)?Number(P)<k.length:xL(k,P),ye=Reflect.set(k,P,F,H);return k===er(H)&&(J?qX(F,j)&&Q0(k,"set",P,F,j):Q0(k,"add",P,F)),ye}}function lte(b,S){const k=xL(b,S),P=b[S],F=Reflect.deleteProperty(b,S);return F&&k&&Q0(b,"delete",S,void 0,P),F}function ute(b,S){const k=Reflect.has(b,S);return(!Pq(S)||!XX.has(S))&&cm(b,"has",S),k}function dte(b){return cm(b,"iterate",gw(b)?"length":hw),Reflect.ownKeys(b)}var fte={get:ste,set:cte,deleteProperty:lte,has:ute,ownKeys:dte},mte={get:rte,set(b,S){return console.warn(`Set operation on key "${String(S)}" failed: target is readonly.`,b),!0},deleteProperty(b,S){return console.warn(`Delete operation on key "${String(S)}" failed: target is readonly.`,b),!0}},$q=b=>_L(b)?Lq(b):b,Iq=b=>_L(b)?oJ(b):b,Fq=b=>b,EL=b=>Reflect.getPrototypeOf(b);function oL(b,S,k=!1,P=!1){b=b.__v_raw;const F=er(b),H=er(S);S!==H&&!k&&cm(F,"get",S),!k&&cm(F,"get",H);const{has:j}=EL(F),J=P?Fq:k?Iq:$q;if(j.call(F,S))return J(b.get(S));if(j.call(F,H))return J(b.get(H));b!==F&&b.get(S)}function sL(b,S=!1){const k=this.__v_raw,P=er(k),F=er(b);return b!==F&&!S&&cm(P,"has",b),!S&&cm(P,"has",F),b===F?k.has(b):k.has(b)||k.has(F)}function rL(b,S=!1){return b=b.__v_raw,!S&&cm(er(b),"iterate",hw),Reflect.get(b,"size",b)}function _Y(b){b=er(b);const S=er(this);return EL(S).has.call(S,b)||(S.add(b),Q0(S,"add",b,b)),this}function EY(b,S){S=er(S);const k=er(this),{has:P,get:F}=EL(k);let H=P.call(k,b);H?eJ(k,P,b):(b=er(b),H=P.call(k,b));const j=F.call(k,b);return k.set(b,S),H?qX(S,j)&&Q0(k,"set",b,S,j):Q0(k,"add",b,S),this}function TY(b){const S=er(this),{has:k,get:P}=EL(S);let F=k.call(S,b);F?eJ(S,k,b):(b=er(b),F=k.call(S,b));const H=P?P.call(S,b):void 0,j=S.delete(b);return F&&Q0(S,"delete",b,void 0,H),j}function kY(){const b=er(this),S=b.size!==0,k=qD(b)?new Map(b):new Set(b),P=b.clear();return S&&Q0(b,"clear",void 0,void 0,k),P}function aL(b,S){return function(P,F){const H=this,j=H.__v_raw,J=er(j),ye=S?Fq:b?Iq:$q;return!b&&cm(J,"iterate",hw),j.forEach((Qe,qe)=>P.call(F,ye(Qe),ye(qe),H))}}function cL(b,S,k){return function(...P){const F=this.__v_raw,H=er(F),j=qD(H),J=b==="entries"||b===Symbol.iterator&&j,ye=b==="keys"&&j,Qe=F[b](...P),qe=k?Fq:S?Iq:$q;return!S&&cm(H,"iterate",ye?mq:hw),{next(){const{value:Ge,done:en}=Qe.next();return en?{value:Ge,done:en}:{value:J?[qe(Ge[0]),qe(Ge[1])]:qe(Ge),done:en}},[Symbol.iterator](){return this}}}}function Y0(b){return function(...S){{const k=S[0]?`on key "${S[0]}" `:"";console.warn(`${Kee(b)} operation ${k}failed: target is readonly.`,er(this))}return b==="delete"?!1:this}}function gte(){const b={get(H){return oL(this,H)},get size(){return rL(this)},has:sL,add:_Y,set:EY,delete:TY,clear:kY,forEach:aL(!1,!1)},S={get(H){return oL(this,H,!1,!0)},get size(){return rL(this)},has:sL,add:_Y,set:EY,delete:TY,clear:kY,forEach:aL(!1,!0)},k={get(H){return oL(this,H,!0)},get size(){return rL(this,!0)},has(H){return sL.call(this,H,!0)},add:Y0("add"),set:Y0("set"),delete:Y0("delete"),clear:Y0("clear"),forEach:aL(!0,!1)},P={get(H){return oL(this,H,!0,!0)},get size(){return rL(this,!0)},has(H){return sL.call(this,H,!0)},add:Y0("add"),set:Y0("set"),delete:Y0("delete"),clear:Y0("clear"),forEach:aL(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(H=>{b[H]=cL(H,!1,!1),k[H]=cL(H,!0,!1),S[H]=cL(H,!1,!0),P[H]=cL(H,!0,!0)}),[b,k,S,P]}var[hte,pte,zte,Ute]=gte();function QX(b,S){const k=b?pte:hte;return(P,F,H)=>F==="__v_isReactive"?!b:F==="__v_isReadonly"?b:F==="__v_raw"?P:Reflect.get(xL(k,F)&&F in P?k:P,F,H)}var bte={get:QX(!1)},vte={get:QX(!0)};function eJ(b,S,k){const P=er(k);if(P!==k&&S.call(b,P)){const F=GX(b);console.warn(`Reactive ${F} contains both the raw and reactive versions of the same object${F==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}var tJ=new WeakMap,yte=new WeakMap,nJ=new WeakMap,Cte=new WeakMap;function wte(b){switch(b){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ste(b){return b.__v_skip||!Object.isExtensible(b)?0:wte(GX(b))}function Lq(b){return b&&b.__v_isReadonly?b:sJ(b,!1,fte,bte,tJ)}function oJ(b){return sJ(b,!0,mte,vte,nJ)}function sJ(b,S,k,P,F){if(!_L(b))return console.warn(`value cannot be made reactive: ${String(b)}`),b;if(b.__v_raw&&!(S&&b.__v_isReactive))return b;const H=F.get(b);if(H)return H;const j=Ste(b);if(j===0)return b;const J=new Proxy(b,j===2?P:k);return F.set(b,J),J}function er(b){return b&&er(b.__v_raw)||b}function gq(b){return!!(b&&b.__v_isRef===!0)}im("nextTick",()=>Dq);im("dispatch",b=>GD.bind(GD,b));im("watch",(b,{evaluateLater:S,cleanup:k})=>(P,F)=>{let H=S(P),J=tX(()=>{let ye;return H(Qe=>ye=Qe),ye},F);k(J)});im("store",Iee);im("data",b=>lX(b));im("root",b=>CL(b));im("refs",b=>(b._x_refs_proxy||(b._x_refs_proxy=tM(xte(b))),b._x_refs_proxy));function xte(b){let S=[];return nM(b,k=>{k._x_refs&&S.push(k._x_refs)}),S}var ZG={};function rJ(b){return ZG[b]||(ZG[b]=0),++ZG[b]}function _te(b,S){return nM(b,k=>{if(k._x_ids&&k._x_ids[S])return!0})}function Ete(b,S){b._x_ids||(b._x_ids={}),b._x_ids[S]||(b._x_ids[S]=rJ(S))}im("id",(b,{cleanup:S})=>(k,P=null)=>{let F=`${k}${P?`-${P}`:""}`;return Tte(b,F,S,()=>{let H=_te(b,k),j=H?H._x_ids[k]:rJ(k);return P?`${k}-${j}-${P}`:`${k}-${j}`})});SL((b,S)=>{b._x_id&&(S._x_id=b._x_id)});function Tte(b,S,k,P){if(b._x_id||(b._x_id={}),b._x_id[S])return b._x_id[S];let F=P();return b._x_id[S]=F,k(()=>{delete b._x_id[S]}),F}im("el",b=>b);aJ("Focus","focus","focus");aJ("Persist","persist","persist");function aJ(b,S,k){im(S,P=>zd(`You can't use [$${S}] without first installing the "${b}" plugin here: https://alpinejs.dev/plugins/${k}`,P))}Sa("modelable",(b,{expression:S},{effect:k,evaluateLater:P,cleanup:F})=>{let H=P(S),j=()=>{let qe;return H(Ge=>qe=Ge),qe},J=P(`${S} = __placeholder`),ye=qe=>J(()=>{},{scope:{__placeholder:qe}}),Qe=j();ye(Qe),queueMicrotask(()=>{if(!b._x_model)return;b._x_removeModelListeners.default();let qe=b._x_model.get,Ge=b._x_model.set,en=zX({get(){return qe()},set(xn){Ge(xn)}},{get(){return j()},set(xn){ye(xn)}});F(en)})});Sa("teleport",(b,{modifiers:S,expression:k},{cleanup:P})=>{b.tagName.toLowerCase()!=="template"&&zd("x-teleport can only be used on a <template> tag",b);let F=OY(k),H=b.content.cloneNode(!0).firstElementChild;b._x_teleport=H,H._x_teleportBack=b,b.setAttribute("data-teleport-template",!0),H.setAttribute("data-teleport-target",!0),b._x_forwardEvents&&b._x_forwardEvents.forEach(J=>{H.addEventListener(J,ye=>{ye.stopPropagation(),b.dispatchEvent(new ye.constructor(ye.type,ye))})}),eM(H,{},b);let j=(J,ye,Qe)=>{Qe.includes("prepend")?ye.parentNode.insertBefore(J,ye):Qe.includes("append")?ye.parentNode.insertBefore(J,ye.nextSibling):ye.appendChild(J)};Wa(()=>{j(H,F,S),ev(()=>{t1(H),H._x_ignore=!0})()}),b._x_teleportPutBack=()=>{let J=OY(k);Wa(()=>{j(b._x_teleport,J,S)})},P(()=>H.remove())});var kte=document.createElement("div");function OY(b){let S=ev(()=>document.querySelector(b),()=>kte)();return S||zd(`Cannot find x-teleport element for selector: "${b}"`),S}var cJ=()=>{};cJ.inline=(b,{modifiers:S},{cleanup:k})=>{S.includes("self")?b._x_ignoreSelf=!0:b._x_ignore=!0,k(()=>{S.includes("self")?delete b._x_ignoreSelf:delete b._x_ignore})};Sa("ignore",cJ);Sa("effect",ev((b,{expression:S},{effect:k})=>{k(tl(b,S))}));function hq(b,S,k,P){let F=b,H=ye=>P(ye),j={},J=(ye,Qe)=>qe=>Qe(ye,qe);if(k.includes("dot")&&(S=Ote(S)),k.includes("camel")&&(S=Ate(S)),k.includes("passive")&&(j.passive=!0),k.includes("capture")&&(j.capture=!0),k.includes("window")&&(F=window),k.includes("document")&&(F=document),k.includes("debounce")){let ye=k[k.indexOf("debounce")+1]||"invalid-wait",Qe=hL(ye.split("ms")[0])?Number(ye.split("ms")[0]):250;H=HX(H,Qe)}if(k.includes("throttle")){let ye=k[k.indexOf("throttle")+1]||"invalid-wait",Qe=hL(ye.split("ms")[0])?Number(ye.split("ms")[0]):250;H=VX(H,Qe)}return k.includes("prevent")&&(H=J(H,(ye,Qe)=>{Qe.preventDefault(),ye(Qe)})),k.includes("stop")&&(H=J(H,(ye,Qe)=>{Qe.stopPropagation(),ye(Qe)})),k.includes("once")&&(H=J(H,(ye,Qe)=>{ye(Qe),F.removeEventListener(S,H,j)})),(k.includes("away")||k.includes("outside"))&&(F=document,H=J(H,(ye,Qe)=>{b.contains(Qe.target)||Qe.target.isConnected!==!1&&(b.offsetWidth<1&&b.offsetHeight<1||b._x_isShown!==!1&&ye(Qe))})),k.includes("self")&&(H=J(H,(ye,Qe)=>{Qe.target===b&&ye(Qe)})),H=J(H,(ye,Qe)=>{Dte(S)&&Mte(Qe,k)||ye(Qe)}),F.addEventListener(S,H,j),()=>{F.removeEventListener(S,H,j)}}function Ote(b){return b.replace(/-/g,".")}function Ate(b){return b.toLowerCase().replace(/-(\w)/g,(S,k)=>k.toUpperCase())}function hL(b){return!Array.isArray(b)&&!isNaN(b)}function Rte(b){return[" ","_"].includes(b)?b:b.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase()}function Dte(b){return["keydown","keyup"].includes(b)}function Mte(b,S){let k=S.filter(H=>!["window","document","prevent","stop","once","capture"].includes(H));if(k.includes("debounce")){let H=k.indexOf("debounce");k.splice(H,hL((k[H+1]||"invalid-wait").split("ms")[0])?2:1)}if(k.includes("throttle")){let H=k.indexOf("throttle");k.splice(H,hL((k[H+1]||"invalid-wait").split("ms")[0])?2:1)}if(k.length===0||k.length===1&&AY(b.key).includes(k[0]))return!1;const F=["ctrl","shift","alt","meta","cmd","super"].filter(H=>k.includes(H));return k=k.filter(H=>!F.includes(H)),!(F.length>0&&F.filter(j=>((j==="cmd"||j==="super")&&(j="meta"),b[`${j}Key`])).length===F.length&&AY(b.key).includes(k[0]))}function AY(b){if(!b)return[];b=Rte(b);let S={ctrl:"control",slash:"/",space:" ",spacebar:" ",cmd:"meta",esc:"escape",up:"arrow-up",down:"arrow-down",left:"arrow-left",right:"arrow-right",period:".",comma:",",equal:"=",minus:"-",underscore:"_"};return S[b]=b,Object.keys(S).map(k=>{if(S[k]===b)return k}).filter(k=>k)}Sa("model",(b,{modifiers:S,expression:k},{effect:P,cleanup:F})=>{let H=b;S.includes("parent")&&(H=b.parentNode);let j=tl(H,k),J;typeof k=="string"?J=tl(H,`${k} = __placeholder`):typeof k=="function"&&typeof k()=="string"?J=tl(H,`${k()} = __placeholder`):J=()=>{};let ye=()=>{let en;return j(xn=>en=xn),RY(en)?en.get():en},Qe=en=>{let xn;j(Zt=>xn=Zt),RY(xn)?xn.set(en):J(()=>{},{scope:{__placeholder:en}})};typeof k=="string"&&b.type==="radio"&&Wa(()=>{b.hasAttribute("name")||b.setAttribute("name",k)});var qe=b.tagName.toLowerCase()==="select"||["checkbox","radio"].includes(b.type)||S.includes("lazy")?"change":"input";let Ge=J0?()=>{}:hq(b,qe,S,en=>{Qe(jG(b,S,en,ye()))});if(S.includes("fill")&&([void 0,null,""].includes(ye())||b.type==="checkbox"&&Array.isArray(ye())||b.tagName.toLowerCase()==="select"&&b.multiple)&&Qe(jG(b,S,{target:b},ye())),b._x_removeModelListeners||(b._x_removeModelListeners={}),b._x_removeModelListeners.default=Ge,F(()=>b._x_removeModelListeners.default()),b.form){let en=hq(b.form,"reset",[],xn=>{Dq(()=>b._x_model&&b._x_model.set(jG(b,S,{target:b},ye())))});F(()=>en())}b._x_model={get(){return ye()},set(en){Qe(en)}},b._x_forceModelUpdate=en=>{en===void 0&&typeof k=="string"&&k.match(/\./)&&(en=""),window.fromModel=!0,Wa(()=>$X(b,"value",en)),delete window.fromModel},P(()=>{let en=ye();S.includes("unintrusive")&&document.activeElement.isSameNode(b)||b._x_forceModelUpdate(en)})});function jG(b,S,k,P){return Wa(()=>{if(k instanceof CustomEvent&&k.detail!==void 0)return k.detail!==null&&k.detail!==void 0?k.detail:k.target.value;if(b.type==="checkbox")if(Array.isArray(P)){let F=null;return S.includes("number")?F=GG(k.target.value):S.includes("boolean")?F=dL(k.target.value):F=k.target.value,k.target.checked?P.includes(F)?P:P.concat([F]):P.filter(H=>!Pte(H,F))}else return k.target.checked;else{if(b.tagName.toLowerCase()==="select"&&b.multiple)return S.includes("number")?Array.from(k.target.selectedOptions).map(F=>{let H=F.value||F.text;return GG(H)}):S.includes("boolean")?Array.from(k.target.selectedOptions).map(F=>{let H=F.value||F.text;return dL(H)}):Array.from(k.target.selectedOptions).map(F=>F.value||F.text);{let F;return b.type==="radio"?k.target.checked?F=k.target.value:F=P:F=k.target.value,S.includes("number")?GG(F):S.includes("boolean")?dL(F):S.includes("trim")?F.trim():F}}})}function GG(b){let S=b?parseFloat(b):null;return Nte(S)?S:b}function Pte(b,S){return b==S}function Nte(b){return!Array.isArray(b)&&!isNaN(b)}function RY(b){return b!==null&&typeof b=="object"&&typeof b.get=="function"&&typeof b.set=="function"}Sa("cloak",b=>queueMicrotask(()=>Wa(()=>b.removeAttribute(UT("cloak")))));AX(()=>`[${UT("init")}]`);Sa("init",ev((b,{expression:S},{evaluate:k})=>typeof S=="string"?!!S.trim()&&k(S,{},!1):k(S,{},!1)));Sa("text",(b,{expression:S},{effect:k,evaluateLater:P})=>{let F=P(S);k(()=>{F(H=>{Wa(()=>{b.textContent=H})})})});Sa("html",(b,{expression:S},{effect:k,evaluateLater:P})=>{let F=P(S);k(()=>{F(H=>{Wa(()=>{b.innerHTML=H,b._x_ignoreSelf=!0,t1(b),delete b._x_ignoreSelf})})})});Oq(yX(":",CX(UT("bind:"))));var iJ=(b,{value:S,modifiers:k,expression:P,original:F},{effect:H,cleanup:j})=>{if(!S){let ye={};Lee(ye),tl(b,P)(qe=>{WX(b,qe,F)},{scope:ye});return}if(S==="key")return Bte(b,P);if(b._x_inlineBindings&&b._x_inlineBindings[S]&&b._x_inlineBindings[S].extract)return;let J=tl(b,P);H(()=>J(ye=>{ye===void 0&&typeof P=="string"&&P.match(/\./)&&(ye=""),Wa(()=>$X(b,S,ye,k))})),j(()=>{b._x_undoAddedClasses&&b._x_undoAddedClasses(),b._x_undoAddedStyles&&b._x_undoAddedStyles()})};iJ.inline=(b,{value:S,modifiers:k,expression:P})=>{S&&(b._x_inlineBindings||(b._x_inlineBindings={}),b._x_inlineBindings[S]={expression:P,extract:!1})};Sa("bind",iJ);function Bte(b,S){b._x_keyExpression=S}OX(()=>`[${UT("data")}]`);Sa("data",(b,{expression:S},{cleanup:k})=>{if($te(b))return;S=S===""?"{}":S;let P={};sq(P,b);let F={};Vee(F,P);let H=mw(b,S,{scope:F});(H===void 0||H===!0)&&(H={}),sq(H,b);let j=VT(H);uX(j);let J=eM(b,j);j.init&&mw(b,j.init),k(()=>{j.destroy&&mw(b,j.destroy),J()})});SL((b,S)=>{b._x_dataStack&&(S._x_dataStack=b._x_dataStack,S.setAttribute("data-has-alpine-state",!0))});function $te(b){return J0?dq?!0:b.hasAttribute("data-has-alpine-state"):!1}Sa("show",(b,{modifiers:S,expression:k},{effect:P})=>{let F=tl(b,k);b._x_doHide||(b._x_doHide=()=>{Wa(()=>{b.style.setProperty("display","none",S.includes("important")?"important":void 0)})}),b._x_doShow||(b._x_doShow=()=>{Wa(()=>{b.style.length===1&&b.style.display==="none"?b.removeAttribute("style"):b.style.removeProperty("display")})});let H=()=>{b._x_doHide(),b._x_isShown=!1},j=()=>{b._x_doShow(),b._x_isShown=!0},J=()=>setTimeout(j),ye=lq(Ge=>Ge?j():H(),Ge=>{typeof b._x_toggleAndCascadeWithTransitions=="function"?b._x_toggleAndCascadeWithTransitions(b,Ge,j,H):Ge?J():H()}),Qe,qe=!0;P(()=>F(Ge=>{!qe&&Ge===Qe||(S.includes("immediate")&&(Ge?J():H()),ye(Ge),Qe=Ge,qe=!1)}))});Sa("for",(b,{expression:S},{effect:k,cleanup:P})=>{let F=Fte(S),H=tl(b,F.items),j=tl(b,b._x_keyExpression||"index");b._x_prevKeys=[],b._x_lookup={},k(()=>Ite(b,F,H,j)),P(()=>{Object.values(b._x_lookup).forEach(J=>J.remove()),delete b._x_prevKeys,delete b._x_lookup})});function Ite(b,S,k,P){let F=j=>typeof j=="object"&&!Array.isArray(j),H=b;k(j=>{Lte(j)&&j>=0&&(j=Array.from(Array(j).keys(),Ne=>Ne+1)),j===void 0&&(j=[]);let J=b._x_lookup,ye=b._x_prevKeys,Qe=[],qe=[];if(F(j))j=Object.entries(j).map(([Ne,fn])=>{let Gn=DY(S,fn,Ne,j);P(ee=>{qe.includes(ee)&&zd("Duplicate key on x-for",b),qe.push(ee)},{scope:{index:Ne,...Gn}}),Qe.push(Gn)});else for(let Ne=0;Ne<j.length;Ne++){let fn=DY(S,j[Ne],Ne,j);P(Gn=>{qe.includes(Gn)&&zd("Duplicate key on x-for",b),qe.push(Gn)},{scope:{index:Ne,...fn}}),Qe.push(fn)}let Ge=[],en=[],xn=[],Zt=[];for(let Ne=0;Ne<ye.length;Ne++){let fn=ye[Ne];qe.indexOf(fn)===-1&&xn.push(fn)}ye=ye.filter(Ne=>!xn.includes(Ne));let Rt="template";for(let Ne=0;Ne<qe.length;Ne++){let fn=qe[Ne],Gn=ye.indexOf(fn);if(Gn===-1)ye.splice(Ne,0,fn),Ge.push([Rt,Ne]);else if(Gn!==Ne){let ee=ye.splice(Ne,1)[0],sn=ye.splice(Gn-1,1)[0];ye.splice(Ne,0,sn),ye.splice(Gn,0,ee),en.push([ee,sn])}else Zt.push(fn);Rt=fn}for(let Ne=0;Ne<xn.length;Ne++){let fn=xn[Ne];J[fn]._x_effects&&J[fn]._x_effects.forEach(QY),J[fn].remove(),J[fn]=null,delete J[fn]}for(let Ne=0;Ne<en.length;Ne++){let[fn,Gn]=en[Ne],ee=J[fn],sn=J[Gn],Hc=document.createElement("div");Wa(()=>{sn||zd('x-for ":key" is undefined or invalid',H,Gn,J),sn.after(Hc),ee.after(sn),sn._x_currentIfEl&&sn.after(sn._x_currentIfEl),Hc.before(ee),ee._x_currentIfEl&&ee.after(ee._x_currentIfEl),Hc.remove()}),sn._x_refreshXForScope(Qe[qe.indexOf(Gn)])}for(let Ne=0;Ne<Ge.length;Ne++){let[fn,Gn]=Ge[Ne],ee=fn==="template"?H:J[fn];ee._x_currentIfEl&&(ee=ee._x_currentIfEl);let sn=Qe[Gn],Hc=qe[Gn],Tn=document.importNode(H.content,!0).firstElementChild,ae=VT(sn);eM(Tn,ae,H),Tn._x_refreshXForScope=bn=>{Object.entries(bn).forEach(([fs,_n])=>{ae[fs]=_n})},Wa(()=>{ee.after(Tn),ev(()=>t1(Tn))()}),typeof Hc=="object"&&zd("x-for key cannot be an object, it must be a string or an integer",H),J[Hc]=Tn}for(let Ne=0;Ne<Zt.length;Ne++)J[Zt[Ne]]._x_refreshXForScope(Qe[qe.indexOf(Zt[Ne])]);H._x_prevKeys=qe})}function Fte(b){let S=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,k=/^\s*\(|\)\s*$/g,P=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,F=b.match(P);if(!F)return;let H={};H.items=F[2].trim();let j=F[1].replace(k,"").trim(),J=j.match(S);return J?(H.item=j.replace(S,"").trim(),H.index=J[1].trim(),J[2]&&(H.collection=J[2].trim())):H.item=j,H}function DY(b,S,k,P){let F={};return/^\[.*\]$/.test(b.item)&&Array.isArray(S)?b.item.replace("[","").replace("]","").split(",").map(j=>j.trim()).forEach((j,J)=>{F[j]=S[J]}):/^\{.*\}$/.test(b.item)&&!Array.isArray(S)&&typeof S=="object"?b.item.replace("{","").replace("}","").split(",").map(j=>j.trim()).forEach(j=>{F[j]=S[j]}):F[b.item]=S,b.index&&(F[b.index]=k),b.collection&&(F[b.collection]=P),F}function Lte(b){return!Array.isArray(b)&&!isNaN(b)}function lJ(){}lJ.inline=(b,{expression:S},{cleanup:k})=>{let P=CL(b);P._x_refs||(P._x_refs={}),P._x_refs[S]=b,k(()=>delete P._x_refs[S])};Sa("ref",lJ);Sa("if",(b,{expression:S},{effect:k,cleanup:P})=>{b.tagName.toLowerCase()!=="template"&&zd("x-if can only be used on a <template> tag",b);let F=tl(b,S),H=()=>{if(b._x_currentIfEl)return b._x_currentIfEl;let J=b.content.cloneNode(!0).firstElementChild;return eM(J,{},b),Wa(()=>{b.after(J),ev(()=>t1(J))()}),b._x_currentIfEl=J,b._x_undoIf=()=>{X0(J,ye=>{ye._x_effects&&ye._x_effects.forEach(QY)}),J.remove(),delete b._x_currentIfEl},J},j=()=>{b._x_undoIf&&(b._x_undoIf(),delete b._x_undoIf)};k(()=>F(J=>{J?H():j()})),P(()=>b._x_undoIf&&b._x_undoIf())});Sa("id",(b,{expression:S},{evaluate:k})=>{k(S).forEach(F=>Ete(b,F))});SL((b,S)=>{b._x_ids&&(S._x_ids=b._x_ids)});Oq(yX("@",CX(UT("on:"))));Sa("on",ev((b,{value:S,modifiers:k,expression:P},{cleanup:F})=>{let H=P?tl(b,P):()=>{};b.tagName.toLowerCase()==="template"&&(b._x_forwardEvents||(b._x_forwardEvents=[]),b._x_forwardEvents.includes(S)||b._x_forwardEvents.push(S));let j=hq(b,S,k,J=>{H(()=>{},{scope:{$event:J},params:[J]})});F(()=>j())}));TL("Collapse","collapse","collapse");TL("Intersect","intersect","intersect");TL("Focus","trap","focus");TL("Mask","mask","mask");function TL(b,S,k){Sa(S,P=>zd(`You can't use [x-${S}] without first installing the "${b}" plugin here: https://alpinejs.dev/plugins/${k}`,P))}oM.setEvaluator(hX);oM.setReactivityEngine({reactive:Lq,effect:Xee,release:Jee,raw:er});var Hte=oM,uJ=Hte;window.Alpine=uJ;uJ.start();window.addEventListener("DOMContentLoaded",()=>{tinymce.init({selector:"textarea",skin:!1,content_css:!1})});
